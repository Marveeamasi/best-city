function rk(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in n)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();function lc(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var H1={exports:{}},Im={},V1={exports:{}},Pn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lC;function sk(){if(lC)return Pn;lC=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;function g(Y){return Y===null||typeof Y!="object"?null:(Y=f&&Y[f]||Y["@@iterator"],typeof Y=="function"?Y:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,S={};function w(Y,ge,Ve){this.props=Y,this.context=ge,this.refs=S,this.updater=Ve||v}w.prototype.isReactComponent={},w.prototype.setState=function(Y,ge){if(typeof Y!="object"&&typeof Y!="function"&&Y!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Y,ge,"setState")},w.prototype.forceUpdate=function(Y){this.updater.enqueueForceUpdate(this,Y,"forceUpdate")};function _(){}_.prototype=w.prototype;function b(Y,ge,Ve){this.props=Y,this.context=ge,this.refs=S,this.updater=Ve||v}var M=b.prototype=new _;M.constructor=b,x(M,w.prototype),M.isPureReactComponent=!0;var T=Array.isArray,L=Object.prototype.hasOwnProperty,D={current:null},U={key:!0,ref:!0,__self:!0,__source:!0};function F(Y,ge,Ve){var we,Ne={},Le=null,Ge=null;if(ge!=null)for(we in ge.ref!==void 0&&(Ge=ge.ref),ge.key!==void 0&&(Le=""+ge.key),ge)L.call(ge,we)&&!U.hasOwnProperty(we)&&(Ne[we]=ge[we]);var et=arguments.length-2;if(et===1)Ne.children=Ve;else if(1<et){for(var ft=Array(et),yt=0;yt<et;yt++)ft[yt]=arguments[yt+2];Ne.children=ft}if(Y&&Y.defaultProps)for(we in et=Y.defaultProps,et)Ne[we]===void 0&&(Ne[we]=et[we]);return{$$typeof:n,type:Y,key:Le,ref:Ge,props:Ne,_owner:D.current}}function k(Y,ge){return{$$typeof:n,type:Y.type,key:ge,ref:Y.ref,props:Y.props,_owner:Y._owner}}function N(Y){return typeof Y=="object"&&Y!==null&&Y.$$typeof===n}function V(Y){var ge={"=":"=0",":":"=2"};return"$"+Y.replace(/[=:]/g,function(Ve){return ge[Ve]})}var Z=/\/+/g;function Q(Y,ge){return typeof Y=="object"&&Y!==null&&Y.key!=null?V(""+Y.key):ge.toString(36)}function le(Y,ge,Ve,we,Ne){var Le=typeof Y;(Le==="undefined"||Le==="boolean")&&(Y=null);var Ge=!1;if(Y===null)Ge=!0;else switch(Le){case"string":case"number":Ge=!0;break;case"object":switch(Y.$$typeof){case n:case e:Ge=!0}}if(Ge)return Ge=Y,Ne=Ne(Ge),Y=we===""?"."+Q(Ge,0):we,T(Ne)?(Ve="",Y!=null&&(Ve=Y.replace(Z,"$&/")+"/"),le(Ne,ge,Ve,"",function(yt){return yt})):Ne!=null&&(N(Ne)&&(Ne=k(Ne,Ve+(!Ne.key||Ge&&Ge.key===Ne.key?"":(""+Ne.key).replace(Z,"$&/")+"/")+Y)),ge.push(Ne)),1;if(Ge=0,we=we===""?".":we+":",T(Y))for(var et=0;et<Y.length;et++){Le=Y[et];var ft=we+Q(Le,et);Ge+=le(Le,ge,Ve,ft,Ne)}else if(ft=g(Y),typeof ft=="function")for(Y=ft.call(Y),et=0;!(Le=Y.next()).done;)Le=Le.value,ft=we+Q(Le,et++),Ge+=le(Le,ge,Ve,ft,Ne);else if(Le==="object")throw ge=String(Y),Error("Objects are not valid as a React child (found: "+(ge==="[object Object]"?"object with keys {"+Object.keys(Y).join(", ")+"}":ge)+"). If you meant to render a collection of children, use an array instead.");return Ge}function me(Y,ge,Ve){if(Y==null)return Y;var we=[],Ne=0;return le(Y,we,"","",function(Le){return ge.call(Ve,Le,Ne++)}),we}function fe(Y){if(Y._status===-1){var ge=Y._result;ge=ge(),ge.then(function(Ve){(Y._status===0||Y._status===-1)&&(Y._status=1,Y._result=Ve)},function(Ve){(Y._status===0||Y._status===-1)&&(Y._status=2,Y._result=Ve)}),Y._status===-1&&(Y._status=0,Y._result=ge)}if(Y._status===1)return Y._result.default;throw Y._result}var xe={current:null},X={transition:null},de={ReactCurrentDispatcher:xe,ReactCurrentBatchConfig:X,ReactCurrentOwner:D};function se(){throw Error("act(...) is not supported in production builds of React.")}return Pn.Children={map:me,forEach:function(Y,ge,Ve){me(Y,function(){ge.apply(this,arguments)},Ve)},count:function(Y){var ge=0;return me(Y,function(){ge++}),ge},toArray:function(Y){return me(Y,function(ge){return ge})||[]},only:function(Y){if(!N(Y))throw Error("React.Children.only expected to receive a single React element child.");return Y}},Pn.Component=w,Pn.Fragment=t,Pn.Profiler=r,Pn.PureComponent=b,Pn.StrictMode=i,Pn.Suspense=l,Pn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=de,Pn.act=se,Pn.cloneElement=function(Y,ge,Ve){if(Y==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Y+".");var we=x({},Y.props),Ne=Y.key,Le=Y.ref,Ge=Y._owner;if(ge!=null){if(ge.ref!==void 0&&(Le=ge.ref,Ge=D.current),ge.key!==void 0&&(Ne=""+ge.key),Y.type&&Y.type.defaultProps)var et=Y.type.defaultProps;for(ft in ge)L.call(ge,ft)&&!U.hasOwnProperty(ft)&&(we[ft]=ge[ft]===void 0&&et!==void 0?et[ft]:ge[ft])}var ft=arguments.length-2;if(ft===1)we.children=Ve;else if(1<ft){et=Array(ft);for(var yt=0;yt<ft;yt++)et[yt]=arguments[yt+2];we.children=et}return{$$typeof:n,type:Y.type,key:Ne,ref:Le,props:we,_owner:Ge}},Pn.createContext=function(Y){return Y={$$typeof:o,_currentValue:Y,_currentValue2:Y,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Y.Provider={$$typeof:s,_context:Y},Y.Consumer=Y},Pn.createElement=F,Pn.createFactory=function(Y){var ge=F.bind(null,Y);return ge.type=Y,ge},Pn.createRef=function(){return{current:null}},Pn.forwardRef=function(Y){return{$$typeof:a,render:Y}},Pn.isValidElement=N,Pn.lazy=function(Y){return{$$typeof:h,_payload:{_status:-1,_result:Y},_init:fe}},Pn.memo=function(Y,ge){return{$$typeof:u,type:Y,compare:ge===void 0?null:ge}},Pn.startTransition=function(Y){var ge=X.transition;X.transition={};try{Y()}finally{X.transition=ge}},Pn.unstable_act=se,Pn.useCallback=function(Y,ge){return xe.current.useCallback(Y,ge)},Pn.useContext=function(Y){return xe.current.useContext(Y)},Pn.useDebugValue=function(){},Pn.useDeferredValue=function(Y){return xe.current.useDeferredValue(Y)},Pn.useEffect=function(Y,ge){return xe.current.useEffect(Y,ge)},Pn.useId=function(){return xe.current.useId()},Pn.useImperativeHandle=function(Y,ge,Ve){return xe.current.useImperativeHandle(Y,ge,Ve)},Pn.useInsertionEffect=function(Y,ge){return xe.current.useInsertionEffect(Y,ge)},Pn.useLayoutEffect=function(Y,ge){return xe.current.useLayoutEffect(Y,ge)},Pn.useMemo=function(Y,ge){return xe.current.useMemo(Y,ge)},Pn.useReducer=function(Y,ge,Ve){return xe.current.useReducer(Y,ge,Ve)},Pn.useRef=function(Y){return xe.current.useRef(Y)},Pn.useState=function(Y){return xe.current.useState(Y)},Pn.useSyncExternalStore=function(Y,ge,Ve){return xe.current.useSyncExternalStore(Y,ge,Ve)},Pn.useTransition=function(){return xe.current.useTransition()},Pn.version="18.3.1",Pn}var cC;function p_(){return cC||(cC=1,V1.exports=sk()),V1.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uC;function ok(){if(uC)return Im;uC=1;var n=p_(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,r=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,l,u){var h,f={},g=null,v=null;u!==void 0&&(g=""+u),l.key!==void 0&&(g=""+l.key),l.ref!==void 0&&(v=l.ref);for(h in l)i.call(l,h)&&!s.hasOwnProperty(h)&&(f[h]=l[h]);if(a&&a.defaultProps)for(h in l=a.defaultProps,l)f[h]===void 0&&(f[h]=l[h]);return{$$typeof:e,type:a,key:g,ref:v,props:f,_owner:r.current}}return Im.Fragment=t,Im.jsx=o,Im.jsxs=o,Im}var dC;function ak(){return dC||(dC=1,H1.exports=ok()),H1.exports}var P=ak(),I=p_();const oe=lc(I),JI=rk({__proto__:null,default:oe},[I]);var Ev={},G1={exports:{}},Vs={},j1={exports:{}},W1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hC;function lk(){return hC||(hC=1,(function(n){function e(X,de){var se=X.length;X.push(de);e:for(;0<se;){var Y=se-1>>>1,ge=X[Y];if(0<r(ge,de))X[Y]=de,X[se]=ge,se=Y;else break e}}function t(X){return X.length===0?null:X[0]}function i(X){if(X.length===0)return null;var de=X[0],se=X.pop();if(se!==de){X[0]=se;e:for(var Y=0,ge=X.length,Ve=ge>>>1;Y<Ve;){var we=2*(Y+1)-1,Ne=X[we],Le=we+1,Ge=X[Le];if(0>r(Ne,se))Le<ge&&0>r(Ge,Ne)?(X[Y]=Ge,X[Le]=se,Y=Le):(X[Y]=Ne,X[we]=se,Y=we);else if(Le<ge&&0>r(Ge,se))X[Y]=Ge,X[Le]=se,Y=Le;else break e}}return de}function r(X,de){var se=X.sortIndex-de.sortIndex;return se!==0?se:X.id-de.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,f=null,g=3,v=!1,x=!1,S=!1,w=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M(X){for(var de=t(u);de!==null;){if(de.callback===null)i(u);else if(de.startTime<=X)i(u),de.sortIndex=de.expirationTime,e(l,de);else break;de=t(u)}}function T(X){if(S=!1,M(X),!x)if(t(l)!==null)x=!0,fe(L);else{var de=t(u);de!==null&&xe(T,de.startTime-X)}}function L(X,de){x=!1,S&&(S=!1,_(F),F=-1),v=!0;var se=g;try{for(M(de),f=t(l);f!==null&&(!(f.expirationTime>de)||X&&!V());){var Y=f.callback;if(typeof Y=="function"){f.callback=null,g=f.priorityLevel;var ge=Y(f.expirationTime<=de);de=n.unstable_now(),typeof ge=="function"?f.callback=ge:f===t(l)&&i(l),M(de)}else i(l);f=t(l)}if(f!==null)var Ve=!0;else{var we=t(u);we!==null&&xe(T,we.startTime-de),Ve=!1}return Ve}finally{f=null,g=se,v=!1}}var D=!1,U=null,F=-1,k=5,N=-1;function V(){return!(n.unstable_now()-N<k)}function Z(){if(U!==null){var X=n.unstable_now();N=X;var de=!0;try{de=U(!0,X)}finally{de?Q():(D=!1,U=null)}}else D=!1}var Q;if(typeof b=="function")Q=function(){b(Z)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,me=le.port2;le.port1.onmessage=Z,Q=function(){me.postMessage(null)}}else Q=function(){w(Z,0)};function fe(X){U=X,D||(D=!0,Q())}function xe(X,de){F=w(function(){X(n.unstable_now())},de)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(X){X.callback=null},n.unstable_continueExecution=function(){x||v||(x=!0,fe(L))},n.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<X?Math.floor(1e3/X):5},n.unstable_getCurrentPriorityLevel=function(){return g},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(X){switch(g){case 1:case 2:case 3:var de=3;break;default:de=g}var se=g;g=de;try{return X()}finally{g=se}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(X,de){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var se=g;g=X;try{return de()}finally{g=se}},n.unstable_scheduleCallback=function(X,de,se){var Y=n.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?Y+se:Y):se=Y,X){case 1:var ge=-1;break;case 2:ge=250;break;case 5:ge=1073741823;break;case 4:ge=1e4;break;default:ge=5e3}return ge=se+ge,X={id:h++,callback:de,priorityLevel:X,startTime:se,expirationTime:ge,sortIndex:-1},se>Y?(X.sortIndex=se,e(u,X),t(l)===null&&X===t(u)&&(S?(_(F),F=-1):S=!0,xe(T,se-Y))):(X.sortIndex=ge,e(l,X),x||v||(x=!0,fe(L))),X},n.unstable_shouldYield=V,n.unstable_wrapCallback=function(X){var de=g;return function(){var se=g;g=de;try{return X.apply(this,arguments)}finally{g=se}}}})(W1)),W1}var fC;function ck(){return fC||(fC=1,j1.exports=lk()),j1.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pC;function uk(){if(pC)return Vs;pC=1;var n=p_(),e=ck();function t(c){for(var d="https://reactjs.org/docs/error-decoder.html?invariant="+c,y=1;y<arguments.length;y++)d+="&args[]="+encodeURIComponent(arguments[y]);return"Minified React error #"+c+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,r={};function s(c,d){o(c,d),o(c+"Capture",d)}function o(c,d){for(r[c]=d,c=0;c<d.length;c++)i.add(d[c])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},f={};function g(c){return l.call(f,c)?!0:l.call(h,c)?!1:u.test(c)?f[c]=!0:(h[c]=!0,!1)}function v(c,d,y,A){if(y!==null&&y.type===0)return!1;switch(typeof d){case"function":case"symbol":return!0;case"boolean":return A?!1:y!==null?!y.acceptsBooleans:(c=c.toLowerCase().slice(0,5),c!=="data-"&&c!=="aria-");default:return!1}}function x(c,d,y,A){if(d===null||typeof d>"u"||v(c,d,y,A))return!0;if(A)return!1;if(y!==null)switch(y.type){case 3:return!d;case 4:return d===!1;case 5:return isNaN(d);case 6:return isNaN(d)||1>d}return!1}function S(c,d,y,A,R,O,W){this.acceptsBooleans=d===2||d===3||d===4,this.attributeName=A,this.attributeNamespace=R,this.mustUseProperty=y,this.propertyName=c,this.type=d,this.sanitizeURL=O,this.removeEmptyString=W}var w={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(c){w[c]=new S(c,0,!1,c,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(c){var d=c[0];w[d]=new S(d,1,!1,c[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(c){w[c]=new S(c,2,!1,c.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(c){w[c]=new S(c,2,!1,c,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(c){w[c]=new S(c,3,!1,c.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(c){w[c]=new S(c,3,!0,c,null,!1,!1)}),["capture","download"].forEach(function(c){w[c]=new S(c,4,!1,c,null,!1,!1)}),["cols","rows","size","span"].forEach(function(c){w[c]=new S(c,6,!1,c,null,!1,!1)}),["rowSpan","start"].forEach(function(c){w[c]=new S(c,5,!1,c.toLowerCase(),null,!1,!1)});var _=/[\-:]([a-z])/g;function b(c){return c[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(c){var d=c.replace(_,b);w[d]=new S(d,1,!1,c,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(c){var d=c.replace(_,b);w[d]=new S(d,1,!1,c,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(c){var d=c.replace(_,b);w[d]=new S(d,1,!1,c,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(c){w[c]=new S(c,1,!1,c.toLowerCase(),null,!1,!1)}),w.xlinkHref=new S("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(c){w[c]=new S(c,1,!1,c.toLowerCase(),null,!0,!0)});function M(c,d,y,A){var R=w.hasOwnProperty(d)?w[d]:null;(R!==null?R.type!==0:A||!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(x(d,y,R,A)&&(y=null),A||R===null?g(d)&&(y===null?c.removeAttribute(d):c.setAttribute(d,""+y)):R.mustUseProperty?c[R.propertyName]=y===null?R.type===3?!1:"":y:(d=R.attributeName,A=R.attributeNamespace,y===null?c.removeAttribute(d):(R=R.type,y=R===3||R===4&&y===!0?"":""+y,A?c.setAttributeNS(A,d,y):c.setAttribute(d,y))))}var T=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,L=Symbol.for("react.element"),D=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),V=Symbol.for("react.context"),Z=Symbol.for("react.forward_ref"),Q=Symbol.for("react.suspense"),le=Symbol.for("react.suspense_list"),me=Symbol.for("react.memo"),fe=Symbol.for("react.lazy"),xe=Symbol.for("react.offscreen"),X=Symbol.iterator;function de(c){return c===null||typeof c!="object"?null:(c=X&&c[X]||c["@@iterator"],typeof c=="function"?c:null)}var se=Object.assign,Y;function ge(c){if(Y===void 0)try{throw Error()}catch(y){var d=y.stack.trim().match(/\n( *(at )?)/);Y=d&&d[1]||""}return`
`+Y+c}var Ve=!1;function we(c,d){if(!c||Ve)return"";Ve=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(d)if(d=function(){throw Error()},Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(Be){var A=Be}Reflect.construct(c,[],d)}else{try{d.call()}catch(Be){A=Be}c.call(d.prototype)}else{try{throw Error()}catch(Be){A=Be}c()}}catch(Be){if(Be&&A&&typeof Be.stack=="string"){for(var R=Be.stack.split(`
`),O=A.stack.split(`
`),W=R.length-1,re=O.length-1;1<=W&&0<=re&&R[W]!==O[re];)re--;for(;1<=W&&0<=re;W--,re--)if(R[W]!==O[re]){if(W!==1||re!==1)do if(W--,re--,0>re||R[W]!==O[re]){var pe=`
`+R[W].replace(" at new "," at ");return c.displayName&&pe.includes("<anonymous>")&&(pe=pe.replace("<anonymous>",c.displayName)),pe}while(1<=W&&0<=re);break}}}finally{Ve=!1,Error.prepareStackTrace=y}return(c=c?c.displayName||c.name:"")?ge(c):""}function Ne(c){switch(c.tag){case 5:return ge(c.type);case 16:return ge("Lazy");case 13:return ge("Suspense");case 19:return ge("SuspenseList");case 0:case 2:case 15:return c=we(c.type,!1),c;case 11:return c=we(c.type.render,!1),c;case 1:return c=we(c.type,!0),c;default:return""}}function Le(c){if(c==null)return null;if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case U:return"Fragment";case D:return"Portal";case k:return"Profiler";case F:return"StrictMode";case Q:return"Suspense";case le:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case V:return(c.displayName||"Context")+".Consumer";case N:return(c._context.displayName||"Context")+".Provider";case Z:var d=c.render;return c=c.displayName,c||(c=d.displayName||d.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case me:return d=c.displayName||null,d!==null?d:Le(c.type)||"Memo";case fe:d=c._payload,c=c._init;try{return Le(c(d))}catch{}}return null}function Ge(c){var d=c.type;switch(c.tag){case 24:return"Cache";case 9:return(d.displayName||"Context")+".Consumer";case 10:return(d._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return c=d.render,c=c.displayName||c.name||"",d.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case 7:return"Fragment";case 5:return d;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Le(d);case 8:return d===F?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d}return null}function et(c){switch(typeof c){case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function ft(c){var d=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function yt(c){var d=ft(c)?"checked":"value",y=Object.getOwnPropertyDescriptor(c.constructor.prototype,d),A=""+c[d];if(!c.hasOwnProperty(d)&&typeof y<"u"&&typeof y.get=="function"&&typeof y.set=="function"){var R=y.get,O=y.set;return Object.defineProperty(c,d,{configurable:!0,get:function(){return R.call(this)},set:function(W){A=""+W,O.call(this,W)}}),Object.defineProperty(c,d,{enumerable:y.enumerable}),{getValue:function(){return A},setValue:function(W){A=""+W},stopTracking:function(){c._valueTracker=null,delete c[d]}}}}function nn(c){c._valueTracker||(c._valueTracker=yt(c))}function Xt(c){if(!c)return!1;var d=c._valueTracker;if(!d)return!0;var y=d.getValue(),A="";return c&&(A=ft(c)?c.checked?"true":"false":c.value),c=A,c!==y?(d.setValue(c),!0):!1}function xt(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}function q(c,d){var y=d.checked;return se({},d,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:y??c._wrapperState.initialChecked})}function at(c,d){var y=d.defaultValue==null?"":d.defaultValue,A=d.checked!=null?d.checked:d.defaultChecked;y=et(d.value!=null?d.value:y),c._wrapperState={initialChecked:A,initialValue:y,controlled:d.type==="checkbox"||d.type==="radio"?d.checked!=null:d.value!=null}}function Je(c,d){d=d.checked,d!=null&&M(c,"checked",d,!1)}function tt(c,d){Je(c,d);var y=et(d.value),A=d.type;if(y!=null)A==="number"?(y===0&&c.value===""||c.value!=y)&&(c.value=""+y):c.value!==""+y&&(c.value=""+y);else if(A==="submit"||A==="reset"){c.removeAttribute("value");return}d.hasOwnProperty("value")?_t(c,d.type,y):d.hasOwnProperty("defaultValue")&&_t(c,d.type,et(d.defaultValue)),d.checked==null&&d.defaultChecked!=null&&(c.defaultChecked=!!d.defaultChecked)}function $e(c,d,y){if(d.hasOwnProperty("value")||d.hasOwnProperty("defaultValue")){var A=d.type;if(!(A!=="submit"&&A!=="reset"||d.value!==void 0&&d.value!==null))return;d=""+c._wrapperState.initialValue,y||d===c.value||(c.value=d),c.defaultValue=d}y=c.name,y!==""&&(c.name=""),c.defaultChecked=!!c._wrapperState.initialChecked,y!==""&&(c.name=y)}function _t(c,d,y){(d!=="number"||xt(c.ownerDocument)!==c)&&(y==null?c.defaultValue=""+c._wrapperState.initialValue:c.defaultValue!==""+y&&(c.defaultValue=""+y))}var Ye=Array.isArray;function K(c,d,y,A){if(c=c.options,d){d={};for(var R=0;R<y.length;R++)d["$"+y[R]]=!0;for(y=0;y<c.length;y++)R=d.hasOwnProperty("$"+c[y].value),c[y].selected!==R&&(c[y].selected=R),R&&A&&(c[y].defaultSelected=!0)}else{for(y=""+et(y),d=null,R=0;R<c.length;R++){if(c[R].value===y){c[R].selected=!0,A&&(c[R].defaultSelected=!0);return}d!==null||c[R].disabled||(d=c[R])}d!==null&&(d.selected=!0)}}function j(c,d){if(d.dangerouslySetInnerHTML!=null)throw Error(t(91));return se({},d,{value:void 0,defaultValue:void 0,children:""+c._wrapperState.initialValue})}function ne(c,d){var y=d.value;if(y==null){if(y=d.children,d=d.defaultValue,y!=null){if(d!=null)throw Error(t(92));if(Ye(y)){if(1<y.length)throw Error(t(93));y=y[0]}d=y}d==null&&(d=""),y=d}c._wrapperState={initialValue:et(y)}}function Se(c,d){var y=et(d.value),A=et(d.defaultValue);y!=null&&(y=""+y,y!==c.value&&(c.value=y),d.defaultValue==null&&c.defaultValue!==y&&(c.defaultValue=y)),A!=null&&(c.defaultValue=""+A)}function ze(c){var d=c.textContent;d===c._wrapperState.initialValue&&d!==""&&d!==null&&(c.value=d)}function Re(c){switch(c){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mt(c,d){return c==null||c==="http://www.w3.org/1999/xhtml"?Re(d):c==="http://www.w3.org/2000/svg"&&d==="foreignObject"?"http://www.w3.org/1999/xhtml":c}var lt,Dt=(function(c){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(d,y,A,R){MSApp.execUnsafeLocalFunction(function(){return c(d,y,A,R)})}:c})(function(c,d){if(c.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in c)c.innerHTML=d;else{for(lt=lt||document.createElement("div"),lt.innerHTML="<svg>"+d.valueOf().toString()+"</svg>",d=lt.firstChild;c.firstChild;)c.removeChild(c.firstChild);for(;d.firstChild;)c.appendChild(d.firstChild)}});function Ft(c,d){if(d){var y=c.firstChild;if(y&&y===c.lastChild&&y.nodeType===3){y.nodeValue=d;return}}c.textContent=d}var qe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},wt=["Webkit","ms","Moz","O"];Object.keys(qe).forEach(function(c){wt.forEach(function(d){d=d+c.charAt(0).toUpperCase()+c.substring(1),qe[d]=qe[c]})});function Lt(c,d,y){return d==null||typeof d=="boolean"||d===""?"":y||typeof d!="number"||d===0||qe.hasOwnProperty(c)&&qe[c]?(""+d).trim():d+"px"}function It(c,d){c=c.style;for(var y in d)if(d.hasOwnProperty(y)){var A=y.indexOf("--")===0,R=Lt(y,d[y],A);y==="float"&&(y="cssFloat"),A?c.setProperty(y,R):c[y]=R}}var St=se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ue(c,d){if(d){if(St[c]&&(d.children!=null||d.dangerouslySetInnerHTML!=null))throw Error(t(137,c));if(d.dangerouslySetInnerHTML!=null){if(d.children!=null)throw Error(t(60));if(typeof d.dangerouslySetInnerHTML!="object"||!("__html"in d.dangerouslySetInnerHTML))throw Error(t(61))}if(d.style!=null&&typeof d.style!="object")throw Error(t(62))}}function Oe(c,d){if(c.indexOf("-")===-1)return typeof d.is=="string";switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var st=null;function ce(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var be=null,Ie=null,We=null;function Mt(c){if(c=Yo(c)){if(typeof be!="function")throw Error(t(280));var d=c.stateNode;d&&(d=Wh(d),be(c.stateNode,c.type,d))}}function vt(c){Ie?We?We.push(c):We=[c]:Ie=c}function $t(){if(Ie){var c=Ie,d=We;if(We=Ie=null,Mt(c),d)for(c=0;c<d.length;c++)Mt(d[c])}}function Tn(c,d){return c(d)}function Xn(){}var mn=!1;function vi(c,d,y){if(mn)return c(d,y);mn=!0;try{return Tn(c,d,y)}finally{mn=!1,(Ie!==null||We!==null)&&(Xn(),$t())}}function Si(c,d){var y=c.stateNode;if(y===null)return null;var A=Wh(y);if(A===null)return null;y=A[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(A=!A.disabled)||(c=c.type,A=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!A;break e;default:c=!1}if(c)return null;if(y&&typeof y!="function")throw Error(t(231,d,typeof y));return y}var ba=!1;if(a)try{var fo={};Object.defineProperty(fo,"passive",{get:function(){ba=!0}}),window.addEventListener("test",fo,fo),window.removeEventListener("test",fo,fo)}catch{ba=!1}function Dr(c,d,y,A,R,O,W,re,pe){var Be=Array.prototype.slice.call(arguments,3);try{d.apply(y,Be)}catch(rt){this.onError(rt)}}var ls=!1,cs=null,dr=!1,dn=null,il={onError:function(c){ls=!0,cs=c}};function Ma(c,d,y,A,R,O,W,re,pe){ls=!1,cs=null,Dr.apply(il,arguments)}function H(c,d,y,A,R,O,W,re,pe){if(Ma.apply(this,arguments),ls){if(ls){var Be=cs;ls=!1,cs=null}else throw Error(t(198));dr||(dr=!0,dn=Be)}}function $(c){var d=c,y=c;if(c.alternate)for(;d.return;)d=d.return;else{c=d;do d=c,(d.flags&4098)!==0&&(y=d.return),c=d.return;while(c)}return d.tag===3?y:null}function he(c){if(c.tag===13){var d=c.memoizedState;if(d===null&&(c=c.alternate,c!==null&&(d=c.memoizedState)),d!==null)return d.dehydrated}return null}function Pe(c){if($(c)!==c)throw Error(t(188))}function ke(c){var d=c.alternate;if(!d){if(d=$(c),d===null)throw Error(t(188));return d!==c?null:c}for(var y=c,A=d;;){var R=y.return;if(R===null)break;var O=R.alternate;if(O===null){if(A=R.return,A!==null){y=A;continue}break}if(R.child===O.child){for(O=R.child;O;){if(O===y)return Pe(R),c;if(O===A)return Pe(R),d;O=O.sibling}throw Error(t(188))}if(y.return!==A.return)y=R,A=O;else{for(var W=!1,re=R.child;re;){if(re===y){W=!0,y=R,A=O;break}if(re===A){W=!0,A=R,y=O;break}re=re.sibling}if(!W){for(re=O.child;re;){if(re===y){W=!0,y=O,A=R;break}if(re===A){W=!0,A=O,y=R;break}re=re.sibling}if(!W)throw Error(t(189))}}if(y.alternate!==A)throw Error(t(190))}if(y.tag!==3)throw Error(t(188));return y.stateNode.current===y?c:d}function Ue(c){return c=ke(c),c!==null?ct(c):null}function ct(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){var d=ct(c);if(d!==null)return d;c=c.sibling}return null}var it=e.unstable_scheduleCallback,G=e.unstable_cancelCallback,te=e.unstable_shouldYield,ae=e.unstable_requestPaint,ie=e.unstable_now,ve=e.unstable_getCurrentPriorityLevel,Ce=e.unstable_ImmediatePriority,He=e.unstable_UserBlockingPriority,Ke=e.unstable_NormalPriority,Qe=e.unstable_LowPriority,gt=e.unstable_IdlePriority,ht=null,Ze=null;function Et(c){if(Ze&&typeof Ze.onCommitFiberRoot=="function")try{Ze.onCommitFiberRoot(ht,c,void 0,(c.current.flags&128)===128)}catch{}}var At=Math.clz32?Math.clz32:Gt,rn=Math.log,kt=Math.LN2;function Gt(c){return c>>>=0,c===0?32:31-(rn(c)/kt|0)|0}var Rt=64,xn=4194304;function Yt(c){switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return c&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return c}}function ln(c,d){var y=c.pendingLanes;if(y===0)return 0;var A=0,R=c.suspendedLanes,O=c.pingedLanes,W=y&268435455;if(W!==0){var re=W&~R;re!==0?A=Yt(re):(O&=W,O!==0&&(A=Yt(O)))}else W=y&~R,W!==0?A=Yt(W):O!==0&&(A=Yt(O));if(A===0)return 0;if(d!==0&&d!==A&&(d&R)===0&&(R=A&-A,O=d&-d,R>=O||R===16&&(O&4194240)!==0))return d;if((A&4)!==0&&(A|=y&16),d=c.entangledLanes,d!==0)for(c=c.entanglements,d&=A;0<d;)y=31-At(d),R=1<<y,A|=c[y],d&=~R;return A}function ei(c,d){switch(c){case 1:case 2:case 4:return d+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pn(c,d){for(var y=c.suspendedLanes,A=c.pingedLanes,R=c.expirationTimes,O=c.pendingLanes;0<O;){var W=31-At(O),re=1<<W,pe=R[W];pe===-1?((re&y)===0||(re&A)!==0)&&(R[W]=ei(re,d)):pe<=d&&(c.expiredLanes|=re),O&=~re}}function Sn(c){return c=c.pendingLanes&-1073741825,c!==0?c:c&1073741824?1073741824:0}function qt(){var c=Rt;return Rt<<=1,(Rt&4194240)===0&&(Rt=64),c}function di(c){for(var d=[],y=0;31>y;y++)d.push(c);return d}function On(c,d,y){c.pendingLanes|=d,d!==536870912&&(c.suspendedLanes=0,c.pingedLanes=0),c=c.eventTimes,d=31-At(d),c[d]=y}function ti(c,d){var y=c.pendingLanes&~d;c.pendingLanes=d,c.suspendedLanes=0,c.pingedLanes=0,c.expiredLanes&=d,c.mutableReadLanes&=d,c.entangledLanes&=d,d=c.entanglements;var A=c.eventTimes;for(c=c.expirationTimes;0<y;){var R=31-At(y),O=1<<R;d[R]=0,A[R]=-1,c[R]=-1,y&=~O}}function Pi(c,d){var y=c.entangledLanes|=d;for(c=c.entanglements;y;){var A=31-At(y),R=1<<A;R&d|c[A]&d&&(c[A]|=d),y&=~R}}var Rn=0;function Wr(c){return c&=-c,1<c?4<c?(c&268435455)!==0?16:536870912:4:1}var Au,Fp,I0,fh,ph,rl=!1,mh=[],po=null,bn=null,zo=null,sl=new Map,dc=new Map,Ca=[],h1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Xi(c,d){switch(c){case"focusin":case"focusout":po=null;break;case"dragenter":case"dragleave":bn=null;break;case"mouseover":case"mouseout":zo=null;break;case"pointerover":case"pointerout":sl.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":dc.delete(d.pointerId)}}function ol(c,d,y,A,R,O){return c===null||c.nativeEvent!==O?(c={blockedOn:d,domEventName:y,eventSystemFlags:A,nativeEvent:O,targetContainers:[R]},d!==null&&(d=Yo(d),d!==null&&Fp(d)),c):(c.eventSystemFlags|=A,d=c.targetContainers,R!==null&&d.indexOf(R)===-1&&d.push(R),c)}function f1(c,d,y,A,R){switch(d){case"focusin":return po=ol(po,c,d,y,A,R),!0;case"dragenter":return bn=ol(bn,c,d,y,A,R),!0;case"mouseover":return zo=ol(zo,c,d,y,A,R),!0;case"pointerover":var O=R.pointerId;return sl.set(O,ol(sl.get(O)||null,c,d,y,A,R)),!0;case"gotpointercapture":return O=R.pointerId,dc.set(O,ol(dc.get(O)||null,c,d,y,A,R)),!0}return!1}function gh(c){var d=La(c.target);if(d!==null){var y=$(d);if(y!==null){if(d=y.tag,d===13){if(d=he(y),d!==null){c.blockedOn=d,ph(c.priority,function(){I0(y)});return}}else if(d===3&&y.stateNode.current.memoizedState.isDehydrated){c.blockedOn=y.tag===3?y.stateNode.containerInfo:null;return}}}c.blockedOn=null}function vh(c){if(c.blockedOn!==null)return!1;for(var d=c.targetContainers;0<d.length;){var y=Ds(c.domEventName,c.eventSystemFlags,d[0],c.nativeEvent);if(y===null){y=c.nativeEvent;var A=new y.constructor(y.type,y);st=A,y.target.dispatchEvent(A),st=null}else return d=Yo(y),d!==null&&Fp(d),c.blockedOn=y,!1;d.shift()}return!0}function bu(c,d,y){vh(c)&&y.delete(d)}function mo(){rl=!1,po!==null&&vh(po)&&(po=null),bn!==null&&vh(bn)&&(bn=null),zo!==null&&vh(zo)&&(zo=null),sl.forEach(bu),dc.forEach(bu)}function Mu(c,d){c.blockedOn===d&&(c.blockedOn=null,rl||(rl=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,mo)))}function Cu(c){function d(R){return Mu(R,c)}if(0<mh.length){Mu(mh[0],c);for(var y=1;y<mh.length;y++){var A=mh[y];A.blockedOn===c&&(A.blockedOn=null)}}for(po!==null&&Mu(po,c),bn!==null&&Mu(bn,c),zo!==null&&Mu(zo,c),sl.forEach(d),dc.forEach(d),y=0;y<Ca.length;y++)A=Ca[y],A.blockedOn===c&&(A.blockedOn=null);for(;0<Ca.length&&(y=Ca[0],y.blockedOn===null);)gh(y),y.blockedOn===null&&Ca.shift()}var Br=T.ReactCurrentBatchConfig,Is=!0;function yh(c,d,y,A){var R=Rn,O=Br.transition;Br.transition=null;try{Rn=1,xh(c,d,y,A)}finally{Rn=R,Br.transition=O}}function kp(c,d,y,A){var R=Rn,O=Br.transition;Br.transition=null;try{Rn=4,xh(c,d,y,A)}finally{Rn=R,Br.transition=O}}function xh(c,d,y,A){if(Is){var R=Ds(c,d,y,A);if(R===null)Uh(c,d,A,_h,y),Xi(c,A);else if(f1(R,c,d,y,A))A.stopPropagation();else if(Xi(c,A),d&4&&-1<h1.indexOf(c)){for(;R!==null;){var O=Yo(R);if(O!==null&&Au(O),O=Ds(c,d,y,A),O===null&&Uh(c,d,A,_h,y),O===R)break;R=O}R!==null&&A.stopPropagation()}else Uh(c,d,A,null,y)}}var _h=null;function Ds(c,d,y,A){if(_h=null,c=ce(A),c=La(c),c!==null)if(d=$(c),d===null)c=null;else if(y=d.tag,y===13){if(c=he(d),c!==null)return c;c=null}else if(y===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;c=null}else d!==c&&(c=null);return _h=c,null}function D0(c){switch(c){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ve()){case Ce:return 1;case He:return 4;case Ke:case Qe:return 16;case gt:return 536870912;default:return 16}default:return 16}}var qs=null,Up=null,$r=null;function Tu(){if($r)return $r;var c,d=Up,y=d.length,A,R="value"in qs?qs.value:qs.textContent,O=R.length;for(c=0;c<y&&d[c]===R[c];c++);var W=y-c;for(A=1;A<=W&&d[y-A]===R[O-A];A++);return $r=R.slice(c,1<A?1-A:void 0)}function al(c){var d=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&d===13&&(c=13)):c=d,c===10&&(c=13),32<=c||c===13?c:0}function Ho(){return!0}function wh(){return!1}function Lr(c){function d(y,A,R,O,W){this._reactName=y,this._targetInst=R,this.type=A,this.nativeEvent=O,this.target=W,this.currentTarget=null;for(var re in c)c.hasOwnProperty(re)&&(y=c[re],this[re]=y?y(O):O[re]);return this.isDefaultPrevented=(O.defaultPrevented!=null?O.defaultPrevented:O.returnValue===!1)?Ho:wh,this.isPropagationStopped=wh,this}return se(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var y=this.nativeEvent;y&&(y.preventDefault?y.preventDefault():typeof y.returnValue!="unknown"&&(y.returnValue=!1),this.isDefaultPrevented=Ho)},stopPropagation:function(){var y=this.nativeEvent;y&&(y.stopPropagation?y.stopPropagation():typeof y.cancelBubble!="unknown"&&(y.cancelBubble=!0),this.isPropagationStopped=Ho)},persist:function(){},isPersistent:Ho}),d}var ll={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ru=Lr(ll),cl=se({},ll,{view:0,detail:0}),hc=Lr(cl),Xr,Bs,Ls,fc=se({},cl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ra,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==Ls&&(Ls&&c.type==="mousemove"?(Xr=c.screenX-Ls.screenX,Bs=c.screenY-Ls.screenY):Bs=Xr=0,Ls=c),Xr)},movementY:function(c){return"movementY"in c?c.movementY:Bs}}),zp=Lr(fc),Vo=se({},fc,{dataTransfer:0}),Ta=Lr(Vo),Sh=se({},cl,{relatedTarget:0}),Eh=Lr(Sh),Ah=se({},ll,{animationName:0,elapsedTime:0,pseudoElement:0}),B0=Lr(Ah),L0=se({},ll,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),Hp=Lr(L0),bh=se({},ll,{data:0}),Vp=Lr(bh),O0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},N0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pc(c){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(c):(c=Gp[c])?!!d[c]:!1}function Ra(){return pc}var Mh=se({},cl,{key:function(c){if(c.key){var d=O0[c.key]||c.key;if(d!=="Unidentified")return d}return c.type==="keypress"?(c=al(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?N0[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ra,charCode:function(c){return c.type==="keypress"?al(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?al(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),Ch=Lr(Mh),Os=se({},fc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),us=Lr(Os),ul=se({},cl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ra}),Go=Lr(ul),jo=se({},ll,{propertyName:0,elapsedTime:0,pseudoElement:0}),dl=Lr(jo),F0=se({},fc,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),jp=Lr(F0),Wp=[9,13,27,32],Or=a&&"CompositionEvent"in window,hr=null;a&&"documentMode"in document&&(hr=document.documentMode);var hi=a&&"TextEvent"in window&&!hr,mc=a&&(!Or||hr&&8<hr&&11>=hr),Ns=" ",$p=!1;function Xp(c,d){switch(c){case"keyup":return Wp.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Th(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var Pa=!1;function k0(c,d){switch(c){case"compositionend":return Th(d);case"keypress":return d.which!==32?null:($p=!0,Ns);case"textInput":return c=d.data,c===Ns&&$p?null:c;default:return null}}function Pu(c,d){if(Pa)return c==="compositionend"||!Or&&Xp(c,d)?(c=Tu(),$r=Up=qs=null,Pa=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return mc&&d.locale!=="ko"?null:d.data;default:return null}}var gc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rh(c){var d=c&&c.nodeName&&c.nodeName.toLowerCase();return d==="input"?!!gc[c.type]:d==="textarea"}function vc(c,d,y,A){vt(A),d=zh(d,"onChange"),0<d.length&&(y=new Ru("onChange","change",null,y,A),c.push({event:y,listeners:d}))}var Ia=null,yc=null;function U0(c){Sc(c,0)}function Wo(c){var d=Ii(c);if(Xt(d))return c}function z0(c,d){if(c==="change")return d}var xc=!1;if(a){var Yr;if(a){var hl="oninput"in document;if(!hl){var fl=document.createElement("div");fl.setAttribute("oninput","return;"),hl=typeof fl.oninput=="function"}Yr=hl}else Yr=!1;xc=Yr&&(!document.documentMode||9<document.documentMode)}function Zs(){Ia&&(Ia.detachEvent("onpropertychange",Ph),yc=Ia=null)}function Ph(c){if(c.propertyName==="value"&&Wo(yc)){var d=[];vc(d,yc,c,ce(c)),vi(U0,d)}}function _c(c,d,y){c==="focusin"?(Zs(),Ia=d,yc=y,Ia.attachEvent("onpropertychange",Ph)):c==="focusout"&&Zs()}function H0(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return Wo(yc)}function Yp(c,d){if(c==="click")return Wo(d)}function yi(c,d){if(c==="input"||c==="change")return Wo(d)}function Ih(c,d){return c===d&&(c!==0||1/c===1/d)||c!==c&&d!==d}var ds=typeof Object.is=="function"?Object.is:Ih;function pl(c,d){if(ds(c,d))return!0;if(typeof c!="object"||c===null||typeof d!="object"||d===null)return!1;var y=Object.keys(c),A=Object.keys(d);if(y.length!==A.length)return!1;for(A=0;A<y.length;A++){var R=y[A];if(!l.call(d,R)||!ds(c[R],d[R]))return!1}return!0}function Iu(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function hs(c,d){var y=Iu(c);c=0;for(var A;y;){if(y.nodeType===3){if(A=c+y.textContent.length,c<=d&&A>=d)return{node:y,offset:d-c};c=A}e:{for(;y;){if(y.nextSibling){y=y.nextSibling;break e}y=y.parentNode}y=void 0}y=Iu(y)}}function ml(c,d){return c&&d?c===d?!0:c&&c.nodeType===3?!1:d&&d.nodeType===3?ml(c,d.parentNode):"contains"in c?c.contains(d):c.compareDocumentPosition?!!(c.compareDocumentPosition(d)&16):!1:!1}function xi(){for(var c=window,d=xt();d instanceof c.HTMLIFrameElement;){try{var y=typeof d.contentWindow.location.href=="string"}catch{y=!1}if(y)c=d.contentWindow;else break;d=xt(c.document)}return d}function er(c){var d=c&&c.nodeName&&c.nodeName.toLowerCase();return d&&(d==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||d==="textarea"||c.contentEditable==="true")}function tr(c){var d=xi(),y=c.focusedElem,A=c.selectionRange;if(d!==y&&y&&y.ownerDocument&&ml(y.ownerDocument.documentElement,y)){if(A!==null&&er(y)){if(d=A.start,c=A.end,c===void 0&&(c=d),"selectionStart"in y)y.selectionStart=d,y.selectionEnd=Math.min(c,y.value.length);else if(c=(d=y.ownerDocument||document)&&d.defaultView||window,c.getSelection){c=c.getSelection();var R=y.textContent.length,O=Math.min(A.start,R);A=A.end===void 0?O:Math.min(A.end,R),!c.extend&&O>A&&(R=A,A=O,O=R),R=hs(y,O);var W=hs(y,A);R&&W&&(c.rangeCount!==1||c.anchorNode!==R.node||c.anchorOffset!==R.offset||c.focusNode!==W.node||c.focusOffset!==W.offset)&&(d=d.createRange(),d.setStart(R.node,R.offset),c.removeAllRanges(),O>A?(c.addRange(d),c.extend(W.node,W.offset)):(d.setEnd(W.node,W.offset),c.addRange(d)))}}for(d=[],c=y;c=c.parentNode;)c.nodeType===1&&d.push({element:c,left:c.scrollLeft,top:c.scrollTop});for(typeof y.focus=="function"&&y.focus(),y=0;y<d.length;y++)c=d[y],c.element.scrollLeft=c.left,c.element.scrollTop=c.top}}var Dh=a&&"documentMode"in document&&11>=document.documentMode,go=null,gl=null,Du=null,nr=!1;function Bh(c,d,y){var A=y.window===y?y.document:y.nodeType===9?y:y.ownerDocument;nr||go==null||go!==xt(A)||(A=go,"selectionStart"in A&&er(A)?A={start:A.selectionStart,end:A.selectionEnd}:(A=(A.ownerDocument&&A.ownerDocument.defaultView||window).getSelection(),A={anchorNode:A.anchorNode,anchorOffset:A.anchorOffset,focusNode:A.focusNode,focusOffset:A.focusOffset}),Du&&pl(Du,A)||(Du=A,A=zh(gl,"onSelect"),0<A.length&&(d=new Ru("onSelect","select",null,d,y),c.push({event:d,listeners:A}),d.target=go)))}function wc(c,d){var y={};return y[c.toLowerCase()]=d.toLowerCase(),y["Webkit"+c]="webkit"+d,y["Moz"+c]="moz"+d,y}var Da={animationend:wc("Animation","AnimationEnd"),animationiteration:wc("Animation","AnimationIteration"),animationstart:wc("Animation","AnimationStart"),transitionend:wc("Transition","TransitionEnd")},Qs={},eo={};a&&(eo=document.createElement("div").style,"AnimationEvent"in window||(delete Da.animationend.animation,delete Da.animationiteration.animation,delete Da.animationstart.animation),"TransitionEvent"in window||delete Da.transitionend.transition);function vo(c){if(Qs[c])return Qs[c];if(!Da[c])return c;var d=Da[c],y;for(y in d)if(d.hasOwnProperty(y)&&y in eo)return Qs[c]=d[y];return c}var Bu=vo("animationend"),Lu=vo("animationiteration"),Kp=vo("animationstart"),Jp=vo("transitionend"),qp=new Map,Zp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $o(c,d){qp.set(c,d),s(d,[c])}for(var Lh=0;Lh<Zp.length;Lh++){var Ou=Zp[Lh],Nu=Ou.toLowerCase(),V0=Ou[0].toUpperCase()+Ou.slice(1);$o(Nu,"on"+V0)}$o(Bu,"onAnimationEnd"),$o(Lu,"onAnimationIteration"),$o(Kp,"onAnimationStart"),$o("dblclick","onDoubleClick"),$o("focusin","onFocus"),$o("focusout","onBlur"),$o(Jp,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ba="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Oh=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ba));function Nh(c,d,y){var A=c.type||"unknown-event";c.currentTarget=y,H(A,d,void 0,c),c.currentTarget=null}function Sc(c,d){d=(d&4)!==0;for(var y=0;y<c.length;y++){var A=c[y],R=A.event;A=A.listeners;e:{var O=void 0;if(d)for(var W=A.length-1;0<=W;W--){var re=A[W],pe=re.instance,Be=re.currentTarget;if(re=re.listener,pe!==O&&R.isPropagationStopped())break e;Nh(R,re,Be),O=pe}else for(W=0;W<A.length;W++){if(re=A[W],pe=re.instance,Be=re.currentTarget,re=re.listener,pe!==O&&R.isPropagationStopped())break e;Nh(R,re,Be),O=pe}}}if(dr)throw c=dn,dr=!1,dn=null,c}function ni(c,d){var y=d[xl];y===void 0&&(y=d[xl]=new Set);var A=c+"__bubble";y.has(A)||(kh(d,c,2,!1),y.add(A))}function Fh(c,d,y){var A=0;d&&(A|=4),kh(y,c,A,d)}var Fu="_reactListening"+Math.random().toString(36).slice(2);function Ec(c){if(!c[Fu]){c[Fu]=!0,i.forEach(function(y){y!=="selectionchange"&&(Oh.has(y)||Fh(y,!1,c),Fh(y,!0,c))});var d=c.nodeType===9?c:c.ownerDocument;d===null||d[Fu]||(d[Fu]=!0,Fh("selectionchange",!1,d))}}function kh(c,d,y,A){switch(D0(d)){case 1:var R=yh;break;case 4:R=kp;break;default:R=xh}y=R.bind(null,d,y,c),R=void 0,!ba||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(R=!0),A?R!==void 0?c.addEventListener(d,y,{capture:!0,passive:R}):c.addEventListener(d,y,!0):R!==void 0?c.addEventListener(d,y,{passive:R}):c.addEventListener(d,y,!1)}function Uh(c,d,y,A,R){var O=A;if((d&1)===0&&(d&2)===0&&A!==null)e:for(;;){if(A===null)return;var W=A.tag;if(W===3||W===4){var re=A.stateNode.containerInfo;if(re===R||re.nodeType===8&&re.parentNode===R)break;if(W===4)for(W=A.return;W!==null;){var pe=W.tag;if((pe===3||pe===4)&&(pe=W.stateNode.containerInfo,pe===R||pe.nodeType===8&&pe.parentNode===R))return;W=W.return}for(;re!==null;){if(W=La(re),W===null)return;if(pe=W.tag,pe===5||pe===6){A=O=W;continue e}re=re.parentNode}}A=A.return}vi(function(){var Be=O,rt=ce(y),ot=[];e:{var nt=qp.get(c);if(nt!==void 0){var Bt=Ru,zt=c;switch(c){case"keypress":if(al(y)===0)break e;case"keydown":case"keyup":Bt=Ch;break;case"focusin":zt="focus",Bt=Eh;break;case"focusout":zt="blur",Bt=Eh;break;case"beforeblur":case"afterblur":Bt=Eh;break;case"click":if(y.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Bt=zp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Bt=Ta;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Bt=Go;break;case Bu:case Lu:case Kp:Bt=B0;break;case Jp:Bt=dl;break;case"scroll":Bt=hc;break;case"wheel":Bt=jp;break;case"copy":case"cut":case"paste":Bt=Hp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Bt=us}var Vt=(d&4)!==0,Ki=!Vt&&c==="scroll",Ae=Vt?nt!==null?nt+"Capture":null:nt;Vt=[];for(var ye=Be,Me;ye!==null;){Me=ye;var dt=Me.stateNode;if(Me.tag===5&&dt!==null&&(Me=dt,Ae!==null&&(dt=Si(ye,Ae),dt!=null&&Vt.push(Ac(ye,dt,Me)))),Ki)break;ye=ye.return}0<Vt.length&&(nt=new Bt(nt,zt,null,y,rt),ot.push({event:nt,listeners:Vt}))}}if((d&7)===0){e:{if(nt=c==="mouseover"||c==="pointerover",Bt=c==="mouseout"||c==="pointerout",nt&&y!==st&&(zt=y.relatedTarget||y.fromElement)&&(La(zt)||zt[fs]))break e;if((Bt||nt)&&(nt=rt.window===rt?rt:(nt=rt.ownerDocument)?nt.defaultView||nt.parentWindow:window,Bt?(zt=y.relatedTarget||y.toElement,Bt=Be,zt=zt?La(zt):null,zt!==null&&(Ki=$(zt),zt!==Ki||zt.tag!==5&&zt.tag!==6)&&(zt=null)):(Bt=null,zt=Be),Bt!==zt)){if(Vt=zp,dt="onMouseLeave",Ae="onMouseEnter",ye="mouse",(c==="pointerout"||c==="pointerover")&&(Vt=us,dt="onPointerLeave",Ae="onPointerEnter",ye="pointer"),Ki=Bt==null?nt:Ii(Bt),Me=zt==null?nt:Ii(zt),nt=new Vt(dt,ye+"leave",Bt,y,rt),nt.target=Ki,nt.relatedTarget=Me,dt=null,La(rt)===Be&&(Vt=new Vt(Ae,ye+"enter",zt,y,rt),Vt.target=Me,Vt.relatedTarget=Ki,dt=Vt),Ki=dt,Bt&&zt)t:{for(Vt=Bt,Ae=zt,ye=0,Me=Vt;Me;Me=vl(Me))ye++;for(Me=0,dt=Ae;dt;dt=vl(dt))Me++;for(;0<ye-Me;)Vt=vl(Vt),ye--;for(;0<Me-ye;)Ae=vl(Ae),Me--;for(;ye--;){if(Vt===Ae||Ae!==null&&Vt===Ae.alternate)break t;Vt=vl(Vt),Ae=vl(Ae)}Vt=null}else Vt=null;Bt!==null&&G0(ot,nt,Bt,Vt,!1),zt!==null&&Ki!==null&&G0(ot,Ki,zt,Vt,!0)}}e:{if(nt=Be?Ii(Be):window,Bt=nt.nodeName&&nt.nodeName.toLowerCase(),Bt==="select"||Bt==="input"&&nt.type==="file")var Wt=z0;else if(Rh(nt))if(xc)Wt=yi;else{Wt=H0;var Zt=_c}else(Bt=nt.nodeName)&&Bt.toLowerCase()==="input"&&(nt.type==="checkbox"||nt.type==="radio")&&(Wt=Yp);if(Wt&&(Wt=Wt(c,Be))){vc(ot,Wt,y,rt);break e}Zt&&Zt(c,nt,Be),c==="focusout"&&(Zt=nt._wrapperState)&&Zt.controlled&&nt.type==="number"&&_t(nt,"number",nt.value)}switch(Zt=Be?Ii(Be):window,c){case"focusin":(Rh(Zt)||Zt.contentEditable==="true")&&(go=Zt,gl=Be,Du=null);break;case"focusout":Du=gl=go=null;break;case"mousedown":nr=!0;break;case"contextmenu":case"mouseup":case"dragend":nr=!1,Bh(ot,y,rt);break;case"selectionchange":if(Dh)break;case"keydown":case"keyup":Bh(ot,y,rt)}var Qt;if(Or)e:{switch(c){case"compositionstart":var cn="onCompositionStart";break e;case"compositionend":cn="onCompositionEnd";break e;case"compositionupdate":cn="onCompositionUpdate";break e}cn=void 0}else Pa?Xp(c,y)&&(cn="onCompositionEnd"):c==="keydown"&&y.keyCode===229&&(cn="onCompositionStart");cn&&(mc&&y.locale!=="ko"&&(Pa||cn!=="onCompositionStart"?cn==="onCompositionEnd"&&Pa&&(Qt=Tu()):(qs=rt,Up="value"in qs?qs.value:qs.textContent,Pa=!0)),Zt=zh(Be,cn),0<Zt.length&&(cn=new Vp(cn,c,null,y,rt),ot.push({event:cn,listeners:Zt}),Qt?cn.data=Qt:(Qt=Th(y),Qt!==null&&(cn.data=Qt)))),(Qt=hi?k0(c,y):Pu(c,y))&&(Be=zh(Be,"onBeforeInput"),0<Be.length&&(rt=new Vp("onBeforeInput","beforeinput",null,y,rt),ot.push({event:rt,listeners:Be}),rt.data=Qt))}Sc(ot,d)})}function Ac(c,d,y){return{instance:c,listener:d,currentTarget:y}}function zh(c,d){for(var y=d+"Capture",A=[];c!==null;){var R=c,O=R.stateNode;R.tag===5&&O!==null&&(R=O,O=Si(c,y),O!=null&&A.unshift(Ac(c,O,R)),O=Si(c,d),O!=null&&A.push(Ac(c,O,R))),c=c.return}return A}function vl(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5);return c||null}function G0(c,d,y,A,R){for(var O=d._reactName,W=[];y!==null&&y!==A;){var re=y,pe=re.alternate,Be=re.stateNode;if(pe!==null&&pe===A)break;re.tag===5&&Be!==null&&(re=Be,R?(pe=Si(y,O),pe!=null&&W.unshift(Ac(y,pe,re))):R||(pe=Si(y,O),pe!=null&&W.push(Ac(y,pe,re)))),y=y.return}W.length!==0&&c.push({event:d,listeners:W})}var p1=/\r\n?/g,j0=/\u0000|\uFFFD/g;function Qp(c){return(typeof c=="string"?c:""+c).replace(p1,`
`).replace(j0,"")}function ku(c,d,y){if(d=Qp(d),Qp(c)!==d&&y)throw Error(t(425))}function Uu(){}var bc=null,em=null;function tm(c,d){return c==="textarea"||c==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var nm=typeof setTimeout=="function"?setTimeout:void 0,im=typeof clearTimeout=="function"?clearTimeout:void 0,Hh=typeof Promise=="function"?Promise:void 0,m1=typeof queueMicrotask=="function"?queueMicrotask:typeof Hh<"u"?function(c){return Hh.resolve(null).then(c).catch(W0)}:nm;function W0(c){setTimeout(function(){throw c})}function Vh(c,d){var y=d,A=0;do{var R=y.nextSibling;if(c.removeChild(y),R&&R.nodeType===8)if(y=R.data,y==="/$"){if(A===0){c.removeChild(R),Cu(d);return}A--}else y!=="$"&&y!=="$?"&&y!=="$!"||A++;y=R}while(y);Cu(d)}function Xo(c){for(;c!=null;c=c.nextSibling){var d=c.nodeType;if(d===1||d===3)break;if(d===8){if(d=c.data,d==="$"||d==="$!"||d==="$?")break;if(d==="/$")return null}}return c}function rm(c){c=c.previousSibling;for(var d=0;c;){if(c.nodeType===8){var y=c.data;if(y==="$"||y==="$!"||y==="$?"){if(d===0)return c;d--}else y==="/$"&&d++}c=c.previousSibling}return null}var yl=Math.random().toString(36).slice(2),Yi="__reactFiber$"+yl,Mc="__reactProps$"+yl,fs="__reactContainer$"+yl,xl="__reactEvents$"+yl,Gh="__reactListeners$"+yl,jh="__reactHandles$"+yl;function La(c){var d=c[Yi];if(d)return d;for(var y=c.parentNode;y;){if(d=y[fs]||y[Yi]){if(y=d.alternate,d.child!==null||y!==null&&y.child!==null)for(c=rm(c);c!==null;){if(y=c[Yi])return y;c=rm(c)}return d}c=y,y=c.parentNode}return null}function Yo(c){return c=c[Yi]||c[fs],!c||c.tag!==5&&c.tag!==6&&c.tag!==13&&c.tag!==3?null:c}function Ii(c){if(c.tag===5||c.tag===6)return c.stateNode;throw Error(t(33))}function Wh(c){return c[Mc]||null}var sm=[],ir=-1;function Ei(c){return{current:c}}function ii(c){0>ir||(c.current=sm[ir],sm[ir]=null,ir--)}function Zn(c,d){ir++,sm[ir]=c.current,c.current=d}var Ko={},fr=Ei(Ko),Nr=Ei(!1),Jo=Ko;function _l(c,d){var y=c.type.contextTypes;if(!y)return Ko;var A=c.stateNode;if(A&&A.__reactInternalMemoizedUnmaskedChildContext===d)return A.__reactInternalMemoizedMaskedChildContext;var R={},O;for(O in y)R[O]=d[O];return A&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=d,c.__reactInternalMemoizedMaskedChildContext=R),R}function Ar(c){return c=c.childContextTypes,c!=null}function zu(){ii(Nr),ii(fr)}function om(c,d,y){if(fr.current!==Ko)throw Error(t(168));Zn(fr,d),Zn(Nr,y)}function Hu(c,d,y){var A=c.stateNode;if(d=d.childContextTypes,typeof A.getChildContext!="function")return y;A=A.getChildContext();for(var R in A)if(!(R in d))throw Error(t(108,Ge(c)||"Unknown",R));return se({},y,A)}function wl(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||Ko,Jo=fr.current,Zn(fr,c),Zn(Nr,Nr.current),!0}function am(c,d,y){var A=c.stateNode;if(!A)throw Error(t(169));y?(c=Hu(c,d,Jo),A.__reactInternalMemoizedMergedChildContext=c,ii(Nr),ii(fr),Zn(fr,c)):ii(Nr),Zn(Nr,y)}var to=null,Vu=!1,$h=!1;function Gu(c){to===null?to=[c]:to.push(c)}function $0(c){Vu=!0,Gu(c)}function yo(){if(!$h&&to!==null){$h=!0;var c=0,d=Rn;try{var y=to;for(Rn=1;c<y.length;c++){var A=y[c];do A=A(!0);while(A!==null)}to=null,Vu=!1}catch(R){throw to!==null&&(to=to.slice(c+1)),it(Ce,yo),R}finally{Rn=d,$h=!1}}return null}var Sl=[],Kr=0,Xh=null,Yh=0,Fr=[],rr=0,El=null,pt=1,Fs="";function qo(c,d){Sl[Kr++]=Yh,Sl[Kr++]=Xh,Xh=c,Yh=d}function lm(c,d,y){Fr[rr++]=pt,Fr[rr++]=Fs,Fr[rr++]=El,El=c;var A=pt;c=Fs;var R=32-At(A)-1;A&=~(1<<R),y+=1;var O=32-At(d)+R;if(30<O){var W=R-R%5;O=(A&(1<<W)-1).toString(32),A>>=W,R-=W,pt=1<<32-At(d)+R|y<<R|A,Fs=O+c}else pt=1<<O|y<<R|A,Fs=c}function cm(c){c.return!==null&&(qo(c,1),lm(c,1,0))}function Zo(c){for(;c===Xh;)Xh=Sl[--Kr],Sl[Kr]=null,Yh=Sl[--Kr],Sl[Kr]=null;for(;c===El;)El=Fr[--rr],Fr[rr]=null,Fs=Fr[--rr],Fr[rr]=null,pt=Fr[--rr],Fr[rr]=null}var pr=null,kr=null,li=!1,ks=null;function um(c,d){var y=Eo(5,null,null,0);y.elementType="DELETED",y.stateNode=d,y.return=c,d=c.deletions,d===null?(c.deletions=[y],c.flags|=16):d.push(y)}function dm(c,d){switch(c.tag){case 5:var y=c.type;return d=d.nodeType!==1||y.toLowerCase()!==d.nodeName.toLowerCase()?null:d,d!==null?(c.stateNode=d,pr=c,kr=Xo(d.firstChild),!0):!1;case 6:return d=c.pendingProps===""||d.nodeType!==3?null:d,d!==null?(c.stateNode=d,pr=c,kr=null,!0):!1;case 13:return d=d.nodeType!==8?null:d,d!==null?(y=El!==null?{id:pt,overflow:Fs}:null,c.memoizedState={dehydrated:d,treeContext:y,retryLane:1073741824},y=Eo(18,null,null,0),y.stateNode=d,y.return=c,c.child=y,pr=c,kr=null,!0):!1;default:return!1}}function Kh(c){return(c.mode&1)!==0&&(c.flags&128)===0}function Jh(c){if(li){var d=kr;if(d){var y=d;if(!dm(c,d)){if(Kh(c))throw Error(t(418));d=Xo(y.nextSibling);var A=pr;d&&dm(c,d)?um(A,y):(c.flags=c.flags&-4097|2,li=!1,pr=c)}}else{if(Kh(c))throw Error(t(418));c.flags=c.flags&-4097|2,li=!1,pr=c}}}function qh(c){for(c=c.return;c!==null&&c.tag!==5&&c.tag!==3&&c.tag!==13;)c=c.return;pr=c}function Cc(c){if(c!==pr)return!1;if(!li)return qh(c),li=!0,!1;var d;if((d=c.tag!==3)&&!(d=c.tag!==5)&&(d=c.type,d=d!=="head"&&d!=="body"&&!tm(c.type,c.memoizedProps)),d&&(d=kr)){if(Kh(c))throw hm(),Error(t(418));for(;d;)um(c,d),d=Xo(d.nextSibling)}if(qh(c),c.tag===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(t(317));e:{for(c=c.nextSibling,d=0;c;){if(c.nodeType===8){var y=c.data;if(y==="/$"){if(d===0){kr=Xo(c.nextSibling);break e}d--}else y!=="$"&&y!=="$!"&&y!=="$?"||d++}c=c.nextSibling}kr=null}}else kr=pr?Xo(c.stateNode.nextSibling):null;return!0}function hm(){for(var c=kr;c;)c=Xo(c.nextSibling)}function Oa(){kr=pr=null,li=!1}function Tc(c){ks===null?ks=[c]:ks.push(c)}var g1=T.ReactCurrentBatchConfig;function ju(c,d,y){if(c=y.ref,c!==null&&typeof c!="function"&&typeof c!="object"){if(y._owner){if(y=y._owner,y){if(y.tag!==1)throw Error(t(309));var A=y.stateNode}if(!A)throw Error(t(147,c));var R=A,O=""+c;return d!==null&&d.ref!==null&&typeof d.ref=="function"&&d.ref._stringRef===O?d.ref:(d=function(W){var re=R.refs;W===null?delete re[O]:re[O]=W},d._stringRef=O,d)}if(typeof c!="string")throw Error(t(284));if(!y._owner)throw Error(t(290,c))}return c}function Wu(c,d){throw c=Object.prototype.toString.call(d),Error(t(31,c==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":c))}function fm(c){var d=c._init;return d(c._payload)}function pm(c){function d(Ae,ye){if(c){var Me=Ae.deletions;Me===null?(Ae.deletions=[ye],Ae.flags|=16):Me.push(ye)}}function y(Ae,ye){if(!c)return null;for(;ye!==null;)d(Ae,ye),ye=ye.sibling;return null}function A(Ae,ye){for(Ae=new Map;ye!==null;)ye.key!==null?Ae.set(ye.key,ye):Ae.set(ye.index,ye),ye=ye.sibling;return Ae}function R(Ae,ye){return Ae=Uc(Ae,ye),Ae.index=0,Ae.sibling=null,Ae}function O(Ae,ye,Me){return Ae.index=Me,c?(Me=Ae.alternate,Me!==null?(Me=Me.index,Me<ye?(Ae.flags|=2,ye):Me):(Ae.flags|=2,ye)):(Ae.flags|=1048576,ye)}function W(Ae){return c&&Ae.alternate===null&&(Ae.flags|=2),Ae}function re(Ae,ye,Me,dt){return ye===null||ye.tag!==6?(ye=O1(Me,Ae.mode,dt),ye.return=Ae,ye):(ye=R(ye,Me),ye.return=Ae,ye)}function pe(Ae,ye,Me,dt){var Wt=Me.type;return Wt===U?rt(Ae,ye,Me.props.children,dt,Me.key):ye!==null&&(ye.elementType===Wt||typeof Wt=="object"&&Wt!==null&&Wt.$$typeof===fe&&fm(Wt)===ye.type)?(dt=R(ye,Me.props),dt.ref=ju(Ae,ye,Me),dt.return=Ae,dt):(dt=mv(Me.type,Me.key,Me.props,null,Ae.mode,dt),dt.ref=ju(Ae,ye,Me),dt.return=Ae,dt)}function Be(Ae,ye,Me,dt){return ye===null||ye.tag!==4||ye.stateNode.containerInfo!==Me.containerInfo||ye.stateNode.implementation!==Me.implementation?(ye=N1(Me,Ae.mode,dt),ye.return=Ae,ye):(ye=R(ye,Me.children||[]),ye.return=Ae,ye)}function rt(Ae,ye,Me,dt,Wt){return ye===null||ye.tag!==7?(ye=ld(Me,Ae.mode,dt,Wt),ye.return=Ae,ye):(ye=R(ye,Me),ye.return=Ae,ye)}function ot(Ae,ye,Me){if(typeof ye=="string"&&ye!==""||typeof ye=="number")return ye=O1(""+ye,Ae.mode,Me),ye.return=Ae,ye;if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case L:return Me=mv(ye.type,ye.key,ye.props,null,Ae.mode,Me),Me.ref=ju(Ae,null,ye),Me.return=Ae,Me;case D:return ye=N1(ye,Ae.mode,Me),ye.return=Ae,ye;case fe:var dt=ye._init;return ot(Ae,dt(ye._payload),Me)}if(Ye(ye)||de(ye))return ye=ld(ye,Ae.mode,Me,null),ye.return=Ae,ye;Wu(Ae,ye)}return null}function nt(Ae,ye,Me,dt){var Wt=ye!==null?ye.key:null;if(typeof Me=="string"&&Me!==""||typeof Me=="number")return Wt!==null?null:re(Ae,ye,""+Me,dt);if(typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case L:return Me.key===Wt?pe(Ae,ye,Me,dt):null;case D:return Me.key===Wt?Be(Ae,ye,Me,dt):null;case fe:return Wt=Me._init,nt(Ae,ye,Wt(Me._payload),dt)}if(Ye(Me)||de(Me))return Wt!==null?null:rt(Ae,ye,Me,dt,null);Wu(Ae,Me)}return null}function Bt(Ae,ye,Me,dt,Wt){if(typeof dt=="string"&&dt!==""||typeof dt=="number")return Ae=Ae.get(Me)||null,re(ye,Ae,""+dt,Wt);if(typeof dt=="object"&&dt!==null){switch(dt.$$typeof){case L:return Ae=Ae.get(dt.key===null?Me:dt.key)||null,pe(ye,Ae,dt,Wt);case D:return Ae=Ae.get(dt.key===null?Me:dt.key)||null,Be(ye,Ae,dt,Wt);case fe:var Zt=dt._init;return Bt(Ae,ye,Me,Zt(dt._payload),Wt)}if(Ye(dt)||de(dt))return Ae=Ae.get(Me)||null,rt(ye,Ae,dt,Wt,null);Wu(ye,dt)}return null}function zt(Ae,ye,Me,dt){for(var Wt=null,Zt=null,Qt=ye,cn=ye=0,Tr=null;Qt!==null&&cn<Me.length;cn++){Qt.index>cn?(Tr=Qt,Qt=null):Tr=Qt.sibling;var Wn=nt(Ae,Qt,Me[cn],dt);if(Wn===null){Qt===null&&(Qt=Tr);break}c&&Qt&&Wn.alternate===null&&d(Ae,Qt),ye=O(Wn,ye,cn),Zt===null?Wt=Wn:Zt.sibling=Wn,Zt=Wn,Qt=Tr}if(cn===Me.length)return y(Ae,Qt),li&&qo(Ae,cn),Wt;if(Qt===null){for(;cn<Me.length;cn++)Qt=ot(Ae,Me[cn],dt),Qt!==null&&(ye=O(Qt,ye,cn),Zt===null?Wt=Qt:Zt.sibling=Qt,Zt=Qt);return li&&qo(Ae,cn),Wt}for(Qt=A(Ae,Qt);cn<Me.length;cn++)Tr=Bt(Qt,Ae,cn,Me[cn],dt),Tr!==null&&(c&&Tr.alternate!==null&&Qt.delete(Tr.key===null?cn:Tr.key),ye=O(Tr,ye,cn),Zt===null?Wt=Tr:Zt.sibling=Tr,Zt=Tr);return c&&Qt.forEach(function(zc){return d(Ae,zc)}),li&&qo(Ae,cn),Wt}function Vt(Ae,ye,Me,dt){var Wt=de(Me);if(typeof Wt!="function")throw Error(t(150));if(Me=Wt.call(Me),Me==null)throw Error(t(151));for(var Zt=Wt=null,Qt=ye,cn=ye=0,Tr=null,Wn=Me.next();Qt!==null&&!Wn.done;cn++,Wn=Me.next()){Qt.index>cn?(Tr=Qt,Qt=null):Tr=Qt.sibling;var zc=nt(Ae,Qt,Wn.value,dt);if(zc===null){Qt===null&&(Qt=Tr);break}c&&Qt&&zc.alternate===null&&d(Ae,Qt),ye=O(zc,ye,cn),Zt===null?Wt=zc:Zt.sibling=zc,Zt=zc,Qt=Tr}if(Wn.done)return y(Ae,Qt),li&&qo(Ae,cn),Wt;if(Qt===null){for(;!Wn.done;cn++,Wn=Me.next())Wn=ot(Ae,Wn.value,dt),Wn!==null&&(ye=O(Wn,ye,cn),Zt===null?Wt=Wn:Zt.sibling=Wn,Zt=Wn);return li&&qo(Ae,cn),Wt}for(Qt=A(Ae,Qt);!Wn.done;cn++,Wn=Me.next())Wn=Bt(Qt,Ae,cn,Wn.value,dt),Wn!==null&&(c&&Wn.alternate!==null&&Qt.delete(Wn.key===null?cn:Wn.key),ye=O(Wn,ye,cn),Zt===null?Wt=Wn:Zt.sibling=Wn,Zt=Wn);return c&&Qt.forEach(function(ik){return d(Ae,ik)}),li&&qo(Ae,cn),Wt}function Ki(Ae,ye,Me,dt){if(typeof Me=="object"&&Me!==null&&Me.type===U&&Me.key===null&&(Me=Me.props.children),typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case L:e:{for(var Wt=Me.key,Zt=ye;Zt!==null;){if(Zt.key===Wt){if(Wt=Me.type,Wt===U){if(Zt.tag===7){y(Ae,Zt.sibling),ye=R(Zt,Me.props.children),ye.return=Ae,Ae=ye;break e}}else if(Zt.elementType===Wt||typeof Wt=="object"&&Wt!==null&&Wt.$$typeof===fe&&fm(Wt)===Zt.type){y(Ae,Zt.sibling),ye=R(Zt,Me.props),ye.ref=ju(Ae,Zt,Me),ye.return=Ae,Ae=ye;break e}y(Ae,Zt);break}else d(Ae,Zt);Zt=Zt.sibling}Me.type===U?(ye=ld(Me.props.children,Ae.mode,dt,Me.key),ye.return=Ae,Ae=ye):(dt=mv(Me.type,Me.key,Me.props,null,Ae.mode,dt),dt.ref=ju(Ae,ye,Me),dt.return=Ae,Ae=dt)}return W(Ae);case D:e:{for(Zt=Me.key;ye!==null;){if(ye.key===Zt)if(ye.tag===4&&ye.stateNode.containerInfo===Me.containerInfo&&ye.stateNode.implementation===Me.implementation){y(Ae,ye.sibling),ye=R(ye,Me.children||[]),ye.return=Ae,Ae=ye;break e}else{y(Ae,ye);break}else d(Ae,ye);ye=ye.sibling}ye=N1(Me,Ae.mode,dt),ye.return=Ae,Ae=ye}return W(Ae);case fe:return Zt=Me._init,Ki(Ae,ye,Zt(Me._payload),dt)}if(Ye(Me))return zt(Ae,ye,Me,dt);if(de(Me))return Vt(Ae,ye,Me,dt);Wu(Ae,Me)}return typeof Me=="string"&&Me!==""||typeof Me=="number"?(Me=""+Me,ye!==null&&ye.tag===6?(y(Ae,ye.sibling),ye=R(ye,Me),ye.return=Ae,Ae=ye):(y(Ae,ye),ye=O1(Me,Ae.mode,dt),ye.return=Ae,Ae=ye),W(Ae)):y(Ae,ye)}return Ki}var Al=pm(!0),$u=pm(!1),bl=Ei(null),Ml=null,Qo=null,Rc=null;function Cl(){Rc=Qo=Ml=null}function Xu(c){var d=bl.current;ii(bl),c._currentValue=d}function Yu(c,d,y){for(;c!==null;){var A=c.alternate;if((c.childLanes&d)!==d?(c.childLanes|=d,A!==null&&(A.childLanes|=d)):A!==null&&(A.childLanes&d)!==d&&(A.childLanes|=d),c===y)break;c=c.return}}function Na(c,d){Ml=c,Rc=Qo=null,c=c.dependencies,c!==null&&c.firstContext!==null&&((c.lanes&d)!==0&&(En=!0),c.firstContext=null)}function ps(c){var d=c._currentValue;if(Rc!==c)if(c={context:c,memoizedValue:d,next:null},Qo===null){if(Ml===null)throw Error(t(308));Qo=c,Ml.dependencies={lanes:0,firstContext:c}}else Qo=Qo.next=c;return d}var ea=null;function mm(c){ea===null?ea=[c]:ea.push(c)}function Ku(c,d,y,A){var R=d.interleaved;return R===null?(y.next=y,mm(d)):(y.next=R.next,R.next=y),d.interleaved=y,no(c,A)}function no(c,d){c.lanes|=d;var y=c.alternate;for(y!==null&&(y.lanes|=d),y=c,c=c.return;c!==null;)c.childLanes|=d,y=c.alternate,y!==null&&(y.childLanes|=d),y=c,c=c.return;return y.tag===3?y.stateNode:null}var Yn=!1;function _n(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Di(c,d){c=c.updateQueue,d.updateQueue===c&&(d.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function Kn(c,d){return{eventTime:c,lane:d,tag:0,payload:null,callback:null,next:null}}function fi(c,d,y){var A=c.updateQueue;if(A===null)return null;if(A=A.shared,(zn&2)!==0){var R=A.pending;return R===null?d.next=d:(d.next=R.next,R.next=d),A.pending=d,no(c,y)}return R=A.interleaved,R===null?(d.next=d,mm(A)):(d.next=R.next,R.next=d),A.interleaved=d,no(c,y)}function br(c,d,y){if(d=d.updateQueue,d!==null&&(d=d.shared,(y&4194240)!==0)){var A=d.lanes;A&=c.pendingLanes,y|=A,d.lanes=y,Pi(c,y)}}function Tl(c,d){var y=c.updateQueue,A=c.alternate;if(A!==null&&(A=A.updateQueue,y===A)){var R=null,O=null;if(y=y.firstBaseUpdate,y!==null){do{var W={eventTime:y.eventTime,lane:y.lane,tag:y.tag,payload:y.payload,callback:y.callback,next:null};O===null?R=O=W:O=O.next=W,y=y.next}while(y!==null);O===null?R=O=d:O=O.next=d}else R=O=d;y={baseState:A.baseState,firstBaseUpdate:R,lastBaseUpdate:O,shared:A.shared,effects:A.effects},c.updateQueue=y;return}c=y.lastBaseUpdate,c===null?y.firstBaseUpdate=d:c.next=d,y.lastBaseUpdate=d}function Ai(c,d,y,A){var R=c.updateQueue;Yn=!1;var O=R.firstBaseUpdate,W=R.lastBaseUpdate,re=R.shared.pending;if(re!==null){R.shared.pending=null;var pe=re,Be=pe.next;pe.next=null,W===null?O=Be:W.next=Be,W=pe;var rt=c.alternate;rt!==null&&(rt=rt.updateQueue,re=rt.lastBaseUpdate,re!==W&&(re===null?rt.firstBaseUpdate=Be:re.next=Be,rt.lastBaseUpdate=pe))}if(O!==null){var ot=R.baseState;W=0,rt=Be=pe=null,re=O;do{var nt=re.lane,Bt=re.eventTime;if((A&nt)===nt){rt!==null&&(rt=rt.next={eventTime:Bt,lane:0,tag:re.tag,payload:re.payload,callback:re.callback,next:null});e:{var zt=c,Vt=re;switch(nt=d,Bt=y,Vt.tag){case 1:if(zt=Vt.payload,typeof zt=="function"){ot=zt.call(Bt,ot,nt);break e}ot=zt;break e;case 3:zt.flags=zt.flags&-65537|128;case 0:if(zt=Vt.payload,nt=typeof zt=="function"?zt.call(Bt,ot,nt):zt,nt==null)break e;ot=se({},ot,nt);break e;case 2:Yn=!0}}re.callback!==null&&re.lane!==0&&(c.flags|=64,nt=R.effects,nt===null?R.effects=[re]:nt.push(re))}else Bt={eventTime:Bt,lane:nt,tag:re.tag,payload:re.payload,callback:re.callback,next:null},rt===null?(Be=rt=Bt,pe=ot):rt=rt.next=Bt,W|=nt;if(re=re.next,re===null){if(re=R.shared.pending,re===null)break;nt=re,re=nt.next,nt.next=null,R.lastBaseUpdate=nt,R.shared.pending=null}}while(!0);if(rt===null&&(pe=ot),R.baseState=pe,R.firstBaseUpdate=Be,R.lastBaseUpdate=rt,d=R.shared.interleaved,d!==null){R=d;do W|=R.lane,R=R.next;while(R!==d)}else O===null&&(R.shared.lanes=0);rd|=W,c.lanes=W,c.memoizedState=ot}}function Pc(c,d,y){if(c=d.effects,d.effects=null,c!==null)for(d=0;d<c.length;d++){var A=c[d],R=A.callback;if(R!==null){if(A.callback=null,A=y,typeof R!="function")throw Error(t(191,R));R.call(A)}}}var xo={},ms=Ei(xo),Rl=Ei(xo),ta=Ei(xo);function Ui(c){if(c===xo)throw Error(t(174));return c}function Ju(c,d){switch(Zn(ta,d),Zn(Rl,c),Zn(ms,xo),c=d.nodeType,c){case 9:case 11:d=(d=d.documentElement)?d.namespaceURI:mt(null,"");break;default:c=c===8?d.parentNode:d,d=c.namespaceURI||null,c=c.tagName,d=mt(d,c)}ii(ms),Zn(ms,d)}function Fa(){ii(ms),ii(Rl),ii(ta)}function Pl(c){Ui(ta.current);var d=Ui(ms.current),y=mt(d,c.type);d!==y&&(Zn(Rl,c),Zn(ms,y))}function Ic(c){Rl.current===c&&(ii(ms),ii(Rl))}var ci=Ei(0);function io(c){for(var d=c;d!==null;){if(d.tag===13){var y=d.memoizedState;if(y!==null&&(y=y.dehydrated,y===null||y.data==="$?"||y.data==="$!"))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===c)break;for(;d.sibling===null;){if(d.return===null||d.return===c)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var Dc=[];function _o(){for(var c=0;c<Dc.length;c++)Dc[c]._workInProgressVersionPrimary=null;Dc.length=0}var Il=T.ReactCurrentDispatcher,Dl=T.ReactCurrentBatchConfig,na=0,ri=null,bi=null,Nn=null,ro=!1,Mr=!1,ka=0,Jr=0;function mr(){throw Error(t(321))}function qu(c,d){if(d===null)return!1;for(var y=0;y<d.length&&y<c.length;y++)if(!ds(c[y],d[y]))return!1;return!0}function Zu(c,d,y,A,R,O){if(na=O,ri=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,Il.current=c===null||c.memoizedState===null?Q0:ev,c=y(A,R),Mr){O=0;do{if(Mr=!1,ka=0,25<=O)throw Error(t(301));O+=1,Nn=bi=null,d.updateQueue=null,Il.current=tv,c=y(A,R)}while(Mr)}if(Il.current=sf,d=bi!==null&&bi.next!==null,na=0,Nn=bi=ri=null,ro=!1,d)throw Error(t(300));return c}function gm(){var c=ka!==0;return ka=0,c}function gr(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nn===null?ri.memoizedState=Nn=c:Nn=Nn.next=c,Nn}function gs(){if(bi===null){var c=ri.alternate;c=c!==null?c.memoizedState:null}else c=bi.next;var d=Nn===null?ri.memoizedState:Nn.next;if(d!==null)Nn=d,bi=c;else{if(c===null)throw Error(t(310));bi=c,c={memoizedState:bi.memoizedState,baseState:bi.baseState,baseQueue:bi.baseQueue,queue:bi.queue,next:null},Nn===null?ri.memoizedState=Nn=c:Nn=Nn.next=c}return Nn}function Bc(c,d){return typeof d=="function"?d(c):d}function Qu(c){var d=gs(),y=d.queue;if(y===null)throw Error(t(311));y.lastRenderedReducer=c;var A=bi,R=A.baseQueue,O=y.pending;if(O!==null){if(R!==null){var W=R.next;R.next=O.next,O.next=W}A.baseQueue=R=O,y.pending=null}if(R!==null){O=R.next,A=A.baseState;var re=W=null,pe=null,Be=O;do{var rt=Be.lane;if((na&rt)===rt)pe!==null&&(pe=pe.next={lane:0,action:Be.action,hasEagerState:Be.hasEagerState,eagerState:Be.eagerState,next:null}),A=Be.hasEagerState?Be.eagerState:c(A,Be.action);else{var ot={lane:rt,action:Be.action,hasEagerState:Be.hasEagerState,eagerState:Be.eagerState,next:null};pe===null?(re=pe=ot,W=A):pe=pe.next=ot,ri.lanes|=rt,rd|=rt}Be=Be.next}while(Be!==null&&Be!==O);pe===null?W=A:pe.next=re,ds(A,d.memoizedState)||(En=!0),d.memoizedState=A,d.baseState=W,d.baseQueue=pe,y.lastRenderedState=A}if(c=y.interleaved,c!==null){R=c;do O=R.lane,ri.lanes|=O,rd|=O,R=R.next;while(R!==c)}else R===null&&(y.lanes=0);return[d.memoizedState,y.dispatch]}function ia(c){var d=gs(),y=d.queue;if(y===null)throw Error(t(311));y.lastRenderedReducer=c;var A=y.dispatch,R=y.pending,O=d.memoizedState;if(R!==null){y.pending=null;var W=R=R.next;do O=c(O,W.action),W=W.next;while(W!==R);ds(O,d.memoizedState)||(En=!0),d.memoizedState=O,d.baseQueue===null&&(d.baseState=O),y.lastRenderedState=O}return[O,A]}function vm(){}function ym(c,d){var y=ri,A=gs(),R=d(),O=!ds(A.memoizedState,R);if(O&&(A.memoizedState=R,En=!0),A=A.queue,wm(X0.bind(null,y,A,c),[c]),A.getSnapshot!==d||O||Nn!==null&&Nn.memoizedState.tag&1){if(y.flags|=2048,so(9,ed.bind(null,y,A,R,d),void 0,null),Cr===null)throw Error(t(349));(na&30)!==0||Zh(y,d,R)}return R}function Zh(c,d,y){c.flags|=16384,c={getSnapshot:d,value:y},d=ri.updateQueue,d===null?(d={lastEffect:null,stores:null},ri.updateQueue=d,d.stores=[c]):(y=d.stores,y===null?d.stores=[c]:y.push(c))}function ed(c,d,y,A){d.value=y,d.getSnapshot=A,Y0(d)&&xm(c)}function X0(c,d,y){return y(function(){Y0(d)&&xm(c)})}function Y0(c){var d=c.getSnapshot;c=c.value;try{var y=d();return!ds(c,y)}catch{return!0}}function xm(c){var d=no(c,1);d!==null&&la(d,c,1,-1)}function _m(c){var d=gr();return typeof c=="function"&&(c=c()),d.memoizedState=d.baseState=c,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bc,lastRenderedState:c},d.queue=c,c=c.dispatch=Bl.bind(null,ri,c),[d.memoizedState,c]}function so(c,d,y,A){return c={tag:c,create:d,destroy:y,deps:A,next:null},d=ri.updateQueue,d===null?(d={lastEffect:null,stores:null},ri.updateQueue=d,d.lastEffect=c.next=c):(y=d.lastEffect,y===null?d.lastEffect=c.next=c:(A=y.next,y.next=c,c.next=A,d.lastEffect=c)),c}function K0(){return gs().memoizedState}function wo(c,d,y,A){var R=gr();ri.flags|=c,R.memoizedState=so(1|d,y,void 0,A===void 0?null:A)}function td(c,d,y,A){var R=gs();A=A===void 0?null:A;var O=void 0;if(bi!==null){var W=bi.memoizedState;if(O=W.destroy,A!==null&&qu(A,W.deps)){R.memoizedState=so(d,y,O,A);return}}ri.flags|=c,R.memoizedState=so(1|d,y,O,A)}function Ur(c,d){return wo(8390656,8,c,d)}function wm(c,d){return td(2048,8,c,d)}function Sm(c,d){return td(4,2,c,d)}function J0(c,d){return td(4,4,c,d)}function q0(c,d){if(typeof d=="function")return c=c(),d(c),function(){d(null)};if(d!=null)return c=c(),d.current=c,function(){d.current=null}}function Em(c,d,y){return y=y!=null?y.concat([c]):null,td(4,4,q0.bind(null,d,c),y)}function Qh(){}function Z0(c,d){var y=gs();d=d===void 0?null:d;var A=y.memoizedState;return A!==null&&d!==null&&qu(d,A[1])?A[0]:(y.memoizedState=[c,d],c)}function vs(c,d){var y=gs();d=d===void 0?null:d;var A=y.memoizedState;return A!==null&&d!==null&&qu(d,A[1])?A[0]:(c=c(),y.memoizedState=[c,d],c)}function ef(c,d,y){return(na&21)===0?(c.baseState&&(c.baseState=!1,En=!0),c.memoizedState=y):(ds(y,d)||(y=qt(),ri.lanes|=y,rd|=y,c.baseState=!0),d)}function v1(c,d){var y=Rn;Rn=y!==0&&4>y?y:4,c(!0);var A=Dl.transition;Dl.transition={};try{c(!1),d()}finally{Rn=y,Dl.transition=A}}function ra(){return gs().memoizedState}function tf(c,d,y){var A=Fc(c);if(y={lane:A,action:y,hasEagerState:!1,eagerState:null,next:null},nd(c))nf(d,y);else if(y=Ku(c,d,y,A),y!==null){var R=xs();la(y,c,A,R),rf(y,d,A)}}function Bl(c,d,y){var A=Fc(c),R={lane:A,action:y,hasEagerState:!1,eagerState:null,next:null};if(nd(c))nf(d,R);else{var O=c.alternate;if(c.lanes===0&&(O===null||O.lanes===0)&&(O=d.lastRenderedReducer,O!==null))try{var W=d.lastRenderedState,re=O(W,y);if(R.hasEagerState=!0,R.eagerState=re,ds(re,W)){var pe=d.interleaved;pe===null?(R.next=R,mm(d)):(R.next=pe.next,pe.next=R),d.interleaved=R;return}}catch{}finally{}y=Ku(c,d,R,A),y!==null&&(R=xs(),la(y,c,A,R),rf(y,d,A))}}function nd(c){var d=c.alternate;return c===ri||d!==null&&d===ri}function nf(c,d){Mr=ro=!0;var y=c.pending;y===null?d.next=d:(d.next=y.next,y.next=d),c.pending=d}function rf(c,d,y){if((y&4194240)!==0){var A=d.lanes;A&=c.pendingLanes,y|=A,d.lanes=y,Pi(c,y)}}var sf={readContext:ps,useCallback:mr,useContext:mr,useEffect:mr,useImperativeHandle:mr,useInsertionEffect:mr,useLayoutEffect:mr,useMemo:mr,useReducer:mr,useRef:mr,useState:mr,useDebugValue:mr,useDeferredValue:mr,useTransition:mr,useMutableSource:mr,useSyncExternalStore:mr,useId:mr,unstable_isNewReconciler:!1},Q0={readContext:ps,useCallback:function(c,d){return gr().memoizedState=[c,d===void 0?null:d],c},useContext:ps,useEffect:Ur,useImperativeHandle:function(c,d,y){return y=y!=null?y.concat([c]):null,wo(4194308,4,q0.bind(null,d,c),y)},useLayoutEffect:function(c,d){return wo(4194308,4,c,d)},useInsertionEffect:function(c,d){return wo(4,2,c,d)},useMemo:function(c,d){var y=gr();return d=d===void 0?null:d,c=c(),y.memoizedState=[c,d],c},useReducer:function(c,d,y){var A=gr();return d=y!==void 0?y(d):d,A.memoizedState=A.baseState=d,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:d},A.queue=c,c=c.dispatch=tf.bind(null,ri,c),[A.memoizedState,c]},useRef:function(c){var d=gr();return c={current:c},d.memoizedState=c},useState:_m,useDebugValue:Qh,useDeferredValue:function(c){return gr().memoizedState=c},useTransition:function(){var c=_m(!1),d=c[0];return c=v1.bind(null,c[1]),gr().memoizedState=c,[d,c]},useMutableSource:function(){},useSyncExternalStore:function(c,d,y){var A=ri,R=gr();if(li){if(y===void 0)throw Error(t(407));y=y()}else{if(y=d(),Cr===null)throw Error(t(349));(na&30)!==0||Zh(A,d,y)}R.memoizedState=y;var O={value:y,getSnapshot:d};return R.queue=O,Ur(X0.bind(null,A,O,c),[c]),A.flags|=2048,so(9,ed.bind(null,A,O,y,d),void 0,null),y},useId:function(){var c=gr(),d=Cr.identifierPrefix;if(li){var y=Fs,A=pt;y=(A&~(1<<32-At(A)-1)).toString(32)+y,d=":"+d+"R"+y,y=ka++,0<y&&(d+="H"+y.toString(32)),d+=":"}else y=Jr++,d=":"+d+"r"+y.toString(32)+":";return c.memoizedState=d},unstable_isNewReconciler:!1},ev={readContext:ps,useCallback:Z0,useContext:ps,useEffect:wm,useImperativeHandle:Em,useInsertionEffect:Sm,useLayoutEffect:J0,useMemo:vs,useReducer:Qu,useRef:K0,useState:function(){return Qu(Bc)},useDebugValue:Qh,useDeferredValue:function(c){var d=gs();return ef(d,bi.memoizedState,c)},useTransition:function(){var c=Qu(Bc)[0],d=gs().memoizedState;return[c,d]},useMutableSource:vm,useSyncExternalStore:ym,useId:ra,unstable_isNewReconciler:!1},tv={readContext:ps,useCallback:Z0,useContext:ps,useEffect:wm,useImperativeHandle:Em,useInsertionEffect:Sm,useLayoutEffect:J0,useMemo:vs,useReducer:ia,useRef:K0,useState:function(){return ia(Bc)},useDebugValue:Qh,useDeferredValue:function(c){var d=gs();return bi===null?d.memoizedState=c:ef(d,bi.memoizedState,c)},useTransition:function(){var c=ia(Bc)[0],d=gs().memoizedState;return[c,d]},useMutableSource:vm,useSyncExternalStore:ym,useId:ra,unstable_isNewReconciler:!1};function Us(c,d){if(c&&c.defaultProps){d=se({},d),c=c.defaultProps;for(var y in c)d[y]===void 0&&(d[y]=c[y]);return d}return d}function id(c,d,y,A){d=c.memoizedState,y=y(A,d),y=y==null?d:se({},d,y),c.memoizedState=y,c.lanes===0&&(c.updateQueue.baseState=y)}var of={isMounted:function(c){return(c=c._reactInternals)?$(c)===c:!1},enqueueSetState:function(c,d,y){c=c._reactInternals;var A=xs(),R=Fc(c),O=Kn(A,R);O.payload=d,y!=null&&(O.callback=y),d=fi(c,O,R),d!==null&&(la(d,c,R,A),br(d,c,R))},enqueueReplaceState:function(c,d,y){c=c._reactInternals;var A=xs(),R=Fc(c),O=Kn(A,R);O.tag=1,O.payload=d,y!=null&&(O.callback=y),d=fi(c,O,R),d!==null&&(la(d,c,R,A),br(d,c,R))},enqueueForceUpdate:function(c,d){c=c._reactInternals;var y=xs(),A=Fc(c),R=Kn(y,A);R.tag=2,d!=null&&(R.callback=d),d=fi(c,R,A),d!==null&&(la(d,c,A,y),br(d,c,A))}};function nv(c,d,y,A,R,O,W){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(A,O,W):d.prototype&&d.prototype.isPureReactComponent?!pl(y,A)||!pl(R,O):!0}function p(c,d,y){var A=!1,R=Ko,O=d.contextType;return typeof O=="object"&&O!==null?O=ps(O):(R=Ar(d)?Jo:fr.current,A=d.contextTypes,O=(A=A!=null)?_l(c,R):Ko),d=new d(y,O),c.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=of,c.stateNode=d,d._reactInternals=c,A&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=R,c.__reactInternalMemoizedMaskedChildContext=O),d}function m(c,d,y,A){c=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(y,A),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(y,A),d.state!==c&&of.enqueueReplaceState(d,d.state,null)}function E(c,d,y,A){var R=c.stateNode;R.props=y,R.state=c.memoizedState,R.refs={},_n(c);var O=d.contextType;typeof O=="object"&&O!==null?R.context=ps(O):(O=Ar(d)?Jo:fr.current,R.context=_l(c,O)),R.state=c.memoizedState,O=d.getDerivedStateFromProps,typeof O=="function"&&(id(c,d,O,y),R.state=c.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof R.getSnapshotBeforeUpdate=="function"||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(d=R.state,typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount(),d!==R.state&&of.enqueueReplaceState(R,R.state,null),Ai(c,y,R,A),R.state=c.memoizedState),typeof R.componentDidMount=="function"&&(c.flags|=4194308)}function C(c,d){try{var y="",A=d;do y+=Ne(A),A=A.return;while(A);var R=y}catch(O){R=`
Error generating stack: `+O.message+`
`+O.stack}return{value:c,source:d,stack:R,digest:null}}function B(c,d,y){return{value:c,source:null,stack:y??null,digest:d??null}}function z(c,d){try{console.error(d.value)}catch(y){setTimeout(function(){throw y})}}var ee=typeof WeakMap=="function"?WeakMap:Map;function _e(c,d,y){y=Kn(-1,y),y.tag=3,y.payload={element:null};var A=d.value;return y.callback=function(){cv||(cv=!0,C1=A),z(c,d)},y}function je(c,d,y){y=Kn(-1,y),y.tag=3;var A=c.type.getDerivedStateFromError;if(typeof A=="function"){var R=d.value;y.payload=function(){return A(R)},y.callback=function(){z(c,d)}}var O=c.stateNode;return O!==null&&typeof O.componentDidCatch=="function"&&(y.callback=function(){z(c,d),typeof A!="function"&&(Oc===null?Oc=new Set([this]):Oc.add(this));var W=d.stack;this.componentDidCatch(d.value,{componentStack:W!==null?W:""})}),y}function ut(c,d,y){var A=c.pingCache;if(A===null){A=c.pingCache=new ee;var R=new Set;A.set(d,R)}else R=A.get(d),R===void 0&&(R=new Set,A.set(d,R));R.has(y)||(R.add(y),c=$F.bind(null,c,d,y),d.then(c,c))}function Ot(c){do{var d;if((d=c.tag===13)&&(d=c.memoizedState,d=d!==null?d.dehydrated!==null:!0),d)return c;c=c.return}while(c!==null);return null}function hn(c,d,y,A,R){return(c.mode&1)===0?(c===d?c.flags|=65536:(c.flags|=128,y.flags|=131072,y.flags&=-52805,y.tag===1&&(y.alternate===null?y.tag=17:(d=Kn(-1,1),d.tag=2,fi(y,d,1))),y.lanes|=1),c):(c.flags|=65536,c.lanes=R,c)}var Kt=T.ReactCurrentOwner,En=!1;function Pt(c,d,y,A){d.child=c===null?$u(d,null,y,A):Al(d,c.child,y,A)}function vr(c,d,y,A,R){y=y.render;var O=d.ref;return Na(d,R),A=Zu(c,d,y,A,O,R),y=gm(),c!==null&&!En?(d.updateQueue=c.updateQueue,d.flags&=-2053,c.lanes&=~R,Ll(c,d,R)):(li&&y&&cm(d),d.flags|=1,Pt(c,d,A,R),d.child)}function ys(c,d,y,A,R){if(c===null){var O=y.type;return typeof O=="function"&&!L1(O)&&O.defaultProps===void 0&&y.compare===null&&y.defaultProps===void 0?(d.tag=15,d.type=O,Te(c,d,O,A,R)):(c=mv(y.type,null,A,d,d.mode,R),c.ref=d.ref,c.return=d,d.child=c)}if(O=c.child,(c.lanes&R)===0){var W=O.memoizedProps;if(y=y.compare,y=y!==null?y:pl,y(W,A)&&c.ref===d.ref)return Ll(c,d,R)}return d.flags|=1,c=Uc(O,A),c.ref=d.ref,c.return=d,d.child=c}function Te(c,d,y,A,R){if(c!==null){var O=c.memoizedProps;if(pl(O,A)&&c.ref===d.ref)if(En=!1,d.pendingProps=A=O,(c.lanes&R)!==0)(c.flags&131072)!==0&&(En=!0);else return d.lanes=c.lanes,Ll(c,d,R)}return Ct(c,d,y,A,R)}function Ee(c,d,y){var A=d.pendingProps,R=A.children,O=c!==null?c.memoizedState:null;if(A.mode==="hidden")if((d.mode&1)===0)d.memoizedState={baseLanes:0,cachePool:null,transitions:null},Zn(lf,oo),oo|=y;else{if((y&1073741824)===0)return c=O!==null?O.baseLanes|y:y,d.lanes=d.childLanes=1073741824,d.memoizedState={baseLanes:c,cachePool:null,transitions:null},d.updateQueue=null,Zn(lf,oo),oo|=c,null;d.memoizedState={baseLanes:0,cachePool:null,transitions:null},A=O!==null?O.baseLanes:y,Zn(lf,oo),oo|=A}else O!==null?(A=O.baseLanes|y,d.memoizedState=null):A=y,Zn(lf,oo),oo|=A;return Pt(c,d,R,y),d.child}function Fe(c,d){var y=d.ref;(c===null&&y!==null||c!==null&&c.ref!==y)&&(d.flags|=512,d.flags|=2097152)}function Ct(c,d,y,A,R){var O=Ar(y)?Jo:fr.current;return O=_l(d,O),Na(d,R),y=Zu(c,d,y,A,O,R),A=gm(),c!==null&&!En?(d.updateQueue=c.updateQueue,d.flags&=-2053,c.lanes&=~R,Ll(c,d,R)):(li&&A&&cm(d),d.flags|=1,Pt(c,d,y,R),d.child)}function jt(c,d,y,A,R){if(Ar(y)){var O=!0;wl(d)}else O=!1;if(Na(d,R),d.stateNode===null)rv(c,d),p(d,y,A),E(d,y,A,R),A=!0;else if(c===null){var W=d.stateNode,re=d.memoizedProps;W.props=re;var pe=W.context,Be=y.contextType;typeof Be=="object"&&Be!==null?Be=ps(Be):(Be=Ar(y)?Jo:fr.current,Be=_l(d,Be));var rt=y.getDerivedStateFromProps,ot=typeof rt=="function"||typeof W.getSnapshotBeforeUpdate=="function";ot||typeof W.UNSAFE_componentWillReceiveProps!="function"&&typeof W.componentWillReceiveProps!="function"||(re!==A||pe!==Be)&&m(d,W,A,Be),Yn=!1;var nt=d.memoizedState;W.state=nt,Ai(d,A,W,R),pe=d.memoizedState,re!==A||nt!==pe||Nr.current||Yn?(typeof rt=="function"&&(id(d,y,rt,A),pe=d.memoizedState),(re=Yn||nv(d,y,re,A,nt,pe,Be))?(ot||typeof W.UNSAFE_componentWillMount!="function"&&typeof W.componentWillMount!="function"||(typeof W.componentWillMount=="function"&&W.componentWillMount(),typeof W.UNSAFE_componentWillMount=="function"&&W.UNSAFE_componentWillMount()),typeof W.componentDidMount=="function"&&(d.flags|=4194308)):(typeof W.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=A,d.memoizedState=pe),W.props=A,W.state=pe,W.context=Be,A=re):(typeof W.componentDidMount=="function"&&(d.flags|=4194308),A=!1)}else{W=d.stateNode,Di(c,d),re=d.memoizedProps,Be=d.type===d.elementType?re:Us(d.type,re),W.props=Be,ot=d.pendingProps,nt=W.context,pe=y.contextType,typeof pe=="object"&&pe!==null?pe=ps(pe):(pe=Ar(y)?Jo:fr.current,pe=_l(d,pe));var Bt=y.getDerivedStateFromProps;(rt=typeof Bt=="function"||typeof W.getSnapshotBeforeUpdate=="function")||typeof W.UNSAFE_componentWillReceiveProps!="function"&&typeof W.componentWillReceiveProps!="function"||(re!==ot||nt!==pe)&&m(d,W,A,pe),Yn=!1,nt=d.memoizedState,W.state=nt,Ai(d,A,W,R);var zt=d.memoizedState;re!==ot||nt!==zt||Nr.current||Yn?(typeof Bt=="function"&&(id(d,y,Bt,A),zt=d.memoizedState),(Be=Yn||nv(d,y,Be,A,nt,zt,pe)||!1)?(rt||typeof W.UNSAFE_componentWillUpdate!="function"&&typeof W.componentWillUpdate!="function"||(typeof W.componentWillUpdate=="function"&&W.componentWillUpdate(A,zt,pe),typeof W.UNSAFE_componentWillUpdate=="function"&&W.UNSAFE_componentWillUpdate(A,zt,pe)),typeof W.componentDidUpdate=="function"&&(d.flags|=4),typeof W.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof W.componentDidUpdate!="function"||re===c.memoizedProps&&nt===c.memoizedState||(d.flags|=4),typeof W.getSnapshotBeforeUpdate!="function"||re===c.memoizedProps&&nt===c.memoizedState||(d.flags|=1024),d.memoizedProps=A,d.memoizedState=zt),W.props=A,W.state=zt,W.context=pe,A=Be):(typeof W.componentDidUpdate!="function"||re===c.memoizedProps&&nt===c.memoizedState||(d.flags|=4),typeof W.getSnapshotBeforeUpdate!="function"||re===c.memoizedProps&&nt===c.memoizedState||(d.flags|=1024),A=!1)}return gn(c,d,y,A,O,R)}function gn(c,d,y,A,R,O){Fe(c,d);var W=(d.flags&128)!==0;if(!A&&!W)return R&&am(d,y,!1),Ll(c,d,O);A=d.stateNode,Kt.current=d;var re=W&&typeof y.getDerivedStateFromError!="function"?null:A.render();return d.flags|=1,c!==null&&W?(d.child=Al(d,c.child,null,O),d.child=Al(d,null,re,O)):Pt(c,d,re,O),d.memoizedState=A.state,R&&am(d,y,!0),d.child}function fn(c){var d=c.stateNode;d.pendingContext?om(c,d.pendingContext,d.pendingContext!==d.context):d.context&&om(c,d.context,!1),Ju(c,d.containerInfo)}function Ln(c,d,y,A,R){return Oa(),Tc(R),d.flags|=256,Pt(c,d,y,A),d.child}var zi={dehydrated:null,treeContext:null,retryLane:0};function Dn(c){return{baseLanes:c,cachePool:null,transitions:null}}function sa(c,d,y){var A=d.pendingProps,R=ci.current,O=!1,W=(d.flags&128)!==0,re;if((re=W)||(re=c!==null&&c.memoizedState===null?!1:(R&2)!==0),re?(O=!0,d.flags&=-129):(c===null||c.memoizedState!==null)&&(R|=1),Zn(ci,R&1),c===null)return Jh(d),c=d.memoizedState,c!==null&&(c=c.dehydrated,c!==null)?((d.mode&1)===0?d.lanes=1:c.data==="$!"?d.lanes=8:d.lanes=1073741824,null):(W=A.children,c=A.fallback,O?(A=d.mode,O=d.child,W={mode:"hidden",children:W},(A&1)===0&&O!==null?(O.childLanes=0,O.pendingProps=W):O=gv(W,A,0,null),c=ld(c,A,y,null),O.return=d,c.return=d,O.sibling=c,d.child=O,d.child.memoizedState=Dn(y),d.memoizedState=zi,c):Am(d,W));if(R=c.memoizedState,R!==null&&(re=R.dehydrated,re!==null))return LF(c,d,W,A,re,R,y);if(O){O=A.fallback,W=d.mode,R=c.child,re=R.sibling;var pe={mode:"hidden",children:A.children};return(W&1)===0&&d.child!==R?(A=d.child,A.childLanes=0,A.pendingProps=pe,d.deletions=null):(A=Uc(R,pe),A.subtreeFlags=R.subtreeFlags&14680064),re!==null?O=Uc(re,O):(O=ld(O,W,y,null),O.flags|=2),O.return=d,A.return=d,A.sibling=O,d.child=A,A=O,O=d.child,W=c.child.memoizedState,W=W===null?Dn(y):{baseLanes:W.baseLanes|y,cachePool:null,transitions:W.transitions},O.memoizedState=W,O.childLanes=c.childLanes&~y,d.memoizedState=zi,A}return O=c.child,c=O.sibling,A=Uc(O,{mode:"visible",children:A.children}),(d.mode&1)===0&&(A.lanes=y),A.return=d,A.sibling=null,c!==null&&(y=d.deletions,y===null?(d.deletions=[c],d.flags|=16):y.push(c)),d.child=A,d.memoizedState=null,A}function Am(c,d){return d=gv({mode:"visible",children:d},c.mode,0,null),d.return=c,c.child=d}function iv(c,d,y,A){return A!==null&&Tc(A),Al(d,c.child,null,y),c=Am(d,d.pendingProps.children),c.flags|=2,d.memoizedState=null,c}function LF(c,d,y,A,R,O,W){if(y)return d.flags&256?(d.flags&=-257,A=B(Error(t(422))),iv(c,d,W,A)):d.memoizedState!==null?(d.child=c.child,d.flags|=128,null):(O=A.fallback,R=d.mode,A=gv({mode:"visible",children:A.children},R,0,null),O=ld(O,R,W,null),O.flags|=2,A.return=d,O.return=d,A.sibling=O,d.child=A,(d.mode&1)!==0&&Al(d,c.child,null,W),d.child.memoizedState=Dn(W),d.memoizedState=zi,O);if((d.mode&1)===0)return iv(c,d,W,null);if(R.data==="$!"){if(A=R.nextSibling&&R.nextSibling.dataset,A)var re=A.dgst;return A=re,O=Error(t(419)),A=B(O,A,void 0),iv(c,d,W,A)}if(re=(W&c.childLanes)!==0,En||re){if(A=Cr,A!==null){switch(W&-W){case 4:R=2;break;case 16:R=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:R=32;break;case 536870912:R=268435456;break;default:R=0}R=(R&(A.suspendedLanes|W))!==0?0:R,R!==0&&R!==O.retryLane&&(O.retryLane=R,no(c,R),la(A,c,R,-1))}return B1(),A=B(Error(t(421))),iv(c,d,W,A)}return R.data==="$?"?(d.flags|=128,d.child=c.child,d=XF.bind(null,c),R._reactRetry=d,null):(c=O.treeContext,kr=Xo(R.nextSibling),pr=d,li=!0,ks=null,c!==null&&(Fr[rr++]=pt,Fr[rr++]=Fs,Fr[rr++]=El,pt=c.id,Fs=c.overflow,El=d),d=Am(d,A.children),d.flags|=4096,d)}function IM(c,d,y){c.lanes|=d;var A=c.alternate;A!==null&&(A.lanes|=d),Yu(c.return,d,y)}function y1(c,d,y,A,R){var O=c.memoizedState;O===null?c.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:A,tail:y,tailMode:R}:(O.isBackwards=d,O.rendering=null,O.renderingStartTime=0,O.last=A,O.tail=y,O.tailMode=R)}function DM(c,d,y){var A=d.pendingProps,R=A.revealOrder,O=A.tail;if(Pt(c,d,A.children,y),A=ci.current,(A&2)!==0)A=A&1|2,d.flags|=128;else{if(c!==null&&(c.flags&128)!==0)e:for(c=d.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&IM(c,y,d);else if(c.tag===19)IM(c,y,d);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===d)break e;for(;c.sibling===null;){if(c.return===null||c.return===d)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}A&=1}if(Zn(ci,A),(d.mode&1)===0)d.memoizedState=null;else switch(R){case"forwards":for(y=d.child,R=null;y!==null;)c=y.alternate,c!==null&&io(c)===null&&(R=y),y=y.sibling;y=R,y===null?(R=d.child,d.child=null):(R=y.sibling,y.sibling=null),y1(d,!1,R,y,O);break;case"backwards":for(y=null,R=d.child,d.child=null;R!==null;){if(c=R.alternate,c!==null&&io(c)===null){d.child=R;break}c=R.sibling,R.sibling=y,y=R,R=c}y1(d,!0,y,null,O);break;case"together":y1(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function rv(c,d){(d.mode&1)===0&&c!==null&&(c.alternate=null,d.alternate=null,d.flags|=2)}function Ll(c,d,y){if(c!==null&&(d.dependencies=c.dependencies),rd|=d.lanes,(y&d.childLanes)===0)return null;if(c!==null&&d.child!==c.child)throw Error(t(153));if(d.child!==null){for(c=d.child,y=Uc(c,c.pendingProps),d.child=y,y.return=d;c.sibling!==null;)c=c.sibling,y=y.sibling=Uc(c,c.pendingProps),y.return=d;y.sibling=null}return d.child}function OF(c,d,y){switch(d.tag){case 3:fn(d),Oa();break;case 5:Pl(d);break;case 1:Ar(d.type)&&wl(d);break;case 4:Ju(d,d.stateNode.containerInfo);break;case 10:var A=d.type._context,R=d.memoizedProps.value;Zn(bl,A._currentValue),A._currentValue=R;break;case 13:if(A=d.memoizedState,A!==null)return A.dehydrated!==null?(Zn(ci,ci.current&1),d.flags|=128,null):(y&d.child.childLanes)!==0?sa(c,d,y):(Zn(ci,ci.current&1),c=Ll(c,d,y),c!==null?c.sibling:null);Zn(ci,ci.current&1);break;case 19:if(A=(y&d.childLanes)!==0,(c.flags&128)!==0){if(A)return DM(c,d,y);d.flags|=128}if(R=d.memoizedState,R!==null&&(R.rendering=null,R.tail=null,R.lastEffect=null),Zn(ci,ci.current),A)break;return null;case 22:case 23:return d.lanes=0,Ee(c,d,y)}return Ll(c,d,y)}var BM,x1,LM,OM;BM=function(c,d){for(var y=d.child;y!==null;){if(y.tag===5||y.tag===6)c.appendChild(y.stateNode);else if(y.tag!==4&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===d)break;for(;y.sibling===null;){if(y.return===null||y.return===d)return;y=y.return}y.sibling.return=y.return,y=y.sibling}},x1=function(){},LM=function(c,d,y,A){var R=c.memoizedProps;if(R!==A){c=d.stateNode,Ui(ms.current);var O=null;switch(y){case"input":R=q(c,R),A=q(c,A),O=[];break;case"select":R=se({},R,{value:void 0}),A=se({},A,{value:void 0}),O=[];break;case"textarea":R=j(c,R),A=j(c,A),O=[];break;default:typeof R.onClick!="function"&&typeof A.onClick=="function"&&(c.onclick=Uu)}ue(y,A);var W;y=null;for(Be in R)if(!A.hasOwnProperty(Be)&&R.hasOwnProperty(Be)&&R[Be]!=null)if(Be==="style"){var re=R[Be];for(W in re)re.hasOwnProperty(W)&&(y||(y={}),y[W]="")}else Be!=="dangerouslySetInnerHTML"&&Be!=="children"&&Be!=="suppressContentEditableWarning"&&Be!=="suppressHydrationWarning"&&Be!=="autoFocus"&&(r.hasOwnProperty(Be)?O||(O=[]):(O=O||[]).push(Be,null));for(Be in A){var pe=A[Be];if(re=R?.[Be],A.hasOwnProperty(Be)&&pe!==re&&(pe!=null||re!=null))if(Be==="style")if(re){for(W in re)!re.hasOwnProperty(W)||pe&&pe.hasOwnProperty(W)||(y||(y={}),y[W]="");for(W in pe)pe.hasOwnProperty(W)&&re[W]!==pe[W]&&(y||(y={}),y[W]=pe[W])}else y||(O||(O=[]),O.push(Be,y)),y=pe;else Be==="dangerouslySetInnerHTML"?(pe=pe?pe.__html:void 0,re=re?re.__html:void 0,pe!=null&&re!==pe&&(O=O||[]).push(Be,pe)):Be==="children"?typeof pe!="string"&&typeof pe!="number"||(O=O||[]).push(Be,""+pe):Be!=="suppressContentEditableWarning"&&Be!=="suppressHydrationWarning"&&(r.hasOwnProperty(Be)?(pe!=null&&Be==="onScroll"&&ni("scroll",c),O||re===pe||(O=[])):(O=O||[]).push(Be,pe))}y&&(O=O||[]).push("style",y);var Be=O;(d.updateQueue=Be)&&(d.flags|=4)}},OM=function(c,d,y,A){y!==A&&(d.flags|=4)};function bm(c,d){if(!li)switch(c.tailMode){case"hidden":d=c.tail;for(var y=null;d!==null;)d.alternate!==null&&(y=d),d=d.sibling;y===null?c.tail=null:y.sibling=null;break;case"collapsed":y=c.tail;for(var A=null;y!==null;)y.alternate!==null&&(A=y),y=y.sibling;A===null?d||c.tail===null?c.tail=null:c.tail.sibling=null:A.sibling=null}}function qr(c){var d=c.alternate!==null&&c.alternate.child===c.child,y=0,A=0;if(d)for(var R=c.child;R!==null;)y|=R.lanes|R.childLanes,A|=R.subtreeFlags&14680064,A|=R.flags&14680064,R.return=c,R=R.sibling;else for(R=c.child;R!==null;)y|=R.lanes|R.childLanes,A|=R.subtreeFlags,A|=R.flags,R.return=c,R=R.sibling;return c.subtreeFlags|=A,c.childLanes=y,d}function NF(c,d,y){var A=d.pendingProps;switch(Zo(d),d.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qr(d),null;case 1:return Ar(d.type)&&zu(),qr(d),null;case 3:return A=d.stateNode,Fa(),ii(Nr),ii(fr),_o(),A.pendingContext&&(A.context=A.pendingContext,A.pendingContext=null),(c===null||c.child===null)&&(Cc(d)?d.flags|=4:c===null||c.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,ks!==null&&(P1(ks),ks=null))),x1(c,d),qr(d),null;case 5:Ic(d);var R=Ui(ta.current);if(y=d.type,c!==null&&d.stateNode!=null)LM(c,d,y,A,R),c.ref!==d.ref&&(d.flags|=512,d.flags|=2097152);else{if(!A){if(d.stateNode===null)throw Error(t(166));return qr(d),null}if(c=Ui(ms.current),Cc(d)){A=d.stateNode,y=d.type;var O=d.memoizedProps;switch(A[Yi]=d,A[Mc]=O,c=(d.mode&1)!==0,y){case"dialog":ni("cancel",A),ni("close",A);break;case"iframe":case"object":case"embed":ni("load",A);break;case"video":case"audio":for(R=0;R<Ba.length;R++)ni(Ba[R],A);break;case"source":ni("error",A);break;case"img":case"image":case"link":ni("error",A),ni("load",A);break;case"details":ni("toggle",A);break;case"input":at(A,O),ni("invalid",A);break;case"select":A._wrapperState={wasMultiple:!!O.multiple},ni("invalid",A);break;case"textarea":ne(A,O),ni("invalid",A)}ue(y,O),R=null;for(var W in O)if(O.hasOwnProperty(W)){var re=O[W];W==="children"?typeof re=="string"?A.textContent!==re&&(O.suppressHydrationWarning!==!0&&ku(A.textContent,re,c),R=["children",re]):typeof re=="number"&&A.textContent!==""+re&&(O.suppressHydrationWarning!==!0&&ku(A.textContent,re,c),R=["children",""+re]):r.hasOwnProperty(W)&&re!=null&&W==="onScroll"&&ni("scroll",A)}switch(y){case"input":nn(A),$e(A,O,!0);break;case"textarea":nn(A),ze(A);break;case"select":case"option":break;default:typeof O.onClick=="function"&&(A.onclick=Uu)}A=R,d.updateQueue=A,A!==null&&(d.flags|=4)}else{W=R.nodeType===9?R:R.ownerDocument,c==="http://www.w3.org/1999/xhtml"&&(c=Re(y)),c==="http://www.w3.org/1999/xhtml"?y==="script"?(c=W.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild)):typeof A.is=="string"?c=W.createElement(y,{is:A.is}):(c=W.createElement(y),y==="select"&&(W=c,A.multiple?W.multiple=!0:A.size&&(W.size=A.size))):c=W.createElementNS(c,y),c[Yi]=d,c[Mc]=A,BM(c,d,!1,!1),d.stateNode=c;e:{switch(W=Oe(y,A),y){case"dialog":ni("cancel",c),ni("close",c),R=A;break;case"iframe":case"object":case"embed":ni("load",c),R=A;break;case"video":case"audio":for(R=0;R<Ba.length;R++)ni(Ba[R],c);R=A;break;case"source":ni("error",c),R=A;break;case"img":case"image":case"link":ni("error",c),ni("load",c),R=A;break;case"details":ni("toggle",c),R=A;break;case"input":at(c,A),R=q(c,A),ni("invalid",c);break;case"option":R=A;break;case"select":c._wrapperState={wasMultiple:!!A.multiple},R=se({},A,{value:void 0}),ni("invalid",c);break;case"textarea":ne(c,A),R=j(c,A),ni("invalid",c);break;default:R=A}ue(y,R),re=R;for(O in re)if(re.hasOwnProperty(O)){var pe=re[O];O==="style"?It(c,pe):O==="dangerouslySetInnerHTML"?(pe=pe?pe.__html:void 0,pe!=null&&Dt(c,pe)):O==="children"?typeof pe=="string"?(y!=="textarea"||pe!=="")&&Ft(c,pe):typeof pe=="number"&&Ft(c,""+pe):O!=="suppressContentEditableWarning"&&O!=="suppressHydrationWarning"&&O!=="autoFocus"&&(r.hasOwnProperty(O)?pe!=null&&O==="onScroll"&&ni("scroll",c):pe!=null&&M(c,O,pe,W))}switch(y){case"input":nn(c),$e(c,A,!1);break;case"textarea":nn(c),ze(c);break;case"option":A.value!=null&&c.setAttribute("value",""+et(A.value));break;case"select":c.multiple=!!A.multiple,O=A.value,O!=null?K(c,!!A.multiple,O,!1):A.defaultValue!=null&&K(c,!!A.multiple,A.defaultValue,!0);break;default:typeof R.onClick=="function"&&(c.onclick=Uu)}switch(y){case"button":case"input":case"select":case"textarea":A=!!A.autoFocus;break e;case"img":A=!0;break e;default:A=!1}}A&&(d.flags|=4)}d.ref!==null&&(d.flags|=512,d.flags|=2097152)}return qr(d),null;case 6:if(c&&d.stateNode!=null)OM(c,d,c.memoizedProps,A);else{if(typeof A!="string"&&d.stateNode===null)throw Error(t(166));if(y=Ui(ta.current),Ui(ms.current),Cc(d)){if(A=d.stateNode,y=d.memoizedProps,A[Yi]=d,(O=A.nodeValue!==y)&&(c=pr,c!==null))switch(c.tag){case 3:ku(A.nodeValue,y,(c.mode&1)!==0);break;case 5:c.memoizedProps.suppressHydrationWarning!==!0&&ku(A.nodeValue,y,(c.mode&1)!==0)}O&&(d.flags|=4)}else A=(y.nodeType===9?y:y.ownerDocument).createTextNode(A),A[Yi]=d,d.stateNode=A}return qr(d),null;case 13:if(ii(ci),A=d.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(li&&kr!==null&&(d.mode&1)!==0&&(d.flags&128)===0)hm(),Oa(),d.flags|=98560,O=!1;else if(O=Cc(d),A!==null&&A.dehydrated!==null){if(c===null){if(!O)throw Error(t(318));if(O=d.memoizedState,O=O!==null?O.dehydrated:null,!O)throw Error(t(317));O[Yi]=d}else Oa(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;qr(d),O=!1}else ks!==null&&(P1(ks),ks=null),O=!0;if(!O)return d.flags&65536?d:null}return(d.flags&128)!==0?(d.lanes=y,d):(A=A!==null,A!==(c!==null&&c.memoizedState!==null)&&A&&(d.child.flags|=8192,(d.mode&1)!==0&&(c===null||(ci.current&1)!==0?yr===0&&(yr=3):B1())),d.updateQueue!==null&&(d.flags|=4),qr(d),null);case 4:return Fa(),x1(c,d),c===null&&Ec(d.stateNode.containerInfo),qr(d),null;case 10:return Xu(d.type._context),qr(d),null;case 17:return Ar(d.type)&&zu(),qr(d),null;case 19:if(ii(ci),O=d.memoizedState,O===null)return qr(d),null;if(A=(d.flags&128)!==0,W=O.rendering,W===null)if(A)bm(O,!1);else{if(yr!==0||c!==null&&(c.flags&128)!==0)for(c=d.child;c!==null;){if(W=io(c),W!==null){for(d.flags|=128,bm(O,!1),A=W.updateQueue,A!==null&&(d.updateQueue=A,d.flags|=4),d.subtreeFlags=0,A=y,y=d.child;y!==null;)O=y,c=A,O.flags&=14680066,W=O.alternate,W===null?(O.childLanes=0,O.lanes=c,O.child=null,O.subtreeFlags=0,O.memoizedProps=null,O.memoizedState=null,O.updateQueue=null,O.dependencies=null,O.stateNode=null):(O.childLanes=W.childLanes,O.lanes=W.lanes,O.child=W.child,O.subtreeFlags=0,O.deletions=null,O.memoizedProps=W.memoizedProps,O.memoizedState=W.memoizedState,O.updateQueue=W.updateQueue,O.type=W.type,c=W.dependencies,O.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),y=y.sibling;return Zn(ci,ci.current&1|2),d.child}c=c.sibling}O.tail!==null&&ie()>cf&&(d.flags|=128,A=!0,bm(O,!1),d.lanes=4194304)}else{if(!A)if(c=io(W),c!==null){if(d.flags|=128,A=!0,y=c.updateQueue,y!==null&&(d.updateQueue=y,d.flags|=4),bm(O,!0),O.tail===null&&O.tailMode==="hidden"&&!W.alternate&&!li)return qr(d),null}else 2*ie()-O.renderingStartTime>cf&&y!==1073741824&&(d.flags|=128,A=!0,bm(O,!1),d.lanes=4194304);O.isBackwards?(W.sibling=d.child,d.child=W):(y=O.last,y!==null?y.sibling=W:d.child=W,O.last=W)}return O.tail!==null?(d=O.tail,O.rendering=d,O.tail=d.sibling,O.renderingStartTime=ie(),d.sibling=null,y=ci.current,Zn(ci,A?y&1|2:y&1),d):(qr(d),null);case 22:case 23:return D1(),A=d.memoizedState!==null,c!==null&&c.memoizedState!==null!==A&&(d.flags|=8192),A&&(d.mode&1)!==0?(oo&1073741824)!==0&&(qr(d),d.subtreeFlags&6&&(d.flags|=8192)):qr(d),null;case 24:return null;case 25:return null}throw Error(t(156,d.tag))}function FF(c,d){switch(Zo(d),d.tag){case 1:return Ar(d.type)&&zu(),c=d.flags,c&65536?(d.flags=c&-65537|128,d):null;case 3:return Fa(),ii(Nr),ii(fr),_o(),c=d.flags,(c&65536)!==0&&(c&128)===0?(d.flags=c&-65537|128,d):null;case 5:return Ic(d),null;case 13:if(ii(ci),c=d.memoizedState,c!==null&&c.dehydrated!==null){if(d.alternate===null)throw Error(t(340));Oa()}return c=d.flags,c&65536?(d.flags=c&-65537|128,d):null;case 19:return ii(ci),null;case 4:return Fa(),null;case 10:return Xu(d.type._context),null;case 22:case 23:return D1(),null;case 24:return null;default:return null}}var sv=!1,Zr=!1,kF=typeof WeakSet=="function"?WeakSet:Set,Nt=null;function af(c,d){var y=c.ref;if(y!==null)if(typeof y=="function")try{y(null)}catch(A){Hi(c,d,A)}else y.current=null}function _1(c,d,y){try{y()}catch(A){Hi(c,d,A)}}var NM=!1;function UF(c,d){if(bc=Is,c=xi(),er(c)){if("selectionStart"in c)var y={start:c.selectionStart,end:c.selectionEnd};else e:{y=(y=c.ownerDocument)&&y.defaultView||window;var A=y.getSelection&&y.getSelection();if(A&&A.rangeCount!==0){y=A.anchorNode;var R=A.anchorOffset,O=A.focusNode;A=A.focusOffset;try{y.nodeType,O.nodeType}catch{y=null;break e}var W=0,re=-1,pe=-1,Be=0,rt=0,ot=c,nt=null;t:for(;;){for(var Bt;ot!==y||R!==0&&ot.nodeType!==3||(re=W+R),ot!==O||A!==0&&ot.nodeType!==3||(pe=W+A),ot.nodeType===3&&(W+=ot.nodeValue.length),(Bt=ot.firstChild)!==null;)nt=ot,ot=Bt;for(;;){if(ot===c)break t;if(nt===y&&++Be===R&&(re=W),nt===O&&++rt===A&&(pe=W),(Bt=ot.nextSibling)!==null)break;ot=nt,nt=ot.parentNode}ot=Bt}y=re===-1||pe===-1?null:{start:re,end:pe}}else y=null}y=y||{start:0,end:0}}else y=null;for(em={focusedElem:c,selectionRange:y},Is=!1,Nt=d;Nt!==null;)if(d=Nt,c=d.child,(d.subtreeFlags&1028)!==0&&c!==null)c.return=d,Nt=c;else for(;Nt!==null;){d=Nt;try{var zt=d.alternate;if((d.flags&1024)!==0)switch(d.tag){case 0:case 11:case 15:break;case 1:if(zt!==null){var Vt=zt.memoizedProps,Ki=zt.memoizedState,Ae=d.stateNode,ye=Ae.getSnapshotBeforeUpdate(d.elementType===d.type?Vt:Us(d.type,Vt),Ki);Ae.__reactInternalSnapshotBeforeUpdate=ye}break;case 3:var Me=d.stateNode.containerInfo;Me.nodeType===1?Me.textContent="":Me.nodeType===9&&Me.documentElement&&Me.removeChild(Me.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(dt){Hi(d,d.return,dt)}if(c=d.sibling,c!==null){c.return=d.return,Nt=c;break}Nt=d.return}return zt=NM,NM=!1,zt}function Mm(c,d,y){var A=d.updateQueue;if(A=A!==null?A.lastEffect:null,A!==null){var R=A=A.next;do{if((R.tag&c)===c){var O=R.destroy;R.destroy=void 0,O!==void 0&&_1(d,y,O)}R=R.next}while(R!==A)}}function ov(c,d){if(d=d.updateQueue,d=d!==null?d.lastEffect:null,d!==null){var y=d=d.next;do{if((y.tag&c)===c){var A=y.create;y.destroy=A()}y=y.next}while(y!==d)}}function w1(c){var d=c.ref;if(d!==null){var y=c.stateNode;switch(c.tag){case 5:c=y;break;default:c=y}typeof d=="function"?d(c):d.current=c}}function FM(c){var d=c.alternate;d!==null&&(c.alternate=null,FM(d)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(d=c.stateNode,d!==null&&(delete d[Yi],delete d[Mc],delete d[xl],delete d[Gh],delete d[jh])),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function kM(c){return c.tag===5||c.tag===3||c.tag===4}function UM(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||kM(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function S1(c,d,y){var A=c.tag;if(A===5||A===6)c=c.stateNode,d?y.nodeType===8?y.parentNode.insertBefore(c,d):y.insertBefore(c,d):(y.nodeType===8?(d=y.parentNode,d.insertBefore(c,y)):(d=y,d.appendChild(c)),y=y._reactRootContainer,y!=null||d.onclick!==null||(d.onclick=Uu));else if(A!==4&&(c=c.child,c!==null))for(S1(c,d,y),c=c.sibling;c!==null;)S1(c,d,y),c=c.sibling}function E1(c,d,y){var A=c.tag;if(A===5||A===6)c=c.stateNode,d?y.insertBefore(c,d):y.appendChild(c);else if(A!==4&&(c=c.child,c!==null))for(E1(c,d,y),c=c.sibling;c!==null;)E1(c,d,y),c=c.sibling}var zr=null,oa=!1;function Lc(c,d,y){for(y=y.child;y!==null;)zM(c,d,y),y=y.sibling}function zM(c,d,y){if(Ze&&typeof Ze.onCommitFiberUnmount=="function")try{Ze.onCommitFiberUnmount(ht,y)}catch{}switch(y.tag){case 5:Zr||af(y,d);case 6:var A=zr,R=oa;zr=null,Lc(c,d,y),zr=A,oa=R,zr!==null&&(oa?(c=zr,y=y.stateNode,c.nodeType===8?c.parentNode.removeChild(y):c.removeChild(y)):zr.removeChild(y.stateNode));break;case 18:zr!==null&&(oa?(c=zr,y=y.stateNode,c.nodeType===8?Vh(c.parentNode,y):c.nodeType===1&&Vh(c,y),Cu(c)):Vh(zr,y.stateNode));break;case 4:A=zr,R=oa,zr=y.stateNode.containerInfo,oa=!0,Lc(c,d,y),zr=A,oa=R;break;case 0:case 11:case 14:case 15:if(!Zr&&(A=y.updateQueue,A!==null&&(A=A.lastEffect,A!==null))){R=A=A.next;do{var O=R,W=O.destroy;O=O.tag,W!==void 0&&((O&2)!==0||(O&4)!==0)&&_1(y,d,W),R=R.next}while(R!==A)}Lc(c,d,y);break;case 1:if(!Zr&&(af(y,d),A=y.stateNode,typeof A.componentWillUnmount=="function"))try{A.props=y.memoizedProps,A.state=y.memoizedState,A.componentWillUnmount()}catch(re){Hi(y,d,re)}Lc(c,d,y);break;case 21:Lc(c,d,y);break;case 22:y.mode&1?(Zr=(A=Zr)||y.memoizedState!==null,Lc(c,d,y),Zr=A):Lc(c,d,y);break;default:Lc(c,d,y)}}function HM(c){var d=c.updateQueue;if(d!==null){c.updateQueue=null;var y=c.stateNode;y===null&&(y=c.stateNode=new kF),d.forEach(function(A){var R=YF.bind(null,c,A);y.has(A)||(y.add(A),A.then(R,R))})}}function aa(c,d){var y=d.deletions;if(y!==null)for(var A=0;A<y.length;A++){var R=y[A];try{var O=c,W=d,re=W;e:for(;re!==null;){switch(re.tag){case 5:zr=re.stateNode,oa=!1;break e;case 3:zr=re.stateNode.containerInfo,oa=!0;break e;case 4:zr=re.stateNode.containerInfo,oa=!0;break e}re=re.return}if(zr===null)throw Error(t(160));zM(O,W,R),zr=null,oa=!1;var pe=R.alternate;pe!==null&&(pe.return=null),R.return=null}catch(Be){Hi(R,d,Be)}}if(d.subtreeFlags&12854)for(d=d.child;d!==null;)VM(d,c),d=d.sibling}function VM(c,d){var y=c.alternate,A=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:if(aa(d,c),Ua(c),A&4){try{Mm(3,c,c.return),ov(3,c)}catch(Vt){Hi(c,c.return,Vt)}try{Mm(5,c,c.return)}catch(Vt){Hi(c,c.return,Vt)}}break;case 1:aa(d,c),Ua(c),A&512&&y!==null&&af(y,y.return);break;case 5:if(aa(d,c),Ua(c),A&512&&y!==null&&af(y,y.return),c.flags&32){var R=c.stateNode;try{Ft(R,"")}catch(Vt){Hi(c,c.return,Vt)}}if(A&4&&(R=c.stateNode,R!=null)){var O=c.memoizedProps,W=y!==null?y.memoizedProps:O,re=c.type,pe=c.updateQueue;if(c.updateQueue=null,pe!==null)try{re==="input"&&O.type==="radio"&&O.name!=null&&Je(R,O),Oe(re,W);var Be=Oe(re,O);for(W=0;W<pe.length;W+=2){var rt=pe[W],ot=pe[W+1];rt==="style"?It(R,ot):rt==="dangerouslySetInnerHTML"?Dt(R,ot):rt==="children"?Ft(R,ot):M(R,rt,ot,Be)}switch(re){case"input":tt(R,O);break;case"textarea":Se(R,O);break;case"select":var nt=R._wrapperState.wasMultiple;R._wrapperState.wasMultiple=!!O.multiple;var Bt=O.value;Bt!=null?K(R,!!O.multiple,Bt,!1):nt!==!!O.multiple&&(O.defaultValue!=null?K(R,!!O.multiple,O.defaultValue,!0):K(R,!!O.multiple,O.multiple?[]:"",!1))}R[Mc]=O}catch(Vt){Hi(c,c.return,Vt)}}break;case 6:if(aa(d,c),Ua(c),A&4){if(c.stateNode===null)throw Error(t(162));R=c.stateNode,O=c.memoizedProps;try{R.nodeValue=O}catch(Vt){Hi(c,c.return,Vt)}}break;case 3:if(aa(d,c),Ua(c),A&4&&y!==null&&y.memoizedState.isDehydrated)try{Cu(d.containerInfo)}catch(Vt){Hi(c,c.return,Vt)}break;case 4:aa(d,c),Ua(c);break;case 13:aa(d,c),Ua(c),R=c.child,R.flags&8192&&(O=R.memoizedState!==null,R.stateNode.isHidden=O,!O||R.alternate!==null&&R.alternate.memoizedState!==null||(M1=ie())),A&4&&HM(c);break;case 22:if(rt=y!==null&&y.memoizedState!==null,c.mode&1?(Zr=(Be=Zr)||rt,aa(d,c),Zr=Be):aa(d,c),Ua(c),A&8192){if(Be=c.memoizedState!==null,(c.stateNode.isHidden=Be)&&!rt&&(c.mode&1)!==0)for(Nt=c,rt=c.child;rt!==null;){for(ot=Nt=rt;Nt!==null;){switch(nt=Nt,Bt=nt.child,nt.tag){case 0:case 11:case 14:case 15:Mm(4,nt,nt.return);break;case 1:af(nt,nt.return);var zt=nt.stateNode;if(typeof zt.componentWillUnmount=="function"){A=nt,y=nt.return;try{d=A,zt.props=d.memoizedProps,zt.state=d.memoizedState,zt.componentWillUnmount()}catch(Vt){Hi(A,y,Vt)}}break;case 5:af(nt,nt.return);break;case 22:if(nt.memoizedState!==null){WM(ot);continue}}Bt!==null?(Bt.return=nt,Nt=Bt):WM(ot)}rt=rt.sibling}e:for(rt=null,ot=c;;){if(ot.tag===5){if(rt===null){rt=ot;try{R=ot.stateNode,Be?(O=R.style,typeof O.setProperty=="function"?O.setProperty("display","none","important"):O.display="none"):(re=ot.stateNode,pe=ot.memoizedProps.style,W=pe!=null&&pe.hasOwnProperty("display")?pe.display:null,re.style.display=Lt("display",W))}catch(Vt){Hi(c,c.return,Vt)}}}else if(ot.tag===6){if(rt===null)try{ot.stateNode.nodeValue=Be?"":ot.memoizedProps}catch(Vt){Hi(c,c.return,Vt)}}else if((ot.tag!==22&&ot.tag!==23||ot.memoizedState===null||ot===c)&&ot.child!==null){ot.child.return=ot,ot=ot.child;continue}if(ot===c)break e;for(;ot.sibling===null;){if(ot.return===null||ot.return===c)break e;rt===ot&&(rt=null),ot=ot.return}rt===ot&&(rt=null),ot.sibling.return=ot.return,ot=ot.sibling}}break;case 19:aa(d,c),Ua(c),A&4&&HM(c);break;case 21:break;default:aa(d,c),Ua(c)}}function Ua(c){var d=c.flags;if(d&2){try{e:{for(var y=c.return;y!==null;){if(kM(y)){var A=y;break e}y=y.return}throw Error(t(160))}switch(A.tag){case 5:var R=A.stateNode;A.flags&32&&(Ft(R,""),A.flags&=-33);var O=UM(c);E1(c,O,R);break;case 3:case 4:var W=A.stateNode.containerInfo,re=UM(c);S1(c,re,W);break;default:throw Error(t(161))}}catch(pe){Hi(c,c.return,pe)}c.flags&=-3}d&4096&&(c.flags&=-4097)}function zF(c,d,y){Nt=c,GM(c)}function GM(c,d,y){for(var A=(c.mode&1)!==0;Nt!==null;){var R=Nt,O=R.child;if(R.tag===22&&A){var W=R.memoizedState!==null||sv;if(!W){var re=R.alternate,pe=re!==null&&re.memoizedState!==null||Zr;re=sv;var Be=Zr;if(sv=W,(Zr=pe)&&!Be)for(Nt=R;Nt!==null;)W=Nt,pe=W.child,W.tag===22&&W.memoizedState!==null?$M(R):pe!==null?(pe.return=W,Nt=pe):$M(R);for(;O!==null;)Nt=O,GM(O),O=O.sibling;Nt=R,sv=re,Zr=Be}jM(c)}else(R.subtreeFlags&8772)!==0&&O!==null?(O.return=R,Nt=O):jM(c)}}function jM(c){for(;Nt!==null;){var d=Nt;if((d.flags&8772)!==0){var y=d.alternate;try{if((d.flags&8772)!==0)switch(d.tag){case 0:case 11:case 15:Zr||ov(5,d);break;case 1:var A=d.stateNode;if(d.flags&4&&!Zr)if(y===null)A.componentDidMount();else{var R=d.elementType===d.type?y.memoizedProps:Us(d.type,y.memoizedProps);A.componentDidUpdate(R,y.memoizedState,A.__reactInternalSnapshotBeforeUpdate)}var O=d.updateQueue;O!==null&&Pc(d,O,A);break;case 3:var W=d.updateQueue;if(W!==null){if(y=null,d.child!==null)switch(d.child.tag){case 5:y=d.child.stateNode;break;case 1:y=d.child.stateNode}Pc(d,W,y)}break;case 5:var re=d.stateNode;if(y===null&&d.flags&4){y=re;var pe=d.memoizedProps;switch(d.type){case"button":case"input":case"select":case"textarea":pe.autoFocus&&y.focus();break;case"img":pe.src&&(y.src=pe.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(d.memoizedState===null){var Be=d.alternate;if(Be!==null){var rt=Be.memoizedState;if(rt!==null){var ot=rt.dehydrated;ot!==null&&Cu(ot)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Zr||d.flags&512&&w1(d)}catch(nt){Hi(d,d.return,nt)}}if(d===c){Nt=null;break}if(y=d.sibling,y!==null){y.return=d.return,Nt=y;break}Nt=d.return}}function WM(c){for(;Nt!==null;){var d=Nt;if(d===c){Nt=null;break}var y=d.sibling;if(y!==null){y.return=d.return,Nt=y;break}Nt=d.return}}function $M(c){for(;Nt!==null;){var d=Nt;try{switch(d.tag){case 0:case 11:case 15:var y=d.return;try{ov(4,d)}catch(pe){Hi(d,y,pe)}break;case 1:var A=d.stateNode;if(typeof A.componentDidMount=="function"){var R=d.return;try{A.componentDidMount()}catch(pe){Hi(d,R,pe)}}var O=d.return;try{w1(d)}catch(pe){Hi(d,O,pe)}break;case 5:var W=d.return;try{w1(d)}catch(pe){Hi(d,W,pe)}}}catch(pe){Hi(d,d.return,pe)}if(d===c){Nt=null;break}var re=d.sibling;if(re!==null){re.return=d.return,Nt=re;break}Nt=d.return}}var HF=Math.ceil,av=T.ReactCurrentDispatcher,A1=T.ReactCurrentOwner,So=T.ReactCurrentBatchConfig,zn=0,Cr=null,sr=null,Hr=0,oo=0,lf=Ei(0),yr=0,Cm=null,rd=0,lv=0,b1=0,Tm=null,zs=null,M1=0,cf=1/0,Ol=null,cv=!1,C1=null,Oc=null,uv=!1,Nc=null,dv=0,Rm=0,T1=null,hv=-1,fv=0;function xs(){return(zn&6)!==0?ie():hv!==-1?hv:hv=ie()}function Fc(c){return(c.mode&1)===0?1:(zn&2)!==0&&Hr!==0?Hr&-Hr:g1.transition!==null?(fv===0&&(fv=qt()),fv):(c=Rn,c!==0||(c=window.event,c=c===void 0?16:D0(c.type)),c)}function la(c,d,y,A){if(50<Rm)throw Rm=0,T1=null,Error(t(185));On(c,y,A),((zn&2)===0||c!==Cr)&&(c===Cr&&((zn&2)===0&&(lv|=y),yr===4&&kc(c,Hr)),Hs(c,A),y===1&&zn===0&&(d.mode&1)===0&&(cf=ie()+500,Vu&&yo()))}function Hs(c,d){var y=c.callbackNode;pn(c,d);var A=ln(c,c===Cr?Hr:0);if(A===0)y!==null&&G(y),c.callbackNode=null,c.callbackPriority=0;else if(d=A&-A,c.callbackPriority!==d){if(y!=null&&G(y),d===1)c.tag===0?$0(YM.bind(null,c)):Gu(YM.bind(null,c)),m1(function(){(zn&6)===0&&yo()}),y=null;else{switch(Wr(A)){case 1:y=Ce;break;case 4:y=He;break;case 16:y=Ke;break;case 536870912:y=gt;break;default:y=Ke}y=nC(y,XM.bind(null,c))}c.callbackPriority=d,c.callbackNode=y}}function XM(c,d){if(hv=-1,fv=0,(zn&6)!==0)throw Error(t(327));var y=c.callbackNode;if(uf()&&c.callbackNode!==y)return null;var A=ln(c,c===Cr?Hr:0);if(A===0)return null;if((A&30)!==0||(A&c.expiredLanes)!==0||d)d=pv(c,A);else{d=A;var R=zn;zn|=2;var O=JM();(Cr!==c||Hr!==d)&&(Ol=null,cf=ie()+500,od(c,d));do try{jF();break}catch(re){KM(c,re)}while(!0);Cl(),av.current=O,zn=R,sr!==null?d=0:(Cr=null,Hr=0,d=yr)}if(d!==0){if(d===2&&(R=Sn(c),R!==0&&(A=R,d=R1(c,R))),d===1)throw y=Cm,od(c,0),kc(c,A),Hs(c,ie()),y;if(d===6)kc(c,A);else{if(R=c.current.alternate,(A&30)===0&&!VF(R)&&(d=pv(c,A),d===2&&(O=Sn(c),O!==0&&(A=O,d=R1(c,O))),d===1))throw y=Cm,od(c,0),kc(c,A),Hs(c,ie()),y;switch(c.finishedWork=R,c.finishedLanes=A,d){case 0:case 1:throw Error(t(345));case 2:ad(c,zs,Ol);break;case 3:if(kc(c,A),(A&130023424)===A&&(d=M1+500-ie(),10<d)){if(ln(c,0)!==0)break;if(R=c.suspendedLanes,(R&A)!==A){xs(),c.pingedLanes|=c.suspendedLanes&R;break}c.timeoutHandle=nm(ad.bind(null,c,zs,Ol),d);break}ad(c,zs,Ol);break;case 4:if(kc(c,A),(A&4194240)===A)break;for(d=c.eventTimes,R=-1;0<A;){var W=31-At(A);O=1<<W,W=d[W],W>R&&(R=W),A&=~O}if(A=R,A=ie()-A,A=(120>A?120:480>A?480:1080>A?1080:1920>A?1920:3e3>A?3e3:4320>A?4320:1960*HF(A/1960))-A,10<A){c.timeoutHandle=nm(ad.bind(null,c,zs,Ol),A);break}ad(c,zs,Ol);break;case 5:ad(c,zs,Ol);break;default:throw Error(t(329))}}}return Hs(c,ie()),c.callbackNode===y?XM.bind(null,c):null}function R1(c,d){var y=Tm;return c.current.memoizedState.isDehydrated&&(od(c,d).flags|=256),c=pv(c,d),c!==2&&(d=zs,zs=y,d!==null&&P1(d)),c}function P1(c){zs===null?zs=c:zs.push.apply(zs,c)}function VF(c){for(var d=c;;){if(d.flags&16384){var y=d.updateQueue;if(y!==null&&(y=y.stores,y!==null))for(var A=0;A<y.length;A++){var R=y[A],O=R.getSnapshot;R=R.value;try{if(!ds(O(),R))return!1}catch{return!1}}}if(y=d.child,d.subtreeFlags&16384&&y!==null)y.return=d,d=y;else{if(d===c)break;for(;d.sibling===null;){if(d.return===null||d.return===c)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function kc(c,d){for(d&=~b1,d&=~lv,c.suspendedLanes|=d,c.pingedLanes&=~d,c=c.expirationTimes;0<d;){var y=31-At(d),A=1<<y;c[y]=-1,d&=~A}}function YM(c){if((zn&6)!==0)throw Error(t(327));uf();var d=ln(c,0);if((d&1)===0)return Hs(c,ie()),null;var y=pv(c,d);if(c.tag!==0&&y===2){var A=Sn(c);A!==0&&(d=A,y=R1(c,A))}if(y===1)throw y=Cm,od(c,0),kc(c,d),Hs(c,ie()),y;if(y===6)throw Error(t(345));return c.finishedWork=c.current.alternate,c.finishedLanes=d,ad(c,zs,Ol),Hs(c,ie()),null}function I1(c,d){var y=zn;zn|=1;try{return c(d)}finally{zn=y,zn===0&&(cf=ie()+500,Vu&&yo())}}function sd(c){Nc!==null&&Nc.tag===0&&(zn&6)===0&&uf();var d=zn;zn|=1;var y=So.transition,A=Rn;try{if(So.transition=null,Rn=1,c)return c()}finally{Rn=A,So.transition=y,zn=d,(zn&6)===0&&yo()}}function D1(){oo=lf.current,ii(lf)}function od(c,d){c.finishedWork=null,c.finishedLanes=0;var y=c.timeoutHandle;if(y!==-1&&(c.timeoutHandle=-1,im(y)),sr!==null)for(y=sr.return;y!==null;){var A=y;switch(Zo(A),A.tag){case 1:A=A.type.childContextTypes,A!=null&&zu();break;case 3:Fa(),ii(Nr),ii(fr),_o();break;case 5:Ic(A);break;case 4:Fa();break;case 13:ii(ci);break;case 19:ii(ci);break;case 10:Xu(A.type._context);break;case 22:case 23:D1()}y=y.return}if(Cr=c,sr=c=Uc(c.current,null),Hr=oo=d,yr=0,Cm=null,b1=lv=rd=0,zs=Tm=null,ea!==null){for(d=0;d<ea.length;d++)if(y=ea[d],A=y.interleaved,A!==null){y.interleaved=null;var R=A.next,O=y.pending;if(O!==null){var W=O.next;O.next=R,A.next=W}y.pending=A}ea=null}return c}function KM(c,d){do{var y=sr;try{if(Cl(),Il.current=sf,ro){for(var A=ri.memoizedState;A!==null;){var R=A.queue;R!==null&&(R.pending=null),A=A.next}ro=!1}if(na=0,Nn=bi=ri=null,Mr=!1,ka=0,A1.current=null,y===null||y.return===null){yr=1,Cm=d,sr=null;break}e:{var O=c,W=y.return,re=y,pe=d;if(d=Hr,re.flags|=32768,pe!==null&&typeof pe=="object"&&typeof pe.then=="function"){var Be=pe,rt=re,ot=rt.tag;if((rt.mode&1)===0&&(ot===0||ot===11||ot===15)){var nt=rt.alternate;nt?(rt.updateQueue=nt.updateQueue,rt.memoizedState=nt.memoizedState,rt.lanes=nt.lanes):(rt.updateQueue=null,rt.memoizedState=null)}var Bt=Ot(W);if(Bt!==null){Bt.flags&=-257,hn(Bt,W,re,O,d),Bt.mode&1&&ut(O,Be,d),d=Bt,pe=Be;var zt=d.updateQueue;if(zt===null){var Vt=new Set;Vt.add(pe),d.updateQueue=Vt}else zt.add(pe);break e}else{if((d&1)===0){ut(O,Be,d),B1();break e}pe=Error(t(426))}}else if(li&&re.mode&1){var Ki=Ot(W);if(Ki!==null){(Ki.flags&65536)===0&&(Ki.flags|=256),hn(Ki,W,re,O,d),Tc(C(pe,re));break e}}O=pe=C(pe,re),yr!==4&&(yr=2),Tm===null?Tm=[O]:Tm.push(O),O=W;do{switch(O.tag){case 3:O.flags|=65536,d&=-d,O.lanes|=d;var Ae=_e(O,pe,d);Tl(O,Ae);break e;case 1:re=pe;var ye=O.type,Me=O.stateNode;if((O.flags&128)===0&&(typeof ye.getDerivedStateFromError=="function"||Me!==null&&typeof Me.componentDidCatch=="function"&&(Oc===null||!Oc.has(Me)))){O.flags|=65536,d&=-d,O.lanes|=d;var dt=je(O,re,d);Tl(O,dt);break e}}O=O.return}while(O!==null)}ZM(y)}catch(Wt){d=Wt,sr===y&&y!==null&&(sr=y=y.return);continue}break}while(!0)}function JM(){var c=av.current;return av.current=sf,c===null?sf:c}function B1(){(yr===0||yr===3||yr===2)&&(yr=4),Cr===null||(rd&268435455)===0&&(lv&268435455)===0||kc(Cr,Hr)}function pv(c,d){var y=zn;zn|=2;var A=JM();(Cr!==c||Hr!==d)&&(Ol=null,od(c,d));do try{GF();break}catch(R){KM(c,R)}while(!0);if(Cl(),zn=y,av.current=A,sr!==null)throw Error(t(261));return Cr=null,Hr=0,yr}function GF(){for(;sr!==null;)qM(sr)}function jF(){for(;sr!==null&&!te();)qM(sr)}function qM(c){var d=tC(c.alternate,c,oo);c.memoizedProps=c.pendingProps,d===null?ZM(c):sr=d,A1.current=null}function ZM(c){var d=c;do{var y=d.alternate;if(c=d.return,(d.flags&32768)===0){if(y=NF(y,d,oo),y!==null){sr=y;return}}else{if(y=FF(y,d),y!==null){y.flags&=32767,sr=y;return}if(c!==null)c.flags|=32768,c.subtreeFlags=0,c.deletions=null;else{yr=6,sr=null;return}}if(d=d.sibling,d!==null){sr=d;return}sr=d=c}while(d!==null);yr===0&&(yr=5)}function ad(c,d,y){var A=Rn,R=So.transition;try{So.transition=null,Rn=1,WF(c,d,y,A)}finally{So.transition=R,Rn=A}return null}function WF(c,d,y,A){do uf();while(Nc!==null);if((zn&6)!==0)throw Error(t(327));y=c.finishedWork;var R=c.finishedLanes;if(y===null)return null;if(c.finishedWork=null,c.finishedLanes=0,y===c.current)throw Error(t(177));c.callbackNode=null,c.callbackPriority=0;var O=y.lanes|y.childLanes;if(ti(c,O),c===Cr&&(sr=Cr=null,Hr=0),(y.subtreeFlags&2064)===0&&(y.flags&2064)===0||uv||(uv=!0,nC(Ke,function(){return uf(),null})),O=(y.flags&15990)!==0,(y.subtreeFlags&15990)!==0||O){O=So.transition,So.transition=null;var W=Rn;Rn=1;var re=zn;zn|=4,A1.current=null,UF(c,y),VM(y,c),tr(em),Is=!!bc,em=bc=null,c.current=y,zF(y),ae(),zn=re,Rn=W,So.transition=O}else c.current=y;if(uv&&(uv=!1,Nc=c,dv=R),O=c.pendingLanes,O===0&&(Oc=null),Et(y.stateNode),Hs(c,ie()),d!==null)for(A=c.onRecoverableError,y=0;y<d.length;y++)R=d[y],A(R.value,{componentStack:R.stack,digest:R.digest});if(cv)throw cv=!1,c=C1,C1=null,c;return(dv&1)!==0&&c.tag!==0&&uf(),O=c.pendingLanes,(O&1)!==0?c===T1?Rm++:(Rm=0,T1=c):Rm=0,yo(),null}function uf(){if(Nc!==null){var c=Wr(dv),d=So.transition,y=Rn;try{if(So.transition=null,Rn=16>c?16:c,Nc===null)var A=!1;else{if(c=Nc,Nc=null,dv=0,(zn&6)!==0)throw Error(t(331));var R=zn;for(zn|=4,Nt=c.current;Nt!==null;){var O=Nt,W=O.child;if((Nt.flags&16)!==0){var re=O.deletions;if(re!==null){for(var pe=0;pe<re.length;pe++){var Be=re[pe];for(Nt=Be;Nt!==null;){var rt=Nt;switch(rt.tag){case 0:case 11:case 15:Mm(8,rt,O)}var ot=rt.child;if(ot!==null)ot.return=rt,Nt=ot;else for(;Nt!==null;){rt=Nt;var nt=rt.sibling,Bt=rt.return;if(FM(rt),rt===Be){Nt=null;break}if(nt!==null){nt.return=Bt,Nt=nt;break}Nt=Bt}}}var zt=O.alternate;if(zt!==null){var Vt=zt.child;if(Vt!==null){zt.child=null;do{var Ki=Vt.sibling;Vt.sibling=null,Vt=Ki}while(Vt!==null)}}Nt=O}}if((O.subtreeFlags&2064)!==0&&W!==null)W.return=O,Nt=W;else e:for(;Nt!==null;){if(O=Nt,(O.flags&2048)!==0)switch(O.tag){case 0:case 11:case 15:Mm(9,O,O.return)}var Ae=O.sibling;if(Ae!==null){Ae.return=O.return,Nt=Ae;break e}Nt=O.return}}var ye=c.current;for(Nt=ye;Nt!==null;){W=Nt;var Me=W.child;if((W.subtreeFlags&2064)!==0&&Me!==null)Me.return=W,Nt=Me;else e:for(W=ye;Nt!==null;){if(re=Nt,(re.flags&2048)!==0)try{switch(re.tag){case 0:case 11:case 15:ov(9,re)}}catch(Wt){Hi(re,re.return,Wt)}if(re===W){Nt=null;break e}var dt=re.sibling;if(dt!==null){dt.return=re.return,Nt=dt;break e}Nt=re.return}}if(zn=R,yo(),Ze&&typeof Ze.onPostCommitFiberRoot=="function")try{Ze.onPostCommitFiberRoot(ht,c)}catch{}A=!0}return A}finally{Rn=y,So.transition=d}}return!1}function QM(c,d,y){d=C(y,d),d=_e(c,d,1),c=fi(c,d,1),d=xs(),c!==null&&(On(c,1,d),Hs(c,d))}function Hi(c,d,y){if(c.tag===3)QM(c,c,y);else for(;d!==null;){if(d.tag===3){QM(d,c,y);break}else if(d.tag===1){var A=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof A.componentDidCatch=="function"&&(Oc===null||!Oc.has(A))){c=C(y,c),c=je(d,c,1),d=fi(d,c,1),c=xs(),d!==null&&(On(d,1,c),Hs(d,c));break}}d=d.return}}function $F(c,d,y){var A=c.pingCache;A!==null&&A.delete(d),d=xs(),c.pingedLanes|=c.suspendedLanes&y,Cr===c&&(Hr&y)===y&&(yr===4||yr===3&&(Hr&130023424)===Hr&&500>ie()-M1?od(c,0):b1|=y),Hs(c,d)}function eC(c,d){d===0&&((c.mode&1)===0?d=1:(d=xn,xn<<=1,(xn&130023424)===0&&(xn=4194304)));var y=xs();c=no(c,d),c!==null&&(On(c,d,y),Hs(c,y))}function XF(c){var d=c.memoizedState,y=0;d!==null&&(y=d.retryLane),eC(c,y)}function YF(c,d){var y=0;switch(c.tag){case 13:var A=c.stateNode,R=c.memoizedState;R!==null&&(y=R.retryLane);break;case 19:A=c.stateNode;break;default:throw Error(t(314))}A!==null&&A.delete(d),eC(c,y)}var tC;tC=function(c,d,y){if(c!==null)if(c.memoizedProps!==d.pendingProps||Nr.current)En=!0;else{if((c.lanes&y)===0&&(d.flags&128)===0)return En=!1,OF(c,d,y);En=(c.flags&131072)!==0}else En=!1,li&&(d.flags&1048576)!==0&&lm(d,Yh,d.index);switch(d.lanes=0,d.tag){case 2:var A=d.type;rv(c,d),c=d.pendingProps;var R=_l(d,fr.current);Na(d,y),R=Zu(null,d,A,c,R,y);var O=gm();return d.flags|=1,typeof R=="object"&&R!==null&&typeof R.render=="function"&&R.$$typeof===void 0?(d.tag=1,d.memoizedState=null,d.updateQueue=null,Ar(A)?(O=!0,wl(d)):O=!1,d.memoizedState=R.state!==null&&R.state!==void 0?R.state:null,_n(d),R.updater=of,d.stateNode=R,R._reactInternals=d,E(d,A,c,y),d=gn(null,d,A,!0,O,y)):(d.tag=0,li&&O&&cm(d),Pt(null,d,R,y),d=d.child),d;case 16:A=d.elementType;e:{switch(rv(c,d),c=d.pendingProps,R=A._init,A=R(A._payload),d.type=A,R=d.tag=JF(A),c=Us(A,c),R){case 0:d=Ct(null,d,A,c,y);break e;case 1:d=jt(null,d,A,c,y);break e;case 11:d=vr(null,d,A,c,y);break e;case 14:d=ys(null,d,A,Us(A.type,c),y);break e}throw Error(t(306,A,""))}return d;case 0:return A=d.type,R=d.pendingProps,R=d.elementType===A?R:Us(A,R),Ct(c,d,A,R,y);case 1:return A=d.type,R=d.pendingProps,R=d.elementType===A?R:Us(A,R),jt(c,d,A,R,y);case 3:e:{if(fn(d),c===null)throw Error(t(387));A=d.pendingProps,O=d.memoizedState,R=O.element,Di(c,d),Ai(d,A,null,y);var W=d.memoizedState;if(A=W.element,O.isDehydrated)if(O={element:A,isDehydrated:!1,cache:W.cache,pendingSuspenseBoundaries:W.pendingSuspenseBoundaries,transitions:W.transitions},d.updateQueue.baseState=O,d.memoizedState=O,d.flags&256){R=C(Error(t(423)),d),d=Ln(c,d,A,y,R);break e}else if(A!==R){R=C(Error(t(424)),d),d=Ln(c,d,A,y,R);break e}else for(kr=Xo(d.stateNode.containerInfo.firstChild),pr=d,li=!0,ks=null,y=$u(d,null,A,y),d.child=y;y;)y.flags=y.flags&-3|4096,y=y.sibling;else{if(Oa(),A===R){d=Ll(c,d,y);break e}Pt(c,d,A,y)}d=d.child}return d;case 5:return Pl(d),c===null&&Jh(d),A=d.type,R=d.pendingProps,O=c!==null?c.memoizedProps:null,W=R.children,tm(A,R)?W=null:O!==null&&tm(A,O)&&(d.flags|=32),Fe(c,d),Pt(c,d,W,y),d.child;case 6:return c===null&&Jh(d),null;case 13:return sa(c,d,y);case 4:return Ju(d,d.stateNode.containerInfo),A=d.pendingProps,c===null?d.child=Al(d,null,A,y):Pt(c,d,A,y),d.child;case 11:return A=d.type,R=d.pendingProps,R=d.elementType===A?R:Us(A,R),vr(c,d,A,R,y);case 7:return Pt(c,d,d.pendingProps,y),d.child;case 8:return Pt(c,d,d.pendingProps.children,y),d.child;case 12:return Pt(c,d,d.pendingProps.children,y),d.child;case 10:e:{if(A=d.type._context,R=d.pendingProps,O=d.memoizedProps,W=R.value,Zn(bl,A._currentValue),A._currentValue=W,O!==null)if(ds(O.value,W)){if(O.children===R.children&&!Nr.current){d=Ll(c,d,y);break e}}else for(O=d.child,O!==null&&(O.return=d);O!==null;){var re=O.dependencies;if(re!==null){W=O.child;for(var pe=re.firstContext;pe!==null;){if(pe.context===A){if(O.tag===1){pe=Kn(-1,y&-y),pe.tag=2;var Be=O.updateQueue;if(Be!==null){Be=Be.shared;var rt=Be.pending;rt===null?pe.next=pe:(pe.next=rt.next,rt.next=pe),Be.pending=pe}}O.lanes|=y,pe=O.alternate,pe!==null&&(pe.lanes|=y),Yu(O.return,y,d),re.lanes|=y;break}pe=pe.next}}else if(O.tag===10)W=O.type===d.type?null:O.child;else if(O.tag===18){if(W=O.return,W===null)throw Error(t(341));W.lanes|=y,re=W.alternate,re!==null&&(re.lanes|=y),Yu(W,y,d),W=O.sibling}else W=O.child;if(W!==null)W.return=O;else for(W=O;W!==null;){if(W===d){W=null;break}if(O=W.sibling,O!==null){O.return=W.return,W=O;break}W=W.return}O=W}Pt(c,d,R.children,y),d=d.child}return d;case 9:return R=d.type,A=d.pendingProps.children,Na(d,y),R=ps(R),A=A(R),d.flags|=1,Pt(c,d,A,y),d.child;case 14:return A=d.type,R=Us(A,d.pendingProps),R=Us(A.type,R),ys(c,d,A,R,y);case 15:return Te(c,d,d.type,d.pendingProps,y);case 17:return A=d.type,R=d.pendingProps,R=d.elementType===A?R:Us(A,R),rv(c,d),d.tag=1,Ar(A)?(c=!0,wl(d)):c=!1,Na(d,y),p(d,A,R),E(d,A,R,y),gn(null,d,A,!0,c,y);case 19:return DM(c,d,y);case 22:return Ee(c,d,y)}throw Error(t(156,d.tag))};function nC(c,d){return it(c,d)}function KF(c,d,y,A){this.tag=c,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=A,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Eo(c,d,y,A){return new KF(c,d,y,A)}function L1(c){return c=c.prototype,!(!c||!c.isReactComponent)}function JF(c){if(typeof c=="function")return L1(c)?1:0;if(c!=null){if(c=c.$$typeof,c===Z)return 11;if(c===me)return 14}return 2}function Uc(c,d){var y=c.alternate;return y===null?(y=Eo(c.tag,d,c.key,c.mode),y.elementType=c.elementType,y.type=c.type,y.stateNode=c.stateNode,y.alternate=c,c.alternate=y):(y.pendingProps=d,y.type=c.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=c.flags&14680064,y.childLanes=c.childLanes,y.lanes=c.lanes,y.child=c.child,y.memoizedProps=c.memoizedProps,y.memoizedState=c.memoizedState,y.updateQueue=c.updateQueue,d=c.dependencies,y.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},y.sibling=c.sibling,y.index=c.index,y.ref=c.ref,y}function mv(c,d,y,A,R,O){var W=2;if(A=c,typeof c=="function")L1(c)&&(W=1);else if(typeof c=="string")W=5;else e:switch(c){case U:return ld(y.children,R,O,d);case F:W=8,R|=8;break;case k:return c=Eo(12,y,d,R|2),c.elementType=k,c.lanes=O,c;case Q:return c=Eo(13,y,d,R),c.elementType=Q,c.lanes=O,c;case le:return c=Eo(19,y,d,R),c.elementType=le,c.lanes=O,c;case xe:return gv(y,R,O,d);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case N:W=10;break e;case V:W=9;break e;case Z:W=11;break e;case me:W=14;break e;case fe:W=16,A=null;break e}throw Error(t(130,c==null?c:typeof c,""))}return d=Eo(W,y,d,R),d.elementType=c,d.type=A,d.lanes=O,d}function ld(c,d,y,A){return c=Eo(7,c,A,d),c.lanes=y,c}function gv(c,d,y,A){return c=Eo(22,c,A,d),c.elementType=xe,c.lanes=y,c.stateNode={isHidden:!1},c}function O1(c,d,y){return c=Eo(6,c,null,d),c.lanes=y,c}function N1(c,d,y){return d=Eo(4,c.children!==null?c.children:[],c.key,d),d.lanes=y,d.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},d}function qF(c,d,y,A,R){this.tag=d,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=di(0),this.expirationTimes=di(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=di(0),this.identifierPrefix=A,this.onRecoverableError=R,this.mutableSourceEagerHydrationData=null}function F1(c,d,y,A,R,O,W,re,pe){return c=new qF(c,d,y,re,pe),d===1?(d=1,O===!0&&(d|=8)):d=0,O=Eo(3,null,null,d),c.current=O,O.stateNode=c,O.memoizedState={element:A,isDehydrated:y,cache:null,transitions:null,pendingSuspenseBoundaries:null},_n(O),c}function ZF(c,d,y){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:D,key:A==null?null:""+A,children:c,containerInfo:d,implementation:y}}function iC(c){if(!c)return Ko;c=c._reactInternals;e:{if($(c)!==c||c.tag!==1)throw Error(t(170));var d=c;do{switch(d.tag){case 3:d=d.stateNode.context;break e;case 1:if(Ar(d.type)){d=d.stateNode.__reactInternalMemoizedMergedChildContext;break e}}d=d.return}while(d!==null);throw Error(t(171))}if(c.tag===1){var y=c.type;if(Ar(y))return Hu(c,y,d)}return d}function rC(c,d,y,A,R,O,W,re,pe){return c=F1(y,A,!0,c,R,O,W,re,pe),c.context=iC(null),y=c.current,A=xs(),R=Fc(y),O=Kn(A,R),O.callback=d??null,fi(y,O,R),c.current.lanes=R,On(c,R,A),Hs(c,A),c}function vv(c,d,y,A){var R=d.current,O=xs(),W=Fc(R);return y=iC(y),d.context===null?d.context=y:d.pendingContext=y,d=Kn(O,W),d.payload={element:c},A=A===void 0?null:A,A!==null&&(d.callback=A),c=fi(R,d,W),c!==null&&(la(c,R,W,O),br(c,R,W)),W}function yv(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 5:return c.child.stateNode;default:return c.child.stateNode}}function sC(c,d){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var y=c.retryLane;c.retryLane=y!==0&&y<d?y:d}}function k1(c,d){sC(c,d),(c=c.alternate)&&sC(c,d)}function QF(){return null}var oC=typeof reportError=="function"?reportError:function(c){console.error(c)};function U1(c){this._internalRoot=c}xv.prototype.render=U1.prototype.render=function(c){var d=this._internalRoot;if(d===null)throw Error(t(409));vv(c,d,null,null)},xv.prototype.unmount=U1.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var d=c.containerInfo;sd(function(){vv(null,c,null,null)}),d[fs]=null}};function xv(c){this._internalRoot=c}xv.prototype.unstable_scheduleHydration=function(c){if(c){var d=fh();c={blockedOn:null,target:c,priority:d};for(var y=0;y<Ca.length&&d!==0&&d<Ca[y].priority;y++);Ca.splice(y,0,c),y===0&&gh(c)}};function z1(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function _v(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11&&(c.nodeType!==8||c.nodeValue!==" react-mount-point-unstable "))}function aC(){}function ek(c,d,y,A,R){if(R){if(typeof A=="function"){var O=A;A=function(){var Be=yv(W);O.call(Be)}}var W=rC(d,A,c,0,null,!1,!1,"",aC);return c._reactRootContainer=W,c[fs]=W.current,Ec(c.nodeType===8?c.parentNode:c),sd(),W}for(;R=c.lastChild;)c.removeChild(R);if(typeof A=="function"){var re=A;A=function(){var Be=yv(pe);re.call(Be)}}var pe=F1(c,0,!1,null,null,!1,!1,"",aC);return c._reactRootContainer=pe,c[fs]=pe.current,Ec(c.nodeType===8?c.parentNode:c),sd(function(){vv(d,pe,y,A)}),pe}function wv(c,d,y,A,R){var O=y._reactRootContainer;if(O){var W=O;if(typeof R=="function"){var re=R;R=function(){var pe=yv(W);re.call(pe)}}vv(d,W,c,R)}else W=ek(y,d,c,R,A);return yv(W)}Au=function(c){switch(c.tag){case 3:var d=c.stateNode;if(d.current.memoizedState.isDehydrated){var y=Yt(d.pendingLanes);y!==0&&(Pi(d,y|1),Hs(d,ie()),(zn&6)===0&&(cf=ie()+500,yo()))}break;case 13:sd(function(){var A=no(c,1);if(A!==null){var R=xs();la(A,c,1,R)}}),k1(c,1)}},Fp=function(c){if(c.tag===13){var d=no(c,134217728);if(d!==null){var y=xs();la(d,c,134217728,y)}k1(c,134217728)}},I0=function(c){if(c.tag===13){var d=Fc(c),y=no(c,d);if(y!==null){var A=xs();la(y,c,d,A)}k1(c,d)}},fh=function(){return Rn},ph=function(c,d){var y=Rn;try{return Rn=c,d()}finally{Rn=y}},be=function(c,d,y){switch(d){case"input":if(tt(c,y),d=y.name,y.type==="radio"&&d!=null){for(y=c;y.parentNode;)y=y.parentNode;for(y=y.querySelectorAll("input[name="+JSON.stringify(""+d)+'][type="radio"]'),d=0;d<y.length;d++){var A=y[d];if(A!==c&&A.form===c.form){var R=Wh(A);if(!R)throw Error(t(90));Xt(A),tt(A,R)}}}break;case"textarea":Se(c,y);break;case"select":d=y.value,d!=null&&K(c,!!y.multiple,d,!1)}},Tn=I1,Xn=sd;var tk={usingClientEntryPoint:!1,Events:[Yo,Ii,Wh,vt,$t,I1]},Pm={findFiberByHostInstance:La,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nk={bundleType:Pm.bundleType,version:Pm.version,rendererPackageName:Pm.rendererPackageName,rendererConfig:Pm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:T.ReactCurrentDispatcher,findHostInstanceByFiber:function(c){return c=Ue(c),c===null?null:c.stateNode},findFiberByHostInstance:Pm.findFiberByHostInstance||QF,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sv.isDisabled&&Sv.supportsFiber)try{ht=Sv.inject(nk),Ze=Sv}catch{}}return Vs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tk,Vs.createPortal=function(c,d){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!z1(d))throw Error(t(200));return ZF(c,d,null,y)},Vs.createRoot=function(c,d){if(!z1(c))throw Error(t(299));var y=!1,A="",R=oC;return d!=null&&(d.unstable_strictMode===!0&&(y=!0),d.identifierPrefix!==void 0&&(A=d.identifierPrefix),d.onRecoverableError!==void 0&&(R=d.onRecoverableError)),d=F1(c,1,!1,null,null,y,!1,A,R),c[fs]=d.current,Ec(c.nodeType===8?c.parentNode:c),new U1(d)},Vs.findDOMNode=function(c){if(c==null)return null;if(c.nodeType===1)return c;var d=c._reactInternals;if(d===void 0)throw typeof c.render=="function"?Error(t(188)):(c=Object.keys(c).join(","),Error(t(268,c)));return c=Ue(d),c=c===null?null:c.stateNode,c},Vs.flushSync=function(c){return sd(c)},Vs.hydrate=function(c,d,y){if(!_v(d))throw Error(t(200));return wv(null,c,d,!0,y)},Vs.hydrateRoot=function(c,d,y){if(!z1(c))throw Error(t(405));var A=y!=null&&y.hydratedSources||null,R=!1,O="",W=oC;if(y!=null&&(y.unstable_strictMode===!0&&(R=!0),y.identifierPrefix!==void 0&&(O=y.identifierPrefix),y.onRecoverableError!==void 0&&(W=y.onRecoverableError)),d=rC(d,null,c,1,y??null,R,!1,O,W),c[fs]=d.current,Ec(c),A)for(c=0;c<A.length;c++)y=A[c],R=y._getVersion,R=R(y._source),d.mutableSourceEagerHydrationData==null?d.mutableSourceEagerHydrationData=[y,R]:d.mutableSourceEagerHydrationData.push(y,R);return new xv(d)},Vs.render=function(c,d,y){if(!_v(d))throw Error(t(200));return wv(null,c,d,!1,y)},Vs.unmountComponentAtNode=function(c){if(!_v(c))throw Error(t(40));return c._reactRootContainer?(sd(function(){wv(null,null,c,!1,function(){c._reactRootContainer=null,c[fs]=null})}),!0):!1},Vs.unstable_batchedUpdates=I1,Vs.unstable_renderSubtreeIntoContainer=function(c,d,y,A){if(!_v(y))throw Error(t(200));if(c==null||c._reactInternals===void 0)throw Error(t(38));return wv(c,d,y,!1,A)},Vs.version="18.3.1-next-f1338f8080-20240426",Vs}var mC;function qI(){if(mC)return G1.exports;mC=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),G1.exports=uk(),G1.exports}var gC;function dk(){if(gC)return Ev;gC=1;var n=qI();return Ev.createRoot=n.createRoot,Ev.hydrateRoot=n.hydrateRoot,Ev}var ZI=dk();const hk=lc(ZI);var m_=qI();const fk=lc(m_);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Rg(){return Rg=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Rg.apply(this,arguments)}var tu;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(tu||(tu={}));const vC="popstate";function pk(n){n===void 0&&(n={});function e(i,r){let{pathname:s,search:o,hash:a}=i.location;return eE("",{pathname:s,search:o,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(i,r){return typeof r=="string"?r:Ky(r)}return gk(e,t,null,n)}function Wi(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function QI(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function mk(){return Math.random().toString(36).substr(2,8)}function yC(n,e){return{usr:n.state,key:n.key,idx:e}}function eE(n,e,t,i){return t===void 0&&(t=null),Rg({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?xp(e):e,{state:t,key:e&&e.key||i||mk()})}function Ky(n){let{pathname:e="/",search:t="",hash:i=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function xp(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function gk(n,e,t,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,a=tu.Pop,l=null,u=h();u==null&&(u=0,o.replaceState(Rg({},o.state,{idx:u}),""));function h(){return(o.state||{idx:null}).idx}function f(){a=tu.Pop;let w=h(),_=w==null?null:w-u;u=w,l&&l({action:a,location:S.location,delta:_})}function g(w,_){a=tu.Push;let b=eE(S.location,w,_);u=h()+1;let M=yC(b,u),T=S.createHref(b);try{o.pushState(M,"",T)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;r.location.assign(T)}s&&l&&l({action:a,location:S.location,delta:1})}function v(w,_){a=tu.Replace;let b=eE(S.location,w,_);u=h();let M=yC(b,u),T=S.createHref(b);o.replaceState(M,"",T),s&&l&&l({action:a,location:S.location,delta:0})}function x(w){let _=r.location.origin!=="null"?r.location.origin:r.location.href,b=typeof w=="string"?w:Ky(w);return b=b.replace(/ $/,"%20"),Wi(_,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,_)}let S={get action(){return a},get location(){return n(r,o)},listen(w){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(vC,f),l=w,()=>{r.removeEventListener(vC,f),l=null}},createHref(w){return e(r,w)},createURL:x,encodeLocation(w){let _=x(w);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:g,replace:v,go(w){return o.go(w)}};return S}var xC;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(xC||(xC={}));function vk(n,e,t){return t===void 0&&(t="/"),yk(n,e,t)}function yk(n,e,t,i){let r=typeof e=="string"?xp(e):e,s=tp(r.pathname||"/",t);if(s==null)return null;let o=e3(n);xk(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=Pk(s);a=Tk(o[l],u)}return a}function e3(n,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let r=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Wi(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let u=su([i,l.relativePath]),h=t.concat(l);s.children&&s.children.length>0&&(Wi(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),e3(s.children,e,h,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:Mk(u,s.index),routesMeta:h})};return n.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))r(s,o);else for(let l of t3(s.path))r(s,o,l)}),e}function t3(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,r=t.endsWith("?"),s=t.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let o=t3(i.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),r&&a.push(...o),a.map(l=>n.startsWith("/")&&l===""?"/":l)}function xk(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:Ck(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const _k=/^:[\w-]+$/,wk=3,Sk=2,Ek=1,Ak=10,bk=-2,_C=n=>n==="*";function Mk(n,e){let t=n.split("/"),i=t.length;return t.some(_C)&&(i+=bk),e&&(i+=Sk),t.filter(r=>!_C(r)).reduce((r,s)=>r+(_k.test(s)?wk:s===""?Ek:Ak),i)}function Ck(n,e){return n.length===e.length&&n.slice(0,-1).every((i,r)=>i===e[r])?n[n.length-1]-e[e.length-1]:0}function Tk(n,e,t){let{routesMeta:i}=n,r={},s="/",o=[];for(let a=0;a<i.length;++a){let l=i[a],u=a===i.length-1,h=s==="/"?e:e.slice(s.length)||"/",f=tE({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},h),g=l.route;if(!f)return null;Object.assign(r,f.params),o.push({params:r,pathname:su([s,f.pathname]),pathnameBase:Lk(su([s,f.pathnameBase])),route:g}),f.pathnameBase!=="/"&&(s=su([s,f.pathnameBase]))}return o}function tE(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=Rk(n.path,n.caseSensitive,n.end),r=e.match(t);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:i.reduce((u,h,f)=>{let{paramName:g,isOptional:v}=h;if(g==="*"){let S=a[f]||"";o=s.slice(0,s.length-S.length).replace(/(.)\/+$/,"$1")}const x=a[f];return v&&!x?u[g]=void 0:u[g]=(x||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:n}}function Rk(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),QI(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],r="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(i.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),r+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":n!==""&&n!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function Pk(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return QI(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function tp(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function Ik(n,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:r=""}=typeof n=="string"?xp(n):n;return{pathname:t?t.startsWith("/")?t:Dk(t,e):e,search:Ok(i),hash:Nk(r)}}function Dk(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function $1(n,e,t,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Bk(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function n3(n,e){let t=Bk(n);return e?t.map((i,r)=>r===t.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function i3(n,e,t,i){i===void 0&&(i=!1);let r;typeof n=="string"?r=xp(n):(r=Rg({},n),Wi(!r.pathname||!r.pathname.includes("?"),$1("?","pathname","search",r)),Wi(!r.pathname||!r.pathname.includes("#"),$1("#","pathname","hash",r)),Wi(!r.search||!r.search.includes("#"),$1("#","search","hash",r)));let s=n===""||r.pathname==="",o=s?"/":r.pathname,a;if(o==null)a=t;else{let f=e.length-1;if(!i&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),f-=1;r.pathname=g.join("/")}a=f>=0?e[f]:"/"}let l=Ik(r,a),u=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(u||h)&&(l.pathname+="/"),l}const su=n=>n.join("/").replace(/\/\/+/g,"/"),Lk=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),Ok=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,Nk=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function Fk(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const r3=["post","put","patch","delete"];new Set(r3);const kk=["get",...r3];new Set(kk);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Pg(){return Pg=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Pg.apply(this,arguments)}const g_=I.createContext(null),s3=I.createContext(null),vu=I.createContext(null),v_=I.createContext(null),yu=I.createContext({outlet:null,matches:[],isDataRoute:!1}),o3=I.createContext(null);function Uk(n,e){let{relative:t}=e===void 0?{}:e;Qg()||Wi(!1);let{basename:i,navigator:r}=I.useContext(vu),{hash:s,pathname:o,search:a}=y_(n,{relative:t}),l=o;return i!=="/"&&(l=o==="/"?i:su([i,o])),r.createHref({pathname:l,search:a,hash:s})}function Qg(){return I.useContext(v_)!=null}function e0(){return Qg()||Wi(!1),I.useContext(v_).location}function a3(n){I.useContext(vu).static||I.useLayoutEffect(n)}function zk(){let{isDataRoute:n}=I.useContext(yu);return n?eU():Hk()}function Hk(){Qg()||Wi(!1);let n=I.useContext(g_),{basename:e,future:t,navigator:i}=I.useContext(vu),{matches:r}=I.useContext(yu),{pathname:s}=e0(),o=JSON.stringify(n3(r,t.v7_relativeSplatPath)),a=I.useRef(!1);return a3(()=>{a.current=!0}),I.useCallback(function(u,h){if(h===void 0&&(h={}),!a.current)return;if(typeof u=="number"){i.go(u);return}let f=i3(u,JSON.parse(o),s,h.relative==="path");n==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:su([e,f.pathname])),(h.replace?i.replace:i.push)(f,h.state,h)},[e,i,o,s,n])}function Vk(){let{matches:n}=I.useContext(yu),e=n[n.length-1];return e?e.params:{}}function y_(n,e){let{relative:t}=e===void 0?{}:e,{future:i}=I.useContext(vu),{matches:r}=I.useContext(yu),{pathname:s}=e0(),o=JSON.stringify(n3(r,i.v7_relativeSplatPath));return I.useMemo(()=>i3(n,JSON.parse(o),s,t==="path"),[n,o,s,t])}function Gk(n,e){return jk(n,e)}function jk(n,e,t,i){Qg()||Wi(!1);let{navigator:r}=I.useContext(vu),{matches:s}=I.useContext(yu),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=e0(),h;if(e){var f;let w=typeof e=="string"?xp(e):e;l==="/"||(f=w.pathname)!=null&&f.startsWith(l)||Wi(!1),h=w}else h=u;let g=h.pathname||"/",v=g;if(l!=="/"){let w=l.replace(/^\//,"").split("/");v="/"+g.replace(/^\//,"").split("/").slice(w.length).join("/")}let x=vk(n,{pathname:v}),S=Kk(x&&x.map(w=>Object.assign({},w,{params:Object.assign({},a,w.params),pathname:su([l,r.encodeLocation?r.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?l:su([l,r.encodeLocation?r.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),s,t,i);return e&&S?I.createElement(v_.Provider,{value:{location:Pg({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:tu.Pop}},S):S}function Wk(){let n=Qk(),e=Fk(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},e),t?I.createElement("pre",{style:r},t):null,null)}const $k=I.createElement(Wk,null);class Xk extends I.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?I.createElement(yu.Provider,{value:this.props.routeContext},I.createElement(o3.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Yk(n){let{routeContext:e,match:t,children:i}=n,r=I.useContext(g_);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),I.createElement(yu.Provider,{value:e},i)}function Kk(n,e,t,i){var r;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),n==null){var s;if(!t)return null;if(t.errors)n=t.matches;else if((s=i)!=null&&s.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,a=(r=t)==null?void 0:r.errors;if(a!=null){let h=o.findIndex(f=>f.route.id&&a?.[f.route.id]!==void 0);h>=0||Wi(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,u=-1;if(t&&i&&i.v7_partialHydration)for(let h=0;h<o.length;h++){let f=o[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=h),f.route.id){let{loaderData:g,errors:v}=t,x=f.route.loader&&g[f.route.id]===void 0&&(!v||v[f.route.id]===void 0);if(f.route.lazy||x){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((h,f,g)=>{let v,x=!1,S=null,w=null;t&&(v=a&&f.route.id?a[f.route.id]:void 0,S=f.route.errorElement||$k,l&&(u<0&&g===0?(tU("route-fallback"),x=!0,w=null):u===g&&(x=!0,w=f.route.hydrateFallbackElement||null)));let _=e.concat(o.slice(0,g+1)),b=()=>{let M;return v?M=S:x?M=w:f.route.Component?M=I.createElement(f.route.Component,null):f.route.element?M=f.route.element:M=h,I.createElement(Yk,{match:f,routeContext:{outlet:h,matches:_,isDataRoute:t!=null},children:M})};return t&&(f.route.ErrorBoundary||f.route.errorElement||g===0)?I.createElement(Xk,{location:t.location,revalidation:t.revalidation,component:S,error:v,children:b(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):b()},null)}var l3=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(l3||{}),c3=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(c3||{});function Jk(n){let e=I.useContext(g_);return e||Wi(!1),e}function qk(n){let e=I.useContext(s3);return e||Wi(!1),e}function Zk(n){let e=I.useContext(yu);return e||Wi(!1),e}function u3(n){let e=Zk(),t=e.matches[e.matches.length-1];return t.route.id||Wi(!1),t.route.id}function Qk(){var n;let e=I.useContext(o3),t=qk(),i=u3();return e!==void 0?e:(n=t.errors)==null?void 0:n[i]}function eU(){let{router:n}=Jk(l3.UseNavigateStable),e=u3(c3.UseNavigateStable),t=I.useRef(!1);return a3(()=>{t.current=!0}),I.useCallback(function(r,s){s===void 0&&(s={}),t.current&&(typeof r=="number"?n.navigate(r):n.navigate(r,Pg({fromRouteId:e},s)))},[n,e])}const wC={};function tU(n,e,t){wC[n]||(wC[n]=!0)}function nU(n,e){n?.v7_startTransition,n?.v7_relativeSplatPath}function fa(n){Wi(!1)}function iU(n){let{basename:e="/",children:t=null,location:i,navigationType:r=tu.Pop,navigator:s,static:o=!1,future:a}=n;Qg()&&Wi(!1);let l=e.replace(/^\/*/,"/"),u=I.useMemo(()=>({basename:l,navigator:s,static:o,future:Pg({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof i=="string"&&(i=xp(i));let{pathname:h="/",search:f="",hash:g="",state:v=null,key:x="default"}=i,S=I.useMemo(()=>{let w=tp(h,l);return w==null?null:{location:{pathname:w,search:f,hash:g,state:v,key:x},navigationType:r}},[l,h,f,g,v,x,r]);return S==null?null:I.createElement(vu.Provider,{value:u},I.createElement(v_.Provider,{children:t,value:S}))}function rU(n){let{children:e,location:t}=n;return Gk(nE(e),t)}new Promise(()=>{});function nE(n,e){e===void 0&&(e=[]);let t=[];return I.Children.forEach(n,(i,r)=>{if(!I.isValidElement(i))return;let s=[...e,r];if(i.type===I.Fragment){t.push.apply(t,nE(i.props.children,s));return}i.type!==fa&&Wi(!1),!i.props.index||!i.props.children||Wi(!1);let o={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=nE(i.props.children,s)),t.push(o)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Jy(){return Jy=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Jy.apply(this,arguments)}function d3(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function sU(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function oU(n,e){return n.button===0&&(!e||e==="_self")&&!sU(n)}const aU=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],lU=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],cU="6";try{window.__reactRouterVersion=cU}catch{}const uU=I.createContext({isTransitioning:!1}),dU="startTransition",SC=JI[dU];function hU(n){let{basename:e,children:t,future:i,window:r}=n,s=I.useRef();s.current==null&&(s.current=pk({window:r,v5Compat:!0}));let o=s.current,[a,l]=I.useState({action:o.action,location:o.location}),{v7_startTransition:u}=i||{},h=I.useCallback(f=>{u&&SC?SC(()=>l(f)):l(f)},[l,u]);return I.useLayoutEffect(()=>o.listen(h),[o,h]),I.useEffect(()=>nU(i),[i]),I.createElement(iU,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:o,future:i})}const fU=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",pU=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,lr=I.forwardRef(function(e,t){let{onClick:i,relative:r,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:h,viewTransition:f}=e,g=d3(e,aU),{basename:v}=I.useContext(vu),x,S=!1;if(typeof u=="string"&&pU.test(u)&&(x=u,fU))try{let M=new URL(window.location.href),T=u.startsWith("//")?new URL(M.protocol+u):new URL(u),L=tp(T.pathname,v);T.origin===M.origin&&L!=null?u=L+T.search+T.hash:S=!0}catch{}let w=Uk(u,{relative:r}),_=gU(u,{replace:o,state:a,target:l,preventScrollReset:h,relative:r,viewTransition:f});function b(M){i&&i(M),M.defaultPrevented||_(M)}return I.createElement("a",Jy({},g,{href:x||w,onClick:S||s?i:b,ref:t,target:l}))}),EC=I.forwardRef(function(e,t){let{"aria-current":i="page",caseSensitive:r=!1,className:s="",end:o=!1,style:a,to:l,viewTransition:u,children:h}=e,f=d3(e,lU),g=y_(l,{relative:f.relative}),v=e0(),x=I.useContext(s3),{navigator:S,basename:w}=I.useContext(vu),_=x!=null&&vU(g)&&u===!0,b=S.encodeLocation?S.encodeLocation(g).pathname:g.pathname,M=v.pathname,T=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;r||(M=M.toLowerCase(),T=T?T.toLowerCase():null,b=b.toLowerCase()),T&&w&&(T=tp(T,w)||T);const L=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let D=M===b||!o&&M.startsWith(b)&&M.charAt(L)==="/",U=T!=null&&(T===b||!o&&T.startsWith(b)&&T.charAt(b.length)==="/"),F={isActive:D,isPending:U,isTransitioning:_},k=D?i:void 0,N;typeof s=="function"?N=s(F):N=[s,D?"active":null,U?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let V=typeof a=="function"?a(F):a;return I.createElement(lr,Jy({},f,{"aria-current":k,className:N,ref:t,style:V,to:l,viewTransition:u}),typeof h=="function"?h(F):h)});var iE;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(iE||(iE={}));var AC;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(AC||(AC={}));function mU(n){let e=I.useContext(g_);return e||Wi(!1),e}function gU(n,e){let{target:t,replace:i,state:r,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=zk(),u=e0(),h=y_(n,{relative:o});return I.useCallback(f=>{if(oU(f,t)){f.preventDefault();let g=i!==void 0?i:Ky(u)===Ky(h);l(n,{replace:g,state:r,preventScrollReset:s,relative:o,viewTransition:a})}},[u,l,h,i,r,t,n,s,o,a])}function vU(n,e){e===void 0&&(e={});let t=I.useContext(uU);t==null&&Wi(!1);let{basename:i}=mU(iE.useViewTransitionState),r=y_(n,{relative:e.relative});if(!t.isTransitioning)return!1;let s=tp(t.currentLocation.pathname,i)||t.currentLocation.pathname,o=tp(t.nextLocation.pathname,i)||t.nextLocation.pathname;return tE(r.pathname,o)!=null||tE(r.pathname,s)!=null}var h3={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},bC=oe.createContext&&oe.createContext(h3),yU=["attr","size","title"];function xU(n,e){if(n==null)return{};var t=_U(n,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function _U(n,e){if(n==null)return{};var t={};for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){if(e.indexOf(i)>=0)continue;t[i]=n[i]}return t}function qy(){return qy=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},qy.apply(this,arguments)}function MC(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Zy(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?MC(Object(t),!0).forEach(function(i){wU(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):MC(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function wU(n,e,t){return e=SU(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function SU(n){var e=EU(n,"string");return typeof e=="symbol"?e:e+""}function EU(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function f3(n){return n&&n.map((e,t)=>oe.createElement(e.tag,Zy({key:t},e.attr),f3(e.child)))}function on(n){return e=>oe.createElement(AU,qy({attr:Zy({},n.attr)},e),f3(n.child))}function AU(n){var e=t=>{var{attr:i,size:r,title:s}=n,o=xU(n,yU),a=r||t.size||"1em",l;return t.className&&(l=t.className),n.className&&(l=(l?l+" ":"")+n.className),oe.createElement("svg",qy({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,o,{className:l,style:Zy(Zy({color:n.color||t.color},t.style),n.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&oe.createElement("title",null,s),n.children)};return bC!==void 0?oe.createElement(bC.Consumer,null,t=>e(t)):e(h3)}function bU(n){return on({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"12",x2:"5",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 19 5 12 12 5"},child:[]}]})(n)}function p3(n){return on({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 5 19 12 12 19"},child:[]}]})(n)}function MU(n){return on({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"8",r:"7"},child:[]},{tag:"polyline",attr:{points:"8.21 13.89 7 23 12 20 17 23 15.79 13.88"},child:[]}]})(n)}function CU(n){return on({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"},child:[]}]})(n)}function m3(n){return on({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"16",y1:"2",x2:"16",y2:"6"},child:[]},{tag:"line",attr:{x1:"8",y1:"2",x2:"8",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"10",x2:"21",y2:"10"},child:[]}]})(n)}function TU(n){return on({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 6 9 17 4 12"},child:[]}]})(n)}function SA(n){return on({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"},child:[]}]})(n)}function g3(n){return on({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"18 15 12 9 6 15"},child:[]}]})(n)}function EA(n){return on({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polyline",attr:{points:"12 6 12 12 16 14"},child:[]}]})(n)}function AA(n){return on({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"23"},child:[]},{tag:"path",attr:{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"},child:[]}]})(n)}function RU(n){return on({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"},child:[]}]})(n)}function PU(n){return on({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"},child:[]}]})(n)}function CC(n){return on({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"2",y1:"12",x2:"22",y2:"12"},child:[]},{tag:"path",attr:{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"},child:[]}]})(n)}function IU(n){return on({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"14",y:"3",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"14",y:"14",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"3",y:"14",width:"7",height:"7"},child:[]}]})(n)}function DU(n){return on({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"},child:[]},{tag:"polyline",attr:{points:"9 22 9 12 15 12 15 22"},child:[]}]})(n)}function BU(n){return on({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"},child:[]},{tag:"rect",attr:{x:"2",y:"9",width:"4",height:"12"},child:[]},{tag:"circle",attr:{cx:"4",cy:"4",r:"2"},child:[]}]})(n)}function LU(n){return on({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"},child:[]},{tag:"polyline",attr:{points:"22,6 12,13 2,6"},child:[]}]})(n)}function OU(n){return on({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"},child:[]}]})(n)}function NU(n){return on({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"15 3 21 3 21 9"},child:[]},{tag:"polyline",attr:{points:"9 21 3 21 3 15"},child:[]},{tag:"line",attr:{x1:"21",y1:"3",x2:"14",y2:"10"},child:[]},{tag:"line",attr:{x1:"3",y1:"21",x2:"10",y2:"14"},child:[]}]})(n)}function FU(n){return on({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"3",y1:"12",x2:"21",y2:"12"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"18",x2:"21",y2:"18"},child:[]}]})(n)}function kU(n){return on({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"},child:[]}]})(n)}function UU(n){return on({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"},child:[]}]})(n)}function zU(n){return on({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]}]})(n)}function HU(n){return on({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"18",cy:"5",r:"3"},child:[]},{tag:"circle",attr:{cx:"6",cy:"12",r:"3"},child:[]},{tag:"circle",attr:{cx:"18",cy:"19",r:"3"},child:[]},{tag:"line",attr:{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"},child:[]},{tag:"line",attr:{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"},child:[]}]})(n)}function X1(n){return on({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"},child:[]}]})(n)}function VU(n){return on({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"5"},child:[]},{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"3"},child:[]},{tag:"line",attr:{x1:"12",y1:"21",x2:"12",y2:"23"},child:[]},{tag:"line",attr:{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"},child:[]},{tag:"line",attr:{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"},child:[]},{tag:"line",attr:{x1:"1",y1:"12",x2:"3",y2:"12"},child:[]},{tag:"line",attr:{x1:"21",y1:"12",x2:"23",y2:"12"},child:[]},{tag:"line",attr:{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"},child:[]},{tag:"line",attr:{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"},child:[]}]})(n)}function GU(n){return on({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"},child:[]},{tag:"line",attr:{x1:"7",y1:"7",x2:"7.01",y2:"7"},child:[]}]})(n)}function v3(n){return on({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 6 13.5 15.5 8.5 10.5 1 18"},child:[]},{tag:"polyline",attr:{points:"17 6 23 6 23 12"},child:[]}]})(n)}function jU(n){return on({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"},child:[]}]})(n)}function bA(n){return on({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"},child:[]}]})(n)}function y3(n){return on({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(n)}function WU(n){return on({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(n)}const MA=I.createContext({});function CA(n){const e=I.useRef(null);return e.current===null&&(e.current=n()),e.current}const TA=typeof window<"u",x3=TA?I.useLayoutEffect:I.useEffect,x_=I.createContext(null);function RA(n,e){n.indexOf(e)===-1&&n.push(e)}function PA(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const ic=(n,e,t)=>t>e?e:t<n?n:t;let IA=()=>{};const rc={},_3=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function w3(n){return typeof n=="object"&&n!==null}const S3=n=>/^0[^.\s]+$/u.test(n);function DA(n){let e;return()=>(e===void 0&&(e=n()),e)}const No=n=>n,$U=(n,e)=>t=>e(n(t)),t0=(...n)=>n.reduce($U),Ig=(n,e,t)=>{const i=e-n;return i===0?1:(t-n)/i};class BA{constructor(){this.subscriptions=[]}add(e){return RA(this.subscriptions,e),()=>PA(this.subscriptions,e)}notify(e,t,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,t,i);else for(let s=0;s<r;s++){const o=this.subscriptions[s];o&&o(e,t,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Wa=n=>n*1e3,Do=n=>n/1e3;function E3(n,e){return e?n*(1e3/e):0}const A3=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,XU=1e-7,YU=12;function KU(n,e,t,i,r){let s,o,a=0;do o=e+(t-e)/2,s=A3(o,i,r)-n,s>0?t=o:e=o;while(Math.abs(s)>XU&&++a<YU);return o}function n0(n,e,t,i){if(n===e&&t===i)return No;const r=s=>KU(s,0,1,n,t);return s=>s===0||s===1?s:A3(r(s),e,i)}const b3=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,M3=n=>e=>1-n(1-e),C3=n0(.33,1.53,.69,.99),LA=M3(C3),T3=b3(LA),R3=n=>(n*=2)<1?.5*LA(n):.5*(2-Math.pow(2,-10*(n-1))),OA=n=>1-Math.sin(Math.acos(n)),P3=M3(OA),I3=b3(OA),JU=n0(.42,0,1,1),qU=n0(0,0,.58,1),D3=n0(.42,0,.58,1),ZU=n=>Array.isArray(n)&&typeof n[0]!="number",B3=n=>Array.isArray(n)&&typeof n[0]=="number",QU={linear:No,easeIn:JU,easeInOut:D3,easeOut:qU,circIn:OA,circInOut:I3,circOut:P3,backIn:LA,backInOut:T3,backOut:C3,anticipate:R3},e4=n=>typeof n=="string",TC=n=>{if(B3(n)){IA(n.length===4);const[e,t,i,r]=n;return n0(e,t,i,r)}else if(e4(n))return QU[n];return n},Av=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function t4(n,e){let t=new Set,i=new Set,r=!1,s=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function l(h){o.has(h)&&(u.schedule(h),n()),h(a)}const u={schedule:(h,f=!1,g=!1)=>{const x=g&&r?t:i;return f&&o.add(h),x.has(h)||x.add(h),h},cancel:h=>{i.delete(h),o.delete(h)},process:h=>{if(a=h,r){s=!0;return}r=!0,[t,i]=[i,t],t.forEach(l),t.clear(),r=!1,s&&(s=!1,u.process(h))}};return u}const n4=40;function L3(n,e){let t=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},s=()=>t=!0,o=Av.reduce((M,T)=>(M[T]=t4(s),M),{}),{setup:a,read:l,resolveKeyframes:u,preUpdate:h,update:f,preRender:g,render:v,postRender:x}=o,S=()=>{const M=rc.useManualTiming?r.timestamp:performance.now();t=!1,rc.useManualTiming||(r.delta=i?1e3/60:Math.max(Math.min(M-r.timestamp,n4),1)),r.timestamp=M,r.isProcessing=!0,a.process(r),l.process(r),u.process(r),h.process(r),f.process(r),g.process(r),v.process(r),x.process(r),r.isProcessing=!1,t&&e&&(i=!1,n(S))},w=()=>{t=!0,i=!0,r.isProcessing||n(S)};return{schedule:Av.reduce((M,T)=>{const L=o[T];return M[T]=(D,U=!1,F=!1)=>(t||w(),L.schedule(D,U,F)),M},{}),cancel:M=>{for(let T=0;T<Av.length;T++)o[Av[T]].cancel(M)},state:r,steps:o}}const{schedule:Mi,cancel:lu,state:Vr,steps:Y1}=L3(typeof requestAnimationFrame<"u"?requestAnimationFrame:No,!0);let Uy;function i4(){Uy=void 0}const Ys={now:()=>(Uy===void 0&&Ys.set(Vr.isProcessing||rc.useManualTiming?Vr.timestamp:performance.now()),Uy),set:n=>{Uy=n,queueMicrotask(i4)}},O3=n=>e=>typeof e=="string"&&e.startsWith(n),NA=O3("--"),r4=O3("var(--"),FA=n=>r4(n)?s4.test(n.split("/*")[0].trim()):!1,s4=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,_p={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Dg={..._p,transform:n=>ic(0,1,n)},bv={..._p,default:1},ug=n=>Math.round(n*1e5)/1e5,kA=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function o4(n){return n==null}const a4=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,UA=(n,e)=>t=>!!(typeof t=="string"&&a4.test(t)&&t.startsWith(n)||e&&!o4(t)&&Object.prototype.hasOwnProperty.call(t,e)),N3=(n,e,t)=>i=>{if(typeof i!="string")return i;const[r,s,o,a]=i.match(kA);return{[n]:parseFloat(r),[e]:parseFloat(s),[t]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},l4=n=>ic(0,255,n),K1={..._p,transform:n=>Math.round(l4(n))},Bd={test:UA("rgb","red"),parse:N3("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:i=1})=>"rgba("+K1.transform(n)+", "+K1.transform(e)+", "+K1.transform(t)+", "+ug(Dg.transform(i))+")"};function c4(n){let e="",t="",i="",r="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),i=n.substring(5,7),r=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),i=n.substring(3,4),r=n.substring(4,5),e+=e,t+=t,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const rE={test:UA("#"),parse:c4,transform:Bd.transform},i0=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),qc=i0("deg"),$a=i0("%"),an=i0("px"),u4=i0("vh"),d4=i0("vw"),RC={...$a,parse:n=>$a.parse(n)/100,transform:n=>$a.transform(n*100)},zf={test:UA("hsl","hue"),parse:N3("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:i=1})=>"hsla("+Math.round(n)+", "+$a.transform(ug(e))+", "+$a.transform(ug(t))+", "+ug(Dg.transform(i))+")"},ar={test:n=>Bd.test(n)||rE.test(n)||zf.test(n),parse:n=>Bd.test(n)?Bd.parse(n):zf.test(n)?zf.parse(n):rE.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?Bd.transform(n):zf.transform(n),getAnimatableNone:n=>{const e=ar.parse(n);return e.alpha=0,ar.transform(e)}},h4=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function f4(n){return isNaN(n)&&typeof n=="string"&&(n.match(kA)?.length||0)+(n.match(h4)?.length||0)>0}const F3="number",k3="color",p4="var",m4="var(",PC="${}",g4=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Bg(n){const e=n.toString(),t=[],i={color:[],number:[],var:[]},r=[];let s=0;const a=e.replace(g4,l=>(ar.test(l)?(i.color.push(s),r.push(k3),t.push(ar.parse(l))):l.startsWith(m4)?(i.var.push(s),r.push(p4),t.push(l)):(i.number.push(s),r.push(F3),t.push(parseFloat(l))),++s,PC)).split(PC);return{values:t,split:a,indexes:i,types:r}}function U3(n){return Bg(n).values}function z3(n){const{split:e,types:t}=Bg(n),i=e.length;return r=>{let s="";for(let o=0;o<i;o++)if(s+=e[o],r[o]!==void 0){const a=t[o];a===F3?s+=ug(r[o]):a===k3?s+=ar.transform(r[o]):s+=r[o]}return s}}const v4=n=>typeof n=="number"?0:ar.test(n)?ar.getAnimatableNone(n):n;function y4(n){const e=U3(n);return z3(n)(e.map(v4))}const cu={test:f4,parse:U3,createTransformer:z3,getAnimatableNone:y4};function J1(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function x4({hue:n,saturation:e,lightness:t,alpha:i}){n/=360,e/=100,t/=100;let r=0,s=0,o=0;if(!e)r=s=o=t;else{const a=t<.5?t*(1+e):t+e-t*e,l=2*t-a;r=J1(l,a,n+1/3),s=J1(l,a,n),o=J1(l,a,n-1/3)}return{red:Math.round(r*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:i}}function Qy(n,e){return t=>t>0?e:n}const Ni=(n,e,t)=>n+(e-n)*t,q1=(n,e,t)=>{const i=n*n,r=t*(e*e-i)+i;return r<0?0:Math.sqrt(r)},_4=[rE,Bd,zf],w4=n=>_4.find(e=>e.test(n));function IC(n){const e=w4(n);if(!e)return!1;let t=e.parse(n);return e===zf&&(t=x4(t)),t}const DC=(n,e)=>{const t=IC(n),i=IC(e);if(!t||!i)return Qy(n,e);const r={...t};return s=>(r.red=q1(t.red,i.red,s),r.green=q1(t.green,i.green,s),r.blue=q1(t.blue,i.blue,s),r.alpha=Ni(t.alpha,i.alpha,s),Bd.transform(r))},sE=new Set(["none","hidden"]);function S4(n,e){return sE.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function E4(n,e){return t=>Ni(n,e,t)}function zA(n){return typeof n=="number"?E4:typeof n=="string"?FA(n)?Qy:ar.test(n)?DC:M4:Array.isArray(n)?H3:typeof n=="object"?ar.test(n)?DC:A4:Qy}function H3(n,e){const t=[...n],i=t.length,r=n.map((s,o)=>zA(s)(s,e[o]));return s=>{for(let o=0;o<i;o++)t[o]=r[o](s);return t}}function A4(n,e){const t={...n,...e},i={};for(const r in t)n[r]!==void 0&&e[r]!==void 0&&(i[r]=zA(n[r])(n[r],e[r]));return r=>{for(const s in i)t[s]=i[s](r);return t}}function b4(n,e){const t=[],i={color:0,var:0,number:0};for(let r=0;r<e.values.length;r++){const s=e.types[r],o=n.indexes[s][i[s]],a=n.values[o]??0;t[r]=a,i[s]++}return t}const M4=(n,e)=>{const t=cu.createTransformer(e),i=Bg(n),r=Bg(e);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?sE.has(n)&&!r.values.length||sE.has(e)&&!i.values.length?S4(n,e):t0(H3(b4(i,r),r.values),t):Qy(n,e)};function V3(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?Ni(n,e,t):zA(n)(n,e)}const C4=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>Mi.update(e,t),stop:()=>lu(e),now:()=>Vr.isProcessing?Vr.timestamp:Ys.now()}},G3=(n,e,t=10)=>{let i="";const r=Math.max(Math.round(e/t),2);for(let s=0;s<r;s++)i+=Math.round(n(s/(r-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},ex=2e4;function HA(n){let e=0;const t=50;let i=n.next(e);for(;!i.done&&e<ex;)e+=t,i=n.next(e);return e>=ex?1/0:e}function T4(n,e=100,t){const i=t({...n,keyframes:[0,e]}),r=Math.min(HA(i),ex);return{type:"keyframes",ease:s=>i.next(r*s).value/e,duration:Do(r)}}const R4=5;function j3(n,e,t){const i=Math.max(e-R4,0);return E3(t-n(i),e-i)}const Gi={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Z1=.001;function P4({duration:n=Gi.duration,bounce:e=Gi.bounce,velocity:t=Gi.velocity,mass:i=Gi.mass}){let r,s,o=1-e;o=ic(Gi.minDamping,Gi.maxDamping,o),n=ic(Gi.minDuration,Gi.maxDuration,Do(n)),o<1?(r=u=>{const h=u*o,f=h*n,g=h-t,v=oE(u,o),x=Math.exp(-f);return Z1-g/v*x},s=u=>{const f=u*o*n,g=f*t+t,v=Math.pow(o,2)*Math.pow(u,2)*n,x=Math.exp(-f),S=oE(Math.pow(u,2),o);return(-r(u)+Z1>0?-1:1)*((g-v)*x)/S}):(r=u=>{const h=Math.exp(-u*n),f=(u-t)*n+1;return-Z1+h*f},s=u=>{const h=Math.exp(-u*n),f=(t-u)*(n*n);return h*f});const a=5/n,l=D4(r,s,a);if(n=Wa(n),isNaN(l))return{stiffness:Gi.stiffness,damping:Gi.damping,duration:n};{const u=Math.pow(l,2)*i;return{stiffness:u,damping:o*2*Math.sqrt(i*u),duration:n}}}const I4=12;function D4(n,e,t){let i=t;for(let r=1;r<I4;r++)i=i-n(i)/e(i);return i}function oE(n,e){return n*Math.sqrt(1-e*e)}const B4=["duration","bounce"],L4=["stiffness","damping","mass"];function BC(n,e){return e.some(t=>n[t]!==void 0)}function O4(n){let e={velocity:Gi.velocity,stiffness:Gi.stiffness,damping:Gi.damping,mass:Gi.mass,isResolvedFromDuration:!1,...n};if(!BC(n,L4)&&BC(n,B4))if(n.visualDuration){const t=n.visualDuration,i=2*Math.PI/(t*1.2),r=i*i,s=2*ic(.05,1,1-(n.bounce||0))*Math.sqrt(r);e={...e,mass:Gi.mass,stiffness:r,damping:s}}else{const t=P4(n);e={...e,...t,mass:Gi.mass},e.isResolvedFromDuration=!0}return e}function tx(n=Gi.visualDuration,e=Gi.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:i,restDelta:r}=t;const s=t.keyframes[0],o=t.keyframes[t.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:u,mass:h,duration:f,velocity:g,isResolvedFromDuration:v}=O4({...t,velocity:-Do(t.velocity||0)}),x=g||0,S=u/(2*Math.sqrt(l*h)),w=o-s,_=Do(Math.sqrt(l/h)),b=Math.abs(w)<5;i||(i=b?Gi.restSpeed.granular:Gi.restSpeed.default),r||(r=b?Gi.restDelta.granular:Gi.restDelta.default);let M;if(S<1){const L=oE(_,S);M=D=>{const U=Math.exp(-S*_*D);return o-U*((x+S*_*w)/L*Math.sin(L*D)+w*Math.cos(L*D))}}else if(S===1)M=L=>o-Math.exp(-_*L)*(w+(x+_*w)*L);else{const L=_*Math.sqrt(S*S-1);M=D=>{const U=Math.exp(-S*_*D),F=Math.min(L*D,300);return o-U*((x+S*_*w)*Math.sinh(F)+L*w*Math.cosh(F))/L}}const T={calculatedDuration:v&&f||null,next:L=>{const D=M(L);if(v)a.done=L>=f;else{let U=L===0?x:0;S<1&&(U=L===0?Wa(x):j3(M,L,D));const F=Math.abs(U)<=i,k=Math.abs(o-D)<=r;a.done=F&&k}return a.value=a.done?o:D,a},toString:()=>{const L=Math.min(HA(T),ex),D=G3(U=>T.next(L*U).value,L,30);return L+"ms "+D},toTransition:()=>{}};return T}tx.applyToOptions=n=>{const e=T4(n,100,tx);return n.ease=e.ease,n.duration=Wa(e.duration),n.type="keyframes",n};function aE({keyframes:n,velocity:e=0,power:t=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:u=.5,restSpeed:h}){const f=n[0],g={done:!1,value:f},v=F=>a!==void 0&&F<a||l!==void 0&&F>l,x=F=>a===void 0?l:l===void 0||Math.abs(a-F)<Math.abs(l-F)?a:l;let S=t*e;const w=f+S,_=o===void 0?w:o(w);_!==w&&(S=_-f);const b=F=>-S*Math.exp(-F/i),M=F=>_+b(F),T=F=>{const k=b(F),N=M(F);g.done=Math.abs(k)<=u,g.value=g.done?_:N};let L,D;const U=F=>{v(g.value)&&(L=F,D=tx({keyframes:[g.value,x(g.value)],velocity:j3(M,F,g.value),damping:r,stiffness:s,restDelta:u,restSpeed:h}))};return U(0),{calculatedDuration:null,next:F=>{let k=!1;return!D&&L===void 0&&(k=!0,T(F),U(F)),L!==void 0&&F>=L?D.next(F-L):(!k&&T(F),g)}}}function N4(n,e,t){const i=[],r=t||rc.mix||V3,s=n.length-1;for(let o=0;o<s;o++){let a=r(n[o],n[o+1]);if(e){const l=Array.isArray(e)?e[o]||No:e;a=t0(l,a)}i.push(a)}return i}function F4(n,e,{clamp:t=!0,ease:i,mixer:r}={}){const s=n.length;if(IA(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=n[0]===n[1];n[0]>n[s-1]&&(n=[...n].reverse(),e=[...e].reverse());const a=N4(e,i,r),l=a.length,u=h=>{if(o&&h<n[0])return e[0];let f=0;if(l>1)for(;f<n.length-2&&!(h<n[f+1]);f++);const g=Ig(n[f],n[f+1],h);return a[f](g)};return t?h=>u(ic(n[0],n[s-1],h)):u}function k4(n,e){const t=n[n.length-1];for(let i=1;i<=e;i++){const r=Ig(0,e,i);n.push(Ni(t,1,r))}}function U4(n){const e=[0];return k4(e,n.length-1),e}function z4(n,e){return n.map(t=>t*e)}function H4(n,e){return n.map(()=>e||D3).splice(0,n.length-1)}function dg({duration:n=300,keyframes:e,times:t,ease:i="easeInOut"}){const r=ZU(i)?i.map(TC):TC(i),s={done:!1,value:e[0]},o=z4(t&&t.length===e.length?t:U4(e),n),a=F4(o,e,{ease:Array.isArray(r)?r:H4(e,r)});return{calculatedDuration:n,next:l=>(s.value=a(l),s.done=l>=n,s)}}const V4=n=>n!==null;function VA(n,{repeat:e,repeatType:t="loop"},i,r=1){const s=n.filter(V4),a=r<0||e&&t!=="loop"&&e%2===1?0:s.length-1;return!a||i===void 0?s[a]:i}const G4={decay:aE,inertia:aE,tween:dg,keyframes:dg,spring:tx};function W3(n){typeof n.type=="string"&&(n.type=G4[n.type])}class GA{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const j4=n=>n/100;class jA extends GA{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:t}=this.options;t&&t.updatedAt!==Ys.now()&&this.tick(Ys.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;W3(e);const{type:t=dg,repeat:i=0,repeatDelay:r=0,repeatType:s,velocity:o=0}=e;let{keyframes:a}=e;const l=t||dg;l!==dg&&typeof a[0]!="number"&&(this.mixKeyframes=t0(j4,V3(a[0],a[1])),a=[0,100]);const u=l({...e,keyframes:a});s==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...a].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=HA(u));const{calculatedDuration:h}=u;this.calculatedDuration=h,this.resolvedDuration=h+r,this.totalDuration=this.resolvedDuration*(i+1)-r,this.generator=u}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:i,totalDuration:r,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:l}=this;if(this.startTime===null)return i.next(0);const{delay:u=0,keyframes:h,repeat:f,repeatType:g,repeatDelay:v,type:x,onUpdate:S,finalKeyframe:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-r/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const _=this.currentTime-u*(this.playbackSpeed>=0?1:-1),b=this.playbackSpeed>=0?_<0:_>r;this.currentTime=Math.max(_,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=r);let M=this.currentTime,T=i;if(f){const F=Math.min(this.currentTime,r)/a;let k=Math.floor(F),N=F%1;!N&&F>=1&&(N=1),N===1&&k--,k=Math.min(k,f+1),!!(k%2)&&(g==="reverse"?(N=1-N,v&&(N-=v/a)):g==="mirror"&&(T=o)),M=ic(0,1,N)*a}const L=b?{done:!1,value:h[0]}:T.next(M);s&&(L.value=s(L.value));let{done:D}=L;!b&&l!==null&&(D=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const U=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&D);return U&&x!==aE&&(L.value=VA(h,this.options,w,this.speed)),S&&S(L.value),U&&this.finish(),L}then(e,t){return this.finished.then(e,t)}get duration(){return Do(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Do(e)}get time(){return Do(this.currentTime)}set time(e){e=Wa(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Ys.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Do(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=C4,startTime:t}=this.options;this.driver||(this.driver=e(r=>this.tick(r))),this.options.onPlay?.();const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=t??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Ys.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function W4(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const Ld=n=>n*180/Math.PI,lE=n=>{const e=Ld(Math.atan2(n[1],n[0]));return cE(e)},$4={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:lE,rotateZ:lE,skewX:n=>Ld(Math.atan(n[1])),skewY:n=>Ld(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},cE=n=>(n=n%360,n<0&&(n+=360),n),LC=lE,OC=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),NC=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),X4={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:OC,scaleY:NC,scale:n=>(OC(n)+NC(n))/2,rotateX:n=>cE(Ld(Math.atan2(n[6],n[5]))),rotateY:n=>cE(Ld(Math.atan2(-n[2],n[0]))),rotateZ:LC,rotate:LC,skewX:n=>Ld(Math.atan(n[4])),skewY:n=>Ld(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function uE(n){return n.includes("scale")?1:0}function dE(n,e){if(!n||n==="none")return uE(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,r;if(t)i=X4,r=t;else{const a=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=$4,r=a}if(!r)return uE(e);const s=i[e],o=r[1].split(",").map(K4);return typeof s=="function"?s(o):o[s]}const Y4=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return dE(t,e)};function K4(n){return parseFloat(n.trim())}const wp=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Sp=new Set(wp),FC=n=>n===_p||n===an,J4=new Set(["x","y","z"]),q4=wp.filter(n=>!J4.has(n));function Z4(n){const e=[];return q4.forEach(t=>{const i=n.getValue(t);i!==void 0&&(e.push([t,i.get()]),i.set(t.startsWith("scale")?1:0))}),e}const Gd={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>dE(e,"x"),y:(n,{transform:e})=>dE(e,"y")};Gd.translateX=Gd.x;Gd.translateY=Gd.y;const jd=new Set;let hE=!1,fE=!1,pE=!1;function $3(){if(fE){const n=Array.from(jd).filter(i=>i.needsMeasurement),e=new Set(n.map(i=>i.element)),t=new Map;e.forEach(i=>{const r=Z4(i);r.length&&(t.set(i,r),i.render())}),n.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const r=t.get(i);r&&r.forEach(([s,o])=>{i.getValue(s)?.set(o)})}),n.forEach(i=>i.measureEndState()),n.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}fE=!1,hE=!1,jd.forEach(n=>n.complete(pE)),jd.clear()}function X3(){jd.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(fE=!0)})}function Q4(){pE=!0,X3(),$3(),pE=!1}class WA{constructor(e,t,i,r,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=i,this.motionValue=r,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(jd.add(this),hE||(hE=!0,Mi.read(X3),Mi.resolveKeyframes($3))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:i,motionValue:r}=this;if(e[0]===null){const s=r?.get(),o=e[e.length-1];if(s!==void 0)e[0]=s;else if(i&&t){const a=i.readValue(t,o);a!=null&&(e[0]=a)}e[0]===void 0&&(e[0]=o),r&&s===void 0&&r.set(e[0])}W4(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),jd.delete(this)}cancel(){this.state==="scheduled"&&(jd.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const e5=n=>n.startsWith("--");function t5(n,e,t){e5(e)?n.style.setProperty(e,t):n.style[e]=t}const n5=DA(()=>window.ScrollTimeline!==void 0),i5={};function r5(n,e){const t=DA(n);return()=>i5[e]??t()}const Y3=r5(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),sg=([n,e,t,i])=>`cubic-bezier(${n}, ${e}, ${t}, ${i})`,kC={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:sg([0,.65,.55,1]),circOut:sg([.55,0,1,.45]),backIn:sg([.31,.01,.66,-.59]),backOut:sg([.33,1.53,.69,.99])};function K3(n,e){if(n)return typeof n=="function"?Y3()?G3(n,e):"ease-out":B3(n)?sg(n):Array.isArray(n)?n.map(t=>K3(t,e)||kC.easeOut):kC[n]}function s5(n,e,t,{delay:i=0,duration:r=300,repeat:s=0,repeatType:o="loop",ease:a="easeOut",times:l}={},u=void 0){const h={[e]:t};l&&(h.offset=l);const f=K3(a,r);Array.isArray(f)&&(h.easing=f);const g={delay:i,duration:r,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return u&&(g.pseudoElement=u),n.animate(h,g)}function J3(n){return typeof n=="function"&&"applyToOptions"in n}function o5({type:n,...e}){return J3(n)&&Y3()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class a5 extends GA{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:i,keyframes:r,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:a,onComplete:l}=e;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=e,IA(typeof e.type!="string");const u=o5(e);this.animation=s5(t,i,r,u,s),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const h=VA(r,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(h):t5(t,i,h),this.animation.cancel()}l?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return Do(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Do(e)}get time(){return Do(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Wa(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&n5()?(this.animation.timeline=e,No):t(this)}}const q3={anticipate:R3,backInOut:T3,circInOut:I3};function l5(n){return n in q3}function c5(n){typeof n.ease=="string"&&l5(n.ease)&&(n.ease=q3[n.ease])}const UC=10;class u5 extends a5{constructor(e){c5(e),W3(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:i,onComplete:r,element:s,...o}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const a=new jA({...o,autoplay:!1}),l=Wa(this.finishedTime??this.time);t.setWithVelocity(a.sample(l-UC).value,a.sample(l).value,UC),a.stop()}}const zC=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(cu.test(n)||n==="0")&&!n.startsWith("url("));function d5(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function h5(n,e,t,i){const r=n[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const s=n[n.length-1],o=zC(r,e),a=zC(s,e);return!o||!a?!1:d5(n)||(t==="spring"||J3(t))&&i}function mE(n){n.duration=0,n.type="keyframes"}const f5=new Set(["opacity","clipPath","filter","transform"]),p5=DA(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function m5(n){const{motionValue:e,name:t,repeatDelay:i,repeatType:r,damping:s,type:o}=n;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=e.owner.getProps();return p5()&&t&&f5.has(t)&&(t!=="transform"||!u)&&!l&&!i&&r!=="mirror"&&s!==0&&o!=="inertia"}const g5=40;class v5 extends GA{constructor({autoplay:e=!0,delay:t=0,type:i="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:o="loop",keyframes:a,name:l,motionValue:u,element:h,...f}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Ys.now();const g={autoplay:e,delay:t,type:i,repeat:r,repeatDelay:s,repeatType:o,name:l,motionValue:u,element:h,...f},v=h?.KeyframeResolver||WA;this.keyframeResolver=new v(a,(x,S,w)=>this.onKeyframesResolved(x,S,g,!w),l,u,h),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,i,r){this.keyframeResolver=void 0;const{name:s,type:o,velocity:a,delay:l,isHandoff:u,onUpdate:h}=i;this.resolvedAt=Ys.now(),h5(e,s,o,a)||((rc.instantAnimations||!l)&&h?.(VA(e,i,t)),e[0]=e[e.length-1],mE(i),i.repeat=0);const g={startTime:r?this.resolvedAt?this.resolvedAt-this.createdAt>g5?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...i,keyframes:e},v=!u&&m5(g)?new u5({...g,element:g.motionValue.owner.current}):new jA(g);v.finished.then(()=>this.notifyFinished()).catch(No),this.pendingTimeline&&(this.stopTimeline=v.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=v}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),Q4()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const y5=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function x5(n){const e=y5.exec(n);if(!e)return[,];const[,t,i,r]=e;return[`--${t??i}`,r]}function Z3(n,e,t=1){const[i,r]=x5(n);if(!i)return;const s=window.getComputedStyle(e).getPropertyValue(i);if(s){const o=s.trim();return _3(o)?parseFloat(o):o}return FA(r)?Z3(r,e,t+1):r}function $A(n,e){return n?.[e]??n?.default??n}const Q3=new Set(["width","height","top","left","right","bottom",...wp]),_5={test:n=>n==="auto",parse:n=>n},eD=n=>e=>e.test(n),tD=[_p,an,$a,qc,d4,u4,_5],HC=n=>tD.find(eD(n));function w5(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||S3(n):!0}const S5=new Set(["brightness","contrast","saturate","opacity"]);function E5(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[i]=t.match(kA)||[];if(!i)return n;const r=t.replace(i,"");let s=S5.has(e)?1:0;return i!==t&&(s*=100),e+"("+s+r+")"}const A5=/\b([a-z-]*)\(.*?\)/gu,gE={...cu,getAnimatableNone:n=>{const e=n.match(A5);return e?e.map(E5).join(" "):n}},VC={..._p,transform:Math.round},b5={rotate:qc,rotateX:qc,rotateY:qc,rotateZ:qc,scale:bv,scaleX:bv,scaleY:bv,scaleZ:bv,skew:qc,skewX:qc,skewY:qc,distance:an,translateX:an,translateY:an,translateZ:an,x:an,y:an,z:an,perspective:an,transformPerspective:an,opacity:Dg,originX:RC,originY:RC,originZ:an},XA={borderWidth:an,borderTopWidth:an,borderRightWidth:an,borderBottomWidth:an,borderLeftWidth:an,borderRadius:an,radius:an,borderTopLeftRadius:an,borderTopRightRadius:an,borderBottomRightRadius:an,borderBottomLeftRadius:an,width:an,maxWidth:an,height:an,maxHeight:an,top:an,right:an,bottom:an,left:an,padding:an,paddingTop:an,paddingRight:an,paddingBottom:an,paddingLeft:an,margin:an,marginTop:an,marginRight:an,marginBottom:an,marginLeft:an,backgroundPositionX:an,backgroundPositionY:an,...b5,zIndex:VC,fillOpacity:Dg,strokeOpacity:Dg,numOctaves:VC},M5={...XA,color:ar,backgroundColor:ar,outlineColor:ar,fill:ar,stroke:ar,borderColor:ar,borderTopColor:ar,borderRightColor:ar,borderBottomColor:ar,borderLeftColor:ar,filter:gE,WebkitFilter:gE},nD=n=>M5[n];function iD(n,e){let t=nD(n);return t!==gE&&(t=cu),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const C5=new Set(["auto","none","0"]);function T5(n,e,t){let i=0,r;for(;i<n.length&&!r;){const s=n[i];typeof s=="string"&&!C5.has(s)&&Bg(s).values.length&&(r=n[i]),i++}if(r&&t)for(const s of e)n[s]=iD(t,r)}class R5 extends WA{constructor(e,t,i,r,s){super(e,t,i,r,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:i}=this;if(!t||!t.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let u=e[l];if(typeof u=="string"&&(u=u.trim(),FA(u))){const h=Z3(u,t.current);h!==void 0&&(e[l]=h),l===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!Q3.has(i)||e.length!==2)return;const[r,s]=e,o=HC(r),a=HC(s);if(o!==a)if(FC(o)&&FC(a))for(let l=0;l<e.length;l++){const u=e[l];typeof u=="string"&&(e[l]=parseFloat(u))}else Gd[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,i=[];for(let r=0;r<e.length;r++)(e[r]===null||w5(e[r]))&&i.push(r);i.length&&T5(e,i,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Gd[i](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const r=t[t.length-1];r!==void 0&&e.getValue(i,r).jump(r,!1)}measureEndState(){const{element:e,name:t,unresolvedKeyframes:i}=this;if(!e||!e.current)return;const r=e.getValue(t);r&&r.jump(this.measuredOrigin,!1);const s=i.length-1,o=i[s];i[s]=Gd[t](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),this.removedTransforms?.length&&this.removedTransforms.forEach(([a,l])=>{e.getValue(a).set(l)}),this.resolveNoneKeyframes()}}function P5(n,e,t){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let i=document;const r=t?.[n]??i.querySelectorAll(n);return r?Array.from(r):[]}return Array.from(n)}const rD=(n,e)=>e&&typeof n=="number"?e.transform(n):n;function sD(n){return w3(n)&&"offsetHeight"in n}const GC=30,I5=n=>!isNaN(parseFloat(n));class D5{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=i=>{const r=Ys.now();if(this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const s of this.dependents)s.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Ys.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=I5(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new BA);const i=this.events[e].add(t);return e==="change"?()=>{i(),Mi.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,i){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Ys.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>GC)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,GC);return E3(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function np(n,e){return new D5(n,e)}const{schedule:YA}=L3(queueMicrotask,!1),ma={x:!1,y:!1};function oD(){return ma.x||ma.y}function B5(n){return n==="x"||n==="y"?ma[n]?null:(ma[n]=!0,()=>{ma[n]=!1}):ma.x||ma.y?null:(ma.x=ma.y=!0,()=>{ma.x=ma.y=!1})}function aD(n,e){const t=P5(n),i=new AbortController,r={passive:!0,...e,signal:i.signal};return[t,r,()=>i.abort()]}function jC(n){return!(n.pointerType==="touch"||oD())}function L5(n,e,t={}){const[i,r,s]=aD(n,t),o=a=>{if(!jC(a))return;const{target:l}=a,u=e(l,a);if(typeof u!="function"||!l)return;const h=f=>{jC(f)&&(u(f),l.removeEventListener("pointerleave",h))};l.addEventListener("pointerleave",h,r)};return i.forEach(a=>{a.addEventListener("pointerenter",o,r)}),s}const lD=(n,e)=>e?n===e?!0:lD(n,e.parentElement):!1,KA=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,O5=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function N5(n){return O5.has(n.tagName)||n.tabIndex!==-1}const zy=new WeakSet;function WC(n){return e=>{e.key==="Enter"&&n(e)}}function Q1(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const F5=(n,e)=>{const t=n.currentTarget;if(!t)return;const i=WC(()=>{if(zy.has(t))return;Q1(t,"down");const r=WC(()=>{Q1(t,"up")}),s=()=>Q1(t,"cancel");t.addEventListener("keyup",r,e),t.addEventListener("blur",s,e)});t.addEventListener("keydown",i,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",i),e)};function $C(n){return KA(n)&&!oD()}function k5(n,e,t={}){const[i,r,s]=aD(n,t),o=a=>{const l=a.currentTarget;if(!$C(a))return;zy.add(l);const u=e(l,a),h=(v,x)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",g),zy.has(l)&&zy.delete(l),$C(v)&&typeof u=="function"&&u(v,{success:x})},f=v=>{h(v,l===window||l===document||t.useGlobalTarget||lD(l,v.target))},g=v=>{h(v,!1)};window.addEventListener("pointerup",f,r),window.addEventListener("pointercancel",g,r)};return i.forEach(a=>{(t.useGlobalTarget?window:a).addEventListener("pointerdown",o,r),sD(a)&&(a.addEventListener("focus",u=>F5(u,r)),!N5(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),s}function cD(n){return w3(n)&&"ownerSVGElement"in n}function U5(n){return cD(n)&&n.tagName==="svg"}const ns=n=>!!(n&&n.getVelocity),z5=[...tD,ar,cu],H5=n=>z5.find(eD(n)),JA=I.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function XC(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function V5(...n){return e=>{let t=!1;const i=n.map(r=>{const s=XC(r,e);return!t&&typeof s=="function"&&(t=!0),s});if(t)return()=>{for(let r=0;r<i.length;r++){const s=i[r];typeof s=="function"?s():XC(n[r],null)}}}}function G5(...n){return I.useCallback(V5(...n),n)}class j5 extends I.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const i=t.offsetParent,r=sD(i)&&i.offsetWidth||0,s=this.props.sizeRef.current;s.height=t.offsetHeight||0,s.width=t.offsetWidth||0,s.top=t.offsetTop,s.left=t.offsetLeft,s.right=r-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function W5({children:n,isPresent:e,anchorX:t,root:i}){const r=I.useId(),s=I.useRef(null),o=I.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=I.useContext(JA),l=G5(s,n?.ref);return I.useInsertionEffect(()=>{const{width:u,height:h,top:f,left:g,right:v}=o.current;if(e||!s.current||!u||!h)return;const x=t==="left"?`left: ${g}`:`right: ${v}`;s.current.dataset.motionPopId=r;const S=document.createElement("style");a&&(S.nonce=a);const w=i??document.head;return w.appendChild(S),S.sheet&&S.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${h}px !important;
            ${x}px !important;
            top: ${f}px !important;
          }
        `),()=>{w.contains(S)&&w.removeChild(S)}},[e]),P.jsx(j5,{isPresent:e,childRef:s,sizeRef:o,children:I.cloneElement(n,{ref:l})})}const $5=({children:n,initial:e,isPresent:t,onExitComplete:i,custom:r,presenceAffectsLayout:s,mode:o,anchorX:a,root:l})=>{const u=CA(X5),h=I.useId();let f=!0,g=I.useMemo(()=>(f=!1,{id:h,initial:e,isPresent:t,custom:r,onExitComplete:v=>{u.set(v,!0);for(const x of u.values())if(!x)return;i&&i()},register:v=>(u.set(v,!1),()=>u.delete(v))}),[t,u,i]);return s&&f&&(g={...g}),I.useMemo(()=>{u.forEach((v,x)=>u.set(x,!1))},[t]),I.useEffect(()=>{!t&&!u.size&&i&&i()},[t]),o==="popLayout"&&(n=P.jsx(W5,{isPresent:t,anchorX:a,root:l,children:n})),P.jsx(x_.Provider,{value:g,children:n})};function X5(){return new Map}function uD(n=!0){const e=I.useContext(x_);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:i,register:r}=e,s=I.useId();I.useEffect(()=>{if(n)return r(s)},[n]);const o=I.useCallback(()=>n&&i&&i(s),[s,i,n]);return!t&&i?[!1,o]:[!0]}const Mv=n=>n.key||"";function YC(n){const e=[];return I.Children.forEach(n,t=>{I.isValidElement(t)&&e.push(t)}),e}const dD=({children:n,custom:e,initial:t=!0,onExitComplete:i,presenceAffectsLayout:r=!0,mode:s="sync",propagate:o=!1,anchorX:a="left",root:l})=>{const[u,h]=uD(o),f=I.useMemo(()=>YC(n),[n]),g=o&&!u?[]:f.map(Mv),v=I.useRef(!0),x=I.useRef(f),S=CA(()=>new Map),[w,_]=I.useState(f),[b,M]=I.useState(f);x3(()=>{v.current=!1,x.current=f;for(let D=0;D<b.length;D++){const U=Mv(b[D]);g.includes(U)?S.delete(U):S.get(U)!==!0&&S.set(U,!1)}},[b,g.length,g.join("-")]);const T=[];if(f!==w){let D=[...f];for(let U=0;U<b.length;U++){const F=b[U],k=Mv(F);g.includes(k)||(D.splice(U,0,F),T.push(F))}return s==="wait"&&T.length&&(D=T),M(YC(D)),_(f),null}const{forceRender:L}=I.useContext(MA);return P.jsx(P.Fragment,{children:b.map(D=>{const U=Mv(D),F=o&&!u?!1:f===b||g.includes(U),k=()=>{if(S.has(U))S.set(U,!0);else return;let N=!0;S.forEach(V=>{V||(N=!1)}),N&&(L?.(),M(x.current),o&&h?.(),i&&i())};return P.jsx($5,{isPresent:F,initial:!v.current||t?void 0:!1,custom:e,presenceAffectsLayout:r,mode:s,root:l,onExitComplete:F?void 0:k,anchorX:a,children:D},U)})})},hD=I.createContext({strict:!1}),KC={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ip={};for(const n in KC)ip[n]={isEnabled:e=>KC[n].some(t=>!!e[t])};function Y5(n){for(const e in n)ip[e]={...ip[e],...n[e]}}const K5=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function nx(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||K5.has(n)}let fD=n=>!nx(n);function J5(n){typeof n=="function"&&(fD=e=>e.startsWith("on")?!nx(e):n(e))}try{J5(require("@emotion/is-prop-valid").default)}catch{}function q5(n,e,t){const i={};for(const r in n)r==="values"&&typeof n.values=="object"||(fD(r)||t===!0&&nx(r)||!e&&!nx(r)||n.draggable&&r.startsWith("onDrag"))&&(i[r]=n[r]);return i}const __=I.createContext({});function w_(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function Lg(n){return typeof n=="string"||Array.isArray(n)}const qA=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],ZA=["initial",...qA];function S_(n){return w_(n.animate)||ZA.some(e=>Lg(n[e]))}function pD(n){return!!(S_(n)||n.variants)}function Z5(n,e){if(S_(n)){const{initial:t,animate:i}=n;return{initial:t===!1||Lg(t)?t:void 0,animate:Lg(i)?i:void 0}}return n.inherit!==!1?e:{}}function Q5(n){const{initial:e,animate:t}=Z5(n,I.useContext(__));return I.useMemo(()=>({initial:e,animate:t}),[JC(e),JC(t)])}function JC(n){return Array.isArray(n)?n.join(" "):n}const Og={};function ez(n){for(const e in n)Og[e]=n[e],NA(e)&&(Og[e].isCSSVariable=!0)}function mD(n,{layout:e,layoutId:t}){return Sp.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Og[n]||n==="opacity")}const tz={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},nz=wp.length;function iz(n,e,t){let i="",r=!0;for(let s=0;s<nz;s++){const o=wp[s],a=n[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||t){const u=rD(a,XA[o]);if(!l){r=!1;const h=tz[o]||o;i+=`${h}(${u}) `}t&&(e[o]=u)}}return i=i.trim(),t?i=t(e,r?"":i):r&&(i="none"),i}function QA(n,e,t){const{style:i,vars:r,transformOrigin:s}=n;let o=!1,a=!1;for(const l in e){const u=e[l];if(Sp.has(l)){o=!0;continue}else if(NA(l)){r[l]=u;continue}else{const h=rD(u,XA[l]);l.startsWith("origin")?(a=!0,s[l]=h):i[l]=h}}if(e.transform||(o||t?i.transform=iz(e,n.transform,t):i.transform&&(i.transform="none")),a){const{originX:l="50%",originY:u="50%",originZ:h=0}=s;i.transformOrigin=`${l} ${u} ${h}`}}const eb=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function gD(n,e,t){for(const i in e)!ns(e[i])&&!mD(i,t)&&(n[i]=e[i])}function rz({transformTemplate:n},e){return I.useMemo(()=>{const t=eb();return QA(t,e,n),Object.assign({},t.vars,t.style)},[e])}function sz(n,e){const t=n.style||{},i={};return gD(i,t,n),Object.assign(i,rz(n,e)),i}function oz(n,e){const t={},i=sz(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=i,t}const az={offset:"stroke-dashoffset",array:"stroke-dasharray"},lz={offset:"strokeDashoffset",array:"strokeDasharray"};function cz(n,e,t=1,i=0,r=!0){n.pathLength=1;const s=r?az:lz;n[s.offset]=an.transform(-i);const o=an.transform(e),a=an.transform(t);n[s.array]=`${o} ${a}`}function vD(n,{attrX:e,attrY:t,attrScale:i,pathLength:r,pathSpacing:s=1,pathOffset:o=0,...a},l,u,h){if(QA(n,a,u),l){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:f,style:g}=n;f.transform&&(g.transform=f.transform,delete f.transform),(g.transform||f.transformOrigin)&&(g.transformOrigin=f.transformOrigin??"50% 50%",delete f.transformOrigin),g.transform&&(g.transformBox=h?.transformBox??"fill-box",delete f.transformBox),e!==void 0&&(f.x=e),t!==void 0&&(f.y=t),i!==void 0&&(f.scale=i),r!==void 0&&cz(f,r,s,o,!1)}const yD=()=>({...eb(),attrs:{}}),xD=n=>typeof n=="string"&&n.toLowerCase()==="svg";function uz(n,e,t,i){const r=I.useMemo(()=>{const s=yD();return vD(s,e,xD(i),n.transformTemplate,n.style),{...s.attrs,style:{...s.style}}},[e]);if(n.style){const s={};gD(s,n.style,n),r.style={...s,...r.style}}return r}const dz=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function tb(n){return typeof n!="string"||n.includes("-")?!1:!!(dz.indexOf(n)>-1||/[A-Z]/u.test(n))}function hz(n,e,t,{latestValues:i},r,s=!1){const a=(tb(n)?uz:oz)(e,i,r,n),l=q5(e,typeof n=="string",s),u=n!==I.Fragment?{...l,...a,ref:t}:{},{children:h}=e,f=I.useMemo(()=>ns(h)?h.get():h,[h]);return I.createElement(n,{...u,children:f})}function qC(n){const e=[{},{}];return n?.values.forEach((t,i)=>{e[0][i]=t.get(),e[1][i]=t.getVelocity()}),e}function nb(n,e,t,i){if(typeof e=="function"){const[r,s]=qC(i);e=e(t!==void 0?t:n.custom,r,s)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[r,s]=qC(i);e=e(t!==void 0?t:n.custom,r,s)}return e}function Hy(n){return ns(n)?n.get():n}function fz({scrapeMotionValuesFromProps:n,createRenderState:e},t,i,r){return{latestValues:pz(t,i,r,n),renderState:e()}}function pz(n,e,t,i){const r={},s=i(n,{});for(const g in s)r[g]=Hy(s[g]);let{initial:o,animate:a}=n;const l=S_(n),u=pD(n);e&&u&&!l&&n.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let h=t?t.initial===!1:!1;h=h||o===!1;const f=h?a:o;if(f&&typeof f!="boolean"&&!w_(f)){const g=Array.isArray(f)?f:[f];for(let v=0;v<g.length;v++){const x=nb(n,g[v]);if(x){const{transitionEnd:S,transition:w,..._}=x;for(const b in _){let M=_[b];if(Array.isArray(M)){const T=h?M.length-1:0;M=M[T]}M!==null&&(r[b]=M)}for(const b in S)r[b]=S[b]}}}return r}const _D=n=>(e,t)=>{const i=I.useContext(__),r=I.useContext(x_),s=()=>fz(n,e,i,r);return t?s():CA(s)};function ib(n,e,t){const{style:i}=n,r={};for(const s in i)(ns(i[s])||e.style&&ns(e.style[s])||mD(s,n)||t?.getValue(s)?.liveStyle!==void 0)&&(r[s]=i[s]);return r}const mz=_D({scrapeMotionValuesFromProps:ib,createRenderState:eb});function wD(n,e,t){const i=ib(n,e,t);for(const r in n)if(ns(n[r])||ns(e[r])){const s=wp.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;i[s]=n[r]}return i}const gz=_D({scrapeMotionValuesFromProps:wD,createRenderState:yD}),vz=Symbol.for("motionComponentSymbol");function Hf(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function yz(n,e,t){return I.useCallback(i=>{i&&n.onMount&&n.onMount(i),e&&(i?e.mount(i):e.unmount()),t&&(typeof t=="function"?t(i):Hf(t)&&(t.current=i))},[e])}const rb=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),xz="framerAppearId",SD="data-"+rb(xz),ED=I.createContext({});function _z(n,e,t,i,r){const{visualElement:s}=I.useContext(__),o=I.useContext(hD),a=I.useContext(x_),l=I.useContext(JA).reducedMotion,u=I.useRef(null);i=i||o.renderer,!u.current&&i&&(u.current=i(n,{visualState:e,parent:s,props:t,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const h=u.current,f=I.useContext(ED);h&&!h.projection&&r&&(h.type==="html"||h.type==="svg")&&wz(u.current,t,r,f);const g=I.useRef(!1);I.useInsertionEffect(()=>{h&&g.current&&h.update(t,a)});const v=t[SD],x=I.useRef(!!v&&!window.MotionHandoffIsComplete?.(v)&&window.MotionHasOptimisedAnimation?.(v));return x3(()=>{h&&(g.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),h.scheduleRenderMicrotask(),x.current&&h.animationState&&h.animationState.animateChanges())}),I.useEffect(()=>{h&&(!x.current&&h.animationState&&h.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(v)}),x.current=!1),h.enteringChildren=void 0)}),h}function wz(n,e,t,i){const{layoutId:r,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:u,layoutCrossfade:h}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:AD(n.parent)),n.projection.setOptions({layoutId:r,layout:s,alwaysMeasureLayout:!!o||a&&Hf(a),visualElement:n,animationType:typeof s=="string"?s:"both",initialPromotionConfig:i,crossfade:h,layoutScroll:l,layoutRoot:u})}function AD(n){if(n)return n.options.allowProjection!==!1?n.projection:AD(n.parent)}function ew(n,{forwardMotionProps:e=!1}={},t,i){t&&Y5(t);const r=tb(n)?gz:mz;function s(a,l){let u;const h={...I.useContext(JA),...a,layoutId:Sz(a)},{isStatic:f}=h,g=Q5(a),v=r(a,f);if(!f&&TA){Ez();const x=Az(h);u=x.MeasureLayout,g.visualElement=_z(n,v,h,i,x.ProjectionNode)}return P.jsxs(__.Provider,{value:g,children:[u&&g.visualElement?P.jsx(u,{visualElement:g.visualElement,...h}):null,hz(n,a,yz(v,g.visualElement,l),v,f,e)]})}s.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const o=I.forwardRef(s);return o[vz]=n,o}function Sz({layoutId:n}){const e=I.useContext(MA).id;return e&&n!==void 0?e+"-"+n:n}function Ez(n,e){I.useContext(hD).strict}function Az(n){const{drag:e,layout:t}=ip;if(!e&&!t)return{};const i={...e,...t};return{MeasureLayout:e?.isEnabled(n)||t?.isEnabled(n)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function bz(n,e){if(typeof Proxy>"u")return ew;const t=new Map,i=(s,o)=>ew(s,o,n,e),r=(s,o)=>i(s,o);return new Proxy(r,{get:(s,o)=>o==="create"?i:(t.has(o)||t.set(o,ew(o,void 0,n,e)),t.get(o))})}function bD({top:n,left:e,right:t,bottom:i}){return{x:{min:e,max:t},y:{min:n,max:i}}}function Mz({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function Cz(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),i=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:i.y,right:i.x}}function tw(n){return n===void 0||n===1}function vE({scale:n,scaleX:e,scaleY:t}){return!tw(n)||!tw(e)||!tw(t)}function Md(n){return vE(n)||MD(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function MD(n){return ZC(n.x)||ZC(n.y)}function ZC(n){return n&&n!=="0%"}function ix(n,e,t){const i=n-t,r=e*i;return t+r}function QC(n,e,t,i,r){return r!==void 0&&(n=ix(n,r,i)),ix(n,t,i)+e}function yE(n,e=0,t=1,i,r){n.min=QC(n.min,e,t,i,r),n.max=QC(n.max,e,t,i,r)}function CD(n,{x:e,y:t}){yE(n.x,e.translate,e.scale,e.originPoint),yE(n.y,t.translate,t.scale,t.originPoint)}const eT=.999999999999,tT=1.0000000000001;function Tz(n,e,t,i=!1){const r=t.length;if(!r)return;e.x=e.y=1;let s,o;for(let a=0;a<r;a++){s=t[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(i&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Gf(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,CD(n,o)),i&&Md(s.latestValues)&&Gf(n,s.latestValues))}e.x<tT&&e.x>eT&&(e.x=1),e.y<tT&&e.y>eT&&(e.y=1)}function Vf(n,e){n.min=n.min+e,n.max=n.max+e}function nT(n,e,t,i,r=.5){const s=Ni(n.min,n.max,r);yE(n,e,t,s,i)}function Gf(n,e){nT(n.x,e.x,e.scaleX,e.scale,e.originX),nT(n.y,e.y,e.scaleY,e.scale,e.originY)}function TD(n,e){return bD(Cz(n.getBoundingClientRect(),e))}function Rz(n,e,t){const i=TD(n,t),{scroll:r}=e;return r&&(Vf(i.x,r.offset.x),Vf(i.y,r.offset.y)),i}const iT=()=>({translate:0,scale:1,origin:0,originPoint:0}),jf=()=>({x:iT(),y:iT()}),rT=()=>({min:0,max:0}),qi=()=>({x:rT(),y:rT()}),xE={current:null},RD={current:!1};function Pz(){if(RD.current=!0,!!TA)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>xE.current=n.matches;n.addEventListener("change",e),e()}else xE.current=!1}const Iz=new WeakMap;function Dz(n,e,t){for(const i in e){const r=e[i],s=t[i];if(ns(r))n.addValue(i,r);else if(ns(s))n.addValue(i,np(r,{owner:n}));else if(s!==r)if(n.hasValue(i)){const o=n.getValue(i);o.liveStyle===!0?o.jump(r):o.hasAnimated||o.set(r)}else{const o=n.getStaticValue(i);n.addValue(i,np(o!==void 0?o:r,{owner:n}))}}for(const i in t)e[i]===void 0&&n.removeValue(i);return e}const sT=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Bz{scrapeMotionValuesFromProps(e,t,i){return{}}constructor({parent:e,props:t,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=WA,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const g=Ys.now();this.renderScheduledAt<g&&(this.renderScheduledAt=g,Mi.render(this.render,!1,!0))};const{latestValues:l,renderState:u}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=t.initial?{...l}:{},this.renderState=u,this.parent=e,this.props=t,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=S_(t),this.isVariantNode=pD(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...f}=this.scrapeMotionValuesFromProps(t,{},this);for(const g in f){const v=f[g];l[g]!==void 0&&ns(v)&&v.set(l[g])}}mount(e){this.current=e,Iz.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,i)=>this.bindToMotionValue(i,t)),RD.current||Pz(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:xE.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),lu(this.notifyUpdate),lu(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=Sp.has(e);i&&this.onBindTransform&&this.onBindTransform();const r=t.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Mi.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{r(),s&&s(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in ip){const t=ip[e];if(!t)continue;const{isEnabled:i,Feature:r}=t;if(!this.features[e]&&r&&i(this.props)&&(this.features[e]=new r(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):qi()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let i=0;i<sT.length;i++){const r=sT[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const s="on"+r,o=e[s];o&&(this.propEventSubscriptions[r]=this.on(r,o))}this.prevMotionValues=Dz(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const i=this.values.get(e);t!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&t!==void 0&&(i=np(t===null?void 0:t,{owner:this}),this.addValue(e,i)),i}readValue(e,t){let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(_3(i)||S3(i))?i=parseFloat(i):!H5(i)&&cu.test(t)&&(i=iD(e,t)),this.setBaseTarget(e,ns(i)?i.get():i)),ns(i)?i.get():i}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let i;if(typeof t=="string"||typeof t=="object"){const s=nb(this.props,t,this.presenceContext?.custom);s&&(i=s[e])}if(t&&i!==void 0)return i;const r=this.getBaseTargetFromProps(this.props,e);return r!==void 0&&!ns(r)?r:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new BA),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){YA.render(this.render)}}class PD extends Bz{constructor(){super(...arguments),this.KeyframeResolver=R5}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:i}){delete t[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ns(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function ID(n,{style:e,vars:t},i,r){const s=n.style;let o;for(o in e)s[o]=e[o];r?.applyProjectionStyles(s,i);for(o in t)s.setProperty(o,t[o])}function Lz(n){return window.getComputedStyle(n)}class Oz extends PD{constructor(){super(...arguments),this.type="html",this.renderInstance=ID}readValueFromInstance(e,t){if(Sp.has(t))return this.projection?.isProjecting?uE(t):Y4(e,t);{const i=Lz(e),r=(NA(t)?i.getPropertyValue(t):i[t])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:t}){return TD(e,t)}build(e,t,i){QA(e,t,i.transformTemplate)}scrapeMotionValuesFromProps(e,t,i){return ib(e,t,i)}}const DD=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Nz(n,e,t,i){ID(n,e,void 0,i);for(const r in e.attrs)n.setAttribute(DD.has(r)?r:rb(r),e.attrs[r])}class Fz extends PD{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=qi}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Sp.has(t)){const i=nD(t);return i&&i.default||0}return t=DD.has(t)?t:rb(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,i){return wD(e,t,i)}build(e,t,i){vD(e,t,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(e,t,i,r){Nz(e,t,i,r)}mount(e){this.isSVGTag=xD(e.tagName),super.mount(e)}}const kz=(n,e)=>tb(n)?new Fz(e):new Oz(e,{allowProjection:n!==I.Fragment});function Kf(n,e,t){const i=n.getProps();return nb(i,e,t!==void 0?t:i.custom,n)}const _E=n=>Array.isArray(n);function Uz(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,np(t))}function zz(n){return _E(n)?n[n.length-1]||0:n}function Hz(n,e){const t=Kf(n,e);let{transitionEnd:i={},transition:r={},...s}=t||{};s={...s,...i};for(const o in s){const a=zz(s[o]);Uz(n,o,a)}}function Vz(n){return!!(ns(n)&&n.add)}function wE(n,e){const t=n.getValue("willChange");if(Vz(t))return t.add(e);if(!t&&rc.WillChange){const i=new rc.WillChange("auto");n.addValue("willChange",i),i.add(e)}}function BD(n){return n.props[SD]}const Gz=n=>n!==null;function jz(n,{repeat:e,repeatType:t="loop"},i){const r=n.filter(Gz),s=e&&t!=="loop"&&e%2===1?0:r.length-1;return r[s]}const Wz={type:"spring",stiffness:500,damping:25,restSpeed:10},$z=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),Xz={type:"keyframes",duration:.8},Yz={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Kz=(n,{keyframes:e})=>e.length>2?Xz:Sp.has(n)?n.startsWith("scale")?$z(e[1]):Wz:Yz;function Jz({when:n,delay:e,delayChildren:t,staggerChildren:i,staggerDirection:r,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:u,...h}){return!!Object.keys(h).length}const sb=(n,e,t,i={},r,s)=>o=>{const a=$A(i,n)||{},l=a.delay||i.delay||0;let{elapsed:u=0}=i;u=u-Wa(l);const h={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-u,onUpdate:g=>{e.set(g),a.onUpdate&&a.onUpdate(g)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:n,motionValue:e,element:s?void 0:r};Jz(a)||Object.assign(h,Kz(n,h)),h.duration&&(h.duration=Wa(h.duration)),h.repeatDelay&&(h.repeatDelay=Wa(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let f=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(mE(h),h.delay===0&&(f=!0)),(rc.instantAnimations||rc.skipAnimations)&&(f=!0,mE(h),h.delay=0),h.allowFlatten=!a.type&&!a.ease,f&&!s&&e.get()!==void 0){const g=jz(h.keyframes,a);if(g!==void 0){Mi.update(()=>{h.onUpdate(g),h.onComplete()});return}}return a.isSync?new jA(h):new v5(h)};function qz({protectedKeys:n,needsAnimating:e},t){const i=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,i}function LD(n,e,{delay:t=0,transitionOverride:i,type:r}={}){let{transition:s=n.getDefaultTransition(),transitionEnd:o,...a}=e;i&&(s=i);const l=[],u=r&&n.animationState&&n.animationState.getState()[r];for(const h in a){const f=n.getValue(h,n.latestValues[h]??null),g=a[h];if(g===void 0||u&&qz(u,h))continue;const v={delay:t,...$A(s||{},h)},x=f.get();if(x!==void 0&&!f.isAnimating&&!Array.isArray(g)&&g===x&&!v.velocity)continue;let S=!1;if(window.MotionHandoffAnimation){const _=BD(n);if(_){const b=window.MotionHandoffAnimation(_,h,Mi);b!==null&&(v.startTime=b,S=!0)}}wE(n,h),f.start(sb(h,f,g,n.shouldReduceMotion&&Q3.has(h)?{type:!1}:v,n,S));const w=f.animation;w&&l.push(w)}return o&&Promise.all(l).then(()=>{Mi.update(()=>{o&&Hz(n,o)})}),l}function OD(n,e,t,i=0,r=1){const s=Array.from(n).sort((u,h)=>u.sortNodePosition(h)).indexOf(e),o=n.size,a=(o-1)*i;return typeof t=="function"?t(s,o):r===1?s*i:a-s*i}function SE(n,e,t={}){const i=Kf(n,e,t.type==="exit"?n.presenceContext?.custom:void 0);let{transition:r=n.getDefaultTransition()||{}}=i||{};t.transitionOverride&&(r=t.transitionOverride);const s=i?()=>Promise.all(LD(n,i,t)):()=>Promise.resolve(),o=n.variantChildren&&n.variantChildren.size?(l=0)=>{const{delayChildren:u=0,staggerChildren:h,staggerDirection:f}=r;return Zz(n,e,l,u,h,f,t)}:()=>Promise.resolve(),{when:a}=r;if(a){const[l,u]=a==="beforeChildren"?[s,o]:[o,s];return l().then(()=>u())}else return Promise.all([s(),o(t.delay)])}function Zz(n,e,t=0,i=0,r=0,s=1,o){const a=[];for(const l of n.variantChildren)l.notify("AnimationStart",e),a.push(SE(l,e,{...o,delay:t+(typeof i=="function"?0:i)+OD(n.variantChildren,l,i,r,s)}).then(()=>l.notify("AnimationComplete",e)));return Promise.all(a)}function Qz(n,e,t={}){n.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(s=>SE(n,s,t));i=Promise.all(r)}else if(typeof e=="string")i=SE(n,e,t);else{const r=typeof e=="function"?Kf(n,e,t.custom):e;i=Promise.all(LD(n,r,t))}return i.then(()=>{n.notify("AnimationComplete",e)})}function ND(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let i=0;i<t;i++)if(e[i]!==n[i])return!1;return!0}const e6=ZA.length;function FD(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?FD(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<e6;t++){const i=ZA[t],r=n.props[i];(Lg(r)||r===!1)&&(e[i]=r)}return e}const t6=[...qA].reverse(),n6=qA.length;function i6(n){return e=>Promise.all(e.map(({animation:t,options:i})=>Qz(n,t,i)))}function r6(n){let e=i6(n),t=oT(),i=!0;const r=l=>(u,h)=>{const f=Kf(n,h,l==="exit"?n.presenceContext?.custom:void 0);if(f){const{transition:g,transitionEnd:v,...x}=f;u={...u,...x,...v}}return u};function s(l){e=l(n)}function o(l){const{props:u}=n,h=FD(n.parent)||{},f=[],g=new Set;let v={},x=1/0;for(let w=0;w<n6;w++){const _=t6[w],b=t[_],M=u[_]!==void 0?u[_]:h[_],T=Lg(M),L=_===l?b.isActive:null;L===!1&&(x=w);let D=M===h[_]&&M!==u[_]&&T;if(D&&i&&n.manuallyAnimateOnMount&&(D=!1),b.protectedKeys={...v},!b.isActive&&L===null||!M&&!b.prevProp||w_(M)||typeof M=="boolean")continue;const U=s6(b.prevProp,M);let F=U||_===l&&b.isActive&&!D&&T||w>x&&T,k=!1;const N=Array.isArray(M)?M:[M];let V=N.reduce(r(_),{});L===!1&&(V={});const{prevResolvedValues:Z={}}=b,Q={...Z,...V},le=xe=>{F=!0,g.has(xe)&&(k=!0,g.delete(xe)),b.needsAnimating[xe]=!0;const X=n.getValue(xe);X&&(X.liveStyle=!1)};for(const xe in Q){const X=V[xe],de=Z[xe];if(v.hasOwnProperty(xe))continue;let se=!1;_E(X)&&_E(de)?se=!ND(X,de):se=X!==de,se?X!=null?le(xe):g.add(xe):X!==void 0&&g.has(xe)?le(xe):b.protectedKeys[xe]=!0}b.prevProp=M,b.prevResolvedValues=V,b.isActive&&(v={...v,...V}),i&&n.blockInitialAnimation&&(F=!1);const me=D&&U;F&&(!me||k)&&f.push(...N.map(xe=>{const X={type:_};if(typeof xe=="string"&&i&&!me&&n.manuallyAnimateOnMount&&n.parent){const{parent:de}=n,se=Kf(de,xe);if(de.enteringChildren&&se){const{delayChildren:Y}=se.transition||{};X.delay=OD(de.enteringChildren,n,Y)}}return{animation:xe,options:X}}))}if(g.size){const w={};if(typeof u.initial!="boolean"){const _=Kf(n,Array.isArray(u.initial)?u.initial[0]:u.initial);_&&_.transition&&(w.transition=_.transition)}g.forEach(_=>{const b=n.getBaseTarget(_),M=n.getValue(_);M&&(M.liveStyle=!0),w[_]=b??null}),f.push({animation:w})}let S=!!f.length;return i&&(u.initial===!1||u.initial===u.animate)&&!n.manuallyAnimateOnMount&&(S=!1),i=!1,S?e(f):Promise.resolve()}function a(l,u){if(t[l].isActive===u)return Promise.resolve();n.variantChildren?.forEach(f=>f.animationState?.setActive(l,u)),t[l].isActive=u;const h=o(l);for(const f in t)t[f].protectedKeys={};return h}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>t,reset:()=>{t=oT()}}}function s6(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!ND(e,n):!1}function cd(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function oT(){return{animate:cd(!0),whileInView:cd(),whileHover:cd(),whileTap:cd(),whileDrag:cd(),whileFocus:cd(),exit:cd()}}class xu{constructor(e){this.isMounted=!1,this.node=e}update(){}}class o6 extends xu{constructor(e){super(e),e.animationState||(e.animationState=r6(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();w_(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let a6=0;class l6 extends xu{constructor(){super(...arguments),this.id=a6++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const r=this.node.animationState.setActive("exit",!e);t&&!e&&r.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const c6={animation:{Feature:o6},exit:{Feature:l6}};function Ng(n,e,t,i={passive:!0}){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t)}function r0(n){return{point:{x:n.pageX,y:n.pageY}}}const u6=n=>e=>KA(e)&&n(e,r0(e));function hg(n,e,t,i){return Ng(n,e,u6(t),i)}const kD=1e-4,d6=1-kD,h6=1+kD,UD=.01,f6=0-UD,p6=0+UD;function Ms(n){return n.max-n.min}function m6(n,e,t){return Math.abs(n-e)<=t}function aT(n,e,t,i=.5){n.origin=i,n.originPoint=Ni(e.min,e.max,n.origin),n.scale=Ms(t)/Ms(e),n.translate=Ni(t.min,t.max,n.origin)-n.originPoint,(n.scale>=d6&&n.scale<=h6||isNaN(n.scale))&&(n.scale=1),(n.translate>=f6&&n.translate<=p6||isNaN(n.translate))&&(n.translate=0)}function fg(n,e,t,i){aT(n.x,e.x,t.x,i?i.originX:void 0),aT(n.y,e.y,t.y,i?i.originY:void 0)}function lT(n,e,t){n.min=t.min+e.min,n.max=n.min+Ms(e)}function g6(n,e,t){lT(n.x,e.x,t.x),lT(n.y,e.y,t.y)}function cT(n,e,t){n.min=e.min-t.min,n.max=n.min+Ms(e)}function pg(n,e,t){cT(n.x,e.x,t.x),cT(n.y,e.y,t.y)}function Co(n){return[n("x"),n("y")]}const zD=({current:n})=>n?n.ownerDocument.defaultView:null,uT=(n,e)=>Math.abs(n-e);function v6(n,e){const t=uT(n.x,e.x),i=uT(n.y,e.y);return Math.sqrt(t**2+i**2)}class HD{constructor(e,t,{transformPagePoint:i,contextWindow:r=window,dragSnapToOrigin:s=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=iw(this.lastMoveEventInfo,this.history),v=this.startEvent!==null,x=v6(g.offset,{x:0,y:0})>=this.distanceThreshold;if(!v&&!x)return;const{point:S}=g,{timestamp:w}=Vr;this.history.push({...S,timestamp:w});const{onStart:_,onMove:b}=this.handlers;v||(_&&_(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),b&&b(this.lastMoveEvent,g)},this.handlePointerMove=(g,v)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=nw(v,this.transformPagePoint),Mi.update(this.updatePoint,!0)},this.handlePointerUp=(g,v)=>{this.end();const{onEnd:x,onSessionEnd:S,resumeAnimation:w}=this.handlers;if(this.dragSnapToOrigin&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=iw(g.type==="pointercancel"?this.lastMoveEventInfo:nw(v,this.transformPagePoint),this.history);this.startEvent&&x&&x(g,_),S&&S(g,_)},!KA(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=i,this.distanceThreshold=o,this.contextWindow=r||window;const a=r0(e),l=nw(a,this.transformPagePoint),{point:u}=l,{timestamp:h}=Vr;this.history=[{...u,timestamp:h}];const{onSessionStart:f}=t;f&&f(e,iw(l,this.history)),this.removeListeners=t0(hg(this.contextWindow,"pointermove",this.handlePointerMove),hg(this.contextWindow,"pointerup",this.handlePointerUp),hg(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),lu(this.updatePoint)}}function nw(n,e){return e?{point:e(n.point)}:n}function dT(n,e){return{x:n.x-e.x,y:n.y-e.y}}function iw({point:n},e){return{point:n,delta:dT(n,VD(e)),offset:dT(n,y6(e)),velocity:x6(e,.1)}}function y6(n){return n[0]}function VD(n){return n[n.length-1]}function x6(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,i=null;const r=VD(n);for(;t>=0&&(i=n[t],!(r.timestamp-i.timestamp>Wa(e)));)t--;if(!i)return{x:0,y:0};const s=Do(r.timestamp-i.timestamp);if(s===0)return{x:0,y:0};const o={x:(r.x-i.x)/s,y:(r.y-i.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function _6(n,{min:e,max:t},i){return e!==void 0&&n<e?n=i?Ni(e,n,i.min):Math.max(n,e):t!==void 0&&n>t&&(n=i?Ni(t,n,i.max):Math.min(n,t)),n}function hT(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function w6(n,{top:e,left:t,bottom:i,right:r}){return{x:hT(n.x,t,r),y:hT(n.y,e,i)}}function fT(n,e){let t=e.min-n.min,i=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,i]=[i,t]),{min:t,max:i}}function S6(n,e){return{x:fT(n.x,e.x),y:fT(n.y,e.y)}}function E6(n,e){let t=.5;const i=Ms(n),r=Ms(e);return r>i?t=Ig(e.min,e.max-i,n.min):i>r&&(t=Ig(n.min,n.max-r,e.min)),ic(0,1,t)}function A6(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const EE=.35;function b6(n=EE){return n===!1?n=0:n===!0&&(n=EE),{x:pT(n,"left","right"),y:pT(n,"top","bottom")}}function pT(n,e,t){return{min:mT(n,e),max:mT(n,t)}}function mT(n,e){return typeof n=="number"?n:n[e]||0}const M6=new WeakMap;class C6{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=qi(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:i}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=f=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(r0(f).point)},o=(f,g)=>{const{drag:v,dragPropagation:x,onDragStart:S}=this.getProps();if(v&&!x&&(this.openDragLock&&this.openDragLock(),this.openDragLock=B5(v),!this.openDragLock))return;this.latestPointerEvent=f,this.latestPanInfo=g,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Co(_=>{let b=this.getAxisMotionValue(_).get()||0;if($a.test(b)){const{projection:M}=this.visualElement;if(M&&M.layout){const T=M.layout.layoutBox[_];T&&(b=Ms(T)*(parseFloat(b)/100))}}this.originPoint[_]=b}),S&&Mi.postRender(()=>S(f,g)),wE(this.visualElement,"transform");const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},a=(f,g)=>{this.latestPointerEvent=f,this.latestPanInfo=g;const{dragPropagation:v,dragDirectionLock:x,onDirectionLock:S,onDrag:w}=this.getProps();if(!v&&!this.openDragLock)return;const{offset:_}=g;if(x&&this.currentDirection===null){this.currentDirection=T6(_),this.currentDirection!==null&&S&&S(this.currentDirection);return}this.updateAxis("x",g.point,_),this.updateAxis("y",g.point,_),this.visualElement.render(),w&&w(f,g)},l=(f,g)=>{this.latestPointerEvent=f,this.latestPanInfo=g,this.stop(f,g),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>Co(f=>this.getAnimationState(f)==="paused"&&this.getAxisMotionValue(f).animation?.play()),{dragSnapToOrigin:h}=this.getProps();this.panSession=new HD(e,{onSessionStart:s,onStart:o,onMove:a,onSessionEnd:l,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,distanceThreshold:i,contextWindow:zD(this.visualElement)})}stop(e,t){const i=e||this.latestPointerEvent,r=t||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!r||!i)return;const{velocity:o}=r;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&Mi.postRender(()=>a(i,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,i){const{drag:r}=this.getProps();if(!i||!Cv(e,r,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(o=_6(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,r=this.constraints;e&&Hf(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&i?this.constraints=w6(i.layoutBox,e):this.constraints=!1,this.elastic=b6(t),r!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Co(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=A6(i.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Hf(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=Rz(i,r.root,this.visualElement.getTransformPagePoint());let o=S6(r.layout.layoutBox,s);if(t){const a=t(Mz(o));this.hasMutatedConstraints=!!a,a&&(o=bD(a))}return o}startAnimation(e){const{drag:t,dragMomentum:i,dragElastic:r,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=Co(h=>{if(!Cv(h,t,this.currentDirection))return;let f=l&&l[h]||{};o&&(f={min:0,max:0});const g=r?200:1e6,v=r?40:1e7,x={type:"inertia",velocity:i?e[h]:0,bounceStiffness:g,bounceDamping:v,timeConstant:750,restDelta:1,restSpeed:10,...s,...f};return this.startAxisValueAnimation(h,x)});return Promise.all(u).then(a)}startAxisValueAnimation(e,t){const i=this.getAxisMotionValue(e);return wE(this.visualElement,e),i.start(sb(e,i,0,t,this.visualElement,!1))}stopAnimation(){Co(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Co(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),r=i[t];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){Co(t=>{const{drag:i}=this.getProps();if(!Cv(t,i,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(t);if(r&&r.layout){const{min:o,max:a}=r.layout.layoutBox[t];s.set(e[t]-Ni(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:i}=this.visualElement;if(!Hf(t)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Co(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();r[o]=E6({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Co(o=>{if(!Cv(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:u}=this.constraints[o];a.set(Ni(l,u,r[o]))})}addListeners(){if(!this.visualElement.current)return;M6.set(this.visualElement,this);const e=this.visualElement.current,t=hg(e,"pointerdown",l=>{const{drag:u,dragListener:h=!0}=this.getProps();u&&h&&this.start(l)}),i=()=>{const{dragConstraints:l}=this.getProps();Hf(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,s=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),Mi.read(i);const o=Ng(window,"resize",()=>this.scalePositionWithinConstraints()),a=r.addEventListener("didUpdate",(({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(Co(h=>{const f=this.getAxisMotionValue(h);f&&(this.originPoint[h]+=l[h].translate,f.set(f.get()+l[h].translate))}),this.visualElement.render())}));return()=>{o(),t(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:o=EE,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:i,dragPropagation:r,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function Cv(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function T6(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class R6 extends xu{constructor(e){super(e),this.removeGroupControls=No,this.removeListeners=No,this.controls=new C6(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||No}unmount(){this.removeGroupControls(),this.removeListeners()}}const gT=n=>(e,t)=>{n&&Mi.postRender(()=>n(e,t))};class P6 extends xu{constructor(){super(...arguments),this.removePointerDownListener=No}onPointerDown(e){this.session=new HD(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:zD(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:gT(e),onStart:gT(t),onMove:i,onEnd:(s,o)=>{delete this.session,r&&Mi.postRender(()=>r(s,o))}}}mount(){this.removePointerDownListener=hg(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Vy={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function vT(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Dm={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(an.test(n))n=parseFloat(n);else return n;const t=vT(n,e.target.x),i=vT(n,e.target.y);return`${t}% ${i}%`}},I6={correct:(n,{treeScale:e,projectionDelta:t})=>{const i=n,r=cu.parse(n);if(r.length>5)return i;const s=cu.createTransformer(n),o=typeof r[0]!="number"?1:0,a=t.x.scale*e.x,l=t.y.scale*e.y;r[0+o]/=a,r[1+o]/=l;const u=Ni(a,l,.5);return typeof r[2+o]=="number"&&(r[2+o]/=u),typeof r[3+o]=="number"&&(r[3+o]/=u),s(r)}};let rw=!1;class D6 extends I.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i,layoutId:r}=this.props,{projection:s}=e;ez(B6),s&&(t.group&&t.group.add(s),i&&i.register&&r&&i.register(s),rw&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Vy.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:i,drag:r,isPresent:s}=this.props,{projection:o}=i;return o&&(o.isPresent=s,rw=!0,r||e.layoutDependency!==t||t===void 0||e.isPresent!==s?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Mi.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),YA.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i}=this.props,{projection:r}=e;rw=!0,r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function GD(n){const[e,t]=uD(),i=I.useContext(MA);return P.jsx(D6,{...n,layoutGroup:i,switchLayoutGroup:I.useContext(ED),isPresent:e,safeToRemove:t})}const B6={borderRadius:{...Dm,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Dm,borderTopRightRadius:Dm,borderBottomLeftRadius:Dm,borderBottomRightRadius:Dm,boxShadow:I6};function L6(n,e,t){const i=ns(n)?n:np(n);return i.start(sb("",i,e,t)),i.animation}const O6=(n,e)=>n.depth-e.depth;class N6{constructor(){this.children=[],this.isDirty=!1}add(e){RA(this.children,e),this.isDirty=!0}remove(e){PA(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(O6),this.isDirty=!1,this.children.forEach(e)}}function F6(n,e){const t=Ys.now(),i=({timestamp:r})=>{const s=r-t;s>=e&&(lu(i),n(s-e))};return Mi.setup(i,!0),()=>lu(i)}const jD=["TopLeft","TopRight","BottomLeft","BottomRight"],k6=jD.length,yT=n=>typeof n=="string"?parseFloat(n):n,xT=n=>typeof n=="number"||an.test(n);function U6(n,e,t,i,r,s){r?(n.opacity=Ni(0,t.opacity??1,z6(i)),n.opacityExit=Ni(e.opacity??1,0,H6(i))):s&&(n.opacity=Ni(e.opacity??1,t.opacity??1,i));for(let o=0;o<k6;o++){const a=`border${jD[o]}Radius`;let l=_T(e,a),u=_T(t,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||xT(l)===xT(u)?(n[a]=Math.max(Ni(yT(l),yT(u),i),0),($a.test(u)||$a.test(l))&&(n[a]+="%")):n[a]=u}(e.rotate||t.rotate)&&(n.rotate=Ni(e.rotate||0,t.rotate||0,i))}function _T(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const z6=WD(0,.5,P3),H6=WD(.5,.95,No);function WD(n,e,t){return i=>i<n?0:i>e?1:t(Ig(n,e,i))}function wT(n,e){n.min=e.min,n.max=e.max}function Ao(n,e){wT(n.x,e.x),wT(n.y,e.y)}function ST(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function ET(n,e,t,i,r){return n-=e,n=ix(n,1/t,i),r!==void 0&&(n=ix(n,1/r,i)),n}function V6(n,e=0,t=1,i=.5,r,s=n,o=n){if($a.test(e)&&(e=parseFloat(e),e=Ni(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Ni(s.min,s.max,i);n===s&&(a-=e),n.min=ET(n.min,e,t,a,r),n.max=ET(n.max,e,t,a,r)}function AT(n,e,[t,i,r],s,o){V6(n,e[t],e[i],e[r],e.scale,s,o)}const G6=["x","scaleX","originX"],j6=["y","scaleY","originY"];function bT(n,e,t,i){AT(n.x,e,G6,t?t.x:void 0,i?i.x:void 0),AT(n.y,e,j6,t?t.y:void 0,i?i.y:void 0)}function MT(n){return n.translate===0&&n.scale===1}function $D(n){return MT(n.x)&&MT(n.y)}function CT(n,e){return n.min===e.min&&n.max===e.max}function W6(n,e){return CT(n.x,e.x)&&CT(n.y,e.y)}function TT(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function XD(n,e){return TT(n.x,e.x)&&TT(n.y,e.y)}function RT(n){return Ms(n.x)/Ms(n.y)}function PT(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class $6{constructor(){this.members=[]}add(e){RA(this.members,e),e.scheduleRender()}remove(e){if(PA(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(r=>e===r);if(t===0)return!1;let i;for(let r=t;r>=0;r--){const s=this.members[r];if(s.isPresent!==!1){i=s;break}}return i?(this.promote(i),!0):!1}promote(e,t){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,t&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:i}=e;t.onExitComplete&&t.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function X6(n,e,t){let i="";const r=n.x.translate/e.x,s=n.y.translate/e.y,o=t?.z||0;if((r||s||o)&&(i=`translate3d(${r}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:u,rotate:h,rotateX:f,rotateY:g,skewX:v,skewY:x}=t;u&&(i=`perspective(${u}px) ${i}`),h&&(i+=`rotate(${h}deg) `),f&&(i+=`rotateX(${f}deg) `),g&&(i+=`rotateY(${g}deg) `),v&&(i+=`skewX(${v}deg) `),x&&(i+=`skewY(${x}deg) `)}const a=n.x.scale*e.x,l=n.y.scale*e.y;return(a!==1||l!==1)&&(i+=`scale(${a}, ${l})`),i||"none"}const sw=["","X","Y","Z"],Y6=1e3;let K6=0;function ow(n,e,t,i){const{latestValues:r}=e;r[n]&&(t[n]=r[n],e.setStaticValue(n,0),i&&(i[n]=0))}function YD(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=BD(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:r,layoutId:s}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",Mi,!(r||s))}const{parent:i}=n;i&&!i.hasCheckedOptimisedAppear&&YD(i)}function KD({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(o={},a=e?.()){this.id=K6++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Z6),this.nodes.forEach(n8),this.nodes.forEach(i8),this.nodes.forEach(Q6)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new N6)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new BA),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=cD(o)&&!U5(o),this.instance=o;const{layoutId:a,layout:l,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||a)&&(this.isLayoutDirty=!0),n){let h,f=0;const g=()=>this.root.updateBlockedByResize=!1;Mi.read(()=>{f=window.innerWidth}),n(o,()=>{const v=window.innerWidth;v!==f&&(f=v,this.root.updateBlockedByResize=!0,h&&h(),h=F6(g,250),Vy.hasAnimatedSinceResize&&(Vy.hasAnimatedSinceResize=!1,this.nodes.forEach(BT)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&u&&(a||l)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f,hasRelativeLayoutChanged:g,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||u.getDefaultTransition()||l8,{onLayoutAnimationStart:S,onLayoutAnimationComplete:w}=u.getProps(),_=!this.targetLayout||!XD(this.targetLayout,v),b=!f&&g;if(this.options.layoutRoot||this.resumeFrom||b||f&&(_||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const M={...$A(x,"layout"),onPlay:S,onComplete:w};(u.shouldReduceMotion||this.options.layoutRoot)&&(M.delay=0,M.type=!1),this.startAnimation(M),this.setAnimationOrigin(h,b)}else f||BT(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),lu(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(r8),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&YD(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const f=this.path[h];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(IT);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(DT);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(t8),this.nodes.forEach(J6),this.nodes.forEach(q6)):this.nodes.forEach(DT),this.clearAllSnapshots();const a=Ys.now();Vr.delta=ic(0,1e3/60,a-Vr.timestamp),Vr.timestamp=a,Vr.isProcessing=!0,Y1.update.process(Vr),Y1.preRender.process(Vr),Y1.render.process(Vr),Vr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,YA.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(e8),this.sharedNodes.forEach(s8)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Mi.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Mi.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Ms(this.snapshot.measuredBox.x)&&!Ms(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=qi(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const l=i(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!r)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!$D(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,h=u!==this.prevTransformTemplateValue;o&&this.instance&&(a||Md(this.latestValues)||h)&&(r(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),c8(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return qi();const a=o.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(u8))){const{scroll:u}=this.root;u&&(Vf(a.x,u.offset.x),Vf(a.y,u.offset.y))}return a}removeElementScroll(o){const a=qi();if(Ao(a,o),this.scroll?.wasRoot)return a;for(let l=0;l<this.path.length;l++){const u=this.path[l],{scroll:h,options:f}=u;u!==this.root&&h&&f.layoutScroll&&(h.wasRoot&&Ao(a,o),Vf(a.x,h.offset.x),Vf(a.y,h.offset.y))}return a}applyTransform(o,a=!1){const l=qi();Ao(l,o);for(let u=0;u<this.path.length;u++){const h=this.path[u];!a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Gf(l,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Md(h.latestValues)&&Gf(l,h.latestValues)}return Md(this.latestValues)&&Gf(l,this.latestValues),l}removeTransform(o){const a=qi();Ao(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!Md(u.latestValues))continue;vE(u.latestValues)&&u.updateSnapshot();const h=qi(),f=u.measurePageBox();Ao(h,f),bT(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,h)}return Md(this.latestValues)&&bT(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Vr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(o||l&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:f}=this.options;if(!(!this.layout||!(h||f))){if(this.resolvedRelativeTargetAt=Vr.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=qi(),this.relativeTargetOrigin=qi(),pg(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),Ao(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=qi(),this.targetWithTransforms=qi()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),g6(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ao(this.target,this.layout.layoutBox),CD(this.target,this.targetDelta)):Ao(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=qi(),this.relativeTargetOrigin=qi(),pg(this.relativeTargetOrigin,this.target,g.target),Ao(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||vE(this.parent.latestValues)||MD(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const o=this.getLead(),a=!!this.resumingFrom||this!==o;let l=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===Vr.timestamp&&(l=!1),l)return;const{layout:u,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||h))return;Ao(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,g=this.treeScale.y;Tz(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=qi());const{target:v}=o;if(!v){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(ST(this.prevProjectionDelta.x,this.projectionDelta.x),ST(this.prevProjectionDelta.y,this.projectionDelta.y)),fg(this.projectionDelta,this.layoutCorrected,v,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==g||!PT(this.projectionDelta.x,this.prevProjectionDelta.x)||!PT(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.visualElement?.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=jf(),this.projectionDelta=jf(),this.projectionDeltaWithTransform=jf()}setAnimationOrigin(o,a=!1){const l=this.snapshot,u=l?l.latestValues:{},h={...this.latestValues},f=jf();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const g=qi(),v=l?l.source:void 0,x=this.layout?this.layout.source:void 0,S=v!==x,w=this.getStack(),_=!w||w.members.length<=1,b=!!(S&&!_&&this.options.crossfade===!0&&!this.path.some(a8));this.animationProgress=0;let M;this.mixTargetDelta=T=>{const L=T/1e3;LT(f.x,o.x,L),LT(f.y,o.y,L),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(pg(g,this.layout.layoutBox,this.relativeParent.layout.layoutBox),o8(this.relativeTarget,this.relativeTargetOrigin,g,L),M&&W6(this.relativeTarget,M)&&(this.isProjectionDirty=!1),M||(M=qi()),Ao(M,this.relativeTarget)),S&&(this.animationValues=h,U6(h,u,this.latestValues,L,b,_)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=L},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(lu(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Mi.update(()=>{Vy.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=np(0)),this.currentAnimation=L6(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Y6),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:h}=o;if(!(!a||!l||!u)){if(this!==o&&this.layout&&u&&JD(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||qi();const f=Ms(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+f;const g=Ms(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+g}Ao(a,l),Gf(a,h),fg(this.projectionDeltaWithTransform,this.layoutCorrected,a,h)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new $6),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){const{layoutId:o}=this.options;return o?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:o}=this.options;return o?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const u={};l.z&&ow("z",o,u,this.animationValues);for(let h=0;h<sw.length;h++)ow(`rotate${sw[h]}`,o,u,this.animationValues),ow(`skew${sw[h]}`,o,u,this.animationValues);o.render();for(const h in u)o.setStaticValue(h,u[h]),this.animationValues&&(this.animationValues[h]=u[h]);o.scheduleRender()}applyProjectionStyles(o,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=Hy(a?.pointerEvents)||"",o.transform=l?l(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=Hy(a?.pointerEvents)||""),this.hasProjected&&!Md(this.latestValues)&&(o.transform=l?l({},""):"none",this.hasProjected=!1);return}o.visibility="";const h=u.animationValues||u.latestValues;this.applyTransformsToTarget();let f=X6(this.projectionDeltaWithTransform,this.treeScale,h);l&&(f=l(h,f)),o.transform=f;const{x:g,y:v}=this.projectionDelta;o.transformOrigin=`${g.origin*100}% ${v.origin*100}% 0`,u.animationValues?o.opacity=u===this?h.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:o.opacity=u===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const x in Og){if(h[x]===void 0)continue;const{correct:S,applyTo:w,isCSSVariable:_}=Og[x],b=f==="none"?h[x]:S(h[x],u);if(w){const M=w.length;for(let T=0;T<M;T++)o[w[T]]=b}else _?this.options.visualElement.renderState.vars[x]=b:o[x]=b}this.options.layoutId&&(o.pointerEvents=u===this?Hy(a?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>o.currentAnimation?.stop()),this.root.nodes.forEach(IT),this.root.sharedNodes.clear()}}}function J6(n){n.updateLayout()}function q6(n){const e=n.resumeFrom?.snapshot||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:i}=n.layout,{animationType:r}=n.options,s=e.source!==n.layout.source;r==="size"?Co(h=>{const f=s?e.measuredBox[h]:e.layoutBox[h],g=Ms(f);f.min=t[h].min,f.max=f.min+g}):JD(r,e.layoutBox,t)&&Co(h=>{const f=s?e.measuredBox[h]:e.layoutBox[h],g=Ms(t[h]);f.max=f.min+g,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[h].max=n.relativeTarget[h].min+g)});const o=jf();fg(o,t,e.layoutBox);const a=jf();s?fg(a,n.applyTransform(i,!0),e.measuredBox):fg(a,t,e.layoutBox);const l=!$D(o);let u=!1;if(!n.resumeFrom){const h=n.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:g}=h;if(f&&g){const v=qi();pg(v,e.layoutBox,f.layoutBox);const x=qi();pg(x,t,g.layoutBox),XD(v,x)||(u=!0),h.options.layoutRoot&&(n.relativeTarget=x,n.relativeTargetOrigin=v,n.relativeParent=h)}}}n.notifyListeners("didUpdate",{layout:t,snapshot:e,delta:a,layoutDelta:o,hasLayoutChanged:l,hasRelativeLayoutChanged:u})}else if(n.isLead()){const{onExitComplete:t}=n.options;t&&t()}n.options.transition=void 0}function Z6(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function Q6(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function e8(n){n.clearSnapshot()}function IT(n){n.clearMeasurements()}function DT(n){n.isLayoutDirty=!1}function t8(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function BT(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function n8(n){n.resolveTargetDelta()}function i8(n){n.calcProjection()}function r8(n){n.resetSkewAndRotation()}function s8(n){n.removeLeadSnapshot()}function LT(n,e,t){n.translate=Ni(e.translate,0,t),n.scale=Ni(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function OT(n,e,t,i){n.min=Ni(e.min,t.min,i),n.max=Ni(e.max,t.max,i)}function o8(n,e,t,i){OT(n.x,e.x,t.x,i),OT(n.y,e.y,t.y,i)}function a8(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const l8={duration:.45,ease:[.4,0,.1,1]},NT=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),FT=NT("applewebkit/")&&!NT("chrome/")?Math.round:No;function kT(n){n.min=FT(n.min),n.max=FT(n.max)}function c8(n){kT(n.x),kT(n.y)}function JD(n,e,t){return n==="position"||n==="preserve-aspect"&&!m6(RT(e),RT(t),.2)}function u8(n){return n!==n.root&&n.scroll?.wasRoot}const d8=KD({attachResizeListener:(n,e)=>Ng(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),aw={current:void 0},qD=KD({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!aw.current){const n=new d8({});n.mount(window),n.setOptions({layoutScroll:!0}),aw.current=n}return aw.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),h8={pan:{Feature:P6},drag:{Feature:R6,ProjectionNode:qD,MeasureLayout:GD}};function UT(n,e,t){const{props:i}=n;n.animationState&&i.whileHover&&n.animationState.setActive("whileHover",t==="Start");const r="onHover"+t,s=i[r];s&&Mi.postRender(()=>s(e,r0(e)))}class f8 extends xu{mount(){const{current:e}=this.node;e&&(this.unmount=L5(e,(t,i)=>(UT(this.node,i,"Start"),r=>UT(this.node,r,"End"))))}unmount(){}}class p8 extends xu{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=t0(Ng(this.node.current,"focus",()=>this.onFocus()),Ng(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function zT(n,e,t){const{props:i}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&i.whileTap&&n.animationState.setActive("whileTap",t==="Start");const r="onTap"+(t==="End"?"":t),s=i[r];s&&Mi.postRender(()=>s(e,r0(e)))}class m8 extends xu{mount(){const{current:e}=this.node;e&&(this.unmount=k5(e,(t,i)=>(zT(this.node,i,"Start"),(r,{success:s})=>zT(this.node,r,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const AE=new WeakMap,lw=new WeakMap,g8=n=>{const e=AE.get(n.target);e&&e(n)},v8=n=>{n.forEach(g8)};function y8({root:n,...e}){const t=n||document;lw.has(t)||lw.set(t,{});const i=lw.get(t),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(v8,{root:n,...e})),i[r]}function x8(n,e,t){const i=y8(e);return AE.set(n,t),i.observe(n),()=>{AE.delete(n),i.unobserve(n)}}const _8={some:0,all:1};class w8 extends xu{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:i,amount:r="some",once:s}=e,o={root:t?t.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:_8[r]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:h,onViewportLeave:f}=this.node.getProps(),g=u?h:f;g&&g(l)};return x8(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(S8(e,t))&&this.startObserver()}unmount(){}}function S8({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const E8={inView:{Feature:w8},tap:{Feature:m8},focus:{Feature:p8},hover:{Feature:f8}},A8={layout:{ProjectionNode:qD,MeasureLayout:GD}},b8={...c6,...E8,...h8,...A8},Hn=bz(b8,kz);function HT({isDark:n,onToggle:e}){return P.jsxs("div",{onClick:e,"aria-label":n?"Switch to light mode":"Switch to dark mode",className:"theme-toggle cursor-pointer w-8","aria-checked":n,children:[P.jsx("input",{type:"checkbox",checked:n,readOnly:!0,className:"sr-only"}),P.jsx(Hn.span,{className:"indicator",initial:!1,animate:{backgroundColor:n?"#ffffff":"#1e293b"},style:{width:"10px",height:"10px"}}),P.jsx("span",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:n?P.jsx(kU,{className:"w-7 h-7 max-sm:w-5 max-sm-h-5 text-yellow-300"}):P.jsx(VU,{className:"w-7 h-7 max-sm:w-5 max-sm-h-5 text-yellow-500"})})]})}function M8(){const[n,e]=I.useState(!1),[t,i]=I.useState(!1),r=I.useRef(null),s=[{name:"Home",href:"/"},{name:"Properties",href:"/properties"},{name:"About",href:"/about"},{name:"FAQ",href:"/faq"},{name:"Blog",href:"/blog"}];I.useEffect(()=>{const a=localStorage.getItem("theme");i(a?a==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches)},[]),I.useEffect(()=>{document.documentElement.setAttribute("data-theme",t?"dark":"light"),localStorage.setItem("theme",t?"dark":"light")},[t]);const o=()=>i(!t);return I.useEffect(()=>{const a=l=>{r.current&&!r.current.contains(l.target)&&e(!1)};return n&&document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[n]),P.jsx("nav",{className:"bg-[var(--color-card)] shadow-sm border-b border-[var(--color-border)] sticky top-0 z-[1111]",children:P.jsxs("div",{className:"container",ref:r,children:[P.jsxs("div",{className:"flex justify-between h-16",children:[P.jsx("div",{className:"flex",children:P.jsxs(lr,{to:"/",className:"flex items-center space-x-2",children:[P.jsxs("svg",{width:"30",height:"35",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[P.jsx("circle",{cx:"15",cy:"20",r:"10",stroke:"var(--color-primary-600)",strokeWidth:"2"}),P.jsx("circle",{cx:"15",cy:"20",r:"6",stroke:"var(--color-primary-600)",strokeWidth:"3"})]}),P.jsx("span",{className:"text-2xl max-sm:text-sm font-bold text-[var(--color-primary-600)] mt-1.5",children:"BestCity"})]})}),P.jsxs("div",{className:"hidden md:flex md:items-center md:space-x-8",children:[s.map(a=>P.jsx(EC,{to:a.href,className:({isActive:l})=>`px-3 py-2 text-sm font-medium transition-colors ${l?"text-[var(--color-primary-600)] font-semibold":"text-[var(--color-text)] hover:text-[var(--color-primary-600)]"}`,children:a.name},a.name)),P.jsx(HT,{isDark:t,onToggle:o}),P.jsx("button",{className:"btn text-[var(--color-bg)]",children:"Connect"})]}),P.jsxs("div",{className:"flex items-center space-x-3 md:hidden",children:[P.jsx(HT,{isDark:t,onToggle:o}),P.jsx("button",{type:"button",className:"text-[var(--color-text)] hover:text-[var(--color-primary-600)]",onClick:()=>e(!n),children:n?P.jsx(WU,{size:24}):P.jsx(FU,{size:24})})]})]}),n&&P.jsx("div",{className:"md:hidden border-t border-[var(--color-border)]",children:P.jsxs("div",{className:"pt-2 pb-3 space-y-1",children:[s.map(a=>P.jsx(EC,{to:a.href,className:({isActive:l})=>`block px-3 py-2 text-base font-medium transition-colors ${l?"text-[var(--color-primary-600)] bg-[var(--color-primary-50)] dark:bg-[var(--color-primary-900)]":"text-[var(--color-text)] hover:text-[var(--color-primary-600)] hover:bg-[var(--color-primary-50)] dark:hover:bg-[var(--color-primary-900)]"}`,onClick:()=>e(!1),children:a.name},a.name)),P.jsx("button",{className:"block w-full text-left px-3 py-2 text-base font-medium text-[var(--color-bg)] bg-[var(--color-primary-600)] hover:bg-[var(--color-primary-700)]",onClick:()=>e(!1),children:"Connect"})]})})]})})}function C8(n){return on({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zm-141.651-35.33c4.937-32.999-20.191-50.739-54.55-62.573l11.146-44.702-27.213-6.781-10.851 43.524c-7.154-1.783-14.502-3.464-21.803-5.13l10.929-43.81-27.198-6.781-11.153 44.686c-5.922-1.349-11.735-2.682-17.377-4.084l.031-.14-37.53-9.37-7.239 29.062s20.191 4.627 19.765 4.913c11.022 2.751 13.014 10.044 12.68 15.825l-12.696 50.925c.76.194 1.744.473 2.829.907-.907-.225-1.876-.473-2.876-.713l-17.796 71.338c-1.349 3.348-4.767 8.37-12.471 6.464.271.395-19.78-4.937-19.78-4.937l-13.51 31.147 35.414 8.827c6.588 1.651 13.045 3.379 19.4 5.006l-11.262 45.213 27.182 6.781 11.153-44.733a1038.209 1038.209 0 0 0 21.687 5.627l-11.115 44.523 27.213 6.781 11.262-45.128c46.404 8.781 81.299 5.239 95.986-36.727 11.836-33.79-.589-53.281-25.004-65.991 17.78-4.098 31.174-15.792 34.747-39.949zm-62.177 87.179c-8.41 33.79-65.308 15.523-83.755 10.943l14.944-59.899c18.446 4.603 77.6 13.717 68.811 48.956zm8.417-87.667c-7.673 30.736-55.031 15.12-70.393 11.292l13.548-54.327c15.363 3.828 64.836 10.973 56.845 43.035z"},child:[]}]})(n)}function T8(n){return on({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M524.531,69.836a1.5,1.5,0,0,0-.764-.7A485.065,485.065,0,0,0,404.081,32.03a1.816,1.816,0,0,0-1.923.91,337.461,337.461,0,0,0-14.9,30.6,447.848,447.848,0,0,0-134.426,0,309.541,309.541,0,0,0-15.135-30.6,1.89,1.89,0,0,0-1.924-.91A483.689,483.689,0,0,0,116.085,69.137a1.712,1.712,0,0,0-.788.676C39.068,183.651,18.186,294.69,28.43,404.354a2.016,2.016,0,0,0,.765,1.375A487.666,487.666,0,0,0,176.02,479.918a1.9,1.9,0,0,0,2.063-.676A348.2,348.2,0,0,0,208.12,430.4a1.86,1.86,0,0,0-1.019-2.588,321.173,321.173,0,0,1-45.868-21.853,1.885,1.885,0,0,1-.185-3.126c3.082-2.309,6.166-4.711,9.109-7.137a1.819,1.819,0,0,1,1.9-.256c96.229,43.917,200.41,43.917,295.5,0a1.812,1.812,0,0,1,1.924.233c2.944,2.426,6.027,4.851,9.132,7.16a1.884,1.884,0,0,1-.162,3.126,301.407,301.407,0,0,1-45.89,21.83,1.875,1.875,0,0,0-1,2.611,391.055,391.055,0,0,0,30.014,48.815,1.864,1.864,0,0,0,2.063.7A486.048,486.048,0,0,0,610.7,405.729a1.882,1.882,0,0,0,.765-1.352C623.729,277.594,590.933,167.465,524.531,69.836ZM222.491,337.58c-28.972,0-52.844-26.587-52.844-59.239S193.056,219.1,222.491,219.1c29.665,0,53.306,26.82,52.843,59.239C275.334,310.993,251.924,337.58,222.491,337.58Zm195.38,0c-28.971,0-52.843-26.587-52.843-59.239S388.437,219.1,417.871,219.1c29.667,0,53.307,26.82,52.844,59.239C470.715,310.993,447.538,337.58,417.871,337.58Z"},child:[]}]})(n)}function ob(n){return on({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M311.9 260.8L160 353.6 8 260.8 160 0l151.9 260.8zM160 383.4L8 290.6 160 512l152-221.4-152 92.8z"},child:[]}]})(n)}function ZD(n){return on({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"},child:[]}]})(n)}function QD(n){return on({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"},child:[]}]})(n)}function eB(n){return on({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"},child:[]}]})(n)}function R8(n){return on({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16zM464 96H345.94c-21.38 0-32.09 25.85-16.97 40.97l32.4 32.4L288 242.75l-73.37-73.37c-12.5-12.5-32.76-12.5-45.25 0l-68.69 68.69c-6.25 6.25-6.25 16.38 0 22.63l22.62 22.62c6.25 6.25 16.38 6.25 22.63 0L192 237.25l73.37 73.37c12.5 12.5 32.76 12.5 45.25 0l96-96 32.4 32.4c15.12 15.12 40.97 4.41 40.97-16.97V112c.01-8.84-7.15-16-15.99-16z"},child:[]}]})(n)}function P8(n){return on({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M0 405.3V448c0 35.3 86 64 192 64s192-28.7 192-64v-42.7C342.7 434.4 267.2 448 192 448S41.3 434.4 0 405.3zM320 128c106 0 192-28.7 192-64S426 0 320 0 128 28.7 128 64s86 64 192 64zM0 300.4V352c0 35.3 86 64 192 64s192-28.7 192-64v-51.6c-41.3 34-116.9 51.6-192 51.6S41.3 334.4 0 300.4zm416 11c57.3-11.1 96-31.7 96-55.4v-42.7c-23.2 16.4-57.3 27.6-96 34.5v63.6zM192 160C86 160 0 195.8 0 240s86 80 192 80 192-35.8 192-80-86-80-192-80zm219.3 56.3c60-10.8 100.7-32 100.7-56.3v-42.7c-35.5 25.1-96.5 38.6-160.7 41.8 29.5 14.3 51.2 33.5 60 57.2z"},child:[]}]})(n)}function cw(n){return on({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M0 168v-16c0-13.255 10.745-24 24-24h360V80c0-21.367 25.899-32.042 40.971-16.971l80 80c9.372 9.373 9.372 24.569 0 33.941l-80 80C409.956 271.982 384 261.456 384 240v-48H24c-13.255 0-24-10.745-24-24zm488 152H128v-48c0-21.314-25.862-32.08-40.971-16.971l-80 80c-9.372 9.373-9.372 24.569 0 33.941l80 80C102.057 463.997 128 453.437 128 432v-48h360c13.255 0 24-10.745 24-24v-16c0-13.255-10.745-24-24-24z"},child:[]}]})(n)}function I8(n){return on({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M434.7 64h-85.9c-8 0-15.7 3-21.6 8.4l-98.3 90c-.1.1-.2.3-.3.4-16.6 15.6-16.3 40.5-2.1 56 12.7 13.9 39.4 17.6 56.1 2.7.1-.1.3-.1.4-.2l79.9-73.2c6.5-5.9 16.7-5.5 22.6 1 6 6.5 5.5 16.6-1 22.6l-26.1 23.9L504 313.8c2.9 2.4 5.5 5 7.9 7.7V128l-54.6-54.6c-5.9-6-14.1-9.4-22.6-9.4zM544 128.2v223.9c0 17.7 14.3 32 32 32h64V128.2h-96zm48 223.9c-8.8 0-16-7.2-16-16s7.2-16 16-16 16 7.2 16 16-7.2 16-16 16zM0 384h64c17.7 0 32-14.3 32-32V128.2H0V384zm48-63.9c8.8 0 16 7.2 16 16s-7.2 16-16 16-16-7.2-16-16c0-8.9 7.2-16 16-16zm435.9 18.6L334.6 217.5l-30 27.5c-29.7 27.1-75.2 24.5-101.7-4.4-26.9-29.4-24.8-74.9 4.4-101.7L289.1 64h-83.8c-8.5 0-16.6 3.4-22.6 9.4L128 128v223.9h18.3l90.5 81.9c27.4 22.3 67.7 18.1 90-9.3l.2-.2 17.9 15.5c15.9 13 39.4 10.5 52.3-5.4l31.4-38.6 5.4 4.4c13.7 11.1 33.9 9.1 45-4.7l9.5-11.7c11.2-13.8 9.1-33.9-4.6-45.1z"},child:[]}]})(n)}function D8(n){return on({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z"},child:[]}]})(n)}function VT(n){return on({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M621.16 54.46C582.37 38.19 543.55 32 504.75 32c-123.17-.01-246.33 62.34-369.5 62.34-30.89 0-61.76-3.92-92.65-13.72-3.47-1.1-6.95-1.62-10.35-1.62C15.04 79 0 92.32 0 110.81v317.26c0 12.63 7.23 24.6 18.84 29.46C57.63 473.81 96.45 480 135.25 480c123.17 0 246.34-62.35 369.51-62.35 30.89 0 61.76 3.92 92.65 13.72 3.47 1.1 6.95 1.62 10.35 1.62 17.21 0 32.25-13.32 32.25-31.81V83.93c-.01-12.64-7.24-24.6-18.85-29.47zM48 132.22c20.12 5.04 41.12 7.57 62.72 8.93C104.84 170.54 79 192.69 48 192.69v-60.47zm0 285v-47.78c34.37 0 62.18 27.27 63.71 61.4-22.53-1.81-43.59-6.31-63.71-13.62zM320 352c-44.19 0-80-42.99-80-96 0-53.02 35.82-96 80-96s80 42.98 80 96c0 53.03-35.83 96-80 96zm272 27.78c-17.52-4.39-35.71-6.85-54.32-8.44 5.87-26.08 27.5-45.88 54.32-49.28v57.72zm0-236.11c-30.89-3.91-54.86-29.7-55.81-61.55 19.54 2.17 38.09 6.23 55.81 12.66v48.89z"},child:[]}]})(n)}function B8(n){return on({attr:{viewBox:"0 0 616 512"},child:[{tag:"path",attr:{d:"M602 118.6L537.1 15C531.3 5.7 521 0 510 0H106C95 0 84.7 5.7 78.9 15L14 118.6c-33.5 53.5-3.8 127.9 58.8 136.4 4.5.6 9.1.9 13.7.9 29.6 0 55.8-13 73.8-33.1 18 20.1 44.3 33.1 73.8 33.1 29.6 0 55.8-13 73.8-33.1 18 20.1 44.3 33.1 73.8 33.1 29.6 0 55.8-13 73.8-33.1 18.1 20.1 44.3 33.1 73.8 33.1 4.7 0 9.2-.3 13.7-.9 62.8-8.4 92.6-82.8 59-136.4zM529.5 288c-10 0-19.9-1.5-29.5-3.8V384H116v-99.8c-9.6 2.2-19.5 3.8-29.5 3.8-6 0-12.1-.4-18-1.2-5.6-.8-11.1-2.1-16.4-3.6V480c0 17.7 14.3 32 32 32h448c17.7 0 32-14.3 32-32V283.2c-5.4 1.6-10.8 2.9-16.4 3.6-6.1.8-12.1 1.2-18.2 1.2z"},child:[]}]})(n)}function L8(n){return on({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M610.5 373.3c2.6-14.1 2.6-28.5 0-42.6l25.8-14.9c3-1.7 4.3-5.2 3.3-8.5-6.7-21.6-18.2-41.2-33.2-57.4-2.3-2.5-6-3.1-9-1.4l-25.8 14.9c-10.9-9.3-23.4-16.5-36.9-21.3v-29.8c0-3.4-2.4-6.4-5.7-7.1-22.3-5-45-4.8-66.2 0-3.3.7-5.7 3.7-5.7 7.1v29.8c-13.5 4.8-26 12-36.9 21.3l-25.8-14.9c-2.9-1.7-6.7-1.1-9 1.4-15 16.2-26.5 35.8-33.2 57.4-1 3.3.4 6.8 3.3 8.5l25.8 14.9c-2.6 14.1-2.6 28.5 0 42.6l-25.8 14.9c-3 1.7-4.3 5.2-3.3 8.5 6.7 21.6 18.2 41.1 33.2 57.4 2.3 2.5 6 3.1 9 1.4l25.8-14.9c10.9 9.3 23.4 16.5 36.9 21.3v29.8c0 3.4 2.4 6.4 5.7 7.1 22.3 5 45 4.8 66.2 0 3.3-.7 5.7-3.7 5.7-7.1v-29.8c13.5-4.8 26-12 36.9-21.3l25.8 14.9c2.9 1.7 6.7 1.1 9-1.4 15-16.2 26.5-35.8 33.2-57.4 1-3.3-.4-6.8-3.3-8.5l-25.8-14.9zM496 400.5c-26.8 0-48.5-21.8-48.5-48.5s21.8-48.5 48.5-48.5 48.5 21.8 48.5 48.5-21.7 48.5-48.5 48.5zM224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm201.2 226.5c-2.3-1.2-4.6-2.6-6.8-3.9l-7.9 4.6c-6 3.4-12.8 5.3-19.6 5.3-10.9 0-21.4-4.6-28.9-12.6-18.3-19.8-32.3-43.9-40.2-69.6-5.5-17.7 1.9-36.4 17.9-45.7l7.9-4.6c-.1-2.6-.1-5.2 0-7.8l-7.9-4.6c-16-9.2-23.4-28-17.9-45.7.9-2.9 2.2-5.8 3.2-8.7-3.8-.3-7.5-1.2-11.4-1.2h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c10.1 0 19.5-3.2 27.2-8.5-1.2-3.8-2-7.7-2-11.8v-9.2z"},child:[]}]})(n)}function rx(n){return on({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M461.2 128H80c-8.84 0-16-7.16-16-16s7.16-16 16-16h384c8.84 0 16-7.16 16-16 0-26.51-21.49-48-48-48H64C28.65 32 0 60.65 0 96v320c0 35.35 28.65 64 64 64h397.2c28.02 0 50.8-21.53 50.8-48V176c0-26.47-22.78-48-50.8-48zM416 336c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32z"},child:[]}]})(n)}function O8(){return P.jsx("footer",{className:"bg-secondary-900 text-white",children:P.jsxs("div",{className:"container py-12",children:[P.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[P.jsxs("div",{children:[P.jsx("h3",{className:"text-lg font-semibold mb-4",children:"BestCity"}),P.jsx("p",{className:"text-secondary-300 text-sm",children:"Your trusted partner in finding the perfect property. We make real estate simple and accessible for everyone."})]}),P.jsxs("div",{children:[P.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Quick Links"}),P.jsxs("ul",{className:"space-y-2",children:[P.jsx("li",{children:P.jsx(lr,{to:"/properties",className:"text-secondary-300 hover:text-white text-sm",children:"Properties"})}),P.jsx("li",{children:P.jsx(lr,{to:"/about",className:"text-secondary-300 hover:text-white text-sm",children:"About Us"})}),P.jsx("li",{children:P.jsx(lr,{to:"/faq",className:"text-secondary-300 hover:text-white text-sm",children:"FAQ"})}),P.jsx("li",{children:P.jsx(lr,{to:"/privacy",className:"text-secondary-300 hover:text-white text-sm",children:"Privacy Policy"})})]})]}),P.jsxs("div",{children:[P.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Contact"}),P.jsxs("ul",{className:"space-y-2",children:[P.jsxs("li",{className:"flex items-center text-secondary-300 text-sm",children:[P.jsx(UU,{className:"mr-2"}),P.jsx("span",{children:"+1 (555) 123-4567"})]}),P.jsxs("li",{className:"flex items-center text-secondary-300 text-sm",children:[P.jsx(LU,{className:"mr-2"}),P.jsx("span",{children:"contact@bestcity.com"})]}),P.jsxs("li",{className:"flex items-center text-secondary-300 text-sm",children:[P.jsx(OU,{className:"mr-2"}),P.jsx("span",{children:"123 Property Street, Real City, RC 12345"})]})]})]}),P.jsxs("div",{children:[P.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Connect With Us"}),P.jsxs("div",{className:"flex space-x-4",children:[P.jsx(lr,{to:"#",className:"text-secondary-300 hover:text-white",children:P.jsx(jU,{size:20})}),P.jsx(lr,{to:"#",className:"text-secondary-300 hover:text-white",children:P.jsx(BU,{size:20})}),P.jsx(lr,{to:"#",className:"text-secondary-300 hover:text-white",children:P.jsx(PU,{size:20})}),P.jsx(lr,{to:"#",className:"text-secondary-300 hover:text-white",children:P.jsx(T8,{size:20})})]})]})]}),P.jsx("div",{className:"border-t border-secondary-700 mt-8 pt-8 text-center text-secondary-300 text-sm",children:P.jsxs("p",{children:[" ",new Date().getFullYear()," BestCity. All rights reserved."]})})]})})}function N8(n){return on({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 0L9.798 1.266l-6 3.468L1.596 6v12l2.202 1.266 6.055 3.468L12.055 24l2.202-1.266 5.945-3.468L22.404 18V6l-2.202-1.266-6-3.468zM6 15.468V8.532l6-3.468 6 3.468v6.936l-6 3.468z"},child:[]}]})(n)}function F8(n){return on({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M11.944 17.97L4.58 13.62 11.943 24l7.37-10.38-7.372 4.35h.003zM12.056 0L4.69 12.223l7.365 4.354 7.365-4.35L12.056 0z"},child:[]}]})(n)}function k8(){const[n,e]=I.useState({}),t=[{id:1,title:"Luxury Downtown Apartment",price:{usd:85e4,eth:425},location:"Miami, FL",image:"https://images.unsplash.com/photo-1613490493576-7fde63acd811?w=800&q=80",roi:"7.2% Annual",metrics:{totalInvestors:142,funded:"89%",minInvestment:"$10"},status:"Active Investment"},{id:2,title:"Modern Tech District Complex",price:{usd:12e5,eth:600},location:"Austin, TX",image:"https://images.unsplash.com/photo-1512917774080-9991f1c4c750?w=800&q=80",roi:"6.8% Annual",metrics:{totalInvestors:203,funded:"95%",minInvestment:"$10"},status:"Almost Funded"},{id:3,title:"Waterfront Commercial Space",price:{usd:21e5,eth:1050},location:"Seattle, WA",image:"https://images.unsplash.com/photo-1486406146926-c627a92ad1ab?w=800&q=80",roi:"7.5% Annual",metrics:{totalInvestors:89,funded:"45%",minInvestment:"$10"},status:"New Listing"}],i=[{icon:R8,title:"Profitability",description:"Target average annual returns of 7% through strategic property investments and efficient management."},{icon:cw,title:"Liquidity",description:"Trade your property NFTs anytime on our marketplace, providing unprecedented real estate liquidity."},{icon:D8,title:"No Hidden Fees",description:"Transparent pricing with no entry, exit, or capital gains fees. What you see is what you get."},{icon:L8,title:"Hassle-Free Management",description:"BestCity handles all property management aspects, from maintenance to tenant relations."}],r=[{icon:rx,title:"Connect Wallet",description:"Connect your cryptocurrency wallet to BestCity to start investing."},{icon:B8,title:"Choose Property",description:"Browse our marketplace and select properties that match your investment goals."},{icon:VT,title:"Receive Returns",description:"Collect monthly rental returns directly to your connected wallet."},{icon:cw,title:"Flexible Exit",description:"Sell your property NFTs whenever you want through our marketplace."}],s=[{icon:P8,title:"Tokenization",description:"Properties are divided into $10 NFT tokens, making real estate investment accessible to everyone."},{icon:F8,title:"Purchase NFTs",description:"Buy property NFTs using cryptocurrency, becoming a fractional owner of the property."},{icon:VT,title:"Monthly Returns",description:"Receive your share of rental income directly to your wallet each month."},{icon:cw,title:"Flexible Trading",description:"Hold for passive income or sell your NFTs on our marketplace at any time."}],o=[{id:1,title:"The Future of Real Estate: Cryptocurrency Payments and Blockchain Technology",slug:"future-real-estate-crypto-payments",excerpt:"Explore how cryptocurrency and blockchain are revolutionizing property transactions and investment opportunities.",image:"https://images.unsplash.com/photo-1516245834210-c4c142787335?w=800&q=80",category:"crypto",author:"Sarah Johnson",date:"2024-03-15",readTime:"5 min read"},{id:2,title:"Understanding Tokenized Real Estate Investment",slug:"understanding-tokenized-real-estate",excerpt:"A comprehensive guide to property tokenization and how it's making real estate investment more accessible.",image:"https://images.unsplash.com/photo-1460472178825-e5240623afd5?w=800&q=80",category:"investment",author:"Michael Chen",date:"2024-03-12",readTime:"7 min read"},{id:3,title:"Smart Contracts in Real Estate Transactions",slug:"smart-contracts-real-estate",excerpt:"How smart contracts are streamlining property transactions and reducing costs.",image:"https://images.unsplash.com/photo-1451187580459-43490279c0fa?w=800&q=80",category:"technology",author:"David Rodriguez",date:"2024-03-10",readTime:"6 min read"}],a=[{title:"General Information",questions:[{question:"What is BestCity?",answer:"BestCity is an innovative investment project dedicated to real estate. We allow clients to invest as little as $10 in investment properties, with the aim of building up regular income and/or savings."},{question:"I want to buy NFTs, what payment methods are accepted?",answer:"You can use various payment methods such as Metamask, Phantom wallet, OKX wallet, Trust wallet, etc."},{question:"What is the marketplace, or secondary market?",answer:"The BestCity Marketplace is our platform that allows BestCity community members to buy and sell NFTs among themselves. It is the equivalent of a secondary market where investors can buy and sell NFTs among themselves. We may also cooperate with other marketplaces to allow anyone to choose their preferred marketplace."},{question:"I sell or buy NFTs during the month. Who receives the rental income for the current month?",answer:"The rental income is paid to the investor who owns the NFTs on the day the royalties are paid."},{question:"Are transactions on the platform secure?",answer:"BestCity uses the most advanced technical means to ensure the confidentiality and security of transactions on the platform."}]}],l=(u,h)=>{e(f=>({...f,[`${u}-${h}`]:!f[`${u}-${h}`]}))};return P.jsxs("div",{className:"space-y-16",children:[P.jsxs("section",{className:"relative h-[600px] flex items-center justify-center overflow-hidden",children:[P.jsxs("div",{className:"absolute inset-0",children:[P.jsx("img",{src:"https://images.unsplash.com/photo-1600596542815-ffad4c1539a9?w=1600&q=80",alt:"Hero background",className:"w-full h-full object-cover"}),P.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-60"})]}),P.jsxs("div",{className:"relative container text-center text-white space-y-8 z-10",children:[P.jsx(Hn.h1,{className:"text-5xl max-sm:text-3xl font-bold",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:"Invest and Trade in Real Estate with Cryptocurrency"}),P.jsx(Hn.p,{className:"text-xl max-w-2xl mx-auto",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:"Own fractional shares of premium properties through NFTs. Start investing with as little as $10."})]})]}),P.jsxs("section",{className:"container",children:[P.jsxs("div",{className:"text-center mb-12",children:[P.jsx("h2",{className:"text-3xl font-bold mb-4 text-[var(--color-text)]",children:"Start Investing in Minutes"}),P.jsx("p",{className:"text-[var(--color-secondary-300)]",children:"Your journey to crypto-powered real estate investment"})]}),P.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:r.map((u,h)=>P.jsx(Hn.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:h*.2},children:P.jsxs("div",{className:"bg-[var(--color-card)] p-6 max-sm:px-3 rounded-lg shadow-md text-center border border-[var(--color-border)]",children:[P.jsx("div",{className:"bg-[var(--color-primary-50)] w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:P.jsx(u.icon,{className:"text-2xl text-[var(--color-primary-600)]"})}),P.jsxs("div",{className:"text-[var(--color-primary-600)] text-2xl font-bold mb-4",children:["Step ",h+1]}),P.jsx("h3",{className:"text-xl font-semibold mb-2 text-[var(--color-text)]",children:u.title}),P.jsx("p",{className:"text-[var(--color-secondary-300)]",children:u.description})]})},h))})]}),P.jsx("section",{className:"bg-[var(--color-secondary-900)] text-white py-16",children:P.jsxs("div",{className:"container",children:[P.jsxs("div",{className:"text-center mb-12",children:[P.jsx("h2",{className:"text-3xl font-bold mb-4",children:"How BestCity Works"}),P.jsx("p",{className:"text-[#cbd5e1]",children:"Understanding our tokenized real estate platform"})]}),P.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:s.map((u,h)=>P.jsxs(Hn.div,{className:"bg-[var(--color-secondary-800)] p-6 max-sm:px-3 rounded-lg",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:h*.2},children:[P.jsx("div",{className:"bg-[var(--color-primary-600)] w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:P.jsx(u.icon,{className:"text-2xl text-[var(--color-bg)]"})}),P.jsx("h3",{className:"text-xl font-semibold mb-2 text-center",children:u.title}),P.jsx("p",{className:"text-[#cbd5e1] text-center",children:u.description})]},h))})]})}),P.jsxs("section",{className:"container",children:[P.jsxs("div",{className:"text-center mb-12",children:[P.jsx("h2",{className:"text-3xl font-bold mb-4 text-[var(--color-text)]",children:"Featured Investment Opportunities"}),P.jsx("p",{className:"text-[var(--color-secondary-300)]",children:"Curated properties with verified returns and immediate tokenization"})]}),P.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:t.map((u,h)=>P.jsxs(Hn.div,{className:"card group",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:h*.2},children:[P.jsxs("div",{className:"relative h-48 overflow-hidden rounded-t-lg",children:[P.jsx("img",{src:u.image,alt:u.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}),P.jsx("div",{className:"absolute top-4 right-4 bg-[var(--color-text)] px-3 py-1 rounded-full text-[var(--color-bg)] font-semibold text-sm shadow",children:u.status})]}),P.jsxs("div",{className:"p-6 max-sm:px-3",children:[P.jsx("h3",{className:"text-xl font-semibold mb-2 text-[var(--color-text)]",children:u.title}),P.jsx("p",{className:"text-[var(--color-secondary-300)] mb-4",children:u.location}),P.jsxs("div",{className:"flex justify-between items-center mb-4",children:[P.jsxs("div",{children:[P.jsx("p",{className:"text-sm text-[var(--color-secondary-300)]",children:"Price"}),P.jsxs("p",{className:"font-semibold text-[var(--color-text)]",children:["$",u.price.usd.toLocaleString()]}),P.jsxs("p",{className:"text-sm text-[var(--color-primary-300)]",children:[u.price.eth," ETH"]})]}),P.jsxs("div",{className:"text-right",children:[P.jsx("p",{className:"text-sm text-[var(--color-secondary-300)]",children:"ROI"}),P.jsx("p",{className:"font-semibold text-green-600",children:u.roi})]})]}),P.jsxs("div",{className:"space-y-2 mb-4 text-sm",children:[P.jsxs("div",{className:"flex justify-between",children:[P.jsx("span",{className:"text-[var(--color-secondary-300)]",children:"Total Investors"}),P.jsx("span",{className:"font-medium text-[var(--color-text)]",children:u.metrics.totalInvestors})]}),P.jsxs("div",{className:"flex justify-between",children:[P.jsx("span",{className:"text-[var(--color-secondary-300)]",children:"Funded"}),P.jsx("span",{className:"font-medium text-[var(--color-text)]",children:u.metrics.funded})]}),P.jsxs("div",{className:"flex justify-between",children:[P.jsx("span",{className:"text-[var(--color-secondary-300)]",children:"Min Investment"}),P.jsx("span",{className:"font-medium text-[var(--color-text)]",children:u.metrics.minInvestment})]})]}),P.jsxs(lr,{to:`/properties/${u.id}`,className:"btn w-full flex items-center justify-center text-[var(--color-bg)]",children:["Invest Now",P.jsx(p3,{className:"ml-2"})]})]})]},u.id))})]}),P.jsx("section",{className:" pt-16",children:P.jsxs("div",{className:"container",children:[P.jsxs("div",{className:"text-center mb-12",children:[P.jsx("h2",{className:"text-3xl font-bold mb-4 text-[var(--color-text)]",children:"Why Choose BestCity"}),P.jsx("p",{className:"text-[var(--color-secondary-300)]",children:"Experience the future of real estate investment"})]}),P.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:i.map((u,h)=>P.jsxs(Hn.div,{className:"bg-[var(--color-card)] p-6 max-sm:px-3 rounded-lg shadow-md text-center border border-[var(--color-border)]",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:h*.2},children:[P.jsx(u.icon,{className:"text-4xl text-[var(--color-primary-600)] mx-auto mb-4"}),P.jsx("h3",{className:"text-xl font-semibold mb-2 text-[var(--color-text)]",children:u.title}),P.jsx("p",{className:"text-[var(--color-secondary-300)]",children:u.description})]},h))})]})}),P.jsx("section",{className:"container",children:P.jsxs("div",{className:"bg-[var(--color-primary-600)] rounded-2xl p-8 md:p-12 text-[var(--color-bg)] text-center",children:[P.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Ready to Start Investing?"}),P.jsx("p",{className:"text-lg mb-8 max-w-2xl mx-auto text-[var(--color-bg)]",children:"Join thousands of investors already earning passive income through tokenized real estate."}),P.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[P.jsx(lr,{to:"/properties",className:"btn bg-[var(--color-bg)] text-[var(--color-primary-600)] hover:bg-[var(--color-primary-50)]",children:"Browse Properties"}),P.jsxs("button",{className:"btn bg-[var(--color-primary-700)] hover:bg-[var(--color-primary-800)]",children:[P.jsx(rx,{className:"mr-2"}),"Connect Wallet"]})]})]})}),P.jsxs("section",{className:"container py-16",children:[P.jsxs(Hn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center max-w-3xl mx-auto mb-12",children:[P.jsx("h1",{className:"text-3xl font-bold mb-4 text-[var(--color-text)]",children:"Latest Insights"}),P.jsx("p",{className:"text-[var(--color-secondary-300)]",children:"Stay informed with our latest articles and market analysis"})]}),P.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:o.map((u,h)=>P.jsx(Hn.article,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:h*.1},className:"bg-[var(--color-card)] rounded-lg shadow-md overflow-hidden border border-[var(--color-border)]",children:P.jsxs(lr,{to:`/blog/${u.slug}`,children:[P.jsxs("div",{className:"relative h-48",children:[P.jsx("img",{src:u.image,alt:u.title,className:"w-full h-full object-cover"}),P.jsx("div",{className:"absolute top-4 right-4 bg-white dark:bg-[var(--color-card)] px-3 py-1 rounded-full text-sm font-medium text-[var(--color-primary-600)] shadow",children:u.category.charAt(0).toUpperCase()+u.category.slice(1)})]}),P.jsxs("div",{className:"p-6 max-sm:px-3",children:[P.jsx("h2",{className:"text-xl max-sm:text-center font-semibold mb-3 hover:text-[var(--color-primary-600)] transition-colors text-[var(--color-text)]",children:u.title}),P.jsx("p",{className:"text-[var(--color-secondary-300)] max-sm:text-center mb-4",children:u.excerpt}),P.jsxs("div",{className:"flex items-center text-sm text-[var(--color-secondary-500)]",children:[P.jsx(bA,{className:"mr-2"}),P.jsx("span",{className:"mr-4",children:u.author}),P.jsx(EA,{className:"mr-2"}),P.jsx("span",{children:u.readTime})]})]})]})},u.id))})]}),P.jsx("section",{className:"container",children:P.jsxs(Hn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-3xl mx-auto",children:[P.jsxs("div",{className:"text-center mb-12",children:[P.jsx("h2",{className:"text-3xl font-bold mb-4 text-[var(--color-text)]",children:"Frequently Asked Questions"}),P.jsx("p",{className:"text-[var(--color-secondary-300)]",children:"Find answers to common questions about our platform, cryptocurrency payments, and real estate investment."})]}),P.jsx("div",{className:"space-y-6",children:a.map((u,h)=>P.jsx("div",{className:"bg-[var(--color-card)] rounded-lg shadow-md overflow-hidden border border-[var(--color-border)]",children:P.jsx("div",{className:"divide-y divide-[var(--color-border)]",children:u.questions.map((f,g)=>P.jsxs("div",{className:"p-6 max-sm:px-3",children:[P.jsxs("button",{className:"w-full flex justify-between items-center text-left group",onClick:()=>l(u.title,g),children:[P.jsx("span",{className:"font-medium text-[var(--color-text)] group-hover:text-[var(--color-primary-600)] transition-colors",children:f.question}),n[`${u.title}-${g}`]?P.jsx(g3,{className:"flex-shrink-0 ml-4 text-[var(--color-secondary-500)]"}):P.jsx(SA,{className:"flex-shrink-0 ml-4 text-[var(--color-secondary-500)]"})]}),P.jsx(dD,{children:n[`${u.title}-${g}`]&&P.jsx(Hn.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"overflow-hidden",children:P.jsx("p",{className:"mt-4 text-[var(--color-secondary-300)]",children:f.answer})})})]},g))})},h))})]})}),P.jsx("section",{className:"py-12 bg-[var(--color-primary-900)]",children:P.jsx("div",{className:"container",children:P.jsxs("div",{className:"lg:grid lg:grid-cols-2 lg:gap-8 items-center",children:[P.jsxs("div",{children:[P.jsx("h2",{className:"text-3xl font-extrabold text-white sm:text-4xl",children:"Join Our Community"}),P.jsx("p",{className:"mt-4 text-lg text-[var(--color-secondary-300)]",children:"Connect with other crypto real estate investors, share insights, and get early access to new properties."}),P.jsxs("dl",{className:"mt-8 space-y-6",children:[P.jsxs("div",{className:"flex",children:[P.jsx("div",{className:"flex-shrink-0",children:P.jsx("div",{className:"flex items-center justify-center h-12 w-12 rounded-md bg-[var(--color-primary-700)] text-[var(--color-bg)]",children:P.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:P.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})})}),P.jsxs("div",{className:"ml-4",children:[P.jsx("dt",{className:"text-lg leading-6 font-medium text-[var(--color-text)]",children:"10,000+ Members"}),P.jsx("dd",{className:"mt-2 text-base text-[var(--color-secondary-300)]",children:"Join a growing community of crypto-savvy real estate investors"})]})]}),P.jsxs("div",{className:"flex",children:[P.jsx("div",{className:"flex-shrink-0",children:P.jsx("div",{className:"flex items-center justify-center h-12 w-12 rounded-md bg-[var(--color-primary-700)] text-[var(--color-bg)]",children:P.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:P.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})})}),P.jsxs("div",{className:"ml-4",children:[P.jsx("dt",{className:"text-lg leading-6 font-medium text-white",children:"Weekly Events"}),P.jsx("dd",{className:"mt-2 text-base text-[var(--color-secondary-300)]",children:"Educational webinars, market updates, and networking sessions"})]})]})]})]}),P.jsx("div",{className:"mt-12 lg:mt-0 flex justify-center",children:P.jsxs("div",{className:"bg-[var(--color-card)] rounded-lg shadow-xl p-8 max-w-sm w-full border border-[var(--color-border)]",children:[P.jsx("h3",{className:"text-2xl font-bold text-[var(--color-text)] text-center mb-6",children:"Join Discord"}),P.jsx("p",{className:"text-[var(--color-secondary-300)] text-center mb-8",children:"Get instant access to our community and start connecting with other investors"}),P.jsx("a",{href:"https://discord.gg/BestCity",target:"_blank",rel:"noopener noreferrer",className:"w-full flex items-center justify-center px-8 py-3 border border-transparent text-base font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 md:py-4 md:text-lg md:px-10",children:"Join Now"}),P.jsxs("p",{className:"mt-4 text-sm text-[var(--color-secondary-500)] text-center",children:["Already a member?"," ",P.jsx("a",{href:"https://discord.gg/BestCity",className:"text-indigo-600 hover:text-indigo-500",children:"Sign in"})]})]})})]})})})]})}function U8(){const[n,e]=I.useState(!1),[t,i]=I.useState({priceRange:"all",propertyType:"all",location:"",minROI:"",maxROI:"",fundingStatus:"all",sortBy:"newest"}),r=[{id:1,title:"Modern Villa with Pool",price:{usd:85e4,eth:425},location:"Beverly Hills, CA",image:"https://images.unsplash.com/photo-1613490493576-7fde63acd811?w=800&q=80",type:"villa",roi:"7.2%",metrics:{totalInvestors:142,funded:"89%",minInvestment:"$10",monthlyIncome:"$520",appreciation:"4.5%"},status:"Active Investment",features:["Pool","Smart Home","Solar Panels"],tokenDetails:{totalTokens:85e3,availableTokens:9350,tokenPrice:"$10"}},{id:2,title:"Luxury Penthouse",price:{usd:12e5,eth:600},location:"Manhattan, NY",image:"https://images.unsplash.com/photo-1512917774080-9991f1c4c750?w=800&q=80",type:"apartment",roi:"6.8%",metrics:{totalInvestors:203,funded:"95%",minInvestment:"$10",monthlyIncome:"$680",appreciation:"5.2%"},status:"Almost Funded",features:["Doorman","Gym","Terrace"],tokenDetails:{totalTokens:12e4,availableTokens:6e3,tokenPrice:"$10"}},{id:3,title:"Waterfront Estate",price:{usd:21e5,eth:1050},location:"Miami Beach, FL",image:"https://images.unsplash.com/photo-1613490493576-7fde63acd811?w=800&q=80",type:"house",roi:"7.5%",metrics:{totalInvestors:89,funded:"45%",minInvestment:"$10",monthlyIncome:"$1200",appreciation:"6.1%"},status:"New Listing",features:["Waterfront","Dock","Wine Cellar"],tokenDetails:{totalTokens:21e4,availableTokens:115500,tokenPrice:"$10"}}],s=(l,u)=>{i(h=>({...h,[l]:u}))},a=[...r.filter(l=>{if(t.propertyType!=="all"&&l.type!==t.propertyType||t.location&&!l.location.toLowerCase().includes(t.location.toLowerCase())||t.minROI&&parseFloat(l.roi)<parseFloat(t.minROI)||t.maxROI&&parseFloat(l.roi)>parseFloat(t.maxROI))return!1;if(t.priceRange!=="all"){const[u,h]=t.priceRange.split("-").map(Number);if(h&&(l.price.usd<u||l.price.usd>h)||!h&&l.price.usd<u)return!1}if(t.fundingStatus!=="all"){const u=parseInt(l.metrics.funded);switch(t.fundingStatus){case"new":if(u>30)return!1;break;case"active":if(u<30||u>=90)return!1;break;case"almostFunded":if(u<90)return!1;break}}return!0})].sort((l,u)=>{switch(t.sortBy){case"priceAsc":return l.price.usd-u.price.usd;case"priceDesc":return u.price.usd-l.price.usd;case"roiDesc":return parseFloat(u.roi)-parseFloat(l.roi);case"fundingDesc":return parseInt(u.metrics.funded)-parseInt(l.metrics.funded);default:return 0}});return P.jsxs("div",{className:"min-h-screen bg-[var(--color-bg)]",children:[P.jsx("div",{className:"bg-[var(--color-card)] shadow border-b border-[var(--color-border)]",children:P.jsx("div",{className:"container py-6",children:P.jsxs("div",{className:"flex justify-between items-center",children:[P.jsx("h1",{className:"text-3xl font-bold text-[var(--color-text)]",children:"Investment Properties"}),P.jsx("div",{className:"flex items-center space-x-4",children:P.jsx("button",{className:`p-2 rounded-md transition-colors ${n?"bg-[var(--color-primary-100)] text-[var(--color-primary-600)]":"hover:bg-[var(--color-secondary-100)] text-[var(--color-text)]"}`,onClick:()=>e(!n),"aria-label":"Toggle filters",children:P.jsx(RU,{size:20})})})]})})}),n&&P.jsx("div",{className:"bg-[var(--color-card)] shadow-md border-t border-[var(--color-border)]",children:P.jsx("div",{className:"container py-6",children:P.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[P.jsxs("div",{children:[P.jsx("label",{className:"block text-sm font-medium text-[var(--color-secondary-700)] mb-1",children:"Price Range"}),P.jsxs("select",{className:"input",value:t.priceRange,onChange:l=>s("priceRange",l.target.value),children:[P.jsx("option",{value:"all",children:"All Prices"}),P.jsx("option",{value:"0-500000",children:"Under $500,000"}),P.jsx("option",{value:"500000-1000000",children:"$500,000 - $1,000,000"}),P.jsx("option",{value:"1000000",children:"Over $1,000,000"})]})]}),P.jsxs("div",{children:[P.jsx("label",{className:"block text-sm font-medium text-[var(--color-secondary-700)] mb-1",children:"Property Type"}),P.jsxs("select",{className:"input",value:t.propertyType,onChange:l=>s("propertyType",l.target.value),children:[P.jsx("option",{value:"all",children:"All Types"}),P.jsx("option",{value:"house",children:"House"}),P.jsx("option",{value:"apartment",children:"Apartment"}),P.jsx("option",{value:"villa",children:"Villa"})]})]}),P.jsxs("div",{children:[P.jsx("label",{className:"block text-sm font-medium text-[var(--color-secondary-700)] mb-1",children:"Location"}),P.jsx("input",{type:"text",className:"input",placeholder:"Enter location",value:t.location,onChange:l=>s("location",l.target.value)})]}),P.jsxs("div",{children:[P.jsx("label",{className:"block text-sm font-medium text-[var(--color-secondary-700)] mb-1",children:"Minimum ROI"}),P.jsx("input",{type:"number",className:"input",placeholder:"Min ROI %",value:t.minROI,onChange:l=>s("minROI",l.target.value)})]}),P.jsxs("div",{children:[P.jsx("label",{className:"block text-sm font-medium text-[var(--color-secondary-700)] mb-1",children:"Funding Status"}),P.jsxs("select",{className:"input",value:t.fundingStatus,onChange:l=>s("fundingStatus",l.target.value),children:[P.jsx("option",{value:"all",children:"All Statuses"}),P.jsx("option",{value:"new",children:"New Listings"}),P.jsx("option",{value:"active",children:"Active Funding"}),P.jsx("option",{value:"almostFunded",children:"Almost Funded"})]})]}),P.jsxs("div",{children:[P.jsx("label",{className:"block text-sm font-medium text-[var(--color-secondary-700)] mb-1",children:"Sort By"}),P.jsxs("select",{className:"input",value:t.sortBy,onChange:l=>s("sortBy",l.target.value),children:[P.jsx("option",{value:"newest",children:"Newest First"}),P.jsx("option",{value:"priceAsc",children:"Price: Low to High"}),P.jsx("option",{value:"priceDesc",children:"Price: High to Low"}),P.jsx("option",{value:"roiDesc",children:"Highest ROI"}),P.jsx("option",{value:"fundingDesc",children:"Most Funded"})]})]})]})})}),P.jsx("div",{className:"container py-8",children:P.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:a.map((l,u)=>P.jsx(Hn.div,{className:"card group",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:u*.1},children:P.jsxs(lr,{to:`/properties/${l.id}`,children:[P.jsxs("div",{className:"relative h-48 overflow-hidden rounded-t-lg",children:[P.jsx("img",{src:l.image,alt:l.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}),P.jsx("div",{className:"absolute top-4 right-4 bg-[var(--color-text)] px-3 py-1 rounded-full text-[var(--color-bg)] font-semibold text-sm shadow",children:l.status})]}),P.jsxs("div",{className:"p-6 max-sm:px-3",children:[P.jsx("h3",{className:"text-xl font-semibold mb-2 text-[var(--color-text)]",children:l.title}),P.jsx("p",{className:"text-[var(--color-secondary-300)] mb-4",children:l.location}),P.jsxs("div",{className:"flex justify-between items-center mb-4",children:[P.jsxs("div",{children:[P.jsx("p",{className:"text-sm text-[var(--color-secondary-500)]",children:"Investment Price"}),P.jsxs("div",{className:"flex items-center",children:[P.jsx(AA,{className:"text-[var(--color-primary-600)]"}),P.jsxs("span",{className:"font-semibold text-[var(--color-text)]",children:["$",l.price.usd.toLocaleString()]})]}),P.jsxs("div",{className:"flex items-center text-sm text-[var(--color-primary-600)]",children:[P.jsx(ob,{className:"mr-1"}),P.jsxs("span",{children:[l.price.eth," ETH"]})]})]}),P.jsxs("div",{className:"text-right",children:[P.jsx("p",{className:"text-sm text-[var(--color-secondary-500)]",children:"Annual ROI"}),P.jsxs("div",{className:"flex items-center justify-end text-green-600",children:[P.jsx(v3,{className:"mr-1"}),P.jsx("span",{className:"font-semibold",children:l.roi})]})]})]}),P.jsxs("div",{className:"space-y-2 mb-4 text-sm",children:[P.jsxs("div",{className:"flex justify-between",children:[P.jsx("span",{className:"text-[var(--color-secondary-300)]",children:"Monthly Income"}),P.jsx("span",{className:"font-medium text-[var(--color-text)]",children:l.metrics.monthlyIncome})]}),P.jsxs("div",{className:"flex justify-between",children:[P.jsx("span",{className:"text-[var(--color-secondary-300)]",children:"Appreciation"}),P.jsx("span",{className:"font-medium text-[var(--color-text)]",children:l.metrics.appreciation})]}),P.jsxs("div",{className:"flex justify-between",children:[P.jsx("span",{className:"text-[var(--color-secondary-300)]",children:"Min Investment"}),P.jsx("span",{className:"font-medium text-[var(--color-text)]",children:l.metrics.minInvestment})]})]}),P.jsxs("div",{className:"mb-4",children:[P.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[P.jsx("span",{className:"text-[var(--color-secondary-300)]",children:"Funding Progress"}),P.jsx("span",{className:"font-medium text-[var(--color-text)]",children:l.metrics.funded})]}),P.jsx("div",{className:"w-full bg-[var(--color-secondary-100)] rounded-full h-2",children:P.jsx("div",{className:"bg-[var(--color-primary-600)] h-2 rounded-full transition-all duration-500",style:{width:l.metrics.funded}})})]}),P.jsxs("div",{className:"bg-[var(--color-secondary-50)] rounded-lg p-3 mb-4 border border-[var(--color-border)]",children:[P.jsxs("div",{className:"flex justify-between text-sm",children:[P.jsx("span",{className:"text-[var(--color-secondary-300)]",children:"Available Tokens"}),P.jsxs("span",{className:"font-medium text-[var(--color-text)]",children:[l.tokenDetails.availableTokens.toLocaleString()," ","/ ",l.tokenDetails.totalTokens.toLocaleString()]})]}),P.jsxs("div",{className:"flex justify-between text-sm mt-1",children:[P.jsx("span",{className:"text-[var(--color-secondary-300)]",children:"Token Price"}),P.jsx("span",{className:"font-medium text-[var(--color-primary-600)]",children:l.tokenDetails.tokenPrice})]})]}),P.jsxs("button",{className:"btn w-full flex items-center justify-center text-[var(--color-bg)]",children:["Invest Now",P.jsx(p3,{className:"ml-2"})]})]})]})},l.id))})})]})}var uw={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var GT;function z8(){return GT||(GT=1,(function(n){(function(){var e={}.hasOwnProperty;function t(){for(var s="",o=0;o<arguments.length;o++){var a=arguments[o];a&&(s=r(s,i(a)))}return s}function i(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return t.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var o="";for(var a in s)e.call(s,a)&&s[a]&&(o=r(o,a));return o}function r(s,o){return o?s?s+" "+o:s+o:s}n.exports?(t.default=t,n.exports=t):window.classNames=t})()})(uw)),uw.exports}var H8=z8();const tB=lc(H8);var Tv={exports:{}},Rv={exports:{}},dw,jT;function V8(){if(jT)return dw;jT=1;var n=1e3,e=n*60,t=e*60,i=t*24,r=i*365.25;dw=function(u,h){h=h||{};var f=typeof u;if(f==="string"&&u.length>0)return s(u);if(f==="number"&&isNaN(u)===!1)return h.long?a(u):o(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))};function s(u){if(u=String(u),!(u.length>100)){var h=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(u);if(h){var f=parseFloat(h[1]),g=(h[2]||"ms").toLowerCase();switch(g){case"years":case"year":case"yrs":case"yr":case"y":return f*r;case"days":case"day":case"d":return f*i;case"hours":case"hour":case"hrs":case"hr":case"h":return f*t;case"minutes":case"minute":case"mins":case"min":case"m":return f*e;case"seconds":case"second":case"secs":case"sec":case"s":return f*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return f;default:return}}}}function o(u){return u>=i?Math.round(u/i)+"d":u>=t?Math.round(u/t)+"h":u>=e?Math.round(u/e)+"m":u>=n?Math.round(u/n)+"s":u+"ms"}function a(u){return l(u,i,"day")||l(u,t,"hour")||l(u,e,"minute")||l(u,n,"second")||u+" ms"}function l(u,h,f){if(!(u<h))return u<h*1.5?Math.floor(u/h)+" "+f:Math.ceil(u/h)+" "+f+"s"}return dw}var WT;function G8(){return WT||(WT=1,(function(n,e){e=n.exports=r.debug=r.default=r,e.coerce=l,e.disable=o,e.enable=s,e.enabled=a,e.humanize=V8(),e.names=[],e.skips=[],e.formatters={};var t;function i(u){var h=0,f;for(f in u)h=(h<<5)-h+u.charCodeAt(f),h|=0;return e.colors[Math.abs(h)%e.colors.length]}function r(u){function h(){if(h.enabled){var f=h,g=+new Date,v=g-(t||g);f.diff=v,f.prev=t,f.curr=g,t=g;for(var x=new Array(arguments.length),S=0;S<x.length;S++)x[S]=arguments[S];x[0]=e.coerce(x[0]),typeof x[0]!="string"&&x.unshift("%O");var w=0;x[0]=x[0].replace(/%([a-zA-Z%])/g,function(b,M){if(b==="%%")return b;w++;var T=e.formatters[M];if(typeof T=="function"){var L=x[w];b=T.call(f,L),x.splice(w,1),w--}return b}),e.formatArgs.call(f,x);var _=h.log||e.log||console.log.bind(console);_.apply(f,x)}}return h.namespace=u,h.enabled=e.enabled(u),h.useColors=e.useColors(),h.color=i(u),typeof e.init=="function"&&e.init(h),h}function s(u){e.save(u),e.names=[],e.skips=[];for(var h=(typeof u=="string"?u:"").split(/[\s,]+/),f=h.length,g=0;g<f;g++)h[g]&&(u=h[g].replace(/\*/g,".*?"),u[0]==="-"?e.skips.push(new RegExp("^"+u.substr(1)+"$")):e.names.push(new RegExp("^"+u+"$")))}function o(){e.enable("")}function a(u){var h,f;for(h=0,f=e.skips.length;h<f;h++)if(e.skips[h].test(u))return!1;for(h=0,f=e.names.length;h<f;h++)if(e.names[h].test(u))return!0;return!1}function l(u){return u instanceof Error?u.stack||u.message:u}})(Rv,Rv.exports)),Rv.exports}var $T;function j8(){return $T||($T=1,(function(n,e){var t={};e=n.exports=G8(),e.log=s,e.formatArgs=r,e.save=o,e.load=a,e.useColors=i,e.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:l(),e.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function i(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}e.formatters.j=function(u){try{return JSON.stringify(u)}catch(h){return"[UnexpectedJSONParseError]: "+h.message}};function r(u){var h=this.useColors;if(u[0]=(h?"%c":"")+this.namespace+(h?" %c":" ")+u[0]+(h?"%c ":" ")+"+"+e.humanize(this.diff),!!h){var f="color: "+this.color;u.splice(1,0,f,"color: inherit");var g=0,v=0;u[0].replace(/%[a-zA-Z%]/g,function(x){x!=="%%"&&(g++,x==="%c"&&(v=g))}),u.splice(v,0,f)}}function s(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function o(u){try{u==null?e.storage.removeItem("debug"):e.storage.debug=u}catch{}}function a(){var u;try{u=e.storage.debug}catch{}return!u&&typeof process<"u"&&"env"in process&&(u=t.DEBUG),u}e.enable(a());function l(){try{return window.localStorage}catch{}}})(Tv,Tv.exports)),Tv.exports}var hw,XT;function W8(){if(XT)return hw;XT=1;var n=j8()("jsonp");hw=i;var e=0;function t(){}function i(r,s,o){typeof s=="function"&&(o=s,s={}),s||(s={});var a=s.prefix||"__jp",l=s.name||a+e++,u=s.param||"callback",h=s.timeout!=null?s.timeout:6e4,f=encodeURIComponent,g=document.getElementsByTagName("script")[0]||document.head,v,x;h&&(x=setTimeout(function(){S(),o&&o(new Error("Timeout"))},h));function S(){v.parentNode&&v.parentNode.removeChild(v),window[l]=t,x&&clearTimeout(x)}function w(){window[l]&&S()}return window[l]=function(_){n("jsonp got",_),S(),o&&o(null,_)},r+=(~r.indexOf("?")?"&":"?")+u+"="+f(l),r=r.replace("?&","?"),n('jsonp req "%s"',r),v=document.createElement("script"),v.src=r,g.parentNode.insertBefore(v,g),w}return hw}var $8=W8();const sh=lc($8);var X8=Object.defineProperty,Y8=Object.defineProperties,K8=Object.getOwnPropertyDescriptors,sx=Object.getOwnPropertySymbols,nB=Object.prototype.hasOwnProperty,iB=Object.prototype.propertyIsEnumerable,YT=(n,e,t)=>e in n?X8(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ro=(n,e)=>{for(var t in e||(e={}))nB.call(e,t)&&YT(n,t,e[t]);if(sx)for(var t of sx(e))iB.call(e,t)&&YT(n,t,e[t]);return n},ab=(n,e)=>Y8(n,K8(e)),lb=(n,e)=>{var t={};for(var i in n)nB.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&sx)for(var i of sx(n))e.indexOf(i)<0&&iB.call(n,i)&&(t[i]=n[i]);return t};class J8 extends Error{constructor(e){super(e),this.name="AssertionError"}}function wi(n,e){if(!n)throw new J8(e)}function ai(n){const e=Object.entries(n).filter(([,t])=>t!=null).map(([t,i])=>`${encodeURIComponent(t)}=${encodeURIComponent(String(i))}`);return e.length>0?`?${e.join("&")}`:""}const q8=n=>!!n&&(typeof n=="object"||typeof n=="function")&&"then"in n&&typeof n.then=="function",Z8=(n,e)=>({left:window.outerWidth/2+(window.screenX||window.screenLeft||0)-n/2,top:window.outerHeight/2+(window.screenY||window.screenTop||0)-e/2}),Q8=(n,e)=>({top:(window.screen.height-e)/2,left:(window.screen.width-n)/2});function eH(n,e,t){var i=e,{height:r,width:s}=i,o=lb(i,["height","width"]);const a=Ro({height:r,width:s,location:"no",toolbar:"no",status:"no",directories:"no",menubar:"no",scrollbars:"yes",resizable:"no",centerscreen:"yes",chrome:"yes"},o),l=window.open(n,"",Object.keys(a).map(u=>`${u}=${a[u]}`).join(", "));if(t){const u=window.setInterval(()=>{try{(l===null||l.closed)&&(window.clearInterval(u),t(l))}catch(h){console.error(h)}},1e3)}return l}function tH(n){var e=n,{beforeOnClick:t,children:i,className:r,disabled:s,disabledStyle:o={opacity:.6},forwardedRef:a,htmlTitle:l,networkLink:u,networkName:h,onClick:f,onShareWindowClose:g,openShareDialogOnClick:v=!0,opts:x,resetButtonStyle:S=!0,style:w,title:_,url:b,windowHeight:M=400,windowPosition:T="windowCenter",windowWidth:L=550}=e,D=lb(e,["beforeOnClick","children","className","disabled","disabledStyle","forwardedRef","htmlTitle","networkLink","networkName","onClick","onShareWindowClose","openShareDialogOnClick","opts","resetButtonStyle","style","title","url","windowHeight","windowPosition","windowWidth"]);const U=async N=>{const V=u(b,x);if(!s){if(N.preventDefault(),t){const Z=t();q8(Z)&&await Z}if(v){const Z=Ro({height:M,width:L},T==="windowCenter"?Z8(L,M):Q8(L,M));eH(V,Z,g)}f&&f(N,V)}},F=tB("react-share__ShareButton",{"react-share__ShareButton--disabled":!!s,disabled:!!s},r),k=Ro(Ro(S?{backgroundColor:"transparent",border:"none",padding:0,font:"inherit",color:"inherit",cursor:"pointer"}:{},w),s&&o);return P.jsx("button",ab(Ro({},D),{className:F,onClick:U,ref:a,style:k,title:l,children:i}))}function Ri(n,e,t,i){const r=(s,o)=>{const a=t(s),l=Ro({},s);return Object.keys(a).forEach(h=>{delete l[h]}),P.jsx(tH,ab(Ro(Ro({},i),l),{forwardedRef:o,networkName:n,networkLink:e,opts:a}))};return r.displayName=`ShareButton-${n}`,I.forwardRef(r)}function nH(n,{title:e,separator:t}){return wi(n,"bluesky.url"),"https://bsky.app/intent/compose"+ai({text:e?e+t+n:n})}Ri("bluesky",nH,n=>({title:n.title,separator:n.separator||" "}),{windowWidth:660,windowHeight:460,windowPosition:"windowCenter"});function iH(n,{subject:e,body:t,separator:i}){return"mailto:"+ai({subject:e,body:t?t+i+n:n})}Ri("email",iH,n=>({subject:n.subject,body:n.body,separator:n.separator||" "}),{openShareDialogOnClick:!1,onClick:(n,e)=>{window.location.href=e}});function rH(n,{appId:e,redirectUri:t,to:i}){return"https://www.facebook.com/dialog/send"+ai({link:n,redirect_uri:t||n,app_id:e,to:i})}Ri("facebookmessenger",rH,n=>({appId:n.appId,redirectUri:n.redirectUri,to:n.to}),{windowWidth:1e3,windowHeight:820});function sH(n,{hashtag:e}){return wi(n,"facebook.url"),"https://www.facebook.com/sharer/sharer.php"+ai({u:n,hashtag:e})}const oH=Ri("facebook",sH,n=>({hashtag:n.hashtag}),{windowWidth:550,windowHeight:400});function aH(){const n=I.useRef(!1);return I.useEffect(()=>(n.current=!0,()=>{n.current=!1}),[]),I.useCallback(()=>n.current,[])}function lH(n){var e=n,{children:t=g=>g,className:i,getCount:r,url:s}=e,o=lb(e,["children","className","getCount","url"]);const a=aH(),[l,u]=I.useState(void 0),[h,f]=I.useState(!1);return I.useEffect(()=>{f(!0),r(s,g=>{a()&&(u(g),f(!1))})},[s]),P.jsx("span",ab(Ro({className:tB("react-share__ShareCount",i)},o),{children:!h&&l!==void 0&&t(l)}))}function oh(n){const e=t=>P.jsx(lH,Ro({getCount:n},t));return e.displayName=`ShareCount(${n.name})`,e}function cH(n,e){const t=`https://graph.facebook.com/?id=${n}&fields=og_object{engagement}`;sh(t,(i,r)=>{e(!i&&r&&r.og_object&&r.og_object.engagement?r.og_object.engagement.count:void 0)})}oh(cH);function uH(n,{title:e}){return wi(n,"hatena.url"),`http://b.hatena.ne.jp/add?mode=confirm&url=${n}&title=${e}`}Ri("hatena",uH,n=>({title:n.title}),{windowWidth:660,windowHeight:460,windowPosition:"windowCenter"});function dH(n,e){sh("https://bookmark.hatenaapis.com/count/entry"+ai({url:n}),(i,r)=>{e(r??void 0)})}oh(dH);function hH(n,{title:e,description:t}){return wi(n,"instapaper.url"),"http://www.instapaper.com/hello2"+ai({url:n,title:e,description:t})}Ri("instapaper",hH,n=>({title:n.title,description:n.description}),{windowWidth:500,windowHeight:500,windowPosition:"windowCenter"});function fH(n,{title:e}){return wi(n,"line.url"),"https://social-plugins.line.me/lineit/share"+ai({url:n,text:e})}Ri("line",fH,n=>({title:n.title}),{windowWidth:500,windowHeight:500});function pH(n,{title:e,summary:t,source:i}){return wi(n,"linkedin.url"),"https://linkedin.com/shareArticle"+ai({url:n,mini:"true",title:e,summary:t,source:i})}const mH=Ri("linkedin",pH,({title:n,summary:e,source:t})=>({title:n,summary:e,source:t}),{windowWidth:750,windowHeight:600});function gH(n,{title:e,description:t}){return wi(n,"livejournal.url"),"https://www.livejournal.com/update.bml"+ai({subject:e,event:t})}Ri("livejournal",gH,n=>({title:n.title,description:n.description}),{windowWidth:660,windowHeight:460});function vH(n,{title:e,description:t,imageUrl:i}){return wi(n,"mailru.url"),"https://connect.mail.ru/share"+ai({url:n,title:e,description:t,image_url:i})}Ri("mailru",vH,n=>({title:n.title,description:n.description,imageUrl:n.imageUrl}),{windowWidth:660,windowHeight:460});function yH(n,{title:e,description:t,image:i}){return wi(n,"ok.url"),"https://connect.ok.ru/offer"+ai({url:n,title:e,description:t,imageUrl:i})}Ri("ok",yH,n=>({title:n.title,description:n.description,image:n.image}),{windowWidth:588,windowHeight:480,windowPosition:"screenCenter"});function xH(n,e){window.OK||(window.OK={Share:{count:function(s,o){var a,l;(l=(a=window.OK.callbacks)[s])==null||l.call(a,o)}},callbacks:[]});const t="https://connect.ok.ru/dk",i=window.OK.callbacks.length;return window.ODKL={updateCount(r,s){var o,a;const l=r===""?0:parseInt(r.replace("react-share-",""),10);(a=(o=window.OK.callbacks)[l])==null||a.call(o,s===""?void 0:parseInt(s,10))}},window.OK.callbacks.push(e),sh(t+ai({"st.cmd":"extLike",uid:`react-share-${i}`,ref:n}))}oh(xH);function _H(n,{media:e,description:t,pinId:i}){return i?`https://pinterest.com/pin/${i}/repin/x/`:(wi(n,"pinterest.url"),wi(e,"pinterest.media"),"https://pinterest.com/pin/create/button/"+ai({url:n,media:e,description:t}))}Ri("pinterest",_H,n=>({media:n.media,description:n.description,pinId:n.pinId}),{windowWidth:1e3,windowHeight:730});function wH(n,e){sh("https://api.pinterest.com/v1/urls/count.json"+ai({url:n}),(i,r)=>{e(r?r.count:void 0)})}oh(wH);function SH(n,{title:e}){return wi(n,"pocket.url"),"https://getpocket.com/save"+ai({url:n,title:e})}Ri("pocket",SH,n=>({title:n.title}),{windowWidth:500,windowHeight:500});function EH(n,{title:e}){return wi(n,"reddit.url"),"https://www.reddit.com/web/submit"+ai({url:n,title:e})}Ri("reddit",EH,n=>({title:n.title}),{windowWidth:660,windowHeight:460,windowPosition:"windowCenter"});function AH(n,{title:e}){return wi(n,"gab.url"),"https://gab.com/compose"+ai({url:n,text:e})}Ri("gab",AH,n=>({title:n.title}),{windowWidth:660,windowHeight:640,windowPosition:"windowCenter"});function bH(n,e){const t=`https://www.reddit.com/api/info.json?limit=1&url=${n}`;sh(t,{param:"jsonp"},(i,r)=>{e(!i&&r&&r.data&&r.data.children.length>0&&r.data.children[0].data.score?r.data.children[0].data.score:void 0)})}oh(bH);function MH(n,{title:e}){return wi(n,"telegram.url"),"https://telegram.me/share/url"+ai({url:n,text:e})}Ri("telegram",MH,n=>({title:n.title}),{windowWidth:550,windowHeight:400});function CH(n,{title:e}){return wi(n,"threads.url"),"https://threads.net/intent/post"+ai({url:n,text:e})}Ri("threads",CH,n=>({title:n.title}),{windowWidth:550,windowHeight:600});function TH(n,{title:e,caption:t,tags:i,posttype:r}){return wi(n,"tumblr.url"),"https://www.tumblr.com/widgets/share/tool"+ai({canonicalUrl:n,title:e,caption:t,tags:i,posttype:r})}Ri("tumblr",TH,n=>({title:n.title,tags:(n.tags||[]).join(","),caption:n.caption,posttype:n.posttype||"link"}),{windowWidth:660,windowHeight:460});function RH(n,e){return sh("https://api.tumblr.com/v2/share/stats"+ai({url:n}),(i,r)=>{e(!i&&r&&r.response?r.response.note_count:void 0)})}oh(RH);function PH(n,{title:e,via:t,hashtags:i=[],related:r=[]}){return wi(n,"twitter.url"),wi(Array.isArray(i),"twitter.hashtags is not an array"),wi(Array.isArray(r),"twitter.related is not an array"),"https://twitter.com/intent/tweet"+ai({url:n,text:e,via:t,hashtags:i.length>0?i.join(","):void 0,related:r.length>0?r.join(","):void 0})}const IH=Ri("twitter",PH,n=>({hashtags:n.hashtags,title:n.title,via:n.via,related:n.related}),{windowWidth:550,windowHeight:400});function DH(n,{title:e,separator:t}){return wi(n,"viber.url"),"viber://forward"+ai({text:e?e+t+n:n})}Ri("viber",DH,n=>({title:n.title,separator:n.separator||" "}),{windowWidth:660,windowHeight:460});function BH(n,{title:e,image:t,noParse:i,noVkLinks:r}){return wi(n,"vk.url"),"https://vk.com/share.php"+ai({url:n,title:e,image:t,noparse:i?1:0,no_vk_links:r?1:0})}Ri("vk",BH,n=>({title:n.title,image:n.image,noParse:n.noParse,noVkLinks:n.noVkLinks}),{windowWidth:660,windowHeight:460});function LH(n,e){window.VK||(window.VK={}),window.VK.Share={count:(r,s)=>{var o,a;return(a=(o=window.VK.callbacks)==null?void 0:o[r])==null?void 0:a.call(o,s)}},window.VK.callbacks=[];const t="https://vk.com/share.php",i=window.VK.callbacks.length;return window.VK.callbacks.push(e),sh(t+ai({act:"count",index:i,url:n}))}oh(LH);function OH(n,{title:e,image:t}){return wi(n,"weibo.url"),"http://service.weibo.com/share/share.php"+ai({url:n,title:e,pic:t})}Ri("weibo",OH,n=>({title:n.title,image:n.image}),{windowWidth:660,windowHeight:550,windowPosition:"screenCenter"});function NH(){return/(android|iphone|ipad|mobile)/i.test(navigator.userAgent)}function FH(n,{title:e,separator:t}){return wi(n,"whatsapp.url"),"https://"+(NH()?"api":"web")+".whatsapp.com/send"+ai({text:e?e+t+n:n})}Ri("whatsapp",FH,n=>({title:n.title,separator:n.separator||" "}),{windowWidth:550,windowHeight:400});function kH(n,{quote:e,hashtag:t}){return wi(n,"workplace.url"),"https://work.facebook.com/sharer.php"+ai({u:n,quote:e,hashtag:t})}Ri("workplace",kH,n=>({quote:n.quote,hashtag:n.hashtag}),{windowWidth:550,windowHeight:400});function UH(){const{id:n}=Vk(),e={title:"Modern Villa with Pool",price:{usd:85e4,eth:425},roi:"7.2%",metrics:{totalInvestors:142,funded:"89%",minInvestment:"$10",appreciation:"4.5%",rentalYield:"5.8%",totalReturn:"10.3%"},description:"This stunning modern villa offers luxurious living spaces with high-end finishes throughout. The property has been tokenized for fractional ownership, allowing investors to participate in this premium real estate opportunity with as little as $10.",features:["Swimming Pool","Smart Home System","Gourmet Kitchen","Home Theater","Wine Cellar","Outdoor Kitchen","Fire Pit","Three-Car Garage"],tokenDetails:{totalTokens:85e3,availableTokens:9350,tokenPrice:"$10",tokenSymbol:"VILLA425",contractAddress:"0x1234...5678"},financials:{grossRent:"$8,500/month",netRent:"$7,225/month",expenses:{management:"8%",maintenance:"5%",insurance:"2%",property_tax:"1.2%"}},yearBuilt:2020,parkingSpaces:3,lotSize:"0.5 acres",images:["https://images.unsplash.com/photo-1613490493576-7fde63acd811?w=800&q=80","https://images.unsplash.com/photo-1512917774080-9991f1c4c750?w=800&q=80","https://images.unsplash.com/photo-1613490493576-7fde63acd811?w=800&q=80"],agent:{name:"John Doe",phone:"+1 (555) 123-4567",email:"john@realestate.com",image:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=400&q=80"}},t=window.location.href;return P.jsxs("div",{className:"min-h-screen bg-[var(--color-bg)]",children:[P.jsx("div",{className:"bg-[var(--color-card)] shadow border-b and border-b border-[var(--color-border)]",children:P.jsx("div",{className:"container py-4",children:P.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[P.jsx(lr,{to:"/",className:"text-[var(--color-secondary-300)] hover:text-[var(--color-primary-600)] transition-colors",children:"Home"}),P.jsx("span",{className:"text-[var(--color-secondary-400)]",children:"/"}),P.jsx(lr,{to:"/properties",className:"text-[var(--color-secondary-300)] hover:text-[var(--color-primary-600)] transition-colors",children:"Properties"}),P.jsx("span",{className:"text-[var(--color-secondary-400)]",children:"/"}),P.jsx("span",{className:"text-[var(--color-primary-600)] font-medium",children:e.title})]})})}),P.jsx("div",{className:"container py-8",children:P.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[P.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[P.jsxs(Hn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-4",children:[P.jsx("div",{className:"h-96 rounded-lg overflow-hidden shadow-lg border border-[var(--color-border)]",children:P.jsx("img",{src:e.images[0],alt:e.title,className:"w-full h-full object-cover"})}),P.jsx("div",{className:"grid grid-cols-3 gap-4",children:e.images.slice(1).map((i,r)=>P.jsx("div",{className:"h-32 rounded-lg overflow-hidden shadow border border-[var(--color-border)] group",children:P.jsx("img",{src:i,alt:`${e.title} - ${r+1}`,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"})},r))})]}),P.jsxs(Hn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-[var(--color-card)] rounded-lg shadow-md p-6 max-sm:px-3 border border-[var(--color-border)]",children:[P.jsx("h2",{className:"text-2xl font-bold mb-4 text-[var(--color-text)]",children:"Property Details"}),P.jsx("p",{className:"text-[var(--color-secondary-300)] mb-6 leading-relaxed",children:e.description}),P.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[P.jsxs("div",{className:"flex items-center space-x-2 text-[var(--color-text)]",children:[P.jsx(DU,{className:"text-[var(--color-primary-600)]"}),P.jsxs("span",{children:[e.parkingSpaces," Parking"]})]}),P.jsxs("div",{className:"flex items-center space-x-2 text-[var(--color-text)]",children:[P.jsx(NU,{className:"text-[var(--color-primary-600)]"}),P.jsx("span",{children:e.lotSize})]}),P.jsxs("div",{className:"flex items-center space-x-2 text-[var(--color-text)]",children:[P.jsx(m3,{className:"text-[var(--color-primary-600)]"}),P.jsxs("span",{children:["Built ",e.yearBuilt]})]}),P.jsxs("div",{className:"flex items-center space-x-2 text-[var(--color-text)]",children:[P.jsx(y3,{className:"text-[var(--color-primary-600)]"}),P.jsxs("span",{children:[e.metrics.totalInvestors," Investors"]})]})]}),P.jsx("h3",{className:"text-xl font-semibold mb-4 text-[var(--color-text)]",children:"Features"}),P.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mb-6",children:e.features.map((i,r)=>P.jsxs("div",{className:"flex items-center space-x-2 text-[var(--color-text)]",children:[P.jsx(TU,{className:"text-[var(--color-primary-600)]"}),P.jsx("span",{children:i})]},r))}),P.jsx("h3",{className:"text-xl font-semibold mb-4 text-[var(--color-text)]",children:"Token Information"}),P.jsx("div",{className:"bg-[var(--color-secondary-50)] rounded-lg p-6 max-sm:px-3 mb-6 border border-[var(--color-border)]",children:P.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[P.jsxs("div",{children:[P.jsx("p",{className:"text-sm text-[var(--color-secondary-300)]",children:"Token Symbol"}),P.jsx("p",{className:"font-semibold text-[var(--color-text)]",children:e.tokenDetails.tokenSymbol})]}),P.jsxs("div",{children:[P.jsx("p",{className:"text-sm text-[var(--color-secondary-300)]",children:"Token Price"}),P.jsx("p",{className:"font-semibold text-[var(--color-text)]",children:e.tokenDetails.tokenPrice})]}),P.jsxs("div",{children:[P.jsx("p",{className:"text-sm text-[var(--color-secondary-300)]",children:"Available Tokens"}),P.jsx("p",{className:"font-semibold text-[var(--color-text)]",children:e.tokenDetails.availableTokens.toLocaleString()})]}),P.jsxs("div",{children:[P.jsx("p",{className:"text-sm text-[var(--color-secondary-300)]",children:"Total Supply"}),P.jsx("p",{className:"font-semibold text-[var(--color-text)]",children:e.tokenDetails.totalTokens.toLocaleString()})]}),P.jsxs("div",{className:"col-span-2",children:[P.jsx("p",{className:"text-sm text-[var(--color-secondary-300)]",children:"Smart Contract"}),P.jsx("p",{className:"font-mono text-xs text-[var(--color-text)] break-all",children:e.tokenDetails.contractAddress})]})]})}),P.jsx("h3",{className:"text-xl font-semibold mb-4 text-[var(--color-text)]",children:"Financial Overview"}),P.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[P.jsxs("div",{className:"bg-[var(--color-secondary-50)] rounded-lg p-6 max-sm:px-3 border border-[var(--color-border)]",children:[P.jsx("h4",{className:"font-semibold mb-4 text-[var(--color-text)]",children:"Rental Income"}),P.jsxs("div",{className:"space-y-2",children:[P.jsxs("div",{className:"flex justify-between",children:[P.jsx("span",{className:"text-[var(--color-secondary-300)]",children:"Gross Rent"}),P.jsx("span",{className:"font-medium text-[var(--color-text)]",children:e.financials.grossRent})]}),P.jsxs("div",{className:"flex justify-between",children:[P.jsx("span",{className:"text-[var(--color-secondary-300)]",children:"Net Rent"}),P.jsx("span",{className:"font-medium text-[var(--color-text)]",children:e.financials.netRent})]})]})]}),P.jsxs("div",{className:"bg-[var(--color-secondary-50)] rounded-lg p-6 max-sm:px-3 border border-[var(--color-border)]",children:[P.jsx("h4",{className:"font-semibold mb-4 text-[var(--color-text)]",children:"Expenses"}),P.jsx("div",{className:"space-y-2",children:Object.entries(e.financials.expenses).map(([i,r])=>P.jsxs("div",{className:"flex justify-between",children:[P.jsx("span",{className:"text-[var(--color-secondary-300)]",children:i.replace("_"," ").replace(/\b\w/g,s=>s.toUpperCase())}),P.jsx("span",{className:"font-medium text-[var(--color-text)]",children:r})]},i))})]})]})]})]}),P.jsxs(Hn.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.2},className:"space-y-6",children:[P.jsxs("div",{className:"bg-[var(--color-card)] rounded-lg shadow-md p-6 max-sm:px-3 border border-[var(--color-border)]",children:[P.jsxs("div",{className:"flex justify-between items-center mb-4",children:[P.jsxs("div",{children:[P.jsx("p",{className:"text-sm text-[var(--color-secondary-500)]",children:"Investment Price"}),P.jsxs("div",{className:"flex items-center",children:[P.jsx(AA,{className:"text-[var(--color-primary-600)]"}),P.jsxs("span",{className:"text-2xl font-bold text-[var(--color-text)]",children:["$",e.price.usd.toLocaleString()]})]}),P.jsxs("div",{className:"flex items-center text-[var(--color-primary-600)]",children:[P.jsx(ob,{className:"mr-1"}),P.jsxs("span",{children:[e.price.eth," ETH"]})]})]}),P.jsxs("div",{className:"text-right",children:[P.jsx("p",{className:"text-sm text-[var(--color-secondary-500)]",children:"Annual ROI"}),P.jsxs("div",{className:"flex items-center justify-end text-green-600",children:[P.jsx(v3,{className:"mr-1"}),P.jsx("span",{className:"text-2xl font-bold",children:e.roi})]})]})]}),P.jsxs("div",{className:"space-y-3 mb-6",children:[P.jsxs("div",{className:"flex justify-between text-[var(--color-text)]",children:[P.jsx("span",{className:"text-[var(--color-secondary-300)]",children:"Rental Yield"}),P.jsx("span",{className:"font-medium",children:e.metrics.rentalYield})]}),P.jsxs("div",{className:"flex justify-between text-[var(--color-text)]",children:[P.jsx("span",{className:"text-[var(--color-secondary-300)]",children:"Appreciation"}),P.jsx("span",{className:"font-medium",children:e.metrics.appreciation})]}),P.jsxs("div",{className:"flex justify-between text-[var(--color-text)]",children:[P.jsx("span",{className:"text-[var(--color-secondary-300)]",children:"Total Return"}),P.jsx("span",{className:"font-medium text-green-600",children:e.metrics.totalReturn})]})]}),P.jsxs("div",{className:"mb-6",children:[P.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[P.jsx("span",{className:"text-[var(--color-secondary-300)]",children:"Funding Progress"}),P.jsx("span",{className:"font-medium text-[var(--color-text)]",children:e.metrics.funded})]}),P.jsx("div",{className:"w-full bg-[var(--color-secondary-100)] rounded-full h-2",children:P.jsx("div",{className:"bg-[var(--color-primary-600)] h-2 rounded-full transition-all duration-700",style:{width:e.metrics.funded}})}),P.jsxs("p",{className:"text-sm text-[var(--color-secondary-500)] mt-1",children:["Min Investment: ",e.metrics.minInvestment]})]}),P.jsxs(lr,{to:"/property-3d",className:"btn w-full mb-4 flex items-center justify-center text-[var(--color-bg)] hover:opacity-90 transition-opacity",children:[P.jsx(IU,{className:"mr-2"}),"View 3D version"]}),P.jsxs("button",{className:"btn w-full mb-4 flex items-center justify-center text-[var(--color-bg)] hover:opacity-90 transition-opacity",children:[P.jsx(rx,{className:"mr-2"}),"Connect Wallet to Invest"]}),P.jsxs("div",{className:"flex items-center justify-center space-x-4 pt-4 border-t border-[var(--color-border)]",children:[P.jsx(oH,{url:t,children:P.jsx(ZD,{className:"text-2xl text-blue-600 hover:opacity-80 transition-opacity"})}),P.jsx(IH,{url:t,children:P.jsx(eB,{className:"text-2xl text-sky-500 hover:opacity-80 transition-opacity"})}),P.jsx(mH,{url:t,children:P.jsx(QD,{className:"text-2xl text-blue-700 hover:opacity-80 transition-opacity"})})]})]}),P.jsxs("div",{className:"bg-[var(--color-card)] rounded-lg shadow-md p-6 max-sm:px-3 border border-[var(--color-border)]",children:[P.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[P.jsx("img",{src:e.agent.image,alt:e.agent.name,className:"w-16 h-16 rounded-full object-cover ring-2 ring-[var(--color-primary-100)]"}),P.jsxs("div",{children:[P.jsx("h3",{className:"font-semibold text-[var(--color-text)]",children:e.agent.name}),P.jsx("p",{className:"text-sm text-[var(--color-secondary-300)]",children:"Investment Advisor"})]})]}),P.jsxs("div",{className:"space-y-2 text-[var(--color-text)]",children:[P.jsxs("p",{className:"text-sm",children:[P.jsx("span",{className:"font-medium",children:"Phone:"})," ",e.agent.phone]}),P.jsxs("p",{className:"text-sm",children:[P.jsx("span",{className:"font-medium",children:"Email:"})," ",e.agent.email]})]}),P.jsx("button",{className:"btn-secondary w-full mt-4 text-[var(--color-text)] hover:opacity-90 transition-opacity",children:"Schedule Consultation"})]})]})]})})]})}/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Ep="176",Cd={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Td={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},rB=0,bE=1,sB=2,zH=3,oB=0,E_=1,mg=2,ga=3,Ja=0,rs=1,co=2,Xa=0,Wd=1,ME=2,CE=3,TE=4,aB=5,eu=100,lB=101,cB=102,uB=103,dB=104,hB=200,fB=201,pB=202,mB=203,ox=204,ax=205,gB=206,vB=207,yB=208,xB=209,_B=210,wB=211,SB=212,EB=213,AB=214,lx=0,cx=1,ux=2,Zd=3,dx=4,hx=5,fx=6,px=7,s0=0,bB=1,MB=2,Ya=0,CB=1,TB=2,RB=3,cb=4,PB=5,IB=6,DB=7,RE="attached",BB="detached",uu=300,qa=301,du=302,rp=303,Fg=304,Ap=306,hu=1e3,Zi=1001,sp=1002,ur=1003,A_=1004,HH=1004,Od=1005,VH=1005,Gn=1006,Jf=1007,GH=1007,Bo=1008,PE=1008,Ts=1009,b_=1010,M_=1011,op=1012,o0=1013,Za=1014,Ci=1015,cr=1016,C_=1017,T_=1018,ap=1020,ub=35902,db=1021,hb=1022,Qi=1023,lp=1026,cp=1027,a0=1028,l0=1029,fb=1030,R_=1031,jH=1032,P_=1033,gg=33776,vg=33777,yg=33778,xg=33779,mx=35840,gx=35841,vx=35842,yx=35843,xx=36196,_x=37492,wx=37496,Sx=37808,Ex=37809,Ax=37810,bx=37811,Mx=37812,Cx=37813,Tx=37814,Rx=37815,Px=37816,Ix=37817,Dx=37818,Bx=37819,Lx=37820,Ox=37821,_g=36492,Nx=36494,Fx=36495,pb=36283,kx=36284,Ux=36285,zx=36286,LB=2200,OB=2201,NB=2202,up=2300,dp=2301,Gy=2302,Nd=2400,Fd=2401,kg=2402,I_=2500,mb=2501,FB=0,gb=1,Hx=2,kB=3200,UB=3201,WH=3202,$H=3203,_u=0,zB=1,Xl="",As="srgb",Qa="srgb-linear",Ug="linear",Qn="srgb",XH=0,Rd=7680,YH=7681,KH=7682,JH=7683,qH=34055,ZH=34056,QH=5386,e9=512,t9=513,n9=514,i9=515,r9=516,s9=517,o9=518,IE=519,HB=512,VB=513,GB=514,vb=515,jB=516,WB=517,$B=518,XB=519,zg=35044,a9=35048,l9=35040,c9=35045,u9=35049,d9=35041,h9=35046,f9=35050,p9=35042,m9="100",DE="300 es",Lo=2e3,Hg=2001,g9={COMPUTE:"compute",RENDER:"render"},v9={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},y9={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FLAT_FIRST:"flat first",FLAT_EITHER:"flat either"};let nl=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){const i=this._listeners;return i===void 0?!1:i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){const i=this._listeners;if(i===void 0)return;const r=i[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const i=t[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}};const Qr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let KT=1234567;const $d=Math.PI/180,hp=180/Math.PI;function uo(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Qr[n&255]+Qr[n>>8&255]+Qr[n>>16&255]+Qr[n>>24&255]+"-"+Qr[e&255]+Qr[e>>8&255]+"-"+Qr[e>>16&15|64]+Qr[e>>24&255]+"-"+Qr[t&63|128]+Qr[t>>8&255]+"-"+Qr[t>>16&255]+Qr[t>>24&255]+Qr[i&255]+Qr[i>>8&255]+Qr[i>>16&255]+Qr[i>>24&255]).toLowerCase()}function vn(n,e,t){return Math.max(e,Math.min(t,n))}function yb(n,e){return(n%e+e)%e}function x9(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function _9(n,e,t){return n!==e?(t-n)/(e-n):0}function wg(n,e,t){return(1-t)*n+t*e}function w9(n,e,t,i){return wg(n,e,1-Math.exp(-t*i))}function S9(n,e=1){return e-Math.abs(yb(n,e*2)-e)}function E9(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function A9(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function b9(n,e){return n+Math.floor(Math.random()*(e-n+1))}function M9(n,e){return n+Math.random()*(e-n)}function C9(n){return n*(.5-Math.random())}function T9(n){n!==void 0&&(KT=n);let e=KT+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function R9(n){return n*$d}function P9(n){return n*hp}function I9(n){return(n&n-1)===0&&n!==0}function D9(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function B9(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function L9(n,e,t,i,r){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),u=s((e+i)/2),h=o((e+i)/2),f=s((e-i)/2),g=o((e-i)/2),v=s((i-e)/2),x=o((i-e)/2);switch(r){case"XYX":n.set(a*h,l*f,l*g,a*u);break;case"YZY":n.set(l*g,a*h,l*f,a*u);break;case"ZXZ":n.set(l*f,l*g,a*h,a*u);break;case"XZX":n.set(a*h,l*x,l*v,a*u);break;case"YXY":n.set(l*v,a*h,l*x,a*u);break;case"ZYZ":n.set(l*x,l*v,a*h,a*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function bs(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function An(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const Xd={DEG2RAD:$d,RAD2DEG:hp,generateUUID:uo,clamp:vn,euclideanModulo:yb,mapLinear:x9,inverseLerp:_9,lerp:wg,damp:w9,pingpong:S9,smoothstep:E9,smootherstep:A9,randInt:b9,randFloat:M9,randFloatSpread:C9,seededRandom:T9,degToRad:R9,radToDeg:P9,isPowerOfTwo:I9,ceilPowerOfTwo:D9,floorPowerOfTwo:B9,setQuaternionFromProperEuler:L9,normalize:An,denormalize:bs};class Xe{constructor(e=0,t=0){Xe.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=vn(this.x,e.x,t.x),this.y=vn(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=vn(this.x,e,t),this.y=vn(this.y,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(vn(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(vn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class wn{constructor(e,t,i,r,s,o,a,l,u){wn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,l,u)}set(e,t,i,r,s,o,a,l,u){const h=this.elements;return h[0]=e,h[1]=r,h[2]=a,h[3]=t,h[4]=s,h[5]=l,h[6]=i,h[7]=o,h[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],l=i[6],u=i[1],h=i[4],f=i[7],g=i[2],v=i[5],x=i[8],S=r[0],w=r[3],_=r[6],b=r[1],M=r[4],T=r[7],L=r[2],D=r[5],U=r[8];return s[0]=o*S+a*b+l*L,s[3]=o*w+a*M+l*D,s[6]=o*_+a*T+l*U,s[1]=u*S+h*b+f*L,s[4]=u*w+h*M+f*D,s[7]=u*_+h*T+f*U,s[2]=g*S+v*b+x*L,s[5]=g*w+v*M+x*D,s[8]=g*_+v*T+x*U,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],h=e[8];return t*o*h-t*a*u-i*s*h+i*a*l+r*s*u-r*o*l}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],h=e[8],f=h*o-a*u,g=a*l-h*s,v=u*s-o*l,x=t*f+i*g+r*v;if(x===0)return this.set(0,0,0,0,0,0,0,0,0);const S=1/x;return e[0]=f*S,e[1]=(r*u-h*i)*S,e[2]=(a*i-r*o)*S,e[3]=g*S,e[4]=(h*t-r*l)*S,e[5]=(r*s-a*t)*S,e[6]=v*S,e[7]=(i*l-u*t)*S,e[8]=(o*t-i*s)*S,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){const l=Math.cos(s),u=Math.sin(s);return this.set(i*l,i*u,-i*(l*o+u*a)+o+e,-r*u,r*l,-r*(-u*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(fw.makeScale(e,t)),this}rotate(e){return this.premultiply(fw.makeRotation(-e)),this}translate(e,t){return this.premultiply(fw.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const fw=new wn;function YB(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const O9={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Wf(n,e){return new O9[n](e)}function Vg(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function KB(){const n=Vg("canvas");return n.style.display="block",n}const JT={};function jy(n){n in JT||(JT[n]=!0,console.warn(n))}function N9(n,e,t){return new Promise(function(i,r){function s(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:i()}}setTimeout(s,t)})}function F9(n){const e=n.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function k9(n){const e=n.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const qT=new wn().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),ZT=new wn().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function U9(){const n={enabled:!0,workingColorSpace:Qa,spaces:{},convert:function(r,s,o){return this.enabled===!1||s===o||!s||!o||(this.spaces[s].transfer===Qn&&(r.r=Zl(r.r),r.g=Zl(r.g),r.b=Zl(r.b)),this.spaces[s].primaries!==this.spaces[o].primaries&&(r.applyMatrix3(this.spaces[s].toXYZ),r.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===Qn&&(r.r=qf(r.r),r.g=qf(r.g),r.b=qf(r.b))),r},fromWorkingColorSpace:function(r,s){return this.convert(r,this.workingColorSpace,s)},toWorkingColorSpace:function(r,s){return this.convert(r,s,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===Xl?Ug:this.spaces[r].transfer},getLuminanceCoefficients:function(r,s=this.workingColorSpace){return r.fromArray(this.spaces[s].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,s,o){return r.copy(this.spaces[s].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[Qa]:{primaries:e,whitePoint:i,transfer:Ug,toXYZ:qT,fromXYZ:ZT,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:As},outputColorSpaceConfig:{drawingBufferColorSpace:As}},[As]:{primaries:e,whitePoint:i,transfer:Qn,toXYZ:qT,fromXYZ:ZT,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:As}}}),n}const kn=U9();function Zl(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function qf(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let df;class JB{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let i;if(e instanceof HTMLCanvasElement)i=e;else{df===void 0&&(df=Vg("canvas")),df.width=e.width,df.height=e.height;const r=df.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),i=df}return i.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Vg("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=Zl(s[o]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Zl(t[i]/255)*255):t[i]=Zl(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let z9=0;class nu{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:z9++}),this.uuid=uo(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(pw(r[o].image)):s.push(pw(r[o]))}else s=pw(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function pw(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?JB.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let H9=0;class qn extends nl{constructor(e=qn.DEFAULT_IMAGE,t=qn.DEFAULT_MAPPING,i=Zi,r=Zi,s=Gn,o=Bo,a=Qi,l=Ts,u=qn.DEFAULT_ANISOTROPY,h=Xl){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:H9++}),this.uuid=uo(),this.name="",this.source=new nu(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=u,this.format=a,this.internalFormat=null,this.type=l,this.offset=new Xe(0,0),this.repeat=new Xe(1,1),this.center=new Xe(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new wn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=h,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isTextureArray=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isTextureArray=e.isTextureArray,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==uu)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case hu:e.x=e.x-Math.floor(e.x);break;case Zi:e.x=e.x<0?0:1;break;case sp:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case hu:e.y=e.y-Math.floor(e.y);break;case Zi:e.y=e.y<0?0:1;break;case sp:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}qn.DEFAULT_IMAGE=null;qn.DEFAULT_MAPPING=uu;qn.DEFAULT_ANISOTROPY=1;class Un{constructor(e=0,t=0,i=0,r=1){Un.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const l=e.elements,u=l[0],h=l[4],f=l[8],g=l[1],v=l[5],x=l[9],S=l[2],w=l[6],_=l[10];if(Math.abs(h-g)<.01&&Math.abs(f-S)<.01&&Math.abs(x-w)<.01){if(Math.abs(h+g)<.1&&Math.abs(f+S)<.1&&Math.abs(x+w)<.1&&Math.abs(u+v+_-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const M=(u+1)/2,T=(v+1)/2,L=(_+1)/2,D=(h+g)/4,U=(f+S)/4,F=(x+w)/4;return M>T&&M>L?M<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(M),r=D/i,s=U/i):T>L?T<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(T),i=D/r,s=F/r):L<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(L),i=U/s,r=F/s),this.set(i,r,s,t),this}let b=Math.sqrt((w-x)*(w-x)+(f-S)*(f-S)+(g-h)*(g-h));return Math.abs(b)<.001&&(b=1),this.x=(w-x)/b,this.y=(f-S)/b,this.z=(g-h)/b,this.w=Math.acos((u+v+_-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=vn(this.x,e.x,t.x),this.y=vn(this.y,e.y,t.y),this.z=vn(this.z,e.z,t.z),this.w=vn(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=vn(this.x,e,t),this.y=vn(this.y,e,t),this.z=vn(this.z,e,t),this.w=vn(this.w,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(vn(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class D_ extends nl{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=i.depth?i.depth:1,this.scissor=new Un(0,0,e,t),this.scissorTest=!1,this.viewport=new Un(0,0,e,t);const r={width:e,height:t,depth:this.depth};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Gn,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,multiview:!1},i);const s=new qn(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);s.flipY=!1,s.generateMipmaps=i.generateMipmaps,s.internalFormat=i.internalFormat,this.textures=[];const o=i.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0,this.textures[a].renderTarget=this;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples,this.multiview=i.multiview}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,i=e.textures.length;t<i;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const r=Object.assign({},e.textures[t].image);this.textures[t].source=new nu(r)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Rs extends D_{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class c0 extends qn{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=ur,this.minFilter=ur,this.wrapR=Zi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class V9 extends Rs{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new c0(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class B_ extends qn{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=ur,this.minFilter=ur,this.wrapR=Zi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class G9 extends Rs{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new B_(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class xr{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,o,a){let l=i[r+0],u=i[r+1],h=i[r+2],f=i[r+3];const g=s[o+0],v=s[o+1],x=s[o+2],S=s[o+3];if(a===0){e[t+0]=l,e[t+1]=u,e[t+2]=h,e[t+3]=f;return}if(a===1){e[t+0]=g,e[t+1]=v,e[t+2]=x,e[t+3]=S;return}if(f!==S||l!==g||u!==v||h!==x){let w=1-a;const _=l*g+u*v+h*x+f*S,b=_>=0?1:-1,M=1-_*_;if(M>Number.EPSILON){const L=Math.sqrt(M),D=Math.atan2(L,_*b);w=Math.sin(w*D)/L,a=Math.sin(a*D)/L}const T=a*b;if(l=l*w+g*T,u=u*w+v*T,h=h*w+x*T,f=f*w+S*T,w===1-a){const L=1/Math.sqrt(l*l+u*u+h*h+f*f);l*=L,u*=L,h*=L,f*=L}}e[t]=l,e[t+1]=u,e[t+2]=h,e[t+3]=f}static multiplyQuaternionsFlat(e,t,i,r,s,o){const a=i[r],l=i[r+1],u=i[r+2],h=i[r+3],f=s[o],g=s[o+1],v=s[o+2],x=s[o+3];return e[t]=a*x+h*f+l*v-u*g,e[t+1]=l*x+h*g+u*f-a*v,e[t+2]=u*x+h*v+a*g-l*f,e[t+3]=h*x-a*f-l*g-u*v,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,u=a(i/2),h=a(r/2),f=a(s/2),g=l(i/2),v=l(r/2),x=l(s/2);switch(o){case"XYZ":this._x=g*h*f+u*v*x,this._y=u*v*f-g*h*x,this._z=u*h*x+g*v*f,this._w=u*h*f-g*v*x;break;case"YXZ":this._x=g*h*f+u*v*x,this._y=u*v*f-g*h*x,this._z=u*h*x-g*v*f,this._w=u*h*f+g*v*x;break;case"ZXY":this._x=g*h*f-u*v*x,this._y=u*v*f+g*h*x,this._z=u*h*x+g*v*f,this._w=u*h*f-g*v*x;break;case"ZYX":this._x=g*h*f-u*v*x,this._y=u*v*f+g*h*x,this._z=u*h*x-g*v*f,this._w=u*h*f+g*v*x;break;case"YZX":this._x=g*h*f+u*v*x,this._y=u*v*f+g*h*x,this._z=u*h*x-g*v*f,this._w=u*h*f-g*v*x;break;case"XZY":this._x=g*h*f-u*v*x,this._y=u*v*f-g*h*x,this._z=u*h*x+g*v*f,this._w=u*h*f+g*v*x;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],l=t[9],u=t[2],h=t[6],f=t[10],g=i+a+f;if(g>0){const v=.5/Math.sqrt(g+1);this._w=.25/v,this._x=(h-l)*v,this._y=(s-u)*v,this._z=(o-r)*v}else if(i>a&&i>f){const v=2*Math.sqrt(1+i-a-f);this._w=(h-l)/v,this._x=.25*v,this._y=(r+o)/v,this._z=(s+u)/v}else if(a>f){const v=2*Math.sqrt(1+a-i-f);this._w=(s-u)/v,this._x=(r+o)/v,this._y=.25*v,this._z=(l+h)/v}else{const v=2*Math.sqrt(1+f-i-a);this._w=(o-r)/v,this._x=(s+u)/v,this._y=(l+h)/v,this._z=.25*v}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(vn(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,l=t._y,u=t._z,h=t._w;return this._x=i*h+o*a+r*u-s*l,this._y=r*h+o*l+s*a-i*u,this._z=s*h+o*u+i*l-r*a,this._w=o*h-i*a-r*l-s*u,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const v=1-t;return this._w=v*o+t*this._w,this._x=v*i+t*this._x,this._y=v*r+t*this._y,this._z=v*s+t*this._z,this.normalize(),this}const u=Math.sqrt(l),h=Math.atan2(u,a),f=Math.sin((1-t)*h)/u,g=Math.sin(t*h)/u;return this._w=o*f+this._w*g,this._x=i*f+this._x*g,this._y=r*f+this._y*g,this._z=s*f+this._z*g,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),s=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class J{constructor(e=0,t=0,i=0){J.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(QT.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(QT.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,u=2*(o*r-a*i),h=2*(a*t-s*r),f=2*(s*i-o*t);return this.x=t+l*u+o*f-a*h,this.y=i+l*h+a*u-s*f,this.z=r+l*f+s*h-o*u,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=vn(this.x,e.x,t.x),this.y=vn(this.y,e.y,t.y),this.z=vn(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=vn(this.x,e,t),this.y=vn(this.y,e,t),this.z=vn(this.z,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(vn(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=r*l-s*a,this.y=s*o-i*l,this.z=i*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return mw.copy(this).projectOnVector(e),this.sub(mw)}reflect(e){return this.sub(mw.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(vn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const mw=new J,QT=new xr;class Ir{constructor(e=new J(1/0,1/0,1/0),t=new J(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(ca.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(ca.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=ca.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const s=i.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,ca):ca.fromBufferAttribute(s,o),ca.applyMatrix4(e.matrixWorld),this.expandByPoint(ca);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Pv.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),Pv.copy(i.boundingBox)),Pv.applyMatrix4(e.matrixWorld),this.union(Pv)}const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,ca),ca.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Bm),Iv.subVectors(this.max,Bm),hf.subVectors(e.a,Bm),ff.subVectors(e.b,Bm),pf.subVectors(e.c,Bm),Hc.subVectors(ff,hf),Vc.subVectors(pf,ff),ud.subVectors(hf,pf);let t=[0,-Hc.z,Hc.y,0,-Vc.z,Vc.y,0,-ud.z,ud.y,Hc.z,0,-Hc.x,Vc.z,0,-Vc.x,ud.z,0,-ud.x,-Hc.y,Hc.x,0,-Vc.y,Vc.x,0,-ud.y,ud.x,0];return!gw(t,hf,ff,pf,Iv)||(t=[1,0,0,0,1,0,0,0,1],!gw(t,hf,ff,pf,Iv))?!1:(Dv.crossVectors(Hc,Vc),t=[Dv.x,Dv.y,Dv.z],gw(t,hf,ff,pf,Iv))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,ca).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(ca).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Nl[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Nl[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Nl[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Nl[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Nl[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Nl[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Nl[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Nl[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Nl),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Nl=[new J,new J,new J,new J,new J,new J,new J,new J],ca=new J,Pv=new Ir,hf=new J,ff=new J,pf=new J,Hc=new J,Vc=new J,ud=new J,Bm=new J,Iv=new J,Dv=new J,dd=new J;function gw(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){dd.fromArray(n,s);const a=r.x*Math.abs(dd.x)+r.y*Math.abs(dd.y)+r.z*Math.abs(dd.z),l=e.dot(dd),u=t.dot(dd),h=i.dot(dd);if(Math.max(-Math.max(l,u,h),Math.min(l,u,h))>a)return!1}return!0}const j9=new Ir,Lm=new J,vw=new J;let _r=class{constructor(e=new J,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):j9.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Lm.subVectors(e,this.center);const t=Lm.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(Lm,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(vw.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Lm.copy(e.center).add(vw)),this.expandByPoint(Lm.copy(e.center).sub(vw))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}};const Fl=new J,yw=new J,Bv=new J,Gc=new J,xw=new J,Lv=new J,_w=new J;class ah{constructor(e=new J,t=new J(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Fl)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Fl.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Fl.copy(this.origin).addScaledVector(this.direction,t),Fl.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){yw.copy(e).add(t).multiplyScalar(.5),Bv.copy(t).sub(e).normalize(),Gc.copy(this.origin).sub(yw);const s=e.distanceTo(t)*.5,o=-this.direction.dot(Bv),a=Gc.dot(this.direction),l=-Gc.dot(Bv),u=Gc.lengthSq(),h=Math.abs(1-o*o);let f,g,v,x;if(h>0)if(f=o*l-a,g=o*a-l,x=s*h,f>=0)if(g>=-x)if(g<=x){const S=1/h;f*=S,g*=S,v=f*(f+o*g+2*a)+g*(o*f+g+2*l)+u}else g=s,f=Math.max(0,-(o*g+a)),v=-f*f+g*(g+2*l)+u;else g=-s,f=Math.max(0,-(o*g+a)),v=-f*f+g*(g+2*l)+u;else g<=-x?(f=Math.max(0,-(-o*s+a)),g=f>0?-s:Math.min(Math.max(-s,-l),s),v=-f*f+g*(g+2*l)+u):g<=x?(f=0,g=Math.min(Math.max(-s,-l),s),v=g*(g+2*l)+u):(f=Math.max(0,-(o*s+a)),g=f>0?s:Math.min(Math.max(-s,-l),s),v=-f*f+g*(g+2*l)+u);else g=o>0?-s:s,f=Math.max(0,-(o*g+a)),v=-f*f+g*(g+2*l)+u;return i&&i.copy(this.origin).addScaledVector(this.direction,f),r&&r.copy(yw).addScaledVector(Bv,g),v}intersectSphere(e,t){Fl.subVectors(e.center,this.origin);const i=Fl.dot(this.direction),r=Fl.dot(Fl)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,l=i+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,a,l;const u=1/this.direction.x,h=1/this.direction.y,f=1/this.direction.z,g=this.origin;return u>=0?(i=(e.min.x-g.x)*u,r=(e.max.x-g.x)*u):(i=(e.max.x-g.x)*u,r=(e.min.x-g.x)*u),h>=0?(s=(e.min.y-g.y)*h,o=(e.max.y-g.y)*h):(s=(e.max.y-g.y)*h,o=(e.min.y-g.y)*h),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),f>=0?(a=(e.min.z-g.z)*f,l=(e.max.z-g.z)*f):(a=(e.max.z-g.z)*f,l=(e.min.z-g.z)*f),i>l||a>r)||((a>i||i!==i)&&(i=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,Fl)!==null}intersectTriangle(e,t,i,r,s){xw.subVectors(t,e),Lv.subVectors(i,e),_w.crossVectors(xw,Lv);let o=this.direction.dot(_w),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Gc.subVectors(this.origin,e);const l=a*this.direction.dot(Lv.crossVectors(Gc,Lv));if(l<0)return null;const u=a*this.direction.dot(xw.cross(Gc));if(u<0||l+u>o)return null;const h=-a*Gc.dot(_w);return h<0?null:this.at(h/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Jt{constructor(e,t,i,r,s,o,a,l,u,h,f,g,v,x,S,w){Jt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,l,u,h,f,g,v,x,S,w)}set(e,t,i,r,s,o,a,l,u,h,f,g,v,x,S,w){const _=this.elements;return _[0]=e,_[4]=t,_[8]=i,_[12]=r,_[1]=s,_[5]=o,_[9]=a,_[13]=l,_[2]=u,_[6]=h,_[10]=f,_[14]=g,_[3]=v,_[7]=x,_[11]=S,_[15]=w,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Jt().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/mf.setFromMatrixColumn(e,0).length(),s=1/mf.setFromMatrixColumn(e,1).length(),o=1/mf.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(r),u=Math.sin(r),h=Math.cos(s),f=Math.sin(s);if(e.order==="XYZ"){const g=o*h,v=o*f,x=a*h,S=a*f;t[0]=l*h,t[4]=-l*f,t[8]=u,t[1]=v+x*u,t[5]=g-S*u,t[9]=-a*l,t[2]=S-g*u,t[6]=x+v*u,t[10]=o*l}else if(e.order==="YXZ"){const g=l*h,v=l*f,x=u*h,S=u*f;t[0]=g+S*a,t[4]=x*a-v,t[8]=o*u,t[1]=o*f,t[5]=o*h,t[9]=-a,t[2]=v*a-x,t[6]=S+g*a,t[10]=o*l}else if(e.order==="ZXY"){const g=l*h,v=l*f,x=u*h,S=u*f;t[0]=g-S*a,t[4]=-o*f,t[8]=x+v*a,t[1]=v+x*a,t[5]=o*h,t[9]=S-g*a,t[2]=-o*u,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const g=o*h,v=o*f,x=a*h,S=a*f;t[0]=l*h,t[4]=x*u-v,t[8]=g*u+S,t[1]=l*f,t[5]=S*u+g,t[9]=v*u-x,t[2]=-u,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const g=o*l,v=o*u,x=a*l,S=a*u;t[0]=l*h,t[4]=S-g*f,t[8]=x*f+v,t[1]=f,t[5]=o*h,t[9]=-a*h,t[2]=-u*h,t[6]=v*f+x,t[10]=g-S*f}else if(e.order==="XZY"){const g=o*l,v=o*u,x=a*l,S=a*u;t[0]=l*h,t[4]=-f,t[8]=u*h,t[1]=g*f+S,t[5]=o*h,t[9]=v*f-x,t[2]=x*f-v,t[6]=a*h,t[10]=S*f+g}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(W9,e,$9)}lookAt(e,t,i){const r=this.elements;return ao.subVectors(e,t),ao.lengthSq()===0&&(ao.z=1),ao.normalize(),jc.crossVectors(i,ao),jc.lengthSq()===0&&(Math.abs(i.z)===1?ao.x+=1e-4:ao.z+=1e-4,ao.normalize(),jc.crossVectors(i,ao)),jc.normalize(),Ov.crossVectors(ao,jc),r[0]=jc.x,r[4]=Ov.x,r[8]=ao.x,r[1]=jc.y,r[5]=Ov.y,r[9]=ao.y,r[2]=jc.z,r[6]=Ov.z,r[10]=ao.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],l=i[8],u=i[12],h=i[1],f=i[5],g=i[9],v=i[13],x=i[2],S=i[6],w=i[10],_=i[14],b=i[3],M=i[7],T=i[11],L=i[15],D=r[0],U=r[4],F=r[8],k=r[12],N=r[1],V=r[5],Z=r[9],Q=r[13],le=r[2],me=r[6],fe=r[10],xe=r[14],X=r[3],de=r[7],se=r[11],Y=r[15];return s[0]=o*D+a*N+l*le+u*X,s[4]=o*U+a*V+l*me+u*de,s[8]=o*F+a*Z+l*fe+u*se,s[12]=o*k+a*Q+l*xe+u*Y,s[1]=h*D+f*N+g*le+v*X,s[5]=h*U+f*V+g*me+v*de,s[9]=h*F+f*Z+g*fe+v*se,s[13]=h*k+f*Q+g*xe+v*Y,s[2]=x*D+S*N+w*le+_*X,s[6]=x*U+S*V+w*me+_*de,s[10]=x*F+S*Z+w*fe+_*se,s[14]=x*k+S*Q+w*xe+_*Y,s[3]=b*D+M*N+T*le+L*X,s[7]=b*U+M*V+T*me+L*de,s[11]=b*F+M*Z+T*fe+L*se,s[15]=b*k+M*Q+T*xe+L*Y,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],u=e[13],h=e[2],f=e[6],g=e[10],v=e[14],x=e[3],S=e[7],w=e[11],_=e[15];return x*(+s*l*f-r*u*f-s*a*g+i*u*g+r*a*v-i*l*v)+S*(+t*l*v-t*u*g+s*o*g-r*o*v+r*u*h-s*l*h)+w*(+t*u*f-t*a*v-s*o*f+i*o*v+s*a*h-i*u*h)+_*(-r*a*h-t*l*f+t*a*g+r*o*f-i*o*g+i*l*h)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],h=e[8],f=e[9],g=e[10],v=e[11],x=e[12],S=e[13],w=e[14],_=e[15],b=f*w*u-S*g*u+S*l*v-a*w*v-f*l*_+a*g*_,M=x*g*u-h*w*u-x*l*v+o*w*v+h*l*_-o*g*_,T=h*S*u-x*f*u+x*a*v-o*S*v-h*a*_+o*f*_,L=x*f*l-h*S*l-x*a*g+o*S*g+h*a*w-o*f*w,D=t*b+i*M+r*T+s*L;if(D===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const U=1/D;return e[0]=b*U,e[1]=(S*g*s-f*w*s-S*r*v+i*w*v+f*r*_-i*g*_)*U,e[2]=(a*w*s-S*l*s+S*r*u-i*w*u-a*r*_+i*l*_)*U,e[3]=(f*l*s-a*g*s-f*r*u+i*g*u+a*r*v-i*l*v)*U,e[4]=M*U,e[5]=(h*w*s-x*g*s+x*r*v-t*w*v-h*r*_+t*g*_)*U,e[6]=(x*l*s-o*w*s-x*r*u+t*w*u+o*r*_-t*l*_)*U,e[7]=(o*g*s-h*l*s+h*r*u-t*g*u-o*r*v+t*l*v)*U,e[8]=T*U,e[9]=(x*f*s-h*S*s-x*i*v+t*S*v+h*i*_-t*f*_)*U,e[10]=(o*S*s-x*a*s+x*i*u-t*S*u-o*i*_+t*a*_)*U,e[11]=(h*a*s-o*f*s-h*i*u+t*f*u+o*i*v-t*a*v)*U,e[12]=L*U,e[13]=(h*S*r-x*f*r+x*i*g-t*S*g-h*i*w+t*f*w)*U,e[14]=(x*a*r-o*S*r-x*i*l+t*S*l+o*i*w-t*a*w)*U,e[15]=(o*f*r-h*a*r+h*i*l-t*f*l-o*i*g+t*a*g)*U,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,l=e.z,u=s*o,h=s*a;return this.set(u*o+i,u*a-r*l,u*l+r*a,0,u*a+r*l,h*a+i,h*l-r*o,0,u*l-r*a,h*l+r*o,s*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,u=s+s,h=o+o,f=a+a,g=s*u,v=s*h,x=s*f,S=o*h,w=o*f,_=a*f,b=l*u,M=l*h,T=l*f,L=i.x,D=i.y,U=i.z;return r[0]=(1-(S+_))*L,r[1]=(v+T)*L,r[2]=(x-M)*L,r[3]=0,r[4]=(v-T)*D,r[5]=(1-(g+_))*D,r[6]=(w+b)*D,r[7]=0,r[8]=(x+M)*U,r[9]=(w-b)*U,r[10]=(1-(g+S))*U,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=mf.set(r[0],r[1],r[2]).length();const o=mf.set(r[4],r[5],r[6]).length(),a=mf.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],ua.copy(this);const u=1/s,h=1/o,f=1/a;return ua.elements[0]*=u,ua.elements[1]*=u,ua.elements[2]*=u,ua.elements[4]*=h,ua.elements[5]*=h,ua.elements[6]*=h,ua.elements[8]*=f,ua.elements[9]*=f,ua.elements[10]*=f,t.setFromRotationMatrix(ua),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o,a=Lo){const l=this.elements,u=2*s/(t-e),h=2*s/(i-r),f=(t+e)/(t-e),g=(i+r)/(i-r);let v,x;if(a===Lo)v=-(o+s)/(o-s),x=-2*o*s/(o-s);else if(a===Hg)v=-o/(o-s),x=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=u,l[4]=0,l[8]=f,l[12]=0,l[1]=0,l[5]=h,l[9]=g,l[13]=0,l[2]=0,l[6]=0,l[10]=v,l[14]=x,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,r,s,o,a=Lo){const l=this.elements,u=1/(t-e),h=1/(i-r),f=1/(o-s),g=(t+e)*u,v=(i+r)*h;let x,S;if(a===Lo)x=(o+s)*f,S=-2*f;else if(a===Hg)x=s*f,S=-1*f;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*u,l[4]=0,l[8]=0,l[12]=-g,l[1]=0,l[5]=2*h,l[9]=0,l[13]=-v,l[2]=0,l[6]=0,l[10]=S,l[14]=-x,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const mf=new J,ua=new Jt,W9=new J(0,0,0),$9=new J(1,1,1),jc=new J,Ov=new J,ao=new J,e2=new Jt,t2=new xr;class ho{constructor(e=0,t=0,i=0,r=ho.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],o=r[4],a=r[8],l=r[1],u=r[5],h=r[9],f=r[2],g=r[6],v=r[10];switch(t){case"XYZ":this._y=Math.asin(vn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-h,v),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(g,u),this._z=0);break;case"YXZ":this._x=Math.asin(-vn(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(a,v),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-f,s),this._z=0);break;case"ZXY":this._x=Math.asin(vn(g,-1,1)),Math.abs(g)<.9999999?(this._y=Math.atan2(-f,v),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-vn(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(g,v),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,u));break;case"YZX":this._z=Math.asin(vn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-h,u),this._y=Math.atan2(-f,s)):(this._x=0,this._y=Math.atan2(a,v));break;case"XZY":this._z=Math.asin(-vn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(g,u),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-h,v),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return e2.makeRotationFromQuaternion(e),this.setFromRotationMatrix(e2,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return t2.setFromEuler(this),this.setFromQuaternion(t2,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}ho.DEFAULT_ORDER="XYZ";class Yd{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let X9=0;const n2=new J,gf=new xr,kl=new Jt,Nv=new J,Om=new J,Y9=new J,K9=new xr,i2=new J(1,0,0),r2=new J(0,1,0),s2=new J(0,0,1),o2={type:"added"},J9={type:"removed"},vf={type:"childadded",child:null},ww={type:"childremoved",child:null};class Bn extends nl{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:X9++}),this.uuid=uo(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Bn.DEFAULT_UP.clone();const e=new J,t=new ho,i=new xr,r=new J(1,1,1);function s(){i.setFromEuler(t,!1)}function o(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Jt},normalMatrix:{value:new wn}}),this.matrix=new Jt,this.matrixWorld=new Jt,this.matrixAutoUpdate=Bn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Bn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Yd,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return gf.setFromAxisAngle(e,t),this.quaternion.multiply(gf),this}rotateOnWorldAxis(e,t){return gf.setFromAxisAngle(e,t),this.quaternion.premultiply(gf),this}rotateX(e){return this.rotateOnAxis(i2,e)}rotateY(e){return this.rotateOnAxis(r2,e)}rotateZ(e){return this.rotateOnAxis(s2,e)}translateOnAxis(e,t){return n2.copy(e).applyQuaternion(this.quaternion),this.position.add(n2.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(i2,e)}translateY(e){return this.translateOnAxis(r2,e)}translateZ(e){return this.translateOnAxis(s2,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(kl.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?Nv.copy(e):Nv.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),Om.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?kl.lookAt(Om,Nv,this.up):kl.lookAt(Nv,Om,this.up),this.quaternion.setFromRotationMatrix(kl),r&&(kl.extractRotation(r.matrixWorld),gf.setFromRotationMatrix(kl),this.quaternion.premultiply(gf.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(o2),vf.child=e,this.dispatchEvent(vf),vf.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(J9),ww.child=e,this.dispatchEvent(ww),ww.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),kl.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),kl.multiply(e.parent.matrixWorld)),e.applyMatrix4(kl),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(o2),vf.child=e,this.dispatchEvent(vf),vf.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const o=this.children[i].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Om,e,Y9),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Om,K9,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.geometryInfo=this._geometryInfo.map(a=>({...a,boundingBox:a.boundingBox?{min:a.boundingBox.min.toArray(),max:a.boundingBox.max.toArray()}:void 0,boundingSphere:a.boundingSphere?{radius:a.boundingSphere.radius,center:a.boundingSphere.center.toArray()}:void 0})),r.instanceInfo=this._instanceInfo.map(a=>({...a})),r.availableInstanceIds=this._availableInstanceIds.slice(),r.availableGeometryIds=this._availableGeometryIds.slice(),r.nextIndexStart=this._nextIndexStart,r.nextVertexStart=this._nextVertexStart,r.geometryCount=this._geometryCount,r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.matricesTexture=this._matricesTexture.toJSON(e),r.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(r.boundingSphere={center:this.boundingSphere.center.toArray(),radius:this.boundingSphere.radius}),this.boundingBox!==null&&(r.boundingBox={min:this.boundingBox.min.toArray(),max:this.boundingBox.max.toArray()}));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let u=0,h=l.length;u<h;u++){const f=l[u];s(e.shapes,f)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,u=this.material.length;l<u;l++)a.push(s(e.materials,this.material[l]));r.material=a}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];r.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),u=o(e.textures),h=o(e.images),f=o(e.shapes),g=o(e.skeletons),v=o(e.animations),x=o(e.nodes);a.length>0&&(i.geometries=a),l.length>0&&(i.materials=l),u.length>0&&(i.textures=u),h.length>0&&(i.images=h),f.length>0&&(i.shapes=f),g.length>0&&(i.skeletons=g),v.length>0&&(i.animations=v),x.length>0&&(i.nodes=x)}return i.object=r,i;function o(a){const l=[];for(const u in a){const h=a[u];delete h.metadata,l.push(h)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}Bn.DEFAULT_UP=new J(0,1,0);Bn.DEFAULT_MATRIX_AUTO_UPDATE=!0;Bn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const da=new J,Ul=new J,Sw=new J,zl=new J,yf=new J,xf=new J,a2=new J,Ew=new J,Aw=new J,bw=new J,Mw=new Un,Cw=new Un,Tw=new Un;class Xs{constructor(e=new J,t=new J,i=new J){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),da.subVectors(e,t),r.cross(da);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){da.subVectors(r,t),Ul.subVectors(i,t),Sw.subVectors(e,t);const o=da.dot(da),a=da.dot(Ul),l=da.dot(Sw),u=Ul.dot(Ul),h=Ul.dot(Sw),f=o*u-a*a;if(f===0)return s.set(0,0,0),null;const g=1/f,v=(u*l-a*h)*g,x=(o*h-a*l)*g;return s.set(1-v-x,x,v)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,zl)===null?!1:zl.x>=0&&zl.y>=0&&zl.x+zl.y<=1}static getInterpolation(e,t,i,r,s,o,a,l){return this.getBarycoord(e,t,i,r,zl)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,zl.x),l.addScaledVector(o,zl.y),l.addScaledVector(a,zl.z),l)}static getInterpolatedAttribute(e,t,i,r,s,o){return Mw.setScalar(0),Cw.setScalar(0),Tw.setScalar(0),Mw.fromBufferAttribute(e,t),Cw.fromBufferAttribute(e,i),Tw.fromBufferAttribute(e,r),o.setScalar(0),o.addScaledVector(Mw,s.x),o.addScaledVector(Cw,s.y),o.addScaledVector(Tw,s.z),o}static isFrontFacing(e,t,i,r){return da.subVectors(i,t),Ul.subVectors(e,t),da.cross(Ul).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return da.subVectors(this.c,this.b),Ul.subVectors(this.a,this.b),da.cross(Ul).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Xs.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Xs.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,s){return Xs.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return Xs.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Xs.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,a;yf.subVectors(r,i),xf.subVectors(s,i),Ew.subVectors(e,i);const l=yf.dot(Ew),u=xf.dot(Ew);if(l<=0&&u<=0)return t.copy(i);Aw.subVectors(e,r);const h=yf.dot(Aw),f=xf.dot(Aw);if(h>=0&&f<=h)return t.copy(r);const g=l*f-h*u;if(g<=0&&l>=0&&h<=0)return o=l/(l-h),t.copy(i).addScaledVector(yf,o);bw.subVectors(e,s);const v=yf.dot(bw),x=xf.dot(bw);if(x>=0&&v<=x)return t.copy(s);const S=v*u-l*x;if(S<=0&&u>=0&&x<=0)return a=u/(u-x),t.copy(i).addScaledVector(xf,a);const w=h*x-v*f;if(w<=0&&f-h>=0&&v-x>=0)return a2.subVectors(s,r),a=(f-h)/(f-h+(v-x)),t.copy(r).addScaledVector(a2,a);const _=1/(w+S+g);return o=S*_,a=g*_,t.copy(i).addScaledVector(yf,o).addScaledVector(xf,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const qB={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Wc={h:0,s:0,l:0},Fv={h:0,s:0,l:0};function Rw(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}let bt=class{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=As){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,kn.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=kn.workingColorSpace){return this.r=e,this.g=t,this.b=i,kn.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=kn.workingColorSpace){if(e=yb(e,1),t=vn(t,0,1),i=vn(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,o=2*i-s;this.r=Rw(o,s,e+1/3),this.g=Rw(o,s,e),this.b=Rw(o,s,e-1/3)}return kn.toWorkingColorSpace(this,r),this}setStyle(e,t=As){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=As){const i=qB[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Zl(e.r),this.g=Zl(e.g),this.b=Zl(e.b),this}copyLinearToSRGB(e){return this.r=qf(e.r),this.g=qf(e.g),this.b=qf(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=As){return kn.fromWorkingColorSpace(es.copy(this),e),Math.round(vn(es.r*255,0,255))*65536+Math.round(vn(es.g*255,0,255))*256+Math.round(vn(es.b*255,0,255))}getHexString(e=As){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=kn.workingColorSpace){kn.fromWorkingColorSpace(es.copy(this),t);const i=es.r,r=es.g,s=es.b,o=Math.max(i,r,s),a=Math.min(i,r,s);let l,u;const h=(a+o)/2;if(a===o)l=0,u=0;else{const f=o-a;switch(u=h<=.5?f/(o+a):f/(2-o-a),o){case i:l=(r-s)/f+(r<s?6:0);break;case r:l=(s-i)/f+2;break;case s:l=(i-r)/f+4;break}l/=6}return e.h=l,e.s=u,e.l=h,e}getRGB(e,t=kn.workingColorSpace){return kn.fromWorkingColorSpace(es.copy(this),t),e.r=es.r,e.g=es.g,e.b=es.b,e}getStyle(e=As){kn.fromWorkingColorSpace(es.copy(this),e);const t=es.r,i=es.g,r=es.b;return e!==As?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(Wc),this.setHSL(Wc.h+e,Wc.s+t,Wc.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Wc),e.getHSL(Fv);const i=wg(Wc.h,Fv.h,t),r=wg(Wc.s,Fv.s,t),s=wg(Wc.l,Fv.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const es=new bt;bt.NAMES=qB;let q9=0;class wr extends nl{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:q9++}),this.uuid=uo(),this.name="",this.type="Material",this.blending=Wd,this.side=Ja,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=ox,this.blendDst=ax,this.blendEquation=eu,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new bt(0,0,0),this.blendAlpha=0,this.depthFunc=Zd,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=IE,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Rd,this.stencilZFail=Rd,this.stencilZPass=Rd,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Wd&&(i.blending=this.blending),this.side!==Ja&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==ox&&(i.blendSrc=this.blendSrc),this.blendDst!==ax&&(i.blendDst=this.blendDst),this.blendEquation!==eu&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==Zd&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==IE&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Rd&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Rd&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Rd&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class Ks extends wr{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new bt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ho,this.combine=s0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Yl=Z9();function Z9(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const u=l-127;u<-27?(i[l]=0,i[l|256]=32768,r[l]=24,r[l|256]=24):u<-14?(i[l]=1024>>-u-14,i[l|256]=1024>>-u-14|32768,r[l]=-u-1,r[l|256]=-u-1):u<=15?(i[l]=u+15<<10,i[l|256]=u+15<<10|32768,r[l]=13,r[l|256]=13):u<128?(i[l]=31744,i[l|256]=64512,r[l]=24,r[l|256]=24):(i[l]=31744,i[l|256]=64512,r[l]=13,r[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let u=l<<13,h=0;for(;(u&8388608)===0;)u<<=1,h-=8388608;u&=-8388609,h+=947912704,s[l]=u|h}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:a}}function Ws(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=vn(n,-65504,65504),Yl.floatView[0]=n;const e=Yl.uint32View[0],t=e>>23&511;return Yl.baseTable[t]+((e&8388607)>>Yl.shiftTable[t])}function og(n){const e=n>>10;return Yl.uint32View[0]=Yl.mantissaTable[Yl.offsetTable[e]+(n&1023)]+Yl.exponentTable[e],Yl.floatView[0]}class kd{static toHalfFloat(e){return Ws(e)}static fromHalfFloat(e){return og(e)}}const or=new J,kv=new Xe;let Q9=0;class jn{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:Q9++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=zg,this.updateRanges=[],this.gpuType=Ci,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)kv.fromBufferAttribute(this,t),kv.applyMatrix3(e),this.setXY(t,kv.x,kv.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)or.fromBufferAttribute(this,t),or.applyMatrix3(e),this.setXYZ(t,or.x,or.y,or.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)or.fromBufferAttribute(this,t),or.applyMatrix4(e),this.setXYZ(t,or.x,or.y,or.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)or.fromBufferAttribute(this,t),or.applyNormalMatrix(e),this.setXYZ(t,or.x,or.y,or.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)or.fromBufferAttribute(this,t),or.transformDirection(e),this.setXYZ(t,or.x,or.y,or.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=bs(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=An(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=bs(t,this.array)),t}setX(e,t){return this.normalized&&(t=An(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=bs(t,this.array)),t}setY(e,t){return this.normalized&&(t=An(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=bs(t,this.array)),t}setZ(e,t){return this.normalized&&(t=An(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=bs(t,this.array)),t}setW(e,t){return this.normalized&&(t=An(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=An(t,this.array),i=An(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=An(t,this.array),i=An(i,this.array),r=An(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=An(t,this.array),i=An(i,this.array),r=An(r,this.array),s=An(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==zg&&(e.usage=this.usage),e}}class eV extends jn{constructor(e,t,i){super(new Int8Array(e),t,i)}}class tV extends jn{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class nV extends jn{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class iV extends jn{constructor(e,t,i){super(new Int16Array(e),t,i)}}class xb extends jn{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class rV extends jn{constructor(e,t,i){super(new Int32Array(e),t,i)}}class _b extends jn{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class sV extends jn{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=og(this.array[e*this.itemSize]);return this.normalized&&(t=bs(t,this.array)),t}setX(e,t){return this.normalized&&(t=An(t,this.array)),this.array[e*this.itemSize]=Ws(t),this}getY(e){let t=og(this.array[e*this.itemSize+1]);return this.normalized&&(t=bs(t,this.array)),t}setY(e,t){return this.normalized&&(t=An(t,this.array)),this.array[e*this.itemSize+1]=Ws(t),this}getZ(e){let t=og(this.array[e*this.itemSize+2]);return this.normalized&&(t=bs(t,this.array)),t}setZ(e,t){return this.normalized&&(t=An(t,this.array)),this.array[e*this.itemSize+2]=Ws(t),this}getW(e){let t=og(this.array[e*this.itemSize+3]);return this.normalized&&(t=bs(t,this.array)),t}setW(e,t){return this.normalized&&(t=An(t,this.array)),this.array[e*this.itemSize+3]=Ws(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=An(t,this.array),i=An(i,this.array)),this.array[e+0]=Ws(t),this.array[e+1]=Ws(i),this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=An(t,this.array),i=An(i,this.array),r=An(r,this.array)),this.array[e+0]=Ws(t),this.array[e+1]=Ws(i),this.array[e+2]=Ws(r),this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=An(t,this.array),i=An(i,this.array),r=An(r,this.array),s=An(s,this.array)),this.array[e+0]=Ws(t),this.array[e+1]=Ws(i),this.array[e+2]=Ws(r),this.array[e+3]=Ws(s),this}}class Ht extends jn{constructor(e,t,i){super(new Float32Array(e),t,i)}}let oV=0;const bo=new Jt,Pw=new Bn,_f=new J,lo=new Ir,Nm=new Ir,Rr=new J;class yn extends nl{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:oV++}),this.uuid=uo(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(YB(e)?_b:xb)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new wn().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return bo.makeRotationFromQuaternion(e),this.applyMatrix4(bo),this}rotateX(e){return bo.makeRotationX(e),this.applyMatrix4(bo),this}rotateY(e){return bo.makeRotationY(e),this.applyMatrix4(bo),this}rotateZ(e){return bo.makeRotationZ(e),this.applyMatrix4(bo),this}translate(e,t,i){return bo.makeTranslation(e,t,i),this.applyMatrix4(bo),this}scale(e,t,i){return bo.makeScale(e,t,i),this.applyMatrix4(bo),this}lookAt(e){return Pw.lookAt(e),Pw.updateMatrix(),this.applyMatrix4(Pw.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(_f).negate(),this.translate(_f.x,_f.y,_f.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const i=[];for(let r=0,s=e.length;r<s;r++){const o=e[r];i.push(o.x,o.y,o.z||0)}this.setAttribute("position",new Ht(i,3))}else{const i=Math.min(e.length,t.count);for(let r=0;r<i;r++){const s=e[r];t.setXYZ(r,s.x,s.y,s.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ir);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new J(-1/0,-1/0,-1/0),new J(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];lo.setFromBufferAttribute(s),this.morphTargetsRelative?(Rr.addVectors(this.boundingBox.min,lo.min),this.boundingBox.expandByPoint(Rr),Rr.addVectors(this.boundingBox.max,lo.max),this.boundingBox.expandByPoint(Rr)):(this.boundingBox.expandByPoint(lo.min),this.boundingBox.expandByPoint(lo.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new _r);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new J,1/0);return}if(e){const i=this.boundingSphere.center;if(lo.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];Nm.setFromBufferAttribute(a),this.morphTargetsRelative?(Rr.addVectors(lo.min,Nm.min),lo.expandByPoint(Rr),Rr.addVectors(lo.max,Nm.max),lo.expandByPoint(Rr)):(lo.expandByPoint(Nm.min),lo.expandByPoint(Nm.max))}lo.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)Rr.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(Rr));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let u=0,h=a.count;u<h;u++)Rr.fromBufferAttribute(a,u),l&&(_f.fromBufferAttribute(e,u),Rr.add(_f)),r=Math.max(r,i.distanceToSquared(Rr))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.position,r=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new jn(new Float32Array(4*i.count),4));const o=this.getAttribute("tangent"),a=[],l=[];for(let F=0;F<i.count;F++)a[F]=new J,l[F]=new J;const u=new J,h=new J,f=new J,g=new Xe,v=new Xe,x=new Xe,S=new J,w=new J;function _(F,k,N){u.fromBufferAttribute(i,F),h.fromBufferAttribute(i,k),f.fromBufferAttribute(i,N),g.fromBufferAttribute(s,F),v.fromBufferAttribute(s,k),x.fromBufferAttribute(s,N),h.sub(u),f.sub(u),v.sub(g),x.sub(g);const V=1/(v.x*x.y-x.x*v.y);isFinite(V)&&(S.copy(h).multiplyScalar(x.y).addScaledVector(f,-v.y).multiplyScalar(V),w.copy(f).multiplyScalar(v.x).addScaledVector(h,-x.x).multiplyScalar(V),a[F].add(S),a[k].add(S),a[N].add(S),l[F].add(w),l[k].add(w),l[N].add(w))}let b=this.groups;b.length===0&&(b=[{start:0,count:e.count}]);for(let F=0,k=b.length;F<k;++F){const N=b[F],V=N.start,Z=N.count;for(let Q=V,le=V+Z;Q<le;Q+=3)_(e.getX(Q+0),e.getX(Q+1),e.getX(Q+2))}const M=new J,T=new J,L=new J,D=new J;function U(F){L.fromBufferAttribute(r,F),D.copy(L);const k=a[F];M.copy(k),M.sub(L.multiplyScalar(L.dot(k))).normalize(),T.crossVectors(D,k);const V=T.dot(l[F])<0?-1:1;o.setXYZW(F,M.x,M.y,M.z,V)}for(let F=0,k=b.length;F<k;++F){const N=b[F],V=N.start,Z=N.count;for(let Q=V,le=V+Z;Q<le;Q+=3)U(e.getX(Q+0)),U(e.getX(Q+1)),U(e.getX(Q+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new jn(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let g=0,v=i.count;g<v;g++)i.setXYZ(g,0,0,0);const r=new J,s=new J,o=new J,a=new J,l=new J,u=new J,h=new J,f=new J;if(e)for(let g=0,v=e.count;g<v;g+=3){const x=e.getX(g+0),S=e.getX(g+1),w=e.getX(g+2);r.fromBufferAttribute(t,x),s.fromBufferAttribute(t,S),o.fromBufferAttribute(t,w),h.subVectors(o,s),f.subVectors(r,s),h.cross(f),a.fromBufferAttribute(i,x),l.fromBufferAttribute(i,S),u.fromBufferAttribute(i,w),a.add(h),l.add(h),u.add(h),i.setXYZ(x,a.x,a.y,a.z),i.setXYZ(S,l.x,l.y,l.z),i.setXYZ(w,u.x,u.y,u.z)}else for(let g=0,v=t.count;g<v;g+=3)r.fromBufferAttribute(t,g+0),s.fromBufferAttribute(t,g+1),o.fromBufferAttribute(t,g+2),h.subVectors(o,s),f.subVectors(r,s),h.cross(f),i.setXYZ(g+0,h.x,h.y,h.z),i.setXYZ(g+1,h.x,h.y,h.z),i.setXYZ(g+2,h.x,h.y,h.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Rr.fromBufferAttribute(e,t),Rr.normalize(),e.setXYZ(t,Rr.x,Rr.y,Rr.z)}toNonIndexed(){function e(a,l){const u=a.array,h=a.itemSize,f=a.normalized,g=new u.constructor(l.length*h);let v=0,x=0;for(let S=0,w=l.length;S<w;S++){a.isInterleavedBufferAttribute?v=l[S]*a.data.stride+a.offset:v=l[S]*h;for(let _=0;_<h;_++)g[x++]=u[v++]}return new jn(g,h,f)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new yn,i=this.index.array,r=this.attributes;for(const a in r){const l=r[a],u=e(l,i);t.setAttribute(a,u)}const s=this.morphAttributes;for(const a in s){const l=[],u=s[a];for(let h=0,f=u.length;h<f;h++){const g=u[h],v=e(g,i);l.push(v)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const u=o[a];t.addGroup(u.start,u.count,u.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i){const u=i[l];e.data.attributes[l]=u.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],h=[];for(let f=0,g=u.length;f<g;f++){const v=u[f];h.push(v.toJSON(e.data))}h.length>0&&(r[l]=h,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone());const r=e.attributes;for(const u in r){const h=r[u];this.setAttribute(u,h.clone(t))}const s=e.morphAttributes;for(const u in s){const h=[],f=s[u];for(let g=0,v=f.length;g<v;g++)h.push(f[g].clone(t));this.morphAttributes[u]=h}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let u=0,h=o.length;u<h;u++){const f=o[u];this.addGroup(f.start,f.count,f.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const l2=new Jt,hd=new ah,Uv=new _r,c2=new J,zv=new J,Hv=new J,Vv=new J,Iw=new J,Gv=new J,u2=new J,jv=new J;class Ti extends Bn{constructor(e=new yn,t=new Ks){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const a=this.morphTargetInfluences;if(s&&a){Gv.set(0,0,0);for(let l=0,u=s.length;l<u;l++){const h=a[l],f=s[l];h!==0&&(Iw.fromBufferAttribute(f,e),o?Gv.addScaledVector(Iw,h):Gv.addScaledVector(Iw.sub(t),h))}t.add(Gv)}return t}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),Uv.copy(i.boundingSphere),Uv.applyMatrix4(s),hd.copy(e.ray).recast(e.near),!(Uv.containsPoint(hd.origin)===!1&&(hd.intersectSphere(Uv,c2)===null||hd.origin.distanceToSquared(c2)>(e.far-e.near)**2))&&(l2.copy(s).invert(),hd.copy(e.ray).applyMatrix4(l2),!(i.boundingBox!==null&&hd.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,hd)))}_computeIntersections(e,t,i){let r;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,u=s.attributes.uv,h=s.attributes.uv1,f=s.attributes.normal,g=s.groups,v=s.drawRange;if(a!==null)if(Array.isArray(o))for(let x=0,S=g.length;x<S;x++){const w=g[x],_=o[w.materialIndex],b=Math.max(w.start,v.start),M=Math.min(a.count,Math.min(w.start+w.count,v.start+v.count));for(let T=b,L=M;T<L;T+=3){const D=a.getX(T),U=a.getX(T+1),F=a.getX(T+2);r=Wv(this,_,e,i,u,h,f,D,U,F),r&&(r.faceIndex=Math.floor(T/3),r.face.materialIndex=w.materialIndex,t.push(r))}}else{const x=Math.max(0,v.start),S=Math.min(a.count,v.start+v.count);for(let w=x,_=S;w<_;w+=3){const b=a.getX(w),M=a.getX(w+1),T=a.getX(w+2);r=Wv(this,o,e,i,u,h,f,b,M,T),r&&(r.faceIndex=Math.floor(w/3),t.push(r))}}else if(l!==void 0)if(Array.isArray(o))for(let x=0,S=g.length;x<S;x++){const w=g[x],_=o[w.materialIndex],b=Math.max(w.start,v.start),M=Math.min(l.count,Math.min(w.start+w.count,v.start+v.count));for(let T=b,L=M;T<L;T+=3){const D=T,U=T+1,F=T+2;r=Wv(this,_,e,i,u,h,f,D,U,F),r&&(r.faceIndex=Math.floor(T/3),r.face.materialIndex=w.materialIndex,t.push(r))}}else{const x=Math.max(0,v.start),S=Math.min(l.count,v.start+v.count);for(let w=x,_=S;w<_;w+=3){const b=w,M=w+1,T=w+2;r=Wv(this,o,e,i,u,h,f,b,M,T),r&&(r.faceIndex=Math.floor(w/3),t.push(r))}}}}function aV(n,e,t,i,r,s,o,a){let l;if(e.side===rs?l=i.intersectTriangle(o,s,r,!0,a):l=i.intersectTriangle(r,s,o,e.side===Ja,a),l===null)return null;jv.copy(a),jv.applyMatrix4(n.matrixWorld);const u=t.ray.origin.distanceTo(jv);return u<t.near||u>t.far?null:{distance:u,point:jv.clone(),object:n}}function Wv(n,e,t,i,r,s,o,a,l,u){n.getVertexPosition(a,zv),n.getVertexPosition(l,Hv),n.getVertexPosition(u,Vv);const h=aV(n,e,t,i,zv,Hv,Vv,u2);if(h){const f=new J;Xs.getBarycoord(u2,zv,Hv,Vv,f),r&&(h.uv=Xs.getInterpolatedAttribute(r,a,l,u,f,new Xe)),s&&(h.uv1=Xs.getInterpolatedAttribute(s,a,l,u,f,new Xe)),o&&(h.normal=Xs.getInterpolatedAttribute(o,a,l,u,f,new J),h.normal.dot(i.direction)>0&&h.normal.multiplyScalar(-1));const g={a,b:l,c:u,normal:new J,materialIndex:0};Xs.getNormal(zv,Hv,Vv,g.normal),h.face=g,h.barycoord=f}return h}class lh extends yn{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],u=[],h=[],f=[];let g=0,v=0;x("z","y","x",-1,-1,i,t,e,o,s,0),x("z","y","x",1,-1,i,t,-e,o,s,1),x("x","z","y",1,1,e,i,t,r,o,2),x("x","z","y",1,-1,e,i,-t,r,o,3),x("x","y","z",1,-1,e,t,i,r,s,4),x("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new Ht(u,3)),this.setAttribute("normal",new Ht(h,3)),this.setAttribute("uv",new Ht(f,2));function x(S,w,_,b,M,T,L,D,U,F,k){const N=T/U,V=L/F,Z=T/2,Q=L/2,le=D/2,me=U+1,fe=F+1;let xe=0,X=0;const de=new J;for(let se=0;se<fe;se++){const Y=se*V-Q;for(let ge=0;ge<me;ge++){const Ve=ge*N-Z;de[S]=Ve*b,de[w]=Y*M,de[_]=le,u.push(de.x,de.y,de.z),de[S]=0,de[w]=0,de[_]=D>0?1:-1,h.push(de.x,de.y,de.z),f.push(ge/U),f.push(1-se/F),xe+=1}}for(let se=0;se<F;se++)for(let Y=0;Y<U;Y++){const ge=g+Y+me*se,Ve=g+Y+me*(se+1),we=g+(Y+1)+me*(se+1),Ne=g+(Y+1)+me*se;l.push(ge,Ve,Ne),l.push(Ve,we,Ne),X+=6}a.addGroup(v,X,k),v+=X,g+=xe}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new lh(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function fp(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function Ss(n){const e={};for(let t=0;t<n.length;t++){const i=fp(n[t]);for(const r in i)e[r]=i[r]}return e}function lV(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function ZB(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:kn.workingColorSpace}const wb={clone:fp,merge:Ss};var cV=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,uV=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Ps extends wr{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=cV,this.fragmentShader=uV,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=fp(e.uniforms),this.uniformsGroups=lV(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class u0 extends Bn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Jt,this.projectionMatrix=new Jt,this.projectionMatrixInverse=new Jt,this.coordinateSystem=Lo}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const $c=new J,d2=new Xe,h2=new Xe;let ji=class extends u0{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=hp*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan($d*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return hp*2*Math.atan(Math.tan($d*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){$c.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set($c.x,$c.y).multiplyScalar(-e/$c.z),$c.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set($c.x,$c.y).multiplyScalar(-e/$c.z)}getViewSize(e,t){return this.getViewBounds(e,d2,h2),t.subVectors(h2,d2)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan($d*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,u=o.fullHeight;s+=o.offsetX*r/l,t-=o.offsetY*i/u,r*=o.width/l,i*=o.height/u}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}};const wf=-90,Sf=1;class QB extends Bn{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new ji(wf,Sf,e,t);r.layers=this.layers,this.add(r);const s=new ji(wf,Sf,e,t);s.layers=this.layers,this.add(s);const o=new ji(wf,Sf,e,t);o.layers=this.layers,this.add(o);const a=new ji(wf,Sf,e,t);a.layers=this.layers,this.add(a);const l=new ji(wf,Sf,e,t);l.layers=this.layers,this.add(l);const u=new ji(wf,Sf,e,t);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,s,o,a,l]=t;for(const u of t)this.remove(u);if(e===Lo)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===Hg)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const u of t)this.add(u),u.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,u,h]=this.children,f=e.getRenderTarget(),g=e.getActiveCubeFace(),v=e.getActiveMipmapLevel(),x=e.xr.enabled;e.xr.enabled=!1;const S=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,s),e.setRenderTarget(i,1,r),e.render(t,o),e.setRenderTarget(i,2,r),e.render(t,a),e.setRenderTarget(i,3,r),e.render(t,l),e.setRenderTarget(i,4,r),e.render(t,u),i.texture.generateMipmaps=S,e.setRenderTarget(i,5,r),e.render(t,h),e.setRenderTarget(f,g,v),e.xr.enabled=x,i.texture.needsPMREMUpdate=!0}}class d0 extends qn{constructor(e=[],t=qa,i,r,s,o,a,l,u,h){super(e,t,i,r,s,o,a,l,u,h),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class Sb extends Rs{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new d0(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Gn}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new lh(5,5,5),s=new Ps({name:"CubemapFromEquirect",uniforms:fp(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:rs,blending:Xa});s.uniforms.tEquirect.value=t;const o=new Ti(r,s),a=t.minFilter;return t.minFilter===Bo&&(t.minFilter=Gn),new QB(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t=!0,i=!0,r=!0){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}class Jl extends Bn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const dV={type:"move"};class Wy{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Jl,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Jl,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new J,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new J),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Jl,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new J,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new J),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,u=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(u&&e.hand){o=!0;for(const S of e.hand.values()){const w=t.getJointPose(S,i),_=this._getHandJoint(u,S);w!==null&&(_.matrix.fromArray(w.transform.matrix),_.matrix.decompose(_.position,_.rotation,_.scale),_.matrixWorldNeedsUpdate=!0,_.jointRadius=w.radius),_.visible=w!==null}const h=u.joints["index-finger-tip"],f=u.joints["thumb-tip"],g=h.position.distanceTo(f.position),v=.02,x=.005;u.inputState.pinching&&g>v+x?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&g<=v-x&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(dV)))}return a!==null&&(a.visible=r!==null),l!==null&&(l.visible=s!==null),u!==null&&(u.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new Jl;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class L_{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new bt(e),this.density=t}clone(){return new L_(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class O_{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new bt(e),this.near=t,this.far=i}clone(){return new O_(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}let bp=class extends Bn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new ho,this.environmentIntensity=1,this.environmentRotation=new ho,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}};class h0{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=zg,this.updateRanges=[],this.version=0,this.uuid=uo()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=uo()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=uo()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const _s=new J;class fu{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)_s.fromBufferAttribute(this,t),_s.applyMatrix4(e),this.setXYZ(t,_s.x,_s.y,_s.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)_s.fromBufferAttribute(this,t),_s.applyNormalMatrix(e),this.setXYZ(t,_s.x,_s.y,_s.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)_s.fromBufferAttribute(this,t),_s.transformDirection(e),this.setXYZ(t,_s.x,_s.y,_s.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=bs(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=An(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=An(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=An(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=An(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=An(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=bs(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=bs(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=bs(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=bs(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=An(t,this.array),i=An(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=An(t,this.array),i=An(i,this.array),r=An(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=An(t,this.array),i=An(i,this.array),r=An(r,this.array),s=An(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new jn(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new fu(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class Eb extends wr{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new bt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Ef;const Fm=new J,Af=new J,bf=new J,Mf=new Xe,km=new Xe,eL=new Jt,$v=new J,Um=new J,Xv=new J,f2=new Xe,Dw=new Xe,p2=new Xe;class tL extends Bn{constructor(e=new Eb){if(super(),this.isSprite=!0,this.type="Sprite",Ef===void 0){Ef=new yn;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new h0(t,5);Ef.setIndex([0,1,2,0,2,3]),Ef.setAttribute("position",new fu(i,3,0,!1)),Ef.setAttribute("uv",new fu(i,2,3,!1))}this.geometry=Ef,this.material=e,this.center=new Xe(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Af.setFromMatrixScale(this.matrixWorld),eL.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),bf.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Af.multiplyScalar(-bf.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const o=this.center;Yv($v.set(-.5,-.5,0),bf,o,Af,r,s),Yv(Um.set(.5,-.5,0),bf,o,Af,r,s),Yv(Xv.set(.5,.5,0),bf,o,Af,r,s),f2.set(0,0),Dw.set(1,0),p2.set(1,1);let a=e.ray.intersectTriangle($v,Um,Xv,!1,Fm);if(a===null&&(Yv(Um.set(-.5,.5,0),bf,o,Af,r,s),Dw.set(0,1),a=e.ray.intersectTriangle($v,Xv,Um,!1,Fm),a===null))return;const l=e.ray.origin.distanceTo(Fm);l<e.near||l>e.far||t.push({distance:l,point:Fm.clone(),uv:Xs.getInterpolation(Fm,$v,Um,Xv,f2,Dw,p2,new Xe),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Yv(n,e,t,i,r,s){Mf.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(km.x=s*Mf.x-r*Mf.y,km.y=r*Mf.x+s*Mf.y):km.copy(Mf),n.copy(e),n.x+=km.x,n.y+=km.y,n.applyMatrix4(eL)}const Kv=new J,m2=new J;class nL extends Bn{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i<r;i++){const s=t[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let i=0;i<t.length;i++)if(t[i].distance===e){const r=t.splice(i,1);return this.remove(r[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r;i++){let s=t[i].distance;if(t[i].object.visible&&(s-=s*t[i].hysteresis),e<s)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){Kv.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(Kv);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Kv.setFromMatrixPosition(e.matrixWorld),m2.setFromMatrixPosition(this.matrixWorld);const i=Kv.distanceTo(m2)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s;r++){let o=t[r].distance;if(t[r].object.visible&&(o-=o*t[r].hysteresis),i>=o)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const o=i[r];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const g2=new J,v2=new Un,y2=new Un,hV=new J,x2=new Jt,Jv=new J,Bw=new _r,_2=new Jt,Lw=new ah;class Ab extends Ti{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=RE,this.bindMatrix=new Jt,this.bindMatrixInverse=new Jt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Ir),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,Jv),this.boundingBox.expandByPoint(Jv)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new _r),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,Jv),this.boundingSphere.expandByPoint(Jv)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Bw.copy(this.boundingSphere),Bw.applyMatrix4(r),e.ray.intersectsSphere(Bw)!==!1&&(_2.copy(r).invert(),Lw.copy(e.ray).applyMatrix4(_2),!(this.boundingBox!==null&&Lw.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,Lw)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Un,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===RE?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===BB?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;v2.fromBufferAttribute(r.attributes.skinIndex,e),y2.fromBufferAttribute(r.attributes.skinWeight,e),g2.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=y2.getComponent(s);if(o!==0){const a=v2.getComponent(s);x2.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(hV.copy(g2).applyMatrix4(x2),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class N_ extends Bn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class xa extends qn{constructor(e=null,t=1,i=1,r,s,o,a,l,u=ur,h=ur,f,g){super(null,o,a,l,u,h,r,s,f,g),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const w2=new Jt,fV=new Jt;class f0{constructor(e=[],t=[]){this.uuid=uo(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new Jt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new Jt;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:fV;w2.multiplyMatrices(a,t[s]),w2.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new f0(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new xa(t,e,e,Qi,Ci);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new N_),this.bones.push(o),this.boneInverses.push(new Jt().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const o=t[r];e.bones.push(o.uuid);const a=i[r];e.boneInverses.push(a.toArray())}return e}}class Qd extends jn{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Cf=new Jt,S2=new Jt,qv=[],E2=new Ir,pV=new Jt,zm=new Ti,Hm=new _r;class bb extends Ti{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Qd(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,pV)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Ir),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Cf),E2.copy(e.boundingBox).applyMatrix4(Cf),this.boundingBox.union(E2)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new _r),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Cf),Hm.copy(e.boundingSphere).applyMatrix4(Cf),this.boundingSphere.union(Hm)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const i=t.morphTargetInfluences,r=this.morphTexture.source.data.data,s=i.length+1,o=e*s+1;for(let a=0;a<i.length;a++)i[a]=r[o+a]}raycast(e,t){const i=this.matrixWorld,r=this.count;if(zm.geometry=this.geometry,zm.material=this.material,zm.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Hm.copy(this.boundingSphere),Hm.applyMatrix4(i),e.ray.intersectsSphere(Hm)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,Cf),S2.multiplyMatrices(i,Cf),zm.matrixWorld=S2,zm.raycast(e,qv);for(let o=0,a=qv.length;o<a;o++){const l=qv[o];l.instanceId=s,l.object=this,t.push(l)}qv.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Qd(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const i=t.morphTargetInfluences,r=i.length+1;this.morphTexture===null&&(this.morphTexture=new xa(new Float32Array(r*this.count),r,this.count,a0,Ci));const s=this.morphTexture.source.data.data;let o=0;for(let u=0;u<i.length;u++)o+=i[u];const a=this.geometry.morphTargetsRelative?1:1-o,l=r*e;s[l]=a,s.set(i,l+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const Ow=new J,mV=new J,gV=new wn;class jl{constructor(e=new J(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=Ow.subVectors(i,t).cross(mV.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(Ow),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||gV.getNormalMatrix(e),r=this.coplanarPoint(Ow).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const fd=new _r,Zv=new J;class Mp{constructor(e=new jl,t=new jl,i=new jl,r=new jl,s=new jl,o=new jl){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=Lo){const i=this.planes,r=e.elements,s=r[0],o=r[1],a=r[2],l=r[3],u=r[4],h=r[5],f=r[6],g=r[7],v=r[8],x=r[9],S=r[10],w=r[11],_=r[12],b=r[13],M=r[14],T=r[15];if(i[0].setComponents(l-s,g-u,w-v,T-_).normalize(),i[1].setComponents(l+s,g+u,w+v,T+_).normalize(),i[2].setComponents(l+o,g+h,w+x,T+b).normalize(),i[3].setComponents(l-o,g-h,w-x,T-b).normalize(),i[4].setComponents(l-a,g-f,w-S,T-M).normalize(),t===Lo)i[5].setComponents(l+a,g+f,w+S,T+M).normalize();else if(t===Hg)i[5].setComponents(a,f,S,M).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),fd.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),fd.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(fd)}intersectsSprite(e){return fd.center.set(0,0,0),fd.radius=.7071067811865476,fd.applyMatrix4(e.matrixWorld),this.intersectsSphere(fd)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(Zv.x=r.normal.x>0?e.max.x:e.min.x,Zv.y=r.normal.y>0?e.max.y:e.min.y,Zv.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Zv)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const za=new Jt,Ha=new Mp;class F_{constructor(){this.coordinateSystem=Lo}intersectsObject(e,t){if(!t.isArrayCamera||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(za.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Ha.setFromProjectionMatrix(za,this.coordinateSystem),Ha.intersectsObject(e))return!0}return!1}intersectsSprite(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(za.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Ha.setFromProjectionMatrix(za,this.coordinateSystem),Ha.intersectsSprite(e))return!0}return!1}intersectsSphere(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(za.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Ha.setFromProjectionMatrix(za,this.coordinateSystem),Ha.intersectsSphere(e))return!0}return!1}intersectsBox(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(za.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Ha.setFromProjectionMatrix(za,this.coordinateSystem),Ha.intersectsBox(e))return!0}return!1}containsPoint(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(za.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Ha.setFromProjectionMatrix(za,this.coordinateSystem),Ha.containsPoint(e))return!0}return!1}clone(){return new F_}}function Nw(n,e){return n-e}function vV(n,e){return n.z-e.z}function yV(n,e){return e.z-n.z}class xV{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,i,r){const s=this.pool,o=this.list;this.index>=s.length&&s.push({start:-1,count:-1,z:-1,index:-1});const a=s[this.index];o.push(a),this.index++,a.start=e,a.count=t,a.z=i,a.index=r}reset(){this.list.length=0,this.index=0}}const Gs=new Jt,_V=new bt(1,1,1),A2=new Mp,wV=new F_,Qv=new Ir,pd=new _r,Vm=new J,b2=new J,SV=new J,Fw=new xV,ts=new Ti,ey=[];function EV(n,e,t=0){const i=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const r=n.count;for(let s=0;s<r;s++)for(let o=0;o<i;o++)e.setComponent(s+t,o,n.getComponent(s,o))}else e.array.set(n.array,t*i);e.needsUpdate=!0}function md(n,e){if(n.constructor!==e.constructor){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++)e[i]=n[i]}else{const t=Math.min(n.length,e.length);e.set(new n.constructor(n.buffer,0,t))}}class iL extends Ti{constructor(e,t,i=t*2,r){super(new yn,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=i,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),i=new xa(t,e,e,Qi,Ci);this._matricesTexture=i}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),i=new xa(t,e,e,l0,Za);this._indirectTexture=i}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),i=new xa(t,e,e,Qi,Ci);i.colorSpace=kn.workingColorSpace,this._colorsTexture=i}_initializeGeometry(e){const t=this.geometry,i=this._maxVertexCount,r=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const o=e.getAttribute(s),{array:a,itemSize:l,normalized:u}=o,h=new a.constructor(i*l),f=new jn(h,l,u);t.setAttribute(s,f)}if(e.getIndex()!==null){const s=i>65535?new Uint32Array(r):new Uint16Array(r);t.setIndex(new jn(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const i in t.attributes){if(!e.hasAttribute(i))throw new Error(`THREE.BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const r=e.getAttribute(i),s=t.getAttribute(i);if(r.itemSize!==s.itemSize||r.normalized!==s.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ir);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let i=0,r=t.length;i<r;i++){if(t[i].active===!1)continue;const s=t[i].geometryIndex;this.getMatrixAt(i,Gs),this.getBoundingBoxAt(s,Qv).applyMatrix4(Gs),e.union(Qv)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new _r);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let i=0,r=t.length;i<r;i++){if(t[i].active===!1)continue;const s=t[i].geometryIndex;this.getMatrixAt(i,Gs),this.getBoundingSphereAt(s,pd).applyMatrix4(Gs),e.union(pd)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const i={visible:!0,active:!0,geometryIndex:e};let r=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(Nw),r=this._availableInstanceIds.shift(),this._instanceInfo[r]=i):(r=this._instanceInfo.length,this._instanceInfo.push(i));const s=this._matricesTexture;Gs.identity().toArray(s.image.data,r*16),s.needsUpdate=!0;const o=this._colorsTexture;return o&&(_V.toArray(o.image.data,r*4),o.needsUpdate=!0),this._visibilityChanged=!0,r}addGeometry(e,t=-1,i=-1){this._initializeGeometry(e),this._validateGeometry(e);const r={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},s=this._geometryInfo;r.vertexStart=this._nextVertexStart,r.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const o=e.getIndex();if(o!==null&&(r.indexStart=this._nextIndexStart,r.reservedIndexCount=i===-1?o.count:i),r.indexStart!==-1&&r.indexStart+r.reservedIndexCount>this._maxIndexCount||r.vertexStart+r.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let l;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(Nw),l=this._availableGeometryIds.shift(),s[l]=r):(l=this._geometryCount,this._geometryCount++,s.push(r)),this.setGeometryAt(l,e),this._nextIndexStart=r.indexStart+r.reservedIndexCount,this._nextVertexStart=r.vertexStart+r.reservedVertexCount,l}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const i=this.geometry,r=i.getIndex()!==null,s=i.getIndex(),o=t.getIndex(),a=this._geometryInfo[e];if(r&&o.count>a.reservedIndexCount||t.attributes.position.count>a.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const l=a.vertexStart,u=a.reservedVertexCount;a.vertexCount=t.getAttribute("position").count;for(const h in i.attributes){const f=t.getAttribute(h),g=i.getAttribute(h);EV(f,g,l);const v=f.itemSize;for(let x=f.count,S=u;x<S;x++){const w=l+x;for(let _=0;_<v;_++)g.setComponent(w,_,0)}g.needsUpdate=!0,g.addUpdateRange(l*v,u*v)}if(r){const h=a.indexStart,f=a.reservedIndexCount;a.indexCount=t.getIndex().count;for(let g=0;g<o.count;g++)s.setX(h+g,l+o.getX(g));for(let g=o.count,v=f;g<v;g++)s.setX(h+g,l);s.needsUpdate=!0,s.addUpdateRange(h,a.reservedIndexCount)}return a.start=r?a.indexStart:a.vertexStart,a.count=r?a.indexCount:a.vertexCount,a.boundingBox=null,t.boundingBox!==null&&(a.boundingBox=t.boundingBox.clone()),a.boundingSphere=null,t.boundingSphere!==null&&(a.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const i=this._instanceInfo;for(let r=0,s=i.length;r<s;r++)i[r].active&&i[r].geometryIndex===e&&this.deleteInstance(r);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const i=this._geometryInfo,r=i.map((o,a)=>a).sort((o,a)=>i[o].vertexStart-i[a].vertexStart),s=this.geometry;for(let o=0,a=i.length;o<a;o++){const l=r[o],u=i[l];if(u.active!==!1){if(s.index!==null){if(u.indexStart!==t){const{indexStart:h,vertexStart:f,reservedIndexCount:g}=u,v=s.index,x=v.array,S=e-f;for(let w=h;w<h+g;w++)x[w]=x[w]+S;v.array.copyWithin(t,h,h+g),v.addUpdateRange(t,g),u.indexStart=t}t+=u.reservedIndexCount}if(u.vertexStart!==e){const{vertexStart:h,reservedVertexCount:f}=u,g=s.attributes;for(const v in g){const x=g[v],{array:S,itemSize:w}=x;S.copyWithin(e*w,h*w,(h+f)*w),x.addUpdateRange(e*w,f*w)}u.vertexStart=e}e+=u.reservedVertexCount,u.start=s.index?u.indexStart:u.vertexStart,this._nextIndexStart=s.index?u.indexStart+u.reservedIndexCount:0,this._nextVertexStart=u.vertexStart+u.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingBox===null){const s=new Ir,o=i.index,a=i.attributes.position;for(let l=r.start,u=r.start+r.count;l<u;l++){let h=l;o&&(h=o.getX(h)),s.expandByPoint(Vm.fromBufferAttribute(a,h))}r.boundingBox=s}return t.copy(r.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingSphere===null){const s=new _r;this.getBoundingBoxAt(e,Qv),Qv.getCenter(s.center);const o=i.index,a=i.attributes.position;let l=0;for(let u=r.start,h=r.start+r.count;u<h;u++){let f=u;o&&(f=o.getX(f)),Vm.fromBufferAttribute(a,f),l=Math.max(l,s.center.distanceToSquared(Vm))}s.radius=Math.sqrt(l),r.boundingSphere=s}return t.copy(r.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const i=this._matricesTexture,r=this._matricesTexture.image.data;return t.toArray(r,e*16),i.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const i=this._geometryInfo[e];return t.vertexStart=i.vertexStart,t.vertexCount=i.vertexCount,t.reservedVertexCount=i.reservedVertexCount,t.indexStart=i.indexStart,t.indexCount=i.indexCount,t.reservedIndexCount=i.reservedIndexCount,t.start=i.start,t.count=i.count,t}setInstanceCount(e){const t=this._availableInstanceIds,i=this._instanceInfo;for(t.sort(Nw);t[t.length-1]===i.length;)i.pop(),t.pop();if(e<i.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const r=new Int32Array(e),s=new Int32Array(e);md(this._multiDrawCounts,r),md(this._multiDrawStarts,s),this._multiDrawCounts=r,this._multiDrawStarts=s,this._maxInstanceCount=e;const o=this._indirectTexture,a=this._matricesTexture,l=this._colorsTexture;o.dispose(),this._initIndirectTexture(),md(o.image.data,this._indirectTexture.image.data),a.dispose(),this._initMatricesTexture(),md(a.image.data,this._matricesTexture.image.data),l&&(l.dispose(),this._initColorsTexture(),md(l.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const i=[...this._geometryInfo].filter(a=>a.active);if(Math.max(...i.map(a=>a.vertexStart+a.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...i.map(l=>l.indexStart+l.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const s=this.geometry;s.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new yn,this._initializeGeometry(s));const o=this.geometry;s.index&&md(s.index.array,o.index.array);for(const a in s.attributes)md(s.attributes[a].array,o.attributes[a].array)}raycast(e,t){const i=this._instanceInfo,r=this._geometryInfo,s=this.matrixWorld,o=this.geometry;ts.material=this.material,ts.geometry.index=o.index,ts.geometry.attributes=o.attributes,ts.geometry.boundingBox===null&&(ts.geometry.boundingBox=new Ir),ts.geometry.boundingSphere===null&&(ts.geometry.boundingSphere=new _r);for(let a=0,l=i.length;a<l;a++){if(!i[a].visible||!i[a].active)continue;const u=i[a].geometryIndex,h=r[u];ts.geometry.setDrawRange(h.start,h.count),this.getMatrixAt(a,ts.matrixWorld).premultiply(s),this.getBoundingBoxAt(u,ts.geometry.boundingBox),this.getBoundingSphereAt(u,ts.geometry.boundingSphere),ts.raycast(e,ey);for(let f=0,g=ey.length;f<g;f++){const v=ey[f];v.object=this,v.batchId=a,t.push(v)}ey.length=0}ts.material=null,ts.geometry.index=null,ts.geometry.attributes={},ts.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,i,r,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=r.getIndex(),a=o===null?1:o.array.BYTES_PER_ELEMENT,l=this._instanceInfo,u=this._multiDrawStarts,h=this._multiDrawCounts,f=this._geometryInfo,g=this.perObjectFrustumCulled,v=this._indirectTexture,x=v.image.data,S=i.isArrayCamera?wV:A2;g&&!i.isArrayCamera&&(Gs.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),A2.setFromProjectionMatrix(Gs,e.coordinateSystem));let w=0;if(this.sortObjects){Gs.copy(this.matrixWorld).invert(),Vm.setFromMatrixPosition(i.matrixWorld).applyMatrix4(Gs),b2.set(0,0,-1).transformDirection(i.matrixWorld).transformDirection(Gs);for(let M=0,T=l.length;M<T;M++)if(l[M].visible&&l[M].active){const L=l[M].geometryIndex;this.getMatrixAt(M,Gs),this.getBoundingSphereAt(L,pd).applyMatrix4(Gs);let D=!1;if(g&&(D=!S.intersectsSphere(pd,i)),!D){const U=f[L],F=SV.subVectors(pd.center,Vm).dot(b2);Fw.push(U.start,U.count,F,M)}}const _=Fw.list,b=this.customSort;b===null?_.sort(s.transparent?yV:vV):b.call(this,_,i);for(let M=0,T=_.length;M<T;M++){const L=_[M];u[w]=L.start*a,h[w]=L.count,x[w]=L.index,w++}Fw.reset()}else for(let _=0,b=l.length;_<b;_++)if(l[_].visible&&l[_].active){const M=l[_].geometryIndex;let T=!1;if(g&&(this.getMatrixAt(_,Gs),this.getBoundingSphereAt(M,pd).applyMatrix4(Gs),T=!S.intersectsSphere(pd,i)),!T){const L=f[M];u[w]=L.start*a,h[w]=L.count,x[w]=_,w++}}v.needsUpdate=!0,this._multiDrawCount=w,this._visibilityChanged=!1}onBeforeShadow(e,t,i,r,s,o){this.onBeforeRender(e,null,r,s,o)}}class os extends wr{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new bt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Vx=new J,Gx=new J,M2=new Jt,Gm=new ah,ty=new _r,kw=new J,C2=new J;class sc extends Bn{constructor(e=new yn,t=new os){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)Vx.fromBufferAttribute(t,r-1),Gx.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=Vx.distanceTo(Gx);e.setAttribute("lineDistance",new Ht(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),ty.copy(i.boundingSphere),ty.applyMatrix4(r),ty.radius+=s,e.ray.intersectsSphere(ty)===!1)return;M2.copy(r).invert(),Gm.copy(e.ray).applyMatrix4(M2);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=this.isLineSegments?2:1,h=i.index,g=i.attributes.position;if(h!==null){const v=Math.max(0,o.start),x=Math.min(h.count,o.start+o.count);for(let S=v,w=x-1;S<w;S+=u){const _=h.getX(S),b=h.getX(S+1),M=ny(this,e,Gm,l,_,b,S);M&&t.push(M)}if(this.isLineLoop){const S=h.getX(x-1),w=h.getX(v),_=ny(this,e,Gm,l,S,w,x-1);_&&t.push(_)}}else{const v=Math.max(0,o.start),x=Math.min(g.count,o.start+o.count);for(let S=v,w=x-1;S<w;S+=u){const _=ny(this,e,Gm,l,S,S+1,S);_&&t.push(_)}if(this.isLineLoop){const S=ny(this,e,Gm,l,x-1,v,x-1);S&&t.push(S)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function ny(n,e,t,i,r,s,o){const a=n.geometry.attributes.position;if(Vx.fromBufferAttribute(a,r),Gx.fromBufferAttribute(a,s),t.distanceSqToSegment(Vx,Gx,kw,C2)>i)return;kw.applyMatrix4(n.matrixWorld);const u=e.ray.origin.distanceTo(kw);if(!(u<e.near||u>e.far))return{distance:u,point:C2.clone().applyMatrix4(n.matrixWorld),index:o,face:null,faceIndex:null,barycoord:null,object:n}}const T2=new J,R2=new J;class Sa extends sc{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)T2.fromBufferAttribute(t,r),R2.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+T2.distanceTo(R2);e.setAttribute("lineDistance",new Ht(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Mb extends sc{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class k_ extends wr{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new bt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const P2=new Jt,BE=new ah,iy=new _r,ry=new J;class Cb extends Bn{constructor(e=new yn,t=new k_){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),iy.copy(i.boundingSphere),iy.applyMatrix4(r),iy.radius+=s,e.ray.intersectsSphere(iy)===!1)return;P2.copy(r).invert(),BE.copy(e.ray).applyMatrix4(P2);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=i.index,f=i.attributes.position;if(u!==null){const g=Math.max(0,o.start),v=Math.min(u.count,o.start+o.count);for(let x=g,S=v;x<S;x++){const w=u.getX(x);ry.fromBufferAttribute(f,w),I2(ry,w,l,r,e,t,this)}}else{const g=Math.max(0,o.start),v=Math.min(f.count,o.start+o.count);for(let x=g,S=v;x<S;x++)ry.fromBufferAttribute(f,x),I2(ry,x,l,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function I2(n,e,t,i,r,s,o){const a=BE.distanceSqToPoint(n);if(a<t){const l=new J;BE.closestPointToPoint(n,l),l.applyMatrix4(i);const u=r.ray.origin.distanceTo(l);if(u<r.near||u>r.far)return;s.push({distance:u,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,faceIndex:null,barycoord:null,object:o})}}class rL extends qn{constructor(e,t,i,r,s=Gn,o=Gn,a,l,u){super(e,t,i,r,s,o,a,l,u),this.isVideoTexture=!0,this.generateMipmaps=!1;const h=this;function f(){h.needsUpdate=!0,e.requestVideoFrameCallback(f)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(f)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class AV extends rL{constructor(e,t,i,r,s,o,a,l){super({},e,t,i,r,s,o,a,l),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class bV extends qn{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=ur,this.minFilter=ur,this.generateMipmaps=!1,this.needsUpdate=!0}}class U_ extends qn{constructor(e,t,i,r,s,o,a,l,u,h,f,g){super(null,o,a,l,u,h,r,s,f,g),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class MV extends U_{constructor(e,t,i,r,s,o){super(e,t,i,s,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=Zi,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class CV extends U_{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,qa),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class TV extends qn{constructor(e,t,i,r,s,o,a,l,u){super(e,t,i,r,s,o,a,l,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}class p0 extends qn{constructor(e,t,i=Za,r,s,o,a=ur,l=ur,u,h=lp){if(h!==lp&&h!==cp)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");super(null,r,s,o,a,l,h,i,u),this.isDepthTexture=!0,this.image={width:e,height:t},this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new nu(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class RV extends p0{constructor(e=1,t=1,i=1){super(e,t),this.isDepthArrayTexture=!0,this.image={width:e,height:t,depth:i},this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class z_ extends yn{constructor(e=1,t=1,i=4,r=8,s=1){super(),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:i,radialSegments:r,heightSegments:s},t=Math.max(0,t),i=Math.max(1,Math.floor(i)),r=Math.max(3,Math.floor(r)),s=Math.max(1,Math.floor(s));const o=[],a=[],l=[],u=[],h=t/2,f=Math.PI/2*e,g=t,v=2*f+g,x=i*2+s,S=r+1,w=new J,_=new J;for(let b=0;b<=x;b++){let M=0,T=0,L=0,D=0;if(b<=i){const k=b/i,N=k*Math.PI/2;T=-h-e*Math.cos(N),L=e*Math.sin(N),D=-e*Math.cos(N),M=k*f}else if(b<=i+s){const k=(b-i)/s;T=-h+k*t,L=e,D=0,M=f+k*g}else{const k=(b-i-s)/i,N=k*Math.PI/2;T=h+e*Math.sin(N),L=e*Math.cos(N),D=e*Math.sin(N),M=f+g+k*f}const U=Math.max(0,Math.min(1,M/v));let F=0;b===0?F=.5/r:b===x&&(F=-.5/r);for(let k=0;k<=r;k++){const N=k/r,V=N*Math.PI*2,Z=Math.sin(V),Q=Math.cos(V);_.x=-L*Q,_.y=T,_.z=L*Z,a.push(_.x,_.y,_.z),w.set(-L*Q,D,L*Z),w.normalize(),l.push(w.x,w.y,w.z),u.push(N+F,U)}if(b>0){const k=(b-1)*S;for(let N=0;N<r;N++){const V=k+N,Z=k+N+1,Q=b*S+N,le=b*S+N+1;o.push(V,Z,Q),o.push(Z,le,Q)}}}this.setIndex(o),this.setAttribute("position",new Ht(a,3)),this.setAttribute("normal",new Ht(l,3)),this.setAttribute("uv",new Ht(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new z_(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class H_ extends yn{constructor(e=1,t=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const s=[],o=[],a=[],l=[],u=new J,h=new Xe;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let f=0,g=3;f<=t;f++,g+=3){const v=i+f/t*r;u.x=e*Math.cos(v),u.y=e*Math.sin(v),o.push(u.x,u.y,u.z),a.push(0,0,1),h.x=(o[g]/e+1)/2,h.y=(o[g+1]/e+1)/2,l.push(h.x,h.y)}for(let f=1;f<=t;f++)s.push(f,f+1,0);this.setIndex(s),this.setAttribute("position",new Ht(o,3)),this.setAttribute("normal",new Ht(a,3)),this.setAttribute("uv",new Ht(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new H_(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class m0 extends yn{constructor(e=1,t=1,i=1,r=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const u=this;r=Math.floor(r),s=Math.floor(s);const h=[],f=[],g=[],v=[];let x=0;const S=[],w=i/2;let _=0;b(),o===!1&&(e>0&&M(!0),t>0&&M(!1)),this.setIndex(h),this.setAttribute("position",new Ht(f,3)),this.setAttribute("normal",new Ht(g,3)),this.setAttribute("uv",new Ht(v,2));function b(){const T=new J,L=new J;let D=0;const U=(t-e)/i;for(let F=0;F<=s;F++){const k=[],N=F/s,V=N*(t-e)+e;for(let Z=0;Z<=r;Z++){const Q=Z/r,le=Q*l+a,me=Math.sin(le),fe=Math.cos(le);L.x=V*me,L.y=-N*i+w,L.z=V*fe,f.push(L.x,L.y,L.z),T.set(me,U,fe).normalize(),g.push(T.x,T.y,T.z),v.push(Q,1-N),k.push(x++)}S.push(k)}for(let F=0;F<r;F++)for(let k=0;k<s;k++){const N=S[k][F],V=S[k+1][F],Z=S[k+1][F+1],Q=S[k][F+1];(e>0||k!==0)&&(h.push(N,V,Q),D+=3),(t>0||k!==s-1)&&(h.push(V,Z,Q),D+=3)}u.addGroup(_,D,0),_+=D}function M(T){const L=x,D=new Xe,U=new J;let F=0;const k=T===!0?e:t,N=T===!0?1:-1;for(let Z=1;Z<=r;Z++)f.push(0,w*N,0),g.push(0,N,0),v.push(.5,.5),x++;const V=x;for(let Z=0;Z<=r;Z++){const le=Z/r*l+a,me=Math.cos(le),fe=Math.sin(le);U.x=k*fe,U.y=w*N,U.z=k*me,f.push(U.x,U.y,U.z),g.push(0,N,0),D.x=me*.5+.5,D.y=fe*.5*N+.5,v.push(D.x,D.y),x++}for(let Z=0;Z<r;Z++){const Q=L+Z,le=V+Z;T===!0?h.push(le,le+1,Q):h.push(le+1,le,Q),F+=3}u.addGroup(_,F,T===!0?1:2),_+=F}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new m0(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class g0 extends m0{constructor(e=1,t=1,i=32,r=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,i,r,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new g0(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class wu extends yn{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const s=[],o=[];a(r),u(i),h(),this.setAttribute("position",new Ht(s,3)),this.setAttribute("normal",new Ht(s.slice(),3)),this.setAttribute("uv",new Ht(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function a(b){const M=new J,T=new J,L=new J;for(let D=0;D<t.length;D+=3)v(t[D+0],M),v(t[D+1],T),v(t[D+2],L),l(M,T,L,b)}function l(b,M,T,L){const D=L+1,U=[];for(let F=0;F<=D;F++){U[F]=[];const k=b.clone().lerp(T,F/D),N=M.clone().lerp(T,F/D),V=D-F;for(let Z=0;Z<=V;Z++)Z===0&&F===D?U[F][Z]=k:U[F][Z]=k.clone().lerp(N,Z/V)}for(let F=0;F<D;F++)for(let k=0;k<2*(D-F)-1;k++){const N=Math.floor(k/2);k%2===0?(g(U[F][N+1]),g(U[F+1][N]),g(U[F][N])):(g(U[F][N+1]),g(U[F+1][N+1]),g(U[F+1][N]))}}function u(b){const M=new J;for(let T=0;T<s.length;T+=3)M.x=s[T+0],M.y=s[T+1],M.z=s[T+2],M.normalize().multiplyScalar(b),s[T+0]=M.x,s[T+1]=M.y,s[T+2]=M.z}function h(){const b=new J;for(let M=0;M<s.length;M+=3){b.x=s[M+0],b.y=s[M+1],b.z=s[M+2];const T=w(b)/2/Math.PI+.5,L=_(b)/Math.PI+.5;o.push(T,1-L)}x(),f()}function f(){for(let b=0;b<o.length;b+=6){const M=o[b+0],T=o[b+2],L=o[b+4],D=Math.max(M,T,L),U=Math.min(M,T,L);D>.9&&U<.1&&(M<.2&&(o[b+0]+=1),T<.2&&(o[b+2]+=1),L<.2&&(o[b+4]+=1))}}function g(b){s.push(b.x,b.y,b.z)}function v(b,M){const T=b*3;M.x=e[T+0],M.y=e[T+1],M.z=e[T+2]}function x(){const b=new J,M=new J,T=new J,L=new J,D=new Xe,U=new Xe,F=new Xe;for(let k=0,N=0;k<s.length;k+=9,N+=6){b.set(s[k+0],s[k+1],s[k+2]),M.set(s[k+3],s[k+4],s[k+5]),T.set(s[k+6],s[k+7],s[k+8]),D.set(o[N+0],o[N+1]),U.set(o[N+2],o[N+3]),F.set(o[N+4],o[N+5]),L.copy(b).add(M).add(T).divideScalar(3);const V=w(L);S(D,N+0,b,V),S(U,N+2,M,V),S(F,N+4,T,V)}}function S(b,M,T,L){L<0&&b.x===1&&(o[M]=b.x-1),T.x===0&&T.z===0&&(o[M]=L/2/Math.PI+.5)}function w(b){return Math.atan2(b.z,-b.x)}function _(b){return Math.atan2(-b.y,Math.sqrt(b.x*b.x+b.z*b.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new wu(e.vertices,e.indices,e.radius,e.details)}}class V_ extends wu{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new V_(e.radius,e.detail)}}const sy=new J,oy=new J,Uw=new J,ay=new Xs;class sL extends yn{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos($d*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,u=[0,0,0],h=["a","b","c"],f=new Array(3),g={},v=[];for(let x=0;x<l;x+=3){o?(u[0]=o.getX(x),u[1]=o.getX(x+1),u[2]=o.getX(x+2)):(u[0]=x,u[1]=x+1,u[2]=x+2);const{a:S,b:w,c:_}=ay;if(S.fromBufferAttribute(a,u[0]),w.fromBufferAttribute(a,u[1]),_.fromBufferAttribute(a,u[2]),ay.getNormal(Uw),f[0]=`${Math.round(S.x*r)},${Math.round(S.y*r)},${Math.round(S.z*r)}`,f[1]=`${Math.round(w.x*r)},${Math.round(w.y*r)},${Math.round(w.z*r)}`,f[2]=`${Math.round(_.x*r)},${Math.round(_.y*r)},${Math.round(_.z*r)}`,!(f[0]===f[1]||f[1]===f[2]||f[2]===f[0]))for(let b=0;b<3;b++){const M=(b+1)%3,T=f[b],L=f[M],D=ay[h[b]],U=ay[h[M]],F=`${T}_${L}`,k=`${L}_${T}`;k in g&&g[k]?(Uw.dot(g[k].normal)<=s&&(v.push(D.x,D.y,D.z),v.push(U.x,U.y,U.z)),g[k]=null):F in g||(g[F]={index0:u[b],index1:u[M],normal:Uw.clone()})}}for(const x in g)if(g[x]){const{index0:S,index1:w}=g[x];sy.fromBufferAttribute(a,S),oy.fromBufferAttribute(a,w),v.push(sy.x,sy.y,sy.z),v.push(oy.x,oy.y,oy.z)}this.setAttribute("position",new Ht(v,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Ea{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const i=this.getLengths();let r=0;const s=i.length;let o;t?o=t:o=e*i[s-1];let a=0,l=s-1,u;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),u=i[r]-o,u<0)a=r+1;else if(u>0)l=r-1;else{l=r;break}if(r=l,i[r]===o)return r/(s-1);const h=i[r],g=i[r+1]-h,v=(o-h)/g;return(r+v)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=t||(o.isVector2?new Xe:new J);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t=!1){const i=new J,r=[],s=[],o=[],a=new J,l=new Jt;for(let v=0;v<=e;v++){const x=v/e;r[v]=this.getTangentAt(x,new J)}s[0]=new J,o[0]=new J;let u=Number.MAX_VALUE;const h=Math.abs(r[0].x),f=Math.abs(r[0].y),g=Math.abs(r[0].z);h<=u&&(u=h,i.set(1,0,0)),f<=u&&(u=f,i.set(0,1,0)),g<=u&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let v=1;v<=e;v++){if(s[v]=s[v-1].clone(),o[v]=o[v-1].clone(),a.crossVectors(r[v-1],r[v]),a.length()>Number.EPSILON){a.normalize();const x=Math.acos(vn(r[v-1].dot(r[v]),-1,1));s[v].applyMatrix4(l.makeRotationAxis(a,x))}o[v].crossVectors(r[v],s[v])}if(t===!0){let v=Math.acos(vn(s[0].dot(s[e]),-1,1));v/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(v=-v);for(let x=1;x<=e;x++)s[x].applyMatrix4(l.makeRotationAxis(r[x],v*x)),o[x].crossVectors(r[x],s[x])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class G_ extends Ea{constructor(e=0,t=0,i=1,r=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t=new Xe){const i=t,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const h=Math.cos(this.aRotation),f=Math.sin(this.aRotation),g=l-this.aX,v=u-this.aY;l=g*h-v*f+this.aX,u=g*f+v*h+this.aY}return i.set(l,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class oL extends G_{constructor(e,t,i,r,s,o){super(e,t,i,i,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function Tb(){let n=0,e=0,t=0,i=0;function r(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,i=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,u){r(o,a,u*(a-s),u*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,u,h,f){let g=(o-s)/u-(a-s)/(u+h)+(a-o)/h,v=(a-o)/h-(l-o)/(h+f)+(l-a)/f;g*=h,v*=h,r(o,a,g,v)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+i*a}}}const ly=new J,zw=new Tb,Hw=new Tb,Vw=new Tb;class aL extends Ea{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new J){const i=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let u,h;this.closed||a>0?u=r[(a-1)%s]:(ly.subVectors(r[0],r[1]).add(r[0]),u=ly);const f=r[a%s],g=r[(a+1)%s];if(this.closed||a+2<s?h=r[(a+2)%s]:(ly.subVectors(r[s-1],r[s-2]).add(r[s-1]),h=ly),this.curveType==="centripetal"||this.curveType==="chordal"){const v=this.curveType==="chordal"?.5:.25;let x=Math.pow(u.distanceToSquared(f),v),S=Math.pow(f.distanceToSquared(g),v),w=Math.pow(g.distanceToSquared(h),v);S<1e-4&&(S=1),x<1e-4&&(x=S),w<1e-4&&(w=S),zw.initNonuniformCatmullRom(u.x,f.x,g.x,h.x,x,S,w),Hw.initNonuniformCatmullRom(u.y,f.y,g.y,h.y,x,S,w),Vw.initNonuniformCatmullRom(u.z,f.z,g.z,h.z,x,S,w)}else this.curveType==="catmullrom"&&(zw.initCatmullRom(u.x,f.x,g.x,h.x,this.tension),Hw.initCatmullRom(u.y,f.y,g.y,h.y,this.tension),Vw.initCatmullRom(u.z,f.z,g.z,h.z,this.tension));return i.set(zw.calc(l),Hw.calc(l),Vw.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new J().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function D2(n,e,t,i,r){const s=(i-e)*.5,o=(r-t)*.5,a=n*n,l=n*a;return(2*t-2*i+s+o)*l+(-3*t+3*i-2*s-o)*a+s*n+t}function PV(n,e){const t=1-n;return t*t*e}function IV(n,e){return 2*(1-n)*n*e}function DV(n,e){return n*n*e}function Sg(n,e,t,i){return PV(n,e)+IV(n,t)+DV(n,i)}function BV(n,e){const t=1-n;return t*t*t*e}function LV(n,e){const t=1-n;return 3*t*t*n*e}function OV(n,e){return 3*(1-n)*n*n*e}function NV(n,e){return n*n*n*e}function Eg(n,e,t,i,r){return BV(n,e)+LV(n,t)+OV(n,i)+NV(n,r)}class Rb extends Ea{constructor(e=new Xe,t=new Xe,i=new Xe,r=new Xe){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new Xe){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(Eg(e,r.x,s.x,o.x,a.x),Eg(e,r.y,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class lL extends Ea{constructor(e=new J,t=new J,i=new J,r=new J){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new J){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(Eg(e,r.x,s.x,o.x,a.x),Eg(e,r.y,s.y,o.y,a.y),Eg(e,r.z,s.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Pb extends Ea{constructor(e=new Xe,t=new Xe){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Xe){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Xe){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class cL extends Ea{constructor(e=new J,t=new J){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new J){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new J){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Ib extends Ea{constructor(e=new Xe,t=new Xe,i=new Xe){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Xe){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(Sg(e,r.x,s.x,o.x),Sg(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Db extends Ea{constructor(e=new J,t=new J,i=new J){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new J){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(Sg(e,r.x,s.x,o.x),Sg(e,r.y,s.y,o.y),Sg(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Bb extends Ea{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Xe){const i=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,l=r[o===0?o:o-1],u=r[o],h=r[o>r.length-2?r.length-1:o+1],f=r[o>r.length-3?r.length-1:o+2];return i.set(D2(a,l.x,u.x,h.x,f.x),D2(a,l.y,u.y,h.y,f.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new Xe().fromArray(r))}return this}}var jx=Object.freeze({__proto__:null,ArcCurve:oL,CatmullRomCurve3:aL,CubicBezierCurve:Rb,CubicBezierCurve3:lL,EllipseCurve:G_,LineCurve:Pb,LineCurve3:cL,QuadraticBezierCurve:Ib,QuadraticBezierCurve3:Db,SplineCurve:Bb});class uL extends Ea{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new jx[i](t,e))}return this}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const o=r[s]-i,a=this.curves[s],l=a.getLength(),u=l===0?0:1-o/l;return a.getPointAt(u,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let u=0;u<l.length;u++){const h=l[u];i&&i.equals(h)||(t.push(h),i=h)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new jx[r.type]().fromJSON(r))}return this}}class Wx extends uL{constructor(e){super(),this.type="Path",this.currentPoint=new Xe,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new Pb(this.currentPoint.clone(),new Xe(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new Ib(this.currentPoint.clone(),new Xe(e,t),new Xe(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,o){const a=new Rb(this.currentPoint.clone(),new Xe(e,t),new Xe(i,r),new Xe(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new Bb(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,i,r,s,o),this}absarc(e,t,i,r,s,o){return this.absellipse(e,t,i,i,r,s,o),this}ellipse(e,t,i,r,s,o,a,l){const u=this.currentPoint.x,h=this.currentPoint.y;return this.absellipse(e+u,t+h,i,r,s,o,a,l),this}absellipse(e,t,i,r,s,o,a,l){const u=new G_(e,t,i,r,s,o,a,l);if(this.curves.length>0){const f=u.getPoint(0);f.equals(this.currentPoint)||this.lineTo(f.x,f.y)}this.curves.push(u);const h=u.getPoint(1);return this.currentPoint.copy(h),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Kd extends Wx{constructor(e){super(e),this.uuid=uo(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new Wx().fromJSON(r))}return this}}function FV(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=dL(n,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,u;if(i&&(s=VV(n,e,s,t)),n.length>80*t){a=1/0,l=1/0;let h=-1/0,f=-1/0;for(let g=t;g<r;g+=t){const v=n[g],x=n[g+1];v<a&&(a=v),x<l&&(l=x),v>h&&(h=v),x>f&&(f=x)}u=Math.max(h-a,f-l),u=u!==0?32767/u:0}return Gg(s,o,t,a,l,u,0),o}function dL(n,e,t,i,r){let s;if(r===QV(n,e,t,i)>0)for(let o=e;o<t;o+=i)s=B2(o/i|0,n[o],n[o+1],s);else for(let o=t-i;o>=e;o-=i)s=B2(o/i|0,n[o],n[o+1],s);return s&&pp(s,s.next)&&(Wg(s),s=s.next),s}function eh(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(pp(t,t.next)||Fi(t.prev,t,t.next)===0)){if(Wg(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function Gg(n,e,t,i,r,s,o){if(!n)return;!o&&s&&XV(n,i,r,s);let a=n;for(;n.prev!==n.next;){const l=n.prev,u=n.next;if(s?UV(n,i,r,s):kV(n)){e.push(l.i,n.i,u.i),Wg(n),n=u.next,a=u.next;continue}if(n=u,n===a){o?o===1?(n=zV(eh(n),e),Gg(n,e,t,i,r,s,2)):o===2&&HV(n,e,t,i,r,s):Gg(eh(n),e,t,i,r,s,1);break}}}function kV(n){const e=n.prev,t=n,i=n.next;if(Fi(e,t,i)>=0)return!1;const r=e.x,s=t.x,o=i.x,a=e.y,l=t.y,u=i.y,h=Math.min(r,s,o),f=Math.min(a,l,u),g=Math.max(r,s,o),v=Math.max(a,l,u);let x=i.next;for(;x!==e;){if(x.x>=h&&x.x<=g&&x.y>=f&&x.y<=v&&ag(r,a,s,l,o,u,x.x,x.y)&&Fi(x.prev,x,x.next)>=0)return!1;x=x.next}return!0}function UV(n,e,t,i){const r=n.prev,s=n,o=n.next;if(Fi(r,s,o)>=0)return!1;const a=r.x,l=s.x,u=o.x,h=r.y,f=s.y,g=o.y,v=Math.min(a,l,u),x=Math.min(h,f,g),S=Math.max(a,l,u),w=Math.max(h,f,g),_=LE(v,x,e,t,i),b=LE(S,w,e,t,i);let M=n.prevZ,T=n.nextZ;for(;M&&M.z>=_&&T&&T.z<=b;){if(M.x>=v&&M.x<=S&&M.y>=x&&M.y<=w&&M!==r&&M!==o&&ag(a,h,l,f,u,g,M.x,M.y)&&Fi(M.prev,M,M.next)>=0||(M=M.prevZ,T.x>=v&&T.x<=S&&T.y>=x&&T.y<=w&&T!==r&&T!==o&&ag(a,h,l,f,u,g,T.x,T.y)&&Fi(T.prev,T,T.next)>=0))return!1;T=T.nextZ}for(;M&&M.z>=_;){if(M.x>=v&&M.x<=S&&M.y>=x&&M.y<=w&&M!==r&&M!==o&&ag(a,h,l,f,u,g,M.x,M.y)&&Fi(M.prev,M,M.next)>=0)return!1;M=M.prevZ}for(;T&&T.z<=b;){if(T.x>=v&&T.x<=S&&T.y>=x&&T.y<=w&&T!==r&&T!==o&&ag(a,h,l,f,u,g,T.x,T.y)&&Fi(T.prev,T,T.next)>=0)return!1;T=T.nextZ}return!0}function zV(n,e){let t=n;do{const i=t.prev,r=t.next.next;!pp(i,r)&&fL(i,t,t.next,r)&&jg(i,r)&&jg(r,i)&&(e.push(i.i,t.i,r.i),Wg(t),Wg(t.next),t=n=r),t=t.next}while(t!==n);return eh(t)}function HV(n,e,t,i,r,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&JV(o,a)){let l=pL(o,a);o=eh(o,o.next),l=eh(l,l.next),Gg(o,e,t,i,r,s,0),Gg(l,e,t,i,r,s,0);return}a=a.next}o=o.next}while(o!==n)}function VV(n,e,t,i){const r=[];for(let s=0,o=e.length;s<o;s++){const a=e[s]*i,l=s<o-1?e[s+1]*i:n.length,u=dL(n,a,l,i,!1);u===u.next&&(u.steiner=!0),r.push(KV(u))}r.sort(GV);for(let s=0;s<r.length;s++)t=jV(r[s],t);return t}function GV(n,e){let t=n.x-e.x;if(t===0&&(t=n.y-e.y,t===0)){const i=(n.next.y-n.y)/(n.next.x-n.x),r=(e.next.y-e.y)/(e.next.x-e.x);t=i-r}return t}function jV(n,e){const t=WV(n,e);if(!t)return e;const i=pL(t,n);return eh(i,i.next),eh(t,t.next)}function WV(n,e){let t=e;const i=n.x,r=n.y;let s=-1/0,o;if(pp(n,t))return t;do{if(pp(n,t.next))return t.next;if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){const f=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(f<=i&&f>s&&(s=f,o=t.x<t.next.x?t:t.next,f===i))return o}t=t.next}while(t!==e);if(!o)return null;const a=o,l=o.x,u=o.y;let h=1/0;t=o;do{if(i>=t.x&&t.x>=l&&i!==t.x&&hL(r<u?i:s,r,l,u,r<u?s:i,r,t.x,t.y)){const f=Math.abs(r-t.y)/(i-t.x);jg(t,n)&&(f<h||f===h&&(t.x>o.x||t.x===o.x&&$V(o,t)))&&(o=t,h=f)}t=t.next}while(t!==a);return o}function $V(n,e){return Fi(n.prev,n,e.prev)<0&&Fi(e.next,n,n.next)<0}function XV(n,e,t,i){let r=n;do r.z===0&&(r.z=LE(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,YV(r)}function YV(n){let e,t=1;do{let i=n,r;n=null;let s=null;for(e=0;i;){e++;let o=i,a=0;for(let u=0;u<t&&(a++,o=o.nextZ,!!o);u++);let l=t;for(;a>0||l>0&&o;)a!==0&&(l===0||!o||i.z<=o.z)?(r=i,i=i.nextZ,a--):(r=o,o=o.nextZ,l--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;i=o}s.nextZ=null,t*=2}while(e>1);return n}function LE(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function KV(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function hL(n,e,t,i,r,s,o,a){return(r-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(i-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(r-o)*(i-a)}function ag(n,e,t,i,r,s,o,a){return!(n===o&&e===a)&&hL(n,e,t,i,r,s,o,a)}function JV(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!qV(n,e)&&(jg(n,e)&&jg(e,n)&&ZV(n,e)&&(Fi(n.prev,n,e.prev)||Fi(n,e.prev,e))||pp(n,e)&&Fi(n.prev,n,n.next)>0&&Fi(e.prev,e,e.next)>0)}function Fi(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function pp(n,e){return n.x===e.x&&n.y===e.y}function fL(n,e,t,i){const r=uy(Fi(n,e,t)),s=uy(Fi(n,e,i)),o=uy(Fi(t,i,n)),a=uy(Fi(t,i,e));return!!(r!==s&&o!==a||r===0&&cy(n,t,e)||s===0&&cy(n,i,e)||o===0&&cy(t,n,i)||a===0&&cy(t,e,i))}function cy(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function uy(n){return n>0?1:n<0?-1:0}function qV(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&fL(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function jg(n,e){return Fi(n.prev,n,n.next)<0?Fi(n,e,n.next)>=0&&Fi(n,n.prev,e)>=0:Fi(n,e,n.prev)<0||Fi(n,n.next,e)<0}function ZV(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function pL(n,e){const t=OE(n.i,n.x,n.y),i=OE(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function B2(n,e,t,i){const r=OE(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Wg(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function OE(n,e,t){return{i:n,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function QV(n,e,t,i){let r=0;for(let s=e,o=t-i;s<t;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}class eG{static triangulate(e,t,i=2){return FV(e,t,i)}}class ya{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return ya.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];L2(e),O2(i,e);let o=e.length;t.forEach(L2);for(let l=0;l<t.length;l++)r.push(o),o+=t[l].length,O2(i,t[l]);const a=eG.triangulate(i,r);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function L2(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function O2(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class j_ extends yn{constructor(e=new Kd([new Xe(.5,.5),new Xe(-.5,.5),new Xe(-.5,-.5),new Xe(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let a=0,l=e.length;a<l;a++){const u=e[a];o(u)}this.setAttribute("position",new Ht(r,3)),this.setAttribute("uv",new Ht(s,2)),this.computeVertexNormals();function o(a){const l=[],u=t.curveSegments!==void 0?t.curveSegments:12,h=t.steps!==void 0?t.steps:1,f=t.depth!==void 0?t.depth:1;let g=t.bevelEnabled!==void 0?t.bevelEnabled:!0,v=t.bevelThickness!==void 0?t.bevelThickness:.2,x=t.bevelSize!==void 0?t.bevelSize:v-.1,S=t.bevelOffset!==void 0?t.bevelOffset:0,w=t.bevelSegments!==void 0?t.bevelSegments:3;const _=t.extrudePath,b=t.UVGenerator!==void 0?t.UVGenerator:tG;let M,T=!1,L,D,U,F;_&&(M=_.getSpacedPoints(h),T=!0,g=!1,L=_.computeFrenetFrames(h,!1),D=new J,U=new J,F=new J),g||(w=0,v=0,x=0,S=0);const k=a.extractPoints(u);let N=k.shape;const V=k.holes;if(!ya.isClockWise(N)){N=N.reverse();for(let q=0,at=V.length;q<at;q++){const Je=V[q];ya.isClockWise(Je)&&(V[q]=Je.reverse())}}function Q(q){const Je=10000000000000001e-36;let tt=q[0];for(let $e=1;$e<=q.length;$e++){const _t=$e%q.length,Ye=q[_t],K=Ye.x-tt.x,j=Ye.y-tt.y,ne=K*K+j*j,Se=Math.max(Math.abs(Ye.x),Math.abs(Ye.y),Math.abs(tt.x),Math.abs(tt.y)),ze=Je*Se*Se;if(ne<=ze){q.splice(_t,1),$e--;continue}tt=Ye}}Q(N),V.forEach(Q);const le=V.length,me=N;for(let q=0;q<le;q++){const at=V[q];N=N.concat(at)}function fe(q,at,Je){return at||console.error("THREE.ExtrudeGeometry: vec does not exist"),q.clone().addScaledVector(at,Je)}const xe=N.length;function X(q,at,Je){let tt,$e,_t;const Ye=q.x-at.x,K=q.y-at.y,j=Je.x-q.x,ne=Je.y-q.y,Se=Ye*Ye+K*K,ze=Ye*ne-K*j;if(Math.abs(ze)>Number.EPSILON){const Re=Math.sqrt(Se),mt=Math.sqrt(j*j+ne*ne),lt=at.x-K/Re,Dt=at.y+Ye/Re,Ft=Je.x-ne/mt,qe=Je.y+j/mt,wt=((Ft-lt)*ne-(qe-Dt)*j)/(Ye*ne-K*j);tt=lt+Ye*wt-q.x,$e=Dt+K*wt-q.y;const Lt=tt*tt+$e*$e;if(Lt<=2)return new Xe(tt,$e);_t=Math.sqrt(Lt/2)}else{let Re=!1;Ye>Number.EPSILON?j>Number.EPSILON&&(Re=!0):Ye<-Number.EPSILON?j<-Number.EPSILON&&(Re=!0):Math.sign(K)===Math.sign(ne)&&(Re=!0),Re?(tt=-K,$e=Ye,_t=Math.sqrt(Se)):(tt=Ye,$e=K,_t=Math.sqrt(Se/2))}return new Xe(tt/_t,$e/_t)}const de=[];for(let q=0,at=me.length,Je=at-1,tt=q+1;q<at;q++,Je++,tt++)Je===at&&(Je=0),tt===at&&(tt=0),de[q]=X(me[q],me[Je],me[tt]);const se=[];let Y,ge=de.concat();for(let q=0,at=le;q<at;q++){const Je=V[q];Y=[];for(let tt=0,$e=Je.length,_t=$e-1,Ye=tt+1;tt<$e;tt++,_t++,Ye++)_t===$e&&(_t=0),Ye===$e&&(Ye=0),Y[tt]=X(Je[tt],Je[_t],Je[Ye]);se.push(Y),ge=ge.concat(Y)}let Ve;if(w===0)Ve=ya.triangulateShape(me,V);else{const q=[],at=[];for(let Je=0;Je<w;Je++){const tt=Je/w,$e=v*Math.cos(tt*Math.PI/2),_t=x*Math.sin(tt*Math.PI/2)+S;for(let Ye=0,K=me.length;Ye<K;Ye++){const j=fe(me[Ye],de[Ye],_t);ft(j.x,j.y,-$e),tt===0&&q.push(j)}for(let Ye=0,K=le;Ye<K;Ye++){const j=V[Ye];Y=se[Ye];const ne=[];for(let Se=0,ze=j.length;Se<ze;Se++){const Re=fe(j[Se],Y[Se],_t);ft(Re.x,Re.y,-$e),tt===0&&ne.push(Re)}tt===0&&at.push(ne)}}Ve=ya.triangulateShape(q,at)}const we=Ve.length,Ne=x+S;for(let q=0;q<xe;q++){const at=g?fe(N[q],ge[q],Ne):N[q];T?(U.copy(L.normals[0]).multiplyScalar(at.x),D.copy(L.binormals[0]).multiplyScalar(at.y),F.copy(M[0]).add(U).add(D),ft(F.x,F.y,F.z)):ft(at.x,at.y,0)}for(let q=1;q<=h;q++)for(let at=0;at<xe;at++){const Je=g?fe(N[at],ge[at],Ne):N[at];T?(U.copy(L.normals[q]).multiplyScalar(Je.x),D.copy(L.binormals[q]).multiplyScalar(Je.y),F.copy(M[q]).add(U).add(D),ft(F.x,F.y,F.z)):ft(Je.x,Je.y,f/h*q)}for(let q=w-1;q>=0;q--){const at=q/w,Je=v*Math.cos(at*Math.PI/2),tt=x*Math.sin(at*Math.PI/2)+S;for(let $e=0,_t=me.length;$e<_t;$e++){const Ye=fe(me[$e],de[$e],tt);ft(Ye.x,Ye.y,f+Je)}for(let $e=0,_t=V.length;$e<_t;$e++){const Ye=V[$e];Y=se[$e];for(let K=0,j=Ye.length;K<j;K++){const ne=fe(Ye[K],Y[K],tt);T?ft(ne.x,ne.y+M[h-1].y,M[h-1].x+Je):ft(ne.x,ne.y,f+Je)}}}Le(),Ge();function Le(){const q=r.length/3;if(g){let at=0,Je=xe*at;for(let tt=0;tt<we;tt++){const $e=Ve[tt];yt($e[2]+Je,$e[1]+Je,$e[0]+Je)}at=h+w*2,Je=xe*at;for(let tt=0;tt<we;tt++){const $e=Ve[tt];yt($e[0]+Je,$e[1]+Je,$e[2]+Je)}}else{for(let at=0;at<we;at++){const Je=Ve[at];yt(Je[2],Je[1],Je[0])}for(let at=0;at<we;at++){const Je=Ve[at];yt(Je[0]+xe*h,Je[1]+xe*h,Je[2]+xe*h)}}i.addGroup(q,r.length/3-q,0)}function Ge(){const q=r.length/3;let at=0;et(me,at),at+=me.length;for(let Je=0,tt=V.length;Je<tt;Je++){const $e=V[Je];et($e,at),at+=$e.length}i.addGroup(q,r.length/3-q,1)}function et(q,at){let Je=q.length;for(;--Je>=0;){const tt=Je;let $e=Je-1;$e<0&&($e=q.length-1);for(let _t=0,Ye=h+w*2;_t<Ye;_t++){const K=xe*_t,j=xe*(_t+1),ne=at+tt+K,Se=at+$e+K,ze=at+$e+j,Re=at+tt+j;nn(ne,Se,ze,Re)}}}function ft(q,at,Je){l.push(q),l.push(at),l.push(Je)}function yt(q,at,Je){Xt(q),Xt(at),Xt(Je);const tt=r.length/3,$e=b.generateTopUV(i,r,tt-3,tt-2,tt-1);xt($e[0]),xt($e[1]),xt($e[2])}function nn(q,at,Je,tt){Xt(q),Xt(at),Xt(tt),Xt(at),Xt(Je),Xt(tt);const $e=r.length/3,_t=b.generateSideWallUV(i,r,$e-6,$e-3,$e-2,$e-1);xt(_t[0]),xt(_t[1]),xt(_t[3]),xt(_t[1]),xt(_t[2]),xt(_t[3])}function Xt(q){r.push(l[q*3+0]),r.push(l[q*3+1]),r.push(l[q*3+2])}function xt(q){s.push(q.x),s.push(q.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return nG(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];i.push(a)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new jx[r.type]().fromJSON(r)),new j_(i,e.options)}}const tG={generateTopUV:function(n,e,t,i,r){const s=e[t*3],o=e[t*3+1],a=e[i*3],l=e[i*3+1],u=e[r*3],h=e[r*3+1];return[new Xe(s,o),new Xe(a,l),new Xe(u,h)]},generateSideWallUV:function(n,e,t,i,r,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],u=e[i*3],h=e[i*3+1],f=e[i*3+2],g=e[r*3],v=e[r*3+1],x=e[r*3+2],S=e[s*3],w=e[s*3+1],_=e[s*3+2];return Math.abs(a-h)<Math.abs(o-u)?[new Xe(o,1-l),new Xe(u,1-f),new Xe(g,1-x),new Xe(S,1-_)]:[new Xe(a,1-l),new Xe(h,1-f),new Xe(v,1-x),new Xe(w,1-_)]}};function nG(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class v0 extends wu{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new v0(e.radius,e.detail)}}class W_ extends yn{constructor(e=[new Xe(0,-.5),new Xe(.5,0),new Xe(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=vn(r,0,Math.PI*2);const s=[],o=[],a=[],l=[],u=[],h=1/t,f=new J,g=new Xe,v=new J,x=new J,S=new J;let w=0,_=0;for(let b=0;b<=e.length-1;b++)switch(b){case 0:w=e[b+1].x-e[b].x,_=e[b+1].y-e[b].y,v.x=_*1,v.y=-w,v.z=_*0,S.copy(v),v.normalize(),l.push(v.x,v.y,v.z);break;case e.length-1:l.push(S.x,S.y,S.z);break;default:w=e[b+1].x-e[b].x,_=e[b+1].y-e[b].y,v.x=_*1,v.y=-w,v.z=_*0,x.copy(v),v.x+=S.x,v.y+=S.y,v.z+=S.z,v.normalize(),l.push(v.x,v.y,v.z),S.copy(x)}for(let b=0;b<=t;b++){const M=i+b*h*r,T=Math.sin(M),L=Math.cos(M);for(let D=0;D<=e.length-1;D++){f.x=e[D].x*T,f.y=e[D].y,f.z=e[D].x*L,o.push(f.x,f.y,f.z),g.x=b/t,g.y=D/(e.length-1),a.push(g.x,g.y);const U=l[3*D+0]*T,F=l[3*D+1],k=l[3*D+0]*L;u.push(U,F,k)}}for(let b=0;b<t;b++)for(let M=0;M<e.length-1;M++){const T=M+b*e.length,L=T,D=T+e.length,U=T+e.length+1,F=T+1;s.push(L,D,F),s.push(U,F,D)}this.setIndex(s),this.setAttribute("position",new Ht(o,3)),this.setAttribute("uv",new Ht(a,2)),this.setAttribute("normal",new Ht(u,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new W_(e.points,e.segments,e.phiStart,e.phiLength)}}class y0 extends wu{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new y0(e.radius,e.detail)}}class Su extends yn{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(i),l=Math.floor(r),u=a+1,h=l+1,f=e/a,g=t/l,v=[],x=[],S=[],w=[];for(let _=0;_<h;_++){const b=_*g-o;for(let M=0;M<u;M++){const T=M*f-s;x.push(T,-b,0),S.push(0,0,1),w.push(M/a),w.push(1-_/l)}}for(let _=0;_<l;_++)for(let b=0;b<a;b++){const M=b+u*_,T=b+u*(_+1),L=b+1+u*(_+1),D=b+1+u*_;v.push(M,T,D),v.push(T,L,D)}this.setIndex(v),this.setAttribute("position",new Ht(x,3)),this.setAttribute("normal",new Ht(S,3)),this.setAttribute("uv",new Ht(w,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Su(e.width,e.height,e.widthSegments,e.heightSegments)}}class $_ extends yn{constructor(e=.5,t=1,i=32,r=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:o},i=Math.max(3,i),r=Math.max(1,r);const a=[],l=[],u=[],h=[];let f=e;const g=(t-e)/r,v=new J,x=new Xe;for(let S=0;S<=r;S++){for(let w=0;w<=i;w++){const _=s+w/i*o;v.x=f*Math.cos(_),v.y=f*Math.sin(_),l.push(v.x,v.y,v.z),u.push(0,0,1),x.x=(v.x/t+1)/2,x.y=(v.y/t+1)/2,h.push(x.x,x.y)}f+=g}for(let S=0;S<r;S++){const w=S*(i+1);for(let _=0;_<i;_++){const b=_+w,M=b,T=b+i+1,L=b+i+2,D=b+1;a.push(M,T,D),a.push(T,L,D)}}this.setIndex(a),this.setAttribute("position",new Ht(l,3)),this.setAttribute("normal",new Ht(u,3)),this.setAttribute("uv",new Ht(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new $_(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class X_ extends yn{constructor(e=new Kd([new Xe(0,.5),new Xe(-.5,-.5),new Xe(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)u(e);else for(let h=0;h<e.length;h++)u(e[h]),this.addGroup(a,l,h),a+=l,l=0;this.setIndex(i),this.setAttribute("position",new Ht(r,3)),this.setAttribute("normal",new Ht(s,3)),this.setAttribute("uv",new Ht(o,2));function u(h){const f=r.length/3,g=h.extractPoints(t);let v=g.shape;const x=g.holes;ya.isClockWise(v)===!1&&(v=v.reverse());for(let w=0,_=x.length;w<_;w++){const b=x[w];ya.isClockWise(b)===!0&&(x[w]=b.reverse())}const S=ya.triangulateShape(v,x);for(let w=0,_=x.length;w<_;w++){const b=x[w];v=v.concat(b)}for(let w=0,_=v.length;w<_;w++){const b=v[w];r.push(b.x,b.y,0),s.push(0,0,1),o.push(b.x,b.y)}for(let w=0,_=S.length;w<_;w++){const b=S[w],M=b[0]+f,T=b[1]+f,L=b[2]+f;i.push(M,T,L),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return iG(t,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=t[e.shapes[r]];i.push(o)}return new X_(i,e.curveSegments)}}function iG(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class x0 extends yn{constructor(e=1,t=32,i=16,r=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const l=Math.min(o+a,Math.PI);let u=0;const h=[],f=new J,g=new J,v=[],x=[],S=[],w=[];for(let _=0;_<=i;_++){const b=[],M=_/i;let T=0;_===0&&o===0?T=.5/t:_===i&&l===Math.PI&&(T=-.5/t);for(let L=0;L<=t;L++){const D=L/t;f.x=-e*Math.cos(r+D*s)*Math.sin(o+M*a),f.y=e*Math.cos(o+M*a),f.z=e*Math.sin(r+D*s)*Math.sin(o+M*a),x.push(f.x,f.y,f.z),g.copy(f).normalize(),S.push(g.x,g.y,g.z),w.push(D+T,1-M),b.push(u++)}h.push(b)}for(let _=0;_<i;_++)for(let b=0;b<t;b++){const M=h[_][b+1],T=h[_][b],L=h[_+1][b],D=h[_+1][b+1];(_!==0||o>0)&&v.push(M,T,D),(_!==i-1||l<Math.PI)&&v.push(T,L,D)}this.setIndex(v),this.setAttribute("position",new Ht(x,3)),this.setAttribute("normal",new Ht(S,3)),this.setAttribute("uv",new Ht(w,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new x0(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Y_ extends wu{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Y_(e.radius,e.detail)}}class K_ extends yn{constructor(e=1,t=.4,i=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const o=[],a=[],l=[],u=[],h=new J,f=new J,g=new J;for(let v=0;v<=i;v++)for(let x=0;x<=r;x++){const S=x/r*s,w=v/i*Math.PI*2;f.x=(e+t*Math.cos(w))*Math.cos(S),f.y=(e+t*Math.cos(w))*Math.sin(S),f.z=t*Math.sin(w),a.push(f.x,f.y,f.z),h.x=e*Math.cos(S),h.y=e*Math.sin(S),g.subVectors(f,h).normalize(),l.push(g.x,g.y,g.z),u.push(x/r),u.push(v/i)}for(let v=1;v<=i;v++)for(let x=1;x<=r;x++){const S=(r+1)*v+x-1,w=(r+1)*(v-1)+x-1,_=(r+1)*(v-1)+x,b=(r+1)*v+x;o.push(S,w,b),o.push(w,_,b)}this.setIndex(o),this.setAttribute("position",new Ht(a,3)),this.setAttribute("normal",new Ht(l,3)),this.setAttribute("uv",new Ht(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new K_(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class J_ extends yn{constructor(e=1,t=.4,i=64,r=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:s,q:o},i=Math.floor(i),r=Math.floor(r);const a=[],l=[],u=[],h=[],f=new J,g=new J,v=new J,x=new J,S=new J,w=new J,_=new J;for(let M=0;M<=i;++M){const T=M/i*s*Math.PI*2;b(T,s,o,e,v),b(T+.01,s,o,e,x),w.subVectors(x,v),_.addVectors(x,v),S.crossVectors(w,_),_.crossVectors(S,w),S.normalize(),_.normalize();for(let L=0;L<=r;++L){const D=L/r*Math.PI*2,U=-t*Math.cos(D),F=t*Math.sin(D);f.x=v.x+(U*_.x+F*S.x),f.y=v.y+(U*_.y+F*S.y),f.z=v.z+(U*_.z+F*S.z),l.push(f.x,f.y,f.z),g.subVectors(f,v).normalize(),u.push(g.x,g.y,g.z),h.push(M/i),h.push(L/r)}}for(let M=1;M<=i;M++)for(let T=1;T<=r;T++){const L=(r+1)*(M-1)+(T-1),D=(r+1)*M+(T-1),U=(r+1)*M+T,F=(r+1)*(M-1)+T;a.push(L,D,F),a.push(D,U,F)}this.setIndex(a),this.setAttribute("position",new Ht(l,3)),this.setAttribute("normal",new Ht(u,3)),this.setAttribute("uv",new Ht(h,2));function b(M,T,L,D,U){const F=Math.cos(M),k=Math.sin(M),N=L/T*M,V=Math.cos(N);U.x=D*(2+V)*.5*F,U.y=D*(2+V)*k*.5,U.z=D*Math.sin(N)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new J_(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class q_ extends yn{constructor(e=new Db(new J(-1,-1,0),new J(-1,1,0),new J(1,1,0)),t=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new J,l=new J,u=new Xe;let h=new J;const f=[],g=[],v=[],x=[];S(),this.setIndex(x),this.setAttribute("position",new Ht(f,3)),this.setAttribute("normal",new Ht(g,3)),this.setAttribute("uv",new Ht(v,2));function S(){for(let M=0;M<t;M++)w(M);w(s===!1?t:0),b(),_()}function w(M){h=e.getPointAt(M/t,h);const T=o.normals[M],L=o.binormals[M];for(let D=0;D<=r;D++){const U=D/r*Math.PI*2,F=Math.sin(U),k=-Math.cos(U);l.x=k*T.x+F*L.x,l.y=k*T.y+F*L.y,l.z=k*T.z+F*L.z,l.normalize(),g.push(l.x,l.y,l.z),a.x=h.x+i*l.x,a.y=h.y+i*l.y,a.z=h.z+i*l.z,f.push(a.x,a.y,a.z)}}function _(){for(let M=1;M<=t;M++)for(let T=1;T<=r;T++){const L=(r+1)*(M-1)+(T-1),D=(r+1)*M+(T-1),U=(r+1)*M+T,F=(r+1)*(M-1)+T;x.push(L,D,F),x.push(D,U,F)}}function b(){for(let M=0;M<=t;M++)for(let T=0;T<=r;T++)u.x=M/t,u.y=T/r,v.push(u.x,u.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new q_(new jx[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class mL extends yn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new J,s=new J;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let u=0,h=l.length;u<h;++u){const f=l[u],g=f.start,v=f.count;for(let x=g,S=g+v;x<S;x+=3)for(let w=0;w<3;w++){const _=a.getX(x+w),b=a.getX(x+(w+1)%3);r.fromBufferAttribute(o,_),s.fromBufferAttribute(o,b),N2(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let u=0;u<3;u++){const h=3*a+u,f=3*a+(u+1)%3;r.fromBufferAttribute(o,h),s.fromBufferAttribute(o,f),N2(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new Ht(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function N2(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var F2=Object.freeze({__proto__:null,BoxGeometry:lh,CapsuleGeometry:z_,CircleGeometry:H_,ConeGeometry:g0,CylinderGeometry:m0,DodecahedronGeometry:V_,EdgesGeometry:sL,ExtrudeGeometry:j_,IcosahedronGeometry:v0,LatheGeometry:W_,OctahedronGeometry:y0,PlaneGeometry:Su,PolyhedronGeometry:wu,RingGeometry:$_,ShapeGeometry:X_,SphereGeometry:x0,TetrahedronGeometry:Y_,TorusGeometry:K_,TorusKnotGeometry:J_,TubeGeometry:q_,WireframeGeometry:mL});class gL extends wr{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new bt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class vL extends Ps{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class _0 extends wr{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new bt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new bt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=_u,this.normalScale=new Xe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ho,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Fo extends _0{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Xe(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return vn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new bt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new bt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new bt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class yL extends wr{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new bt(16777215),this.specular=new bt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new bt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=_u,this.normalScale=new Xe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ho,this.combine=s0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class xL extends wr{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new bt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new bt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=_u,this.normalScale=new Xe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class _L extends wr{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=_u,this.normalScale=new Xe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class Lb extends wr{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new bt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new bt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=_u,this.normalScale=new Xe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ho,this.combine=s0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Ob extends wr{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=kB,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Nb extends wr{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class wL extends wr{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new bt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=_u,this.normalScale=new Xe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class SL extends os{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Ud(n,e){return!n||n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function EL(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function AL(n){function e(r,s){return n[r]-n[s]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function NE(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const a=t[s]*e;for(let l=0;l!==e;++l)r[o++]=n[a+l]}return r}function Fb(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&&(e.push(s.time),t.push(...o)),s=n[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do o=s[i],o!==void 0&&(e.push(s.time),t.push(o)),s=n[r++];while(s!==void 0)}function rG(n,e,t,i,r=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const u=s.tracks[l],h=u.getValueSize(),f=[],g=[];for(let v=0;v<u.times.length;++v){const x=u.times[v]*r;if(!(x<t||x>=i)){f.push(u.times[v]);for(let S=0;S<h;++S)g.push(u.values[v*h+S])}}f.length!==0&&(u.times=Ud(f,u.times.constructor),u.values=Ud(g,u.values.constructor),o.push(u))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function sG(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,s=e/i;for(let o=0;o<r;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const u=n.tracks.find(function(_){return _.name===a.name&&_.ValueTypeName===l});if(u===void 0)continue;let h=0;const f=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=f/3);let g=0;const v=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(g=v/3);const x=a.times.length-1;let S;if(s<=a.times[0]){const _=h,b=f-h;S=a.values.slice(_,b)}else if(s>=a.times[x]){const _=x*f+h,b=_+f-h;S=a.values.slice(_,b)}else{const _=a.createInterpolant(),b=h,M=f-h;_.evaluate(s),S=_.resultBuffer.slice(b,M)}l==="quaternion"&&new xr().fromArray(S).normalize().conjugate().toArray(S);const w=u.times.length;for(let _=0;_<w;++_){const b=_*v+g;if(l==="quaternion")xr.multiplyQuaternionsFlat(u.values,b,S,0,u.values,b);else{const M=v-g*2;for(let T=0;T<M;++T)u.values[b+T]-=S[T]}}}return n.blendMode=mb,n}class oG{static convertArray(e,t){return Ud(e,t)}static isTypedArray(e){return EL(e)}static getKeyframeOrder(e){return AL(e)}static sortedArray(e,t,i){return NE(e,t,i)}static flattenJSON(e,t,i,r){Fb(e,t,i,r)}static subclip(e,t,i,r,s=30){return rG(e,t,i,r,s)}static makeClipAdditive(e,t=0,i=e,r=30){return sG(e,t,i,r)}}class Cp{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(r===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(i=2,s=a);for(let l=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0;break n}break e}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class bL extends Cp{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Nd,endingEnd:Nd}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(a===void 0)switch(this.getSettings_().endingStart){case Fd:s=e,a=2*t-i;break;case kg:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=i}if(l===void 0)switch(this.getSettings_().endingEnd){case Fd:o=e,l=2*i-t;break;case kg:o=1,l=i+r[1]-r[0];break;default:o=e-1,l=t}const u=(i-t)*.5,h=this.valueSize;this._weightPrev=u/(t-a),this._weightNext=u/(l-i),this._offsetPrev=s*h,this._offsetNext=o*h}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,h=this._offsetPrev,f=this._offsetNext,g=this._weightPrev,v=this._weightNext,x=(i-t)/(r-t),S=x*x,w=S*x,_=-g*w+2*g*S-g*x,b=(1+g)*w+(-1.5-2*g)*S+(-.5+g)*x+1,M=(-1-v)*w+(1.5+v)*S+.5*x,T=v*w-v*S;for(let L=0;L!==a;++L)s[L]=_*o[h+L]+b*o[u+L]+M*o[l+L]+T*o[f+L];return s}}class kb extends Cp{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,h=(i-t)/(r-t),f=1-h;for(let g=0;g!==a;++g)s[g]=o[u+g]*f+o[l+g]*h;return s}}class ML extends Cp{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class ko{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Ud(t,this.TimeBufferType),this.values=Ud(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:Ud(e.times,Array),values:Ud(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new ML(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new kb(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new bL(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case up:t=this.InterpolantFactoryMethodDiscrete;break;case dp:t=this.InterpolantFactoryMethodLinear;break;case Gy:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return up;case this.InterpolantFactoryMethodLinear:return dp;case this.InterpolantFactoryMethodSmooth:return Gy}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;o!==-1&&i[o]>t;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=i.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=i[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(r!==void 0&&EL(r))for(let a=0,l=r.length;a!==l;++a){const u=r[a];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,u),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===Gy,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const u=e[a],h=e[a+1];if(u!==h&&(a!==1||u!==e[0]))if(r)l=!0;else{const f=a*i,g=f-i,v=f+i;for(let x=0;x!==i;++x){const S=t[f+x];if(S!==t[g+x]||S!==t[v+x]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const f=a*i,g=o*i;for(let v=0;v!==i;++v)t[g+v]=t[f+v]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,l=o*i,u=0;u!==i;++u)t[l+u]=t[a+u];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}ko.prototype.ValueTypeName="";ko.prototype.TimeBufferType=Float32Array;ko.prototype.ValueBufferType=Float32Array;ko.prototype.DefaultInterpolation=dp;class ch extends ko{constructor(e,t,i){super(e,t,i)}}ch.prototype.ValueTypeName="bool";ch.prototype.ValueBufferType=Array;ch.prototype.DefaultInterpolation=up;ch.prototype.InterpolantFactoryMethodLinear=void 0;ch.prototype.InterpolantFactoryMethodSmooth=void 0;class Ub extends ko{constructor(e,t,i,r){super(e,t,i,r)}}Ub.prototype.ValueTypeName="color";class th extends ko{constructor(e,t,i,r){super(e,t,i,r)}}th.prototype.ValueTypeName="number";class CL extends Cp{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(i-t)/(r-t);let u=e*a;for(let h=u+a;u!==h;u+=4)xr.slerpFlat(s,0,o,u-a,o,u,l);return s}}class nh extends ko{constructor(e,t,i,r){super(e,t,i,r)}InterpolantFactoryMethodLinear(e){return new CL(this.times,this.values,this.getValueSize(),e)}}nh.prototype.ValueTypeName="quaternion";nh.prototype.InterpolantFactoryMethodSmooth=void 0;class uh extends ko{constructor(e,t,i){super(e,t,i)}}uh.prototype.ValueTypeName="string";uh.prototype.ValueBufferType=Array;uh.prototype.DefaultInterpolation=up;uh.prototype.InterpolantFactoryMethodLinear=void 0;uh.prototype.InterpolantFactoryMethodSmooth=void 0;class ih extends ko{constructor(e,t,i,r){super(e,t,i,r)}}ih.prototype.ValueTypeName="vector";class mp{constructor(e="",t=-1,i=[],r=I_){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=uo(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push(lG(i[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)t.push(ko.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],u=[];l.push((a+s-1)%s,a,(a+1)%s),u.push(0,1,0);const h=AL(l);l=NE(l,1,h),u=NE(u,1,h),!r&&l[0]===0&&(l.push(s),u.push(u[0])),o.push(new th(".morphTargetInfluences["+t[a].name+"]",l,u).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const u=e[a],h=u.name.match(s);if(h&&h.length>1){const f=h[1];let g=r[f];g||(r[f]=g=[]),g.push(u)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return o}static parseAnimation(e,t){if(console.warn("THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(f,g,v,x,S){if(v.length!==0){const w=[],_=[];Fb(v,w,_,x),w.length!==0&&S.push(new f(g,w,_))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const u=e.hierarchy||[];for(let f=0;f<u.length;f++){const g=u[f].keys;if(!(!g||g.length===0))if(g[0].morphTargets){const v={};let x;for(x=0;x<g.length;x++)if(g[x].morphTargets)for(let S=0;S<g[x].morphTargets.length;S++)v[g[x].morphTargets[S]]=-1;for(const S in v){const w=[],_=[];for(let b=0;b!==g[x].morphTargets.length;++b){const M=g[x];w.push(M.time),_.push(M.morphTarget===S?1:0)}r.push(new th(".morphTargetInfluence["+S+"]",w,_))}l=v.length*o}else{const v=".bones["+t[f].name+"]";i(ih,v+".position",g,"pos",r),i(nh,v+".quaternion",g,"rot",r),i(ih,v+".scale",g,"scl",r)}}return r.length===0?null:new this(s,l,r,a)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function aG(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return th;case"vector":case"vector2":case"vector3":case"vector4":return ih;case"color":return Ub;case"quaternion":return nh;case"bool":case"boolean":return ch;case"string":return uh}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function lG(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=aG(n.type);if(n.times===void 0){const t=[],i=[];Fb(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const ql={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class Z_{constructor(e,t,i){const r=this;let s=!1,o=0,a=0,l;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(h){a++,s===!1&&r.onStart!==void 0&&r.onStart(h,o,a),s=!0},this.itemEnd=function(h){o++,r.onProgress!==void 0&&r.onProgress(h,o,a),o===a&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(h){r.onError!==void 0&&r.onError(h)},this.resolveURL=function(h){return l?l(h):h},this.setURLModifier=function(h){return l=h,this},this.addHandler=function(h,f){return u.push(h,f),this},this.removeHandler=function(h){const f=u.indexOf(h);return f!==-1&&u.splice(f,2),this},this.getHandler=function(h){for(let f=0,g=u.length;f<g;f+=2){const v=u[f],x=u[f+1];if(v.global&&(v.lastIndex=0),v.test(h))return x}return null}}}const TL=new Z_;class jr{constructor(e){this.manager=e!==void 0?e:TL,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}jr.DEFAULT_MATERIAL_NAME="__DEFAULT";const Hl={};class cG extends Error{constructor(e,t){super(e),this.response=t}}class Gr extends jr{constructor(e){super(e),this.mimeType="",this.responseType=""}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=ql.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Hl[e]!==void 0){Hl[e].push({onLoad:t,onProgress:i,onError:r});return}Hl[e]=[],Hl[e].push({onLoad:t,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;const h=Hl[e],f=u.body.getReader(),g=u.headers.get("X-File-Size")||u.headers.get("Content-Length"),v=g?parseInt(g):0,x=v!==0;let S=0;const w=new ReadableStream({start(_){b();function b(){f.read().then(({done:M,value:T})=>{if(M)_.close();else{S+=T.byteLength;const L=new ProgressEvent("progress",{lengthComputable:x,loaded:S,total:v});for(let D=0,U=h.length;D<U;D++){const F=h[D];F.onProgress&&F.onProgress(L)}_.enqueue(T),b()}},M=>{_.error(M)})}}});return new Response(w)}else throw new cG(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(l){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(h=>new DOMParser().parseFromString(h,a));case"json":return u.json();default:if(a==="")return u.text();{const f=/charset="?([^;"\s]*)"?/i.exec(a),g=f&&f[1]?f[1].toLowerCase():void 0,v=new TextDecoder(g);return u.arrayBuffer().then(x=>v.decode(x))}}}).then(u=>{ql.add(e,u);const h=Hl[e];delete Hl[e];for(let f=0,g=h.length;f<g;f++){const v=h[f];v.onLoad&&v.onLoad(u)}}).catch(u=>{const h=Hl[e];if(h===void 0)throw this.manager.itemError(e),u;delete Hl[e];for(let f=0,g=h.length;f<g;f++){const v=h[f];v.onError&&v.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class uG extends jr{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Gr(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=[];for(let i=0;i<e.length;i++){const r=mp.parse(e[i]);t.push(r)}return t}}class dG extends jr{constructor(e){super(e)}load(e,t,i,r){const s=this,o=[],a=new U_,l=new Gr(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let u=0;function h(f){l.load(e[f],function(g){const v=s.parse(g,!0);o[f]={width:v.width,height:v.height,format:v.format,mipmaps:v.mipmaps},u+=1,u===6&&(v.mipmapCount===1&&(a.minFilter=Gn),a.image=o,a.format=v.format,a.needsUpdate=!0,t&&t(a))},i,r)}if(Array.isArray(e))for(let f=0,g=e.length;f<g;++f)h(f);else l.load(e,function(f){const g=s.parse(f,!0);if(g.isCubemap){const v=g.mipmaps.length/g.mipmapCount;for(let x=0;x<v;x++){o[x]={mipmaps:[]};for(let S=0;S<g.mipmapCount;S++)o[x].mipmaps.push(g.mipmaps[x*g.mipmapCount+S]),o[x].format=g.format,o[x].width=g.width,o[x].height=g.height}a.image=o}else a.image.width=g.width,a.image.height=g.height,a.mipmaps=g.mipmaps;g.mipmapCount===1&&(a.minFilter=Gn),a.format=g.format,a.needsUpdate=!0,t&&t(a)},i,r);return a}}class $g extends jr{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=ql.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=Vg("img");function l(){h(),ql.add(e,this),t&&t(this),s.manager.itemEnd(e)}function u(f){h(),r&&r(f),s.manager.itemError(e),s.manager.itemEnd(e)}function h(){a.removeEventListener("load",l,!1),a.removeEventListener("error",u,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class RL extends jr{constructor(e){super(e)}load(e,t,i,r){const s=new d0;s.colorSpace=As;const o=new $g(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(u){o.load(e[u],function(h){s.images[u]=h,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let u=0;u<e.length;++u)l(u);return s}}class zb extends jr{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new xa,a=new Gr(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){let u;try{u=s.parse(l)}catch(h){if(r!==void 0)r(h);else{console.error(h);return}}u.image!==void 0?o.image=u.image:u.data!==void 0&&(o.image.width=u.width,o.image.height=u.height,o.image.data=u.data),o.wrapS=u.wrapS!==void 0?u.wrapS:Zi,o.wrapT=u.wrapT!==void 0?u.wrapT:Zi,o.magFilter=u.magFilter!==void 0?u.magFilter:Gn,o.minFilter=u.minFilter!==void 0?u.minFilter:Gn,o.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.colorSpace!==void 0&&(o.colorSpace=u.colorSpace),u.flipY!==void 0&&(o.flipY=u.flipY),u.format!==void 0&&(o.format=u.format),u.type!==void 0&&(o.type=u.type),u.mipmaps!==void 0&&(o.mipmaps=u.mipmaps,o.minFilter=Bo),u.mipmapCount===1&&(o.minFilter=Gn),u.generateMipmaps!==void 0&&(o.generateMipmaps=u.generateMipmaps),o.needsUpdate=!0,t&&t(o,u)},i,r),o}}class PL extends jr{constructor(e){super(e)}load(e,t,i,r){const s=new qn,o=new $g(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}}class Eu extends Bn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new bt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class IL extends Eu{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Bn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new bt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const Gw=new Jt,k2=new J,U2=new J;class Hb{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Xe(512,512),this.mapType=Ts,this.map=null,this.mapPass=null,this.matrix=new Jt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Mp,this._frameExtents=new Xe(1,1),this._viewportCount=1,this._viewports=[new Un(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;k2.setFromMatrixPosition(e.matrixWorld),t.position.copy(k2),U2.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(U2),t.updateMatrixWorld(),Gw.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Gw),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(Gw)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class hG extends Hb{constructor(){super(new ji(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=hp*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class Vb extends Eu{constructor(e,t,i=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Bn.DEFAULT_UP),this.updateMatrix(),this.target=new Bn,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new hG}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const z2=new Jt,jm=new J,jw=new J;class fG extends Hb{constructor(){super(new ji(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Xe(4,2),this._viewportCount=6,this._viewports=[new Un(2,1,1,1),new Un(0,1,1,1),new Un(3,1,1,1),new Un(1,1,1,1),new Un(3,0,1,1),new Un(1,0,1,1)],this._cubeDirections=[new J(1,0,0),new J(-1,0,0),new J(0,0,1),new J(0,0,-1),new J(0,1,0),new J(0,-1,0)],this._cubeUps=[new J(0,1,0),new J(0,1,0),new J(0,1,0),new J(0,1,0),new J(0,0,1),new J(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),jm.setFromMatrixPosition(e.matrixWorld),i.position.copy(jm),jw.copy(i.position),jw.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(jw),i.updateMatrixWorld(),r.makeTranslation(-jm.x,-jm.y,-jm.z),z2.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(z2)}}class Gb extends Eu{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new fG}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Ka extends u0{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+t,l=r-t;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,h=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=u*this.view.offsetX,o=s+u*this.view.width,a-=h*this.view.offsetY,l=a-h*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class pG extends Hb{constructor(){super(new Ka(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class jb extends Eu{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Bn.DEFAULT_UP),this.updateMatrix(),this.target=new Bn,this.shadow=new pG}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class DL extends Eu{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class BL extends Eu{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class LL{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new J)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*i),t.addScaledVector(o[4],1.092548*(i*r)),t.addScaledVector(o[5],1.092548*(r*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(i*s)),t.addScaledVector(o[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*r),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*i),t.addScaledVector(o[4],2*.429043*i*r),t.addScaledVector(o[5],2*.429043*r*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*i*s),t.addScaledVector(o[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}class OL extends Eu{constructor(e=new LL,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class Q_ extends jr{constructor(e){super(e),this.textures={}}load(e,t,i,r){const s=this,o=new Gr(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new bt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(r.dispersion=e.dispersion),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(r.uniforms[s]={},o.type){case"t":r.uniforms[s].value=i(o.value);break;case"c":r.uniforms[s].value=new bt().setHex(o.value);break;case"v2":r.uniforms[s].value=new Xe().fromArray(o.value);break;case"v3":r.uniforms[s].value=new J().fromArray(o.value);break;case"v4":r.uniforms[s].value=new Un().fromArray(o.value);break;case"m3":r.uniforms[s].value=new wn().fromArray(o.value);break;case"m4":r.uniforms[s].value=new Jt().fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new Xe().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapRotation!==void 0&&r.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new Xe().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return Q_.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:gL,SpriteMaterial:Eb,RawShaderMaterial:vL,ShaderMaterial:Ps,PointsMaterial:k_,MeshPhysicalMaterial:Fo,MeshStandardMaterial:_0,MeshPhongMaterial:yL,MeshToonMaterial:xL,MeshNormalMaterial:_L,MeshLambertMaterial:Lb,MeshDepthMaterial:Ob,MeshDistanceMaterial:Nb,MeshBasicMaterial:Ks,MeshMatcapMaterial:wL,LineDashedMaterial:SL,LineBasicMaterial:os,Material:wr};return new t[e]}}class ou{static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class NL extends yn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class FL extends jr{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Gr(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(v,x){if(t[x]!==void 0)return t[x];const w=v.interleavedBuffers[x],_=s(v,w.buffer),b=Wf(w.type,_),M=new h0(b,w.stride);return M.uuid=w.uuid,t[x]=M,M}function s(v,x){if(i[x]!==void 0)return i[x];const w=v.arrayBuffers[x],_=new Uint32Array(w).buffer;return i[x]=_,_}const o=e.isInstancedBufferGeometry?new NL:new yn,a=e.data.index;if(a!==void 0){const v=Wf(a.type,a.array);o.setIndex(new jn(v,1))}const l=e.data.attributes;for(const v in l){const x=l[v];let S;if(x.isInterleavedBufferAttribute){const w=r(e.data,x.data);S=new fu(w,x.itemSize,x.offset,x.normalized)}else{const w=Wf(x.type,x.array),_=x.isInstancedBufferAttribute?Qd:jn;S=new _(w,x.itemSize,x.normalized)}x.name!==void 0&&(S.name=x.name),x.usage!==void 0&&S.setUsage(x.usage),o.setAttribute(v,S)}const u=e.data.morphAttributes;if(u)for(const v in u){const x=u[v],S=[];for(let w=0,_=x.length;w<_;w++){const b=x[w];let M;if(b.isInterleavedBufferAttribute){const T=r(e.data,b.data);M=new fu(T,b.itemSize,b.offset,b.normalized)}else{const T=Wf(b.type,b.array);M=new jn(T,b.itemSize,b.normalized)}b.name!==void 0&&(M.name=b.name),S.push(M)}o.morphAttributes[v]=S}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const f=e.data.groups||e.data.drawcalls||e.data.offsets;if(f!==void 0)for(let v=0,x=f.length;v!==x;++v){const S=f[v];o.addGroup(S.start,S.count,S.materialIndex)}const g=e.data.boundingSphere;if(g!==void 0){const v=new J;g.center!==void 0&&v.fromArray(g.center),o.boundingSphere=new _r(v,g.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class mG extends jr{constructor(e){super(e)}load(e,t,i,r){const s=this,o=this.path===""?ou.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new Gr(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let u=null;try{u=JSON.parse(l)}catch(f){r!==void 0&&r(f),console.error("THREE:ObjectLoader: Can't parse "+e+".",f.message);return}const h=u.metadata;if(h===void 0||h.type===void 0||h.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(u,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===""?ou.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new Gr(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(a)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){t!==void 0&&t(u)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),u=this.parseObject(e.object,s,l,a,i),h=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,h),this.bindLightTargets(u),t!==void 0){let f=!1;for(const g in o)if(o[g].data instanceof HTMLImageElement){f=!0;break}f===!1&&t(u)}return u}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,r,a,o,t),u=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,u),this.bindLightTargets(l),l}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new Kd().fromJSON(e[i]);t[s.uuid]=s}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new f0().fromJSON(e[s],r);i[a.uuid]=a}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new FL;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(l);break;default:l.type in F2?a=F2[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),i[l.uuid]=a}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const s=new Q_;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];i[l.uuid]===void 0&&(i[l.uuid]=s.parse(l)),r[l.uuid]=i[l.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=mp.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const i=this,r={};let s;function o(l){return i.manager.itemStart(l),s.load(l,function(){i.manager.itemEnd(l)},void 0,function(){i.manager.itemError(l),i.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const u=l,h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:i.resourcePath+u;return o(h)}else return l.data?{data:Wf(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new Z_(t);s=new $g(l),s.setCrossOrigin(this.crossOrigin);for(let u=0,h=e.length;u<h;u++){const f=e[u],g=f.url;if(Array.isArray(g)){const v=[];for(let x=0,S=g.length;x<S;x++){const w=g[x],_=a(w);_!==null&&(_ instanceof HTMLImageElement?v.push(_):v.push(new xa(_.data,_.width,_.height)))}r[f.uuid]=new nu(v)}else{const v=a(f.url);r[f.uuid]=new nu(v)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await r.loadAsync(l)}else return o.data?{data:Wf(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){r=new $g(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],u=l.url;if(Array.isArray(u)){const h=[];for(let f=0,g=u.length;f<g;f++){const v=u[f],x=await s(v);x!==null&&(x instanceof HTMLImageElement?h.push(x):h.push(new xa(x.data,x.width,x.height)))}i[l.uuid]=new nu(h)}else{const h=await s(l.url);i[l.uuid]=new nu(h)}}}return i}parseTextures(e,t){function i(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const r={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],u=l.data;let h;Array.isArray(u)?(h=new d0,u.length===6&&(h.needsUpdate=!0)):(u&&u.data?h=new xa:h=new qn,u&&(h.needsUpdate=!0)),h.source=l,h.uuid=a.uuid,a.name!==void 0&&(h.name=a.name),a.mapping!==void 0&&(h.mapping=i(a.mapping,gG)),a.channel!==void 0&&(h.channel=a.channel),a.offset!==void 0&&h.offset.fromArray(a.offset),a.repeat!==void 0&&h.repeat.fromArray(a.repeat),a.center!==void 0&&h.center.fromArray(a.center),a.rotation!==void 0&&(h.rotation=a.rotation),a.wrap!==void 0&&(h.wrapS=i(a.wrap[0],H2),h.wrapT=i(a.wrap[1],H2)),a.format!==void 0&&(h.format=a.format),a.internalFormat!==void 0&&(h.internalFormat=a.internalFormat),a.type!==void 0&&(h.type=a.type),a.colorSpace!==void 0&&(h.colorSpace=a.colorSpace),a.minFilter!==void 0&&(h.minFilter=i(a.minFilter,V2)),a.magFilter!==void 0&&(h.magFilter=i(a.magFilter,V2)),a.anisotropy!==void 0&&(h.anisotropy=a.anisotropy),a.flipY!==void 0&&(h.flipY=a.flipY),a.generateMipmaps!==void 0&&(h.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(h.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(h.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(h.compareFunction=a.compareFunction),a.userData!==void 0&&(h.userData=a.userData),r[a.uuid]=h}return r}parseObject(e,t,i,r,s){let o;function a(g){return t[g]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",g),t[g]}function l(g){if(g!==void 0){if(Array.isArray(g)){const v=[];for(let x=0,S=g.length;x<S;x++){const w=g[x];i[w]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",w),v.push(i[w])}return v}return i[g]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",g),i[g]}}function u(g){return r[g]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",g),r[g]}let h,f;switch(e.type){case"Scene":o=new bp,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new bt(e.background):o.background=u(e.background)),e.environment!==void 0&&(o.environment=u(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new O_(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new L_(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&o.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(o.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&o.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":o=new ji(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Ka(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new DL(e.color,e.intensity);break;case"DirectionalLight":o=new jb(e.color,e.intensity),o.target=e.target||"";break;case"PointLight":o=new Gb(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new BL(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new Vb(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),o.target=e.target||"";break;case"HemisphereLight":o=new IL(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new OL().fromJSON(e);break;case"SkinnedMesh":h=a(e.geometry),f=l(e.material),o=new Ab(h,f),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":h=a(e.geometry),f=l(e.material),o=new Ti(h,f);break;case"InstancedMesh":h=a(e.geometry),f=l(e.material);const g=e.count,v=e.instanceMatrix,x=e.instanceColor;o=new bb(h,f,g),o.instanceMatrix=new Qd(new Float32Array(v.array),16),x!==void 0&&(o.instanceColor=new Qd(new Float32Array(x.array),x.itemSize));break;case"BatchedMesh":h=a(e.geometry),f=l(e.material),o=new iL(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,f),o.geometry=h,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._geometryInfo=e.geometryInfo.map(S=>{let w=null,_=null;return S.boundingBox!==void 0&&(w=new Ir,w.min.fromArray(S.boundingBox.min),w.max.fromArray(S.boundingBox.max)),S.boundingSphere!==void 0&&(_=new _r,_.radius=S.boundingSphere.radius,_.center.fromArray(S.boundingSphere.center)),{...S,boundingBox:w,boundingSphere:_}}),o._instanceInfo=e.instanceInfo,o._availableInstanceIds=e._availableInstanceIds,o._availableGeometryIds=e._availableGeometryIds,o._nextIndexStart=e.nextIndexStart,o._nextVertexStart=e.nextVertexStart,o._geometryCount=e.geometryCount,o._maxInstanceCount=e.maxInstanceCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._matricesTexture=u(e.matricesTexture.uuid),o._indirectTexture=u(e.indirectTexture.uuid),e.colorsTexture!==void 0&&(o._colorsTexture=u(e.colorsTexture.uuid)),e.boundingSphere!==void 0&&(o.boundingSphere=new _r,o.boundingSphere.center.fromArray(e.boundingSphere.center),o.boundingSphere.radius=e.boundingSphere.radius),e.boundingBox!==void 0&&(o.boundingBox=new Ir,o.boundingBox.min.fromArray(e.boundingBox.min),o.boundingBox.max.fromArray(e.boundingBox.max));break;case"LOD":o=new nL;break;case"Line":o=new sc(a(e.geometry),l(e.material));break;case"LineLoop":o=new Mb(a(e.geometry),l(e.material));break;case"LineSegments":o=new Sa(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new Cb(a(e.geometry),l(e.material));break;case"Sprite":o=new tL(l(e.material));break;case"Group":o=new Jl;break;case"Bone":o=new N_;break;default:o=new Bn}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(o.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const g=e.children;for(let v=0;v<g.length;v++)o.add(this.parseObject(g[v],t,i,r,s))}if(e.animations!==void 0){const g=e.animations;for(let v=0;v<g.length;v++){const x=g[v];o.animations.push(s[x])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const g=e.levels;for(let v=0;v<g.length;v++){const x=g[v],S=o.getObjectByProperty("uuid",x.object);S!==void 0&&o.addLevel(S,x.distance,x.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const i=t.target,r=e.getObjectByProperty("uuid",i);r!==void 0?t.target=r:t.target=new Bn}})}}const gG={UVMapping:uu,CubeReflectionMapping:qa,CubeRefractionMapping:du,EquirectangularReflectionMapping:rp,EquirectangularRefractionMapping:Fg,CubeUVReflectionMapping:Ap},H2={RepeatWrapping:hu,ClampToEdgeWrapping:Zi,MirroredRepeatWrapping:sp},V2={NearestFilter:ur,NearestMipmapNearestFilter:A_,NearestMipmapLinearFilter:Od,LinearFilter:Gn,LinearMipmapNearestFilter:Jf,LinearMipmapLinearFilter:Bo};class kL extends jr{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=ql.get(e);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(u=>{t&&t(u),s.manager.itemEnd(e)}).catch(u=>{r&&r(u)});return}return setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;const l=fetch(e,a).then(function(u){return u.blob()}).then(function(u){return createImageBitmap(u,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(u){return ql.add(e,u),t&&t(u),s.manager.itemEnd(e),u}).catch(function(u){r&&r(u),ql.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});ql.add(e,l),s.manager.itemStart(e)}}let dy;class Wb{static getContext(){return dy===void 0&&(dy=new(window.AudioContext||window.webkitAudioContext)),dy}static setContext(e){dy=e}}class vG extends jr{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Gr(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const u=l.slice(0);Wb.getContext().decodeAudioData(u,function(f){t(f)}).catch(a)}catch(u){a(u)}},i,r);function a(l){r?r(l):console.error(l),s.manager.itemError(e)}}}const G2=new Jt,j2=new Jt,gd=new Jt;class yG{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new ji,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new ji,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,gd.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,o=t.near*Math.tan($d*t.fov*.5)/t.zoom;let a,l;j2.elements[12]=-r,G2.elements[12]=r,a=-o*t.aspect+s,l=o*t.aspect+s,gd.elements[0]=2*t.near/(l-a),gd.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(gd),a=-o*t.aspect-s,l=o*t.aspect-s,gd.elements[0]=2*t.near/(l-a),gd.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(gd)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(j2),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(G2)}}class UL extends ji{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class $b{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=W2(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=W2();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function W2(){return performance.now()}const vd=new J,$2=new xr,xG=new J,yd=new J;class _G extends Bn{constructor(){super(),this.type="AudioListener",this.context=Wb.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new $b}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(vd,$2,xG),yd.set(0,0,-1).applyQuaternion($2),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(vd.x,r),t.positionY.linearRampToValueAtTime(vd.y,r),t.positionZ.linearRampToValueAtTime(vd.z,r),t.forwardX.linearRampToValueAtTime(yd.x,r),t.forwardY.linearRampToValueAtTime(yd.y,r),t.forwardZ.linearRampToValueAtTime(yd.z,r),t.upX.linearRampToValueAtTime(i.x,r),t.upY.linearRampToValueAtTime(i.y,r),t.upZ.linearRampToValueAtTime(i.z,r)}else t.setPosition(vd.x,vd.y,vd.z),t.setOrientation(yd.x,yd.y,yd.z,i.x,i.y,i.z)}}class zL extends Bn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const xd=new J,X2=new xr,wG=new J,_d=new J;class SG extends zL{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(xd,X2,wG),_d.set(0,0,1).applyQuaternion(X2);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(xd.x,i),t.positionY.linearRampToValueAtTime(xd.y,i),t.positionZ.linearRampToValueAtTime(xd.z,i),t.orientationX.linearRampToValueAtTime(_d.x,i),t.orientationY.linearRampToValueAtTime(_d.y,i),t.orientationZ.linearRampToValueAtTime(_d.z,i)}else t.setPosition(xd.x,xd.y,xd.z),t.setOrientation(_d.x,_d.y,_d.z)}}class EG{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class HL{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,s,o;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==r;++a)i[s+a]=i[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(i,s,0,a,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(i,r,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let l=t,u=t+t;l!==u;++l)if(i[l]!==i[l+t]){a.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let s=i,o=r;s!==o;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[i+o]}_slerp(e,t,i,r){xr.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const o=this._workIndex*s;xr.multiplyQuaternionsFlat(e,o,e,t,e,i),xr.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,i,r,s){const o=1-r;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[i+a]*r}}_lerpAdditive(e,t,i,r,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[i+o]*r}}}const Xb="\\[\\]\\.:\\/",AG=new RegExp("["+Xb+"]","g"),Yb="[^"+Xb+"]",bG="[^"+Xb.replace("\\.","")+"]",MG=/((?:WC+[\/:])*)/.source.replace("WC",Yb),CG=/(WCOD+)?/.source.replace("WCOD",bG),TG=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Yb),RG=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Yb),PG=new RegExp("^"+MG+CG+TG+RG+"$"),IG=["material","materials","bones","map"];class DG{constructor(e,t,i){const r=i||Fn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class Fn{constructor(e,t,i){this.path=t,this.parsedPath=i||Fn.parseTrackName(t),this.node=Fn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new Fn.Composite(e,t,i):new Fn(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(AG,"")}static parseTrackName(e){const t=PG.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);IG.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=i(a.children);if(l)return l}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=Fn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let u=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let h=0;h<e.length;h++)if(e[h].name===u){u=h;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(u!==void 0){if(e[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[u]}}const o=e[r];if(o===void 0){const u=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+r+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?a=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Fn.Composite=DG;Fn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Fn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Fn.prototype.GetterByBindingType=[Fn.prototype._getValue_direct,Fn.prototype._getValue_array,Fn.prototype._getValue_arrayElement,Fn.prototype._getValue_toArray];Fn.prototype.SetterByBindingTypeAndVersioning=[[Fn.prototype._setValue_direct,Fn.prototype._setValue_direct_setNeedsUpdate,Fn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Fn.prototype._setValue_array,Fn.prototype._setValue_array_setNeedsUpdate,Fn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Fn.prototype._setValue_arrayElement,Fn.prototype._setValue_arrayElement_setNeedsUpdate,Fn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Fn.prototype._setValue_fromArray,Fn.prototype._setValue_fromArray_setNeedsUpdate,Fn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class BG{constructor(){this.isAnimationObjectGroup=!0,this.uuid=uo(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,u=this.nCachedObjects_;for(let h=0,f=arguments.length;h!==f;++h){const g=arguments[h],v=g.uuid;let x=t[v];if(x===void 0){x=l++,t[v]=x,e.push(g);for(let S=0,w=o;S!==w;++S)s[S].push(new Fn(g,i[S],r[S]))}else if(x<u){a=e[x];const S=--u,w=e[S];t[w.uuid]=x,e[x]=w,t[v]=S,e[S]=g;for(let _=0,b=o;_!==b;++_){const M=s[_],T=M[S];let L=M[x];M[x]=T,L===void 0&&(L=new Fn(g,i[_],r[_])),M[S]=L}}else e[x]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],u=l.uuid,h=t[u];if(h!==void 0&&h>=s){const f=s++,g=e[f];t[g.uuid]=h,e[h]=g,t[u]=f,e[f]=l;for(let v=0,x=r;v!==x;++v){const S=i[v],w=S[f],_=S[h];S[h]=w,S[f]=_}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const u=arguments[a],h=u.uuid,f=t[h];if(f!==void 0)if(delete t[h],f<s){const g=--s,v=e[g],x=--o,S=e[x];t[v.uuid]=f,e[f]=v,t[S.uuid]=g,e[g]=S,e.pop();for(let w=0,_=r;w!==_;++w){const b=i[w],M=b[g],T=b[x];b[f]=M,b[g]=T,b.pop()}}else{const g=--o,v=e[g];g>0&&(t[v.uuid]=f),e[f]=v,e.pop();for(let x=0,S=r;x!==S;++x){const w=i[x];w[f]=w[g],w.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const o=this._paths,a=this._parsedPaths,l=this._objects,u=l.length,h=this.nCachedObjects_,f=new Array(u);r=s.length,i[e]=r,o.push(e),a.push(t),s.push(f);for(let g=h,v=l.length;g!==v;++g){const x=l[g];f[g]=new Fn(x,e,t)}return f}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],u=e[a];t[u]=i,o[i]=l,o.pop(),s[i]=s[a],s.pop(),r[i]=r[a],r.pop()}}}class VL{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:Nd,endingEnd:Nd};for(let u=0;u!==o;++u){const h=s[u].createInterpolant(null);a[u]=h,h.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=OB,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i=!1){if(e.fadeOut(t),this.fadeIn(t),i===!0){const r=this._clip.duration,s=e._clip.duration,o=s/r,a=r/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,i=!1){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,u=a.sampleValues;return l[0]=s,l[1]=s+i,u[0]=e/o,u[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*i;l<0||i===0?t=0:(this._startTime=null,t=i*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case mb:for(let h=0,f=l.length;h!==f;++h)l[h].evaluate(o),u[h].accumulateAdditive(a);break;case I_:default:for(let h=0,f=l.length;h!==f;++h)l[h].evaluate(o),u[h].accumulate(r,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=i===NB;if(e===0)return s===-1?r:o&&(s&1)===1?t-r:r;if(i===LB){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=t||r<0){const a=Math.floor(r/t);r-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const u=e<0;this._setEndings(u,!u,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&(s&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=Fd,r.endingEnd=Fd):(e?r.endingStart=this.zeroSlopeAtStart?Fd:Nd:r.endingStart=kg,t?r.endingEnd=this.zeroSlopeAtEnd?Fd:Nd:r.endingEnd=kg)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=i,this}}const LG=new Float32Array(1);class OG extends nl{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,l=i.uuid,u=this._bindingsByRootAndName;let h=u[l];h===void 0&&(h={},u[l]=h);for(let f=0;f!==s;++f){const g=r[f],v=g.name;let x=h[v];if(x!==void 0)++x.referenceCount,o[f]=x;else{if(x=o[f],x!==void 0){x._cacheIndex===null&&(++x.referenceCount,this._addInactiveBinding(x,l,v));continue}const S=t&&t._propertyBindings[f].binding.parsedPath;x=new HL(Fn.create(i,v,S),g.ValueTypeName,g.getValueSize()),++x.referenceCount,this._addInactiveBinding(x,l,v),o[f]=x}a[f].resultBuffer=x.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,u=l[l.length-1],h=e._byClipCacheIndex;u._byClipCacheIndex=h,l[h]=u,l.pop(),e._byClipCacheIndex=null;const f=a.actionByRoot,g=(e._localRoot||this._root).uuid;delete f[g],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];o===void 0&&(o={},r[t]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,a=o[r],l=t[t.length-1],u=e._cacheIndex;l._cacheIndex=u,t[u]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new kb(new Float32Array(2),new Float32Array(2),1,LG),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let o=typeof e=="string"?mp.findByName(r,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let u=null;if(i===void 0&&(o!==null?i=o.blendMode:i=I_),l!==void 0){const f=l.actionByRoot[s];if(f!==void 0&&f.blendMode===i)return f;u=l.knownActions[0],o===null&&(o=u._clip)}if(o===null)return null;const h=new VL(this,o,t,i);return this._bindAction(h,u),this._addInactiveAction(h,a,s),h}existingAction(e,t){const i=t||this._root,r=i.uuid,s=typeof e=="string"?mp.findByName(i,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let u=0;u!==i;++u)t[u]._update(r,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let u=0;u!==l;++u)a[u].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const u=o[a];this._deactivateAction(u);const h=u._cacheIndex,f=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,f._cacheIndex=h,t[h]=f,t.pop(),this._removeInactiveBindingsForAction(u)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const o in i){const a=i[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class NG extends D_{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isRenderTarget3D=!0,this.depth=i,this.texture=new B_(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class FG extends D_{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isRenderTargetArray=!0,this.depth=i,this.texture=new c0(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class Kb{constructor(e){this.value=e}clone(){return new Kb(this.value.clone===void 0?this.value:this.value.clone())}}let kG=0;class UG extends nl{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:kG++}),this.name="",this.usage=zg,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,r=t.length;i<r;i++){const s=Array.isArray(t[i])?t[i]:[t[i]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class zG extends h0{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class HG{constructor(e,t,i,r,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const Y2=new Jt;class e1{constructor(e,t,i=0,r=1/0){this.ray=new ah(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new Yd,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return Y2.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(Y2),this}intersectObject(e,t=!0,i=[]){return FE(e,this,i,t),i.sort(K2),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r<s;r++)FE(e[r],this,i,t);return i.sort(K2),i}}function K2(n,e){return n.distance-e.distance}function FE(n,e,t,i){let r=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(r=!1),r===!0&&i===!0){const s=n.children;for(let o=0,a=s.length;o<a;o++)FE(s[o],e,t,!0)}}class $x{constructor(e=1,t=0,i=0){this.radius=e,this.phi=t,this.theta=i}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=vn(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(vn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class VG{constructor(e=1,t=0,i=0){this.radius=e,this.theta=t,this.y=i}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}class Jb{constructor(e,t,i,r){Jb.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,i,r)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let i=0;i<4;i++)this.elements[i]=e[i+t];return this}set(e,t,i,r){const s=this.elements;return s[0]=e,s[2]=t,s[1]=i,s[3]=r,this}}const J2=new Xe;class GG{constructor(e=new Xe(1/0,1/0),t=new Xe(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=J2.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,J2).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const q2=new J,hy=new J;class jG{constructor(e=new J,t=new J){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){q2.subVectors(e,this.start),hy.subVectors(this.end,this.start);const i=hy.dot(hy);let s=hy.dot(q2)/i;return t&&(s=vn(s,0,1)),s}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const Z2=new J;class WG extends Bn{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new yn,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const u=o/l*Math.PI*2,h=a/l*Math.PI*2;r.push(Math.cos(u),Math.sin(u),1,Math.cos(h),Math.sin(h),1)}i.setAttribute("position",new Ht(r,3));const s=new os({fog:!1,toneMapped:!1});this.cone=new Sa(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),Z2.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Z2),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Xc=new J,fy=new Jt,Ww=new Jt;class $G extends Sa{constructor(e){const t=GL(e),i=new yn,r=[],s=[],o=new bt(0,0,1),a=new bt(0,1,0);for(let u=0;u<t.length;u++){const h=t[u];h.parent&&h.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}i.setAttribute("position",new Ht(r,3)),i.setAttribute("color",new Ht(s,3));const l=new os({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");Ww.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(fy.multiplyMatrices(Ww,a.matrixWorld),Xc.setFromMatrixPosition(fy),r.setXYZ(o,Xc.x,Xc.y,Xc.z),fy.multiplyMatrices(Ww,a.parent.matrixWorld),Xc.setFromMatrixPosition(fy),r.setXYZ(o+1,Xc.x,Xc.y,Xc.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function GL(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push(...GL(n.children[t]));return e}class XG extends Ti{constructor(e,t,i){const r=new x0(t,4,2),s=new Ks({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const YG=new J,Q2=new bt,eR=new bt;class KG extends Bn{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new y0(t);r.rotateY(Math.PI*.5),this.material=new Ks({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),o=new Float32Array(s.count*3);r.setAttribute("color",new jn(o,3)),this.add(new Ti(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");Q2.copy(this.light.color),eR.copy(this.light.groundColor);for(let i=0,r=t.count;i<r;i++){const s=i<r/2?Q2:eR;t.setXYZ(i,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(YG.setFromMatrixPosition(this.light.matrixWorld).negate())}}class JG extends Sa{constructor(e=10,t=10,i=4473924,r=8947848){i=new bt(i),r=new bt(r);const s=t/2,o=e/t,a=e/2,l=[],u=[];for(let g=0,v=0,x=-a;g<=t;g++,x+=o){l.push(-a,0,x,a,0,x),l.push(x,0,-a,x,0,a);const S=g===s?i:r;S.toArray(u,v),v+=3,S.toArray(u,v),v+=3,S.toArray(u,v),v+=3,S.toArray(u,v),v+=3}const h=new yn;h.setAttribute("position",new Ht(l,3)),h.setAttribute("color",new Ht(u,3));const f=new os({vertexColors:!0,toneMapped:!1});super(h,f),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class qG extends Sa{constructor(e=10,t=16,i=8,r=64,s=4473924,o=8947848){s=new bt(s),o=new bt(o);const a=[],l=[];if(t>1)for(let f=0;f<t;f++){const g=f/t*(Math.PI*2),v=Math.sin(g)*e,x=Math.cos(g)*e;a.push(0,0,0),a.push(v,0,x);const S=f&1?s:o;l.push(S.r,S.g,S.b),l.push(S.r,S.g,S.b)}for(let f=0;f<i;f++){const g=f&1?s:o,v=e-e/i*f;for(let x=0;x<r;x++){let S=x/r*(Math.PI*2),w=Math.sin(S)*v,_=Math.cos(S)*v;a.push(w,0,_),l.push(g.r,g.g,g.b),S=(x+1)/r*(Math.PI*2),w=Math.sin(S)*v,_=Math.cos(S)*v,a.push(w,0,_),l.push(g.r,g.g,g.b)}}const u=new yn;u.setAttribute("position",new Ht(a,3)),u.setAttribute("color",new Ht(l,3));const h=new os({vertexColors:!0,toneMapped:!1});super(u,h),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const tR=new J,py=new J,nR=new J;class ZG extends Bn{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new yn;r.setAttribute("position",new Ht([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new os({fog:!1,toneMapped:!1});this.lightPlane=new sc(r,s),this.add(this.lightPlane),r=new yn,r.setAttribute("position",new Ht([0,0,0,0,0,1],3)),this.targetLine=new sc(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),tR.setFromMatrixPosition(this.light.matrixWorld),py.setFromMatrixPosition(this.light.target.matrixWorld),nR.subVectors(py,tR),this.lightPlane.lookAt(py),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(py),this.targetLine.scale.z=nR.length()}}const my=new J,Vi=new u0;class QG extends Sa{constructor(e){const t=new yn,i=new os({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(x,S){l(x),l(S)}function l(x){r.push(0,0,0),s.push(0,0,0),o[x]===void 0&&(o[x]=[]),o[x].push(r.length/3-1)}t.setAttribute("position",new Ht(r,3)),t.setAttribute("color",new Ht(s,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const u=new bt(16755200),h=new bt(16711680),f=new bt(43775),g=new bt(16777215),v=new bt(3355443);this.setColors(u,h,f,g,v)}setColors(e,t,i,r,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,i.r,i.g,i.b),a.setXYZ(33,i.r,i.g,i.b),a.setXYZ(34,i.r,i.g,i.b),a.setXYZ(35,i.r,i.g,i.b),a.setXYZ(36,i.r,i.g,i.b),a.setXYZ(37,i.r,i.g,i.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;Vi.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);const s=this.camera.coordinateSystem===Lo?-1:0;Ji("c",t,e,Vi,0,0,s),Ji("t",t,e,Vi,0,0,1),Ji("n1",t,e,Vi,-1,-1,s),Ji("n2",t,e,Vi,i,-1,s),Ji("n3",t,e,Vi,-1,r,s),Ji("n4",t,e,Vi,i,r,s),Ji("f1",t,e,Vi,-1,-1,1),Ji("f2",t,e,Vi,i,-1,1),Ji("f3",t,e,Vi,-1,r,1),Ji("f4",t,e,Vi,i,r,1),Ji("u1",t,e,Vi,i*.7,r*1.1,s),Ji("u2",t,e,Vi,-1*.7,r*1.1,s),Ji("u3",t,e,Vi,0,r*2,s),Ji("cf1",t,e,Vi,-1,0,1),Ji("cf2",t,e,Vi,i,0,1),Ji("cf3",t,e,Vi,0,-1,1),Ji("cf4",t,e,Vi,0,r,1),Ji("cn1",t,e,Vi,-1,0,s),Ji("cn2",t,e,Vi,i,0,s),Ji("cn3",t,e,Vi,0,-1,s),Ji("cn4",t,e,Vi,0,r,s),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Ji(n,e,t,i,r,s,o){my.set(r,s,o).unproject(i);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let u=0,h=a.length;u<h;u++)l.setXYZ(a[u],my.x,my.y,my.z)}}const gy=new Ir;class ej extends Sa{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),s=new yn;s.setIndex(new jn(i,1)),s.setAttribute("position",new jn(r,3)),super(s,new os({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&gy.setFromObject(this.object),gy.isEmpty())return;const e=gy.min,t=gy.max,i=this.geometry.attributes.position,r=i.array;r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=e.x,r[4]=t.y,r[5]=t.z,r[6]=e.x,r[7]=e.y,r[8]=t.z,r[9]=t.x,r[10]=e.y,r[11]=t.z,r[12]=t.x,r[13]=t.y,r[14]=e.z,r[15]=e.x,r[16]=t.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=t.x,r[22]=e.y,r[23]=e.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class tj extends Sa{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new yn;s.setIndex(new jn(i,1)),s.setAttribute("position",new Ht(r,3)),super(s,new os({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class nj extends sc{constructor(e,t=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new yn;o.setAttribute("position",new Ht(s,3)),o.computeBoundingSphere(),super(o,new os({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new yn;l.setAttribute("position",new Ht(a,3)),l.computeBoundingSphere(),this.add(new Ti(l,new Ks({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const iR=new J;let vy,$w;class ij extends Bn{constructor(e=new J(0,0,1),t=new J(0,0,0),i=1,r=16776960,s=i*.2,o=s*.2){super(),this.type="ArrowHelper",vy===void 0&&(vy=new yn,vy.setAttribute("position",new Ht([0,0,0,0,1,0],3)),$w=new g0(.5,1,5,1),$w.translate(0,-.5,0)),this.position.copy(t),this.line=new sc(vy,new os({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Ti($w,new Ks({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{iR.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(iR,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class rj extends Sa{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new yn;r.setAttribute("position",new Ht(t,3)),r.setAttribute("color",new Ht(i,3));const s=new os({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,i){const r=new bt,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class sj{constructor(){this.type="ShapePath",this.color=new bt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Wx,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,s,o){return this.currentPath.bezierCurveTo(e,t,i,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(_){const b=[];for(let M=0,T=_.length;M<T;M++){const L=_[M],D=new Kd;D.curves=L.curves,b.push(D)}return b}function i(_,b){const M=b.length;let T=!1;for(let L=M-1,D=0;D<M;L=D++){let U=b[L],F=b[D],k=F.x-U.x,N=F.y-U.y;if(Math.abs(N)>Number.EPSILON){if(N<0&&(U=b[D],k=-k,F=b[L],N=-N),_.y<U.y||_.y>F.y)continue;if(_.y===U.y){if(_.x===U.x)return!0}else{const V=N*(_.x-U.x)-k*(_.y-U.y);if(V===0)return!0;if(V<0)continue;T=!T}}else{if(_.y!==U.y)continue;if(F.x<=_.x&&_.x<=U.x||U.x<=_.x&&_.x<=F.x)return!0}}return T}const r=ya.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const u=[];if(s.length===1)return a=s[0],l=new Kd,l.curves=a.curves,u.push(l),u;let h=!r(s[0].getPoints());h=e?!h:h;const f=[],g=[];let v=[],x=0,S;g[x]=void 0,v[x]=[];for(let _=0,b=s.length;_<b;_++)a=s[_],S=a.getPoints(),o=r(S),o=e?!o:o,o?(!h&&g[x]&&x++,g[x]={s:new Kd,p:S},g[x].s.curves=a.curves,h&&x++,v[x]=[]):v[x].push({h:a,p:S[0]});if(!g[0])return t(s);if(g.length>1){let _=!1,b=0;for(let M=0,T=g.length;M<T;M++)f[M]=[];for(let M=0,T=g.length;M<T;M++){const L=v[M];for(let D=0;D<L.length;D++){const U=L[D];let F=!0;for(let k=0;k<g.length;k++)i(U.p,g[k].p)&&(M!==k&&b++,F?(F=!1,f[k].push(U)):_=!0);F&&f[M].push(U)}}b>0&&_===!1&&(v=f)}let w;for(let _=0,b=g.length;_<b;_++){l=g[_].s,u.push(l),w=v[_];for(let M=0,T=w.length;M<T;M++)l.holes.push(w[M].h)}return u}}class oj extends nl{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function aj(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2):(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0),n}function lj(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0):(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2),n}function cj(n){return n.repeat.x=1,n.repeat.y=1,n.offset.x=0,n.offset.y=0,n}function kE(n,e,t,i){const r=uj(i);switch(t){case db:return n*e;case a0:return n*e/r.components*r.byteLength;case l0:return n*e/r.components*r.byteLength;case fb:return n*e*2/r.components*r.byteLength;case R_:return n*e*2/r.components*r.byteLength;case hb:return n*e*3/r.components*r.byteLength;case Qi:return n*e*4/r.components*r.byteLength;case P_:return n*e*4/r.components*r.byteLength;case gg:case vg:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case yg:case xg:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case gx:case yx:return Math.max(n,16)*Math.max(e,8)/4;case mx:case vx:return Math.max(n,8)*Math.max(e,8)/2;case xx:case _x:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case wx:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case Sx:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case Ex:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case Ax:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case bx:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case Mx:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case Cx:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case Tx:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case Rx:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case Px:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case Ix:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case Dx:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case Bx:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case Lx:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case Ox:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case _g:case Nx:case Fx:return Math.ceil(n/4)*Math.ceil(e/4)*16;case pb:case kx:return Math.ceil(n/4)*Math.ceil(e/4)*8;case Ux:case zx:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function uj(n){switch(n){case Ts:case b_:return{byteLength:1,components:1};case op:case M_:case cr:return{byteLength:2,components:1};case C_:case T_:return{byteLength:2,components:4};case Za:case o0:case Ci:return{byteLength:4,components:1};case ub:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}class dj{static contain(e,t){return aj(e,t)}static cover(e,t){return lj(e,t)}static fill(e){return cj(e)}static getByteLength(e,t,i,r){return kE(e,t,i,r)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Ep}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Ep);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function jL(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function hj(n){const e=new WeakMap;function t(a,l){const u=a.array,h=a.usage,f=u.byteLength,g=n.createBuffer();n.bindBuffer(l,g),n.bufferData(l,u,h),a.onUploadCallback();let v;if(u instanceof Float32Array)v=n.FLOAT;else if(u instanceof Uint16Array)a.isFloat16BufferAttribute?v=n.HALF_FLOAT:v=n.UNSIGNED_SHORT;else if(u instanceof Int16Array)v=n.SHORT;else if(u instanceof Uint32Array)v=n.UNSIGNED_INT;else if(u instanceof Int32Array)v=n.INT;else if(u instanceof Int8Array)v=n.BYTE;else if(u instanceof Uint8Array)v=n.UNSIGNED_BYTE;else if(u instanceof Uint8ClampedArray)v=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:g,type:v,bytesPerElement:u.BYTES_PER_ELEMENT,version:a.version,size:f}}function i(a,l,u){const h=l.array,f=l.updateRanges;if(n.bindBuffer(u,a),f.length===0)n.bufferSubData(u,0,h);else{f.sort((v,x)=>v.start-x.start);let g=0;for(let v=1;v<f.length;v++){const x=f[g],S=f[v];S.start<=x.start+x.count+1?x.count=Math.max(x.count,S.start+S.count-x.start):(++g,f[g]=S)}f.length=g+1;for(let v=0,x=f.length;v<x;v++){const S=f[v];n.bufferSubData(u,S.start*h.BYTES_PER_ELEMENT,h,S.start,S.count)}l.clearUpdateRanges()}l.onUploadCallback()}function r(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function s(a){a.isInterleavedBufferAttribute&&(a=a.data);const l=e.get(a);l&&(n.deleteBuffer(l.buffer),e.delete(a))}function o(a,l){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){const h=e.get(a);(!h||h.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}const u=e.get(a);if(u===void 0)e.set(a,t(a,l));else if(u.version<a.version){if(u.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(u.buffer,a,l),u.version=a.version}}return{get:r,remove:s,update:o}}var fj=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,pj=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,mj=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,gj=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,vj=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,yj=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,xj=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,_j=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,wj=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,Sj=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,Ej=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Aj=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,bj=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Mj=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Cj=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Tj=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,Rj=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Pj=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Ij=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Dj=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Bj=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Lj=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,Oj=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,Nj=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,Fj=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,kj=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Uj=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,zj=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,Hj=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Vj=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Gj="gl_FragColor = linearToOutputTexel( gl_FragColor );",jj=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,Wj=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,$j=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Xj=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Yj=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Kj=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Jj=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,qj=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,Zj=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Qj=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,e7=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,t7=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,n7=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,i7=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,r7=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,s7=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,o7=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,a7=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,l7=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,c7=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,u7=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,d7=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,h7=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,f7=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,p7=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,m7=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,g7=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,v7=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,y7=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,x7=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,_7=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,w7=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,S7=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,E7=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,A7=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,b7=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,M7=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,C7=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,T7=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,R7=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,P7=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,I7=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,D7=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,B7=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,L7=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,O7=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,N7=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,F7=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,k7=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,U7=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,z7=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,H7=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,V7=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,G7=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,j7=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,W7=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,$7=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,X7=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Y7=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,K7=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,J7=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,q7=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Z7=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Q7=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,eW=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,tW=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,nW=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,iW=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,rW=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,sW=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,oW=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,aW=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,lW=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,cW=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,uW=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,dW=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const hW=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,fW=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,pW=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,mW=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,gW=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,vW=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,yW=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,xW=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,_W=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,wW=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,SW=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,EW=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,AW=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,bW=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,MW=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,CW=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,TW=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,RW=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,PW=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,IW=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,DW=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,BW=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,LW=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,OW=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,NW=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,FW=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,kW=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,UW=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,zW=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,HW=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,VW=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,GW=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,jW=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,WW=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Cn={alphahash_fragment:fj,alphahash_pars_fragment:pj,alphamap_fragment:mj,alphamap_pars_fragment:gj,alphatest_fragment:vj,alphatest_pars_fragment:yj,aomap_fragment:xj,aomap_pars_fragment:_j,batching_pars_vertex:wj,batching_vertex:Sj,begin_vertex:Ej,beginnormal_vertex:Aj,bsdfs:bj,iridescence_fragment:Mj,bumpmap_pars_fragment:Cj,clipping_planes_fragment:Tj,clipping_planes_pars_fragment:Rj,clipping_planes_pars_vertex:Pj,clipping_planes_vertex:Ij,color_fragment:Dj,color_pars_fragment:Bj,color_pars_vertex:Lj,color_vertex:Oj,common:Nj,cube_uv_reflection_fragment:Fj,defaultnormal_vertex:kj,displacementmap_pars_vertex:Uj,displacementmap_vertex:zj,emissivemap_fragment:Hj,emissivemap_pars_fragment:Vj,colorspace_fragment:Gj,colorspace_pars_fragment:jj,envmap_fragment:Wj,envmap_common_pars_fragment:$j,envmap_pars_fragment:Xj,envmap_pars_vertex:Yj,envmap_physical_pars_fragment:s7,envmap_vertex:Kj,fog_vertex:Jj,fog_pars_vertex:qj,fog_fragment:Zj,fog_pars_fragment:Qj,gradientmap_pars_fragment:e7,lightmap_pars_fragment:t7,lights_lambert_fragment:n7,lights_lambert_pars_fragment:i7,lights_pars_begin:r7,lights_toon_fragment:o7,lights_toon_pars_fragment:a7,lights_phong_fragment:l7,lights_phong_pars_fragment:c7,lights_physical_fragment:u7,lights_physical_pars_fragment:d7,lights_fragment_begin:h7,lights_fragment_maps:f7,lights_fragment_end:p7,logdepthbuf_fragment:m7,logdepthbuf_pars_fragment:g7,logdepthbuf_pars_vertex:v7,logdepthbuf_vertex:y7,map_fragment:x7,map_pars_fragment:_7,map_particle_fragment:w7,map_particle_pars_fragment:S7,metalnessmap_fragment:E7,metalnessmap_pars_fragment:A7,morphinstance_vertex:b7,morphcolor_vertex:M7,morphnormal_vertex:C7,morphtarget_pars_vertex:T7,morphtarget_vertex:R7,normal_fragment_begin:P7,normal_fragment_maps:I7,normal_pars_fragment:D7,normal_pars_vertex:B7,normal_vertex:L7,normalmap_pars_fragment:O7,clearcoat_normal_fragment_begin:N7,clearcoat_normal_fragment_maps:F7,clearcoat_pars_fragment:k7,iridescence_pars_fragment:U7,opaque_fragment:z7,packing:H7,premultiplied_alpha_fragment:V7,project_vertex:G7,dithering_fragment:j7,dithering_pars_fragment:W7,roughnessmap_fragment:$7,roughnessmap_pars_fragment:X7,shadowmap_pars_fragment:Y7,shadowmap_pars_vertex:K7,shadowmap_vertex:J7,shadowmask_pars_fragment:q7,skinbase_vertex:Z7,skinning_pars_vertex:Q7,skinning_vertex:eW,skinnormal_vertex:tW,specularmap_fragment:nW,specularmap_pars_fragment:iW,tonemapping_fragment:rW,tonemapping_pars_fragment:sW,transmission_fragment:oW,transmission_pars_fragment:aW,uv_pars_fragment:lW,uv_pars_vertex:cW,uv_vertex:uW,worldpos_vertex:dW,background_vert:hW,background_frag:fW,backgroundCube_vert:pW,backgroundCube_frag:mW,cube_vert:gW,cube_frag:vW,depth_vert:yW,depth_frag:xW,distanceRGBA_vert:_W,distanceRGBA_frag:wW,equirect_vert:SW,equirect_frag:EW,linedashed_vert:AW,linedashed_frag:bW,meshbasic_vert:MW,meshbasic_frag:CW,meshlambert_vert:TW,meshlambert_frag:RW,meshmatcap_vert:PW,meshmatcap_frag:IW,meshnormal_vert:DW,meshnormal_frag:BW,meshphong_vert:LW,meshphong_frag:OW,meshphysical_vert:NW,meshphysical_frag:FW,meshtoon_vert:kW,meshtoon_frag:UW,points_vert:zW,points_frag:HW,shadow_vert:VW,shadow_frag:GW,sprite_vert:jW,sprite_frag:WW},Tt={common:{diffuse:{value:new bt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new wn},alphaMap:{value:null},alphaMapTransform:{value:new wn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new wn}},envmap:{envMap:{value:null},envMapRotation:{value:new wn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new wn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new wn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new wn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new wn},normalScale:{value:new Xe(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new wn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new wn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new wn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new wn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new bt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new bt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new wn},alphaTest:{value:0},uvTransform:{value:new wn}},sprite:{diffuse:{value:new bt(16777215)},opacity:{value:1},center:{value:new Xe(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new wn},alphaMap:{value:null},alphaMapTransform:{value:new wn},alphaTest:{value:0}}},va={basic:{uniforms:Ss([Tt.common,Tt.specularmap,Tt.envmap,Tt.aomap,Tt.lightmap,Tt.fog]),vertexShader:Cn.meshbasic_vert,fragmentShader:Cn.meshbasic_frag},lambert:{uniforms:Ss([Tt.common,Tt.specularmap,Tt.envmap,Tt.aomap,Tt.lightmap,Tt.emissivemap,Tt.bumpmap,Tt.normalmap,Tt.displacementmap,Tt.fog,Tt.lights,{emissive:{value:new bt(0)}}]),vertexShader:Cn.meshlambert_vert,fragmentShader:Cn.meshlambert_frag},phong:{uniforms:Ss([Tt.common,Tt.specularmap,Tt.envmap,Tt.aomap,Tt.lightmap,Tt.emissivemap,Tt.bumpmap,Tt.normalmap,Tt.displacementmap,Tt.fog,Tt.lights,{emissive:{value:new bt(0)},specular:{value:new bt(1118481)},shininess:{value:30}}]),vertexShader:Cn.meshphong_vert,fragmentShader:Cn.meshphong_frag},standard:{uniforms:Ss([Tt.common,Tt.envmap,Tt.aomap,Tt.lightmap,Tt.emissivemap,Tt.bumpmap,Tt.normalmap,Tt.displacementmap,Tt.roughnessmap,Tt.metalnessmap,Tt.fog,Tt.lights,{emissive:{value:new bt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Cn.meshphysical_vert,fragmentShader:Cn.meshphysical_frag},toon:{uniforms:Ss([Tt.common,Tt.aomap,Tt.lightmap,Tt.emissivemap,Tt.bumpmap,Tt.normalmap,Tt.displacementmap,Tt.gradientmap,Tt.fog,Tt.lights,{emissive:{value:new bt(0)}}]),vertexShader:Cn.meshtoon_vert,fragmentShader:Cn.meshtoon_frag},matcap:{uniforms:Ss([Tt.common,Tt.bumpmap,Tt.normalmap,Tt.displacementmap,Tt.fog,{matcap:{value:null}}]),vertexShader:Cn.meshmatcap_vert,fragmentShader:Cn.meshmatcap_frag},points:{uniforms:Ss([Tt.points,Tt.fog]),vertexShader:Cn.points_vert,fragmentShader:Cn.points_frag},dashed:{uniforms:Ss([Tt.common,Tt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Cn.linedashed_vert,fragmentShader:Cn.linedashed_frag},depth:{uniforms:Ss([Tt.common,Tt.displacementmap]),vertexShader:Cn.depth_vert,fragmentShader:Cn.depth_frag},normal:{uniforms:Ss([Tt.common,Tt.bumpmap,Tt.normalmap,Tt.displacementmap,{opacity:{value:1}}]),vertexShader:Cn.meshnormal_vert,fragmentShader:Cn.meshnormal_frag},sprite:{uniforms:Ss([Tt.sprite,Tt.fog]),vertexShader:Cn.sprite_vert,fragmentShader:Cn.sprite_frag},background:{uniforms:{uvTransform:{value:new wn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Cn.background_vert,fragmentShader:Cn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new wn}},vertexShader:Cn.backgroundCube_vert,fragmentShader:Cn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Cn.cube_vert,fragmentShader:Cn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Cn.equirect_vert,fragmentShader:Cn.equirect_frag},distanceRGBA:{uniforms:Ss([Tt.common,Tt.displacementmap,{referencePosition:{value:new J},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Cn.distanceRGBA_vert,fragmentShader:Cn.distanceRGBA_frag},shadow:{uniforms:Ss([Tt.lights,Tt.fog,{color:{value:new bt(0)},opacity:{value:1}}]),vertexShader:Cn.shadow_vert,fragmentShader:Cn.shadow_frag}};va.physical={uniforms:Ss([va.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new wn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new wn},clearcoatNormalScale:{value:new Xe(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new wn},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new wn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new wn},sheen:{value:0},sheenColor:{value:new bt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new wn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new wn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new wn},transmissionSamplerSize:{value:new Xe},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new wn},attenuationDistance:{value:0},attenuationColor:{value:new bt(0)},specularColor:{value:new bt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new wn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new wn},anisotropyVector:{value:new Xe},anisotropyMap:{value:null},anisotropyMapTransform:{value:new wn}}]),vertexShader:Cn.meshphysical_vert,fragmentShader:Cn.meshphysical_frag};const yy={r:0,b:0,g:0},wd=new ho,$W=new Jt;function XW(n,e,t,i,r,s,o){const a=new bt(0);let l=s===!0?0:1,u,h,f=null,g=0,v=null;function x(M){let T=M.isScene===!0?M.background:null;return T&&T.isTexture&&(T=(M.backgroundBlurriness>0?t:e).get(T)),T}function S(M){let T=!1;const L=x(M);L===null?_(a,l):L&&L.isColor&&(_(L,1),T=!0);const D=n.xr.getEnvironmentBlendMode();D==="additive"?i.buffers.color.setClear(0,0,0,1,o):D==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,o),(n.autoClear||T)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function w(M,T){const L=x(T);L&&(L.isCubeTexture||L.mapping===Ap)?(h===void 0&&(h=new Ti(new lh(1,1,1),new Ps({name:"BackgroundCubeMaterial",uniforms:fp(va.backgroundCube.uniforms),vertexShader:va.backgroundCube.vertexShader,fragmentShader:va.backgroundCube.fragmentShader,side:rs,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(D,U,F){this.matrixWorld.copyPosition(F.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(h)),wd.copy(T.backgroundRotation),wd.x*=-1,wd.y*=-1,wd.z*=-1,L.isCubeTexture&&L.isRenderTargetTexture===!1&&(wd.y*=-1,wd.z*=-1),h.material.uniforms.envMap.value=L,h.material.uniforms.flipEnvMap.value=L.isCubeTexture&&L.isRenderTargetTexture===!1?-1:1,h.material.uniforms.backgroundBlurriness.value=T.backgroundBlurriness,h.material.uniforms.backgroundIntensity.value=T.backgroundIntensity,h.material.uniforms.backgroundRotation.value.setFromMatrix4($W.makeRotationFromEuler(wd)),h.material.toneMapped=kn.getTransfer(L.colorSpace)!==Qn,(f!==L||g!==L.version||v!==n.toneMapping)&&(h.material.needsUpdate=!0,f=L,g=L.version,v=n.toneMapping),h.layers.enableAll(),M.unshift(h,h.geometry,h.material,0,0,null)):L&&L.isTexture&&(u===void 0&&(u=new Ti(new Su(2,2),new Ps({name:"BackgroundMaterial",uniforms:fp(va.background.uniforms),vertexShader:va.background.vertexShader,fragmentShader:va.background.fragmentShader,side:Ja,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(u)),u.material.uniforms.t2D.value=L,u.material.uniforms.backgroundIntensity.value=T.backgroundIntensity,u.material.toneMapped=kn.getTransfer(L.colorSpace)!==Qn,L.matrixAutoUpdate===!0&&L.updateMatrix(),u.material.uniforms.uvTransform.value.copy(L.matrix),(f!==L||g!==L.version||v!==n.toneMapping)&&(u.material.needsUpdate=!0,f=L,g=L.version,v=n.toneMapping),u.layers.enableAll(),M.unshift(u,u.geometry,u.material,0,0,null))}function _(M,T){M.getRGB(yy,ZB(n)),i.buffers.color.setClear(yy.r,yy.g,yy.b,T,o)}function b(){h!==void 0&&(h.geometry.dispose(),h.material.dispose(),h=void 0),u!==void 0&&(u.geometry.dispose(),u.material.dispose(),u=void 0)}return{getClearColor:function(){return a},setClearColor:function(M,T=1){a.set(M),l=T,_(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(M){l=M,_(a,l)},render:S,addToRenderList:w,dispose:b}}function YW(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=g(null);let s=r,o=!1;function a(N,V,Z,Q,le){let me=!1;const fe=f(Q,Z,V);s!==fe&&(s=fe,u(s.object)),me=v(N,Q,Z,le),me&&x(N,Q,Z,le),le!==null&&e.update(le,n.ELEMENT_ARRAY_BUFFER),(me||o)&&(o=!1,T(N,V,Z,Q),le!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(le).buffer))}function l(){return n.createVertexArray()}function u(N){return n.bindVertexArray(N)}function h(N){return n.deleteVertexArray(N)}function f(N,V,Z){const Q=Z.wireframe===!0;let le=i[N.id];le===void 0&&(le={},i[N.id]=le);let me=le[V.id];me===void 0&&(me={},le[V.id]=me);let fe=me[Q];return fe===void 0&&(fe=g(l()),me[Q]=fe),fe}function g(N){const V=[],Z=[],Q=[];for(let le=0;le<t;le++)V[le]=0,Z[le]=0,Q[le]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:V,enabledAttributes:Z,attributeDivisors:Q,object:N,attributes:{},index:null}}function v(N,V,Z,Q){const le=s.attributes,me=V.attributes;let fe=0;const xe=Z.getAttributes();for(const X in xe)if(xe[X].location>=0){const se=le[X];let Y=me[X];if(Y===void 0&&(X==="instanceMatrix"&&N.instanceMatrix&&(Y=N.instanceMatrix),X==="instanceColor"&&N.instanceColor&&(Y=N.instanceColor)),se===void 0||se.attribute!==Y||Y&&se.data!==Y.data)return!0;fe++}return s.attributesNum!==fe||s.index!==Q}function x(N,V,Z,Q){const le={},me=V.attributes;let fe=0;const xe=Z.getAttributes();for(const X in xe)if(xe[X].location>=0){let se=me[X];se===void 0&&(X==="instanceMatrix"&&N.instanceMatrix&&(se=N.instanceMatrix),X==="instanceColor"&&N.instanceColor&&(se=N.instanceColor));const Y={};Y.attribute=se,se&&se.data&&(Y.data=se.data),le[X]=Y,fe++}s.attributes=le,s.attributesNum=fe,s.index=Q}function S(){const N=s.newAttributes;for(let V=0,Z=N.length;V<Z;V++)N[V]=0}function w(N){_(N,0)}function _(N,V){const Z=s.newAttributes,Q=s.enabledAttributes,le=s.attributeDivisors;Z[N]=1,Q[N]===0&&(n.enableVertexAttribArray(N),Q[N]=1),le[N]!==V&&(n.vertexAttribDivisor(N,V),le[N]=V)}function b(){const N=s.newAttributes,V=s.enabledAttributes;for(let Z=0,Q=V.length;Z<Q;Z++)V[Z]!==N[Z]&&(n.disableVertexAttribArray(Z),V[Z]=0)}function M(N,V,Z,Q,le,me,fe){fe===!0?n.vertexAttribIPointer(N,V,Z,le,me):n.vertexAttribPointer(N,V,Z,Q,le,me)}function T(N,V,Z,Q){S();const le=Q.attributes,me=Z.getAttributes(),fe=V.defaultAttributeValues;for(const xe in me){const X=me[xe];if(X.location>=0){let de=le[xe];if(de===void 0&&(xe==="instanceMatrix"&&N.instanceMatrix&&(de=N.instanceMatrix),xe==="instanceColor"&&N.instanceColor&&(de=N.instanceColor)),de!==void 0){const se=de.normalized,Y=de.itemSize,ge=e.get(de);if(ge===void 0)continue;const Ve=ge.buffer,we=ge.type,Ne=ge.bytesPerElement,Le=we===n.INT||we===n.UNSIGNED_INT||de.gpuType===o0;if(de.isInterleavedBufferAttribute){const Ge=de.data,et=Ge.stride,ft=de.offset;if(Ge.isInstancedInterleavedBuffer){for(let yt=0;yt<X.locationSize;yt++)_(X.location+yt,Ge.meshPerAttribute);N.isInstancedMesh!==!0&&Q._maxInstanceCount===void 0&&(Q._maxInstanceCount=Ge.meshPerAttribute*Ge.count)}else for(let yt=0;yt<X.locationSize;yt++)w(X.location+yt);n.bindBuffer(n.ARRAY_BUFFER,Ve);for(let yt=0;yt<X.locationSize;yt++)M(X.location+yt,Y/X.locationSize,we,se,et*Ne,(ft+Y/X.locationSize*yt)*Ne,Le)}else{if(de.isInstancedBufferAttribute){for(let Ge=0;Ge<X.locationSize;Ge++)_(X.location+Ge,de.meshPerAttribute);N.isInstancedMesh!==!0&&Q._maxInstanceCount===void 0&&(Q._maxInstanceCount=de.meshPerAttribute*de.count)}else for(let Ge=0;Ge<X.locationSize;Ge++)w(X.location+Ge);n.bindBuffer(n.ARRAY_BUFFER,Ve);for(let Ge=0;Ge<X.locationSize;Ge++)M(X.location+Ge,Y/X.locationSize,we,se,Y*Ne,Y/X.locationSize*Ge*Ne,Le)}}else if(fe!==void 0){const se=fe[xe];if(se!==void 0)switch(se.length){case 2:n.vertexAttrib2fv(X.location,se);break;case 3:n.vertexAttrib3fv(X.location,se);break;case 4:n.vertexAttrib4fv(X.location,se);break;default:n.vertexAttrib1fv(X.location,se)}}}}b()}function L(){F();for(const N in i){const V=i[N];for(const Z in V){const Q=V[Z];for(const le in Q)h(Q[le].object),delete Q[le];delete V[Z]}delete i[N]}}function D(N){if(i[N.id]===void 0)return;const V=i[N.id];for(const Z in V){const Q=V[Z];for(const le in Q)h(Q[le].object),delete Q[le];delete V[Z]}delete i[N.id]}function U(N){for(const V in i){const Z=i[V];if(Z[N.id]===void 0)continue;const Q=Z[N.id];for(const le in Q)h(Q[le].object),delete Q[le];delete Z[N.id]}}function F(){k(),o=!0,s!==r&&(s=r,u(s.object))}function k(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:a,reset:F,resetDefaultState:k,dispose:L,releaseStatesOfGeometry:D,releaseStatesOfProgram:U,initAttributes:S,enableAttribute:w,disableUnusedAttributes:b}}function KW(n,e,t){let i;function r(u){i=u}function s(u,h){n.drawArrays(i,u,h),t.update(h,i,1)}function o(u,h,f){f!==0&&(n.drawArraysInstanced(i,u,h,f),t.update(h,i,f))}function a(u,h,f){if(f===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,u,0,h,0,f);let v=0;for(let x=0;x<f;x++)v+=h[x];t.update(v,i,1)}function l(u,h,f,g){if(f===0)return;const v=e.get("WEBGL_multi_draw");if(v===null)for(let x=0;x<u.length;x++)o(u[x],h[x],g[x]);else{v.multiDrawArraysInstancedWEBGL(i,u,0,h,0,g,0,f);let x=0;for(let S=0;S<f;S++)x+=h[S]*g[S];t.update(x,i,1)}}this.setMode=r,this.render=s,this.renderInstances=o,this.renderMultiDraw=a,this.renderMultiDrawInstances=l}function JW(n,e,t,i){let r;function s(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const U=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(U.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(U){return!(U!==Qi&&i.convert(U)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(U){const F=U===cr&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(U!==Ts&&i.convert(U)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&U!==Ci&&!F)}function l(U){if(U==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";U="mediump"}return U==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let u=t.precision!==void 0?t.precision:"highp";const h=l(u);h!==u&&(console.warn("THREE.WebGLRenderer:",u,"not supported, using",h,"instead."),u=h);const f=t.logarithmicDepthBuffer===!0,g=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),v=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),x=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),S=n.getParameter(n.MAX_TEXTURE_SIZE),w=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),_=n.getParameter(n.MAX_VERTEX_ATTRIBS),b=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),M=n.getParameter(n.MAX_VARYING_VECTORS),T=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),L=x>0,D=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:l,textureFormatReadable:o,textureTypeReadable:a,precision:u,logarithmicDepthBuffer:f,reverseDepthBuffer:g,maxTextures:v,maxVertexTextures:x,maxTextureSize:S,maxCubemapSize:w,maxAttributes:_,maxVertexUniforms:b,maxVaryings:M,maxFragmentUniforms:T,vertexTextures:L,maxSamples:D}}function qW(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new jl,a=new wn,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(f,g){const v=f.length!==0||g||i!==0||r;return r=g,i=f.length,v},this.beginShadows=function(){s=!0,h(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(f,g){t=h(f,g,0)},this.setState=function(f,g,v){const x=f.clippingPlanes,S=f.clipIntersection,w=f.clipShadows,_=n.get(f);if(!r||x===null||x.length===0||s&&!w)s?h(null):u();else{const b=s?0:i,M=b*4;let T=_.clippingState||null;l.value=T,T=h(x,g,M,v);for(let L=0;L!==M;++L)T[L]=t[L];_.clippingState=T,this.numIntersection=S?this.numPlanes:0,this.numPlanes+=b}};function u(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function h(f,g,v,x){const S=f!==null?f.length:0;let w=null;if(S!==0){if(w=l.value,x!==!0||w===null){const _=v+S*4,b=g.matrixWorldInverse;a.getNormalMatrix(b),(w===null||w.length<_)&&(w=new Float32Array(_));for(let M=0,T=v;M!==S;++M,T+=4)o.copy(f[M]).applyMatrix4(b,a),o.normal.toArray(w,T),w[T+3]=o.constant}l.value=w,l.needsUpdate=!0}return e.numPlanes=S,e.numIntersection=0,w}}function ZW(n){let e=new WeakMap;function t(o,a){return a===rp?o.mapping=qa:a===Fg&&(o.mapping=du),o}function i(o){if(o&&o.isTexture){const a=o.mapping;if(a===rp||a===Fg)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const u=new Sb(l.height);return u.fromEquirectangularTexture(n,o),e.set(o,u),o.addEventListener("dispose",r),t(u.texture,o.mapping)}else return null}}return o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}const $f=4,rR=[.125,.215,.35,.446,.526,.582],Dd=20,Xw=new Ka,sR=new bt;let Yw=null,Kw=0,Jw=0,qw=!1;const Pd=(1+Math.sqrt(5))/2,Tf=1/Pd,oR=[new J(-Pd,Tf,0),new J(Pd,Tf,0),new J(-Tf,0,Pd),new J(Tf,0,Pd),new J(0,Pd,-Tf),new J(0,Pd,Tf),new J(-1,1,-1),new J(1,1,-1),new J(-1,1,1),new J(1,1,1)],QW=new J;class UE{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100,s={}){const{size:o=256,position:a=QW}=s;Yw=this._renderer.getRenderTarget(),Kw=this._renderer.getActiveCubeFace(),Jw=this._renderer.getActiveMipmapLevel(),qw=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(o);const l=this._allocateTargets();return l.depthBuffer=!0,this._sceneToCubeUV(e,i,r,l,a),t>0&&this._blur(l,0,0,t),this._applyPMREM(l),this._cleanup(l),l}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=cR(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=lR(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Yw,Kw,Jw),this._renderer.xr.enabled=qw,e.scissorTest=!1,xy(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===qa||e.mapping===du?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Yw=this._renderer.getRenderTarget(),Kw=this._renderer.getActiveCubeFace(),Jw=this._renderer.getActiveMipmapLevel(),qw=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:Gn,minFilter:Gn,generateMipmaps:!1,type:cr,format:Qi,colorSpace:Qa,depthBuffer:!1},r=aR(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=aR(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=e$(s)),this._blurMaterial=t$(s,e,t)}return r}_compileMaterial(e){const t=new Ti(this._lodPlanes[0],e);this._renderer.compile(t,Xw)}_sceneToCubeUV(e,t,i,r,s){const l=new ji(90,1,t,i),u=[1,-1,1,1,1,1],h=[1,1,1,-1,-1,-1],f=this._renderer,g=f.autoClear,v=f.toneMapping;f.getClearColor(sR),f.toneMapping=Ya,f.autoClear=!1;const x=new Ks({name:"PMREM.Background",side:rs,depthWrite:!1,depthTest:!1}),S=new Ti(new lh,x);let w=!1;const _=e.background;_?_.isColor&&(x.color.copy(_),e.background=null,w=!0):(x.color.copy(sR),w=!0);for(let b=0;b<6;b++){const M=b%3;M===0?(l.up.set(0,u[b],0),l.position.set(s.x,s.y,s.z),l.lookAt(s.x+h[b],s.y,s.z)):M===1?(l.up.set(0,0,u[b]),l.position.set(s.x,s.y,s.z),l.lookAt(s.x,s.y+h[b],s.z)):(l.up.set(0,u[b],0),l.position.set(s.x,s.y,s.z),l.lookAt(s.x,s.y,s.z+h[b]));const T=this._cubeSize;xy(r,M*T,b>2?T:0,T,T),f.setRenderTarget(r),w&&f.render(S,l),f.render(e,l)}S.geometry.dispose(),S.material.dispose(),f.toneMapping=v,f.autoClear=g,e.background=_}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===qa||e.mapping===du;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=cR()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=lR());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new Ti(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;xy(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(o,Xw)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),a=oR[(r-s-1)%oR.length];this._blur(e,s-1,s,o,a)}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,a){const l=this._renderer,u=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const h=3,f=new Ti(this._lodPlanes[r],u),g=u.uniforms,v=this._sizeLods[i]-1,x=isFinite(s)?Math.PI/(2*v):2*Math.PI/(2*Dd-1),S=s/x,w=isFinite(s)?1+Math.floor(h*S):Dd;w>Dd&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${w} samples when the maximum is set to ${Dd}`);const _=[];let b=0;for(let U=0;U<Dd;++U){const F=U/S,k=Math.exp(-F*F/2);_.push(k),U===0?b+=k:U<w&&(b+=2*k)}for(let U=0;U<_.length;U++)_[U]=_[U]/b;g.envMap.value=e.texture,g.samples.value=w,g.weights.value=_,g.latitudinal.value=o==="latitudinal",a&&(g.poleAxis.value=a);const{_lodMax:M}=this;g.dTheta.value=x,g.mipInt.value=M-i;const T=this._sizeLods[r],L=3*T*(r>M-$f?r-M+$f:0),D=4*(this._cubeSize-T);xy(t,L,D,3*T,2*T),l.setRenderTarget(t),l.render(f,Xw)}}function e$(n){const e=[],t=[],i=[];let r=n;const s=n-$f+1+rR.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);t.push(a);let l=1/a;o>n-$f?l=rR[o-n+$f-1]:o===0&&(l=0),i.push(l);const u=1/(a-2),h=-u,f=1+u,g=[h,h,f,h,f,f,h,h,f,f,h,f],v=6,x=6,S=3,w=2,_=1,b=new Float32Array(S*x*v),M=new Float32Array(w*x*v),T=new Float32Array(_*x*v);for(let D=0;D<v;D++){const U=D%3*2/3-1,F=D>2?0:-1,k=[U,F,0,U+2/3,F,0,U+2/3,F+1,0,U,F,0,U+2/3,F+1,0,U,F+1,0];b.set(k,S*x*D),M.set(g,w*x*D);const N=[D,D,D,D,D,D];T.set(N,_*x*D)}const L=new yn;L.setAttribute("position",new jn(b,S)),L.setAttribute("uv",new jn(M,w)),L.setAttribute("faceIndex",new jn(T,_)),e.push(L),r>$f&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function aR(n,e,t){const i=new Rs(n,e,t);return i.texture.mapping=Ap,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function xy(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function t$(n,e,t){const i=new Float32Array(Dd),r=new J(0,1,0);return new Ps({name:"SphericalGaussianBlur",defines:{n:Dd,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:qb(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Xa,depthTest:!1,depthWrite:!1})}function lR(){return new Ps({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:qb(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Xa,depthTest:!1,depthWrite:!1})}function cR(){return new Ps({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:qb(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Xa,depthTest:!1,depthWrite:!1})}function qb(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function n$(n){let e=new WeakMap,t=null;function i(a){if(a&&a.isTexture){const l=a.mapping,u=l===rp||l===Fg,h=l===qa||l===du;if(u||h){let f=e.get(a);const g=f!==void 0?f.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==g)return t===null&&(t=new UE(n)),f=u?t.fromEquirectangular(a,f):t.fromCubemap(a,f),f.texture.pmremVersion=a.pmremVersion,e.set(a,f),f.texture;if(f!==void 0)return f.texture;{const v=a.image;return u&&v&&v.height>0||h&&v&&r(v)?(t===null&&(t=new UE(n)),f=u?t.fromEquirectangular(a):t.fromCubemap(a),f.texture.pmremVersion=a.pmremVersion,e.set(a,f),a.addEventListener("dispose",s),f.texture):null}}}return a}function r(a){let l=0;const u=6;for(let h=0;h<u;h++)a[h]!==void 0&&l++;return l===u}function s(a){const l=a.target;l.removeEventListener("dispose",s);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:o}}function i$(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){const r=t(i);return r===null&&jy("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function r$(n,e,t,i){const r={},s=new WeakMap;function o(f){const g=f.target;g.index!==null&&e.remove(g.index);for(const x in g.attributes)e.remove(g.attributes[x]);g.removeEventListener("dispose",o),delete r[g.id];const v=s.get(g);v&&(e.remove(v),s.delete(g)),i.releaseStatesOfGeometry(g),g.isInstancedBufferGeometry===!0&&delete g._maxInstanceCount,t.memory.geometries--}function a(f,g){return r[g.id]===!0||(g.addEventListener("dispose",o),r[g.id]=!0,t.memory.geometries++),g}function l(f){const g=f.attributes;for(const v in g)e.update(g[v],n.ARRAY_BUFFER)}function u(f){const g=[],v=f.index,x=f.attributes.position;let S=0;if(v!==null){const b=v.array;S=v.version;for(let M=0,T=b.length;M<T;M+=3){const L=b[M+0],D=b[M+1],U=b[M+2];g.push(L,D,D,U,U,L)}}else if(x!==void 0){const b=x.array;S=x.version;for(let M=0,T=b.length/3-1;M<T;M+=3){const L=M+0,D=M+1,U=M+2;g.push(L,D,D,U,U,L)}}else return;const w=new(YB(g)?_b:xb)(g,1);w.version=S;const _=s.get(f);_&&e.remove(_),s.set(f,w)}function h(f){const g=s.get(f);if(g){const v=f.index;v!==null&&g.version<v.version&&u(f)}else u(f);return s.get(f)}return{get:a,update:l,getWireframeAttribute:h}}function s$(n,e,t){let i;function r(g){i=g}let s,o;function a(g){s=g.type,o=g.bytesPerElement}function l(g,v){n.drawElements(i,v,s,g*o),t.update(v,i,1)}function u(g,v,x){x!==0&&(n.drawElementsInstanced(i,v,s,g*o,x),t.update(v,i,x))}function h(g,v,x){if(x===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,v,0,s,g,0,x);let w=0;for(let _=0;_<x;_++)w+=v[_];t.update(w,i,1)}function f(g,v,x,S){if(x===0)return;const w=e.get("WEBGL_multi_draw");if(w===null)for(let _=0;_<g.length;_++)u(g[_]/o,v[_],S[_]);else{w.multiDrawElementsInstancedWEBGL(i,v,0,s,g,0,S,0,x);let _=0;for(let b=0;b<x;b++)_+=v[b]*S[b];t.update(_,i,1)}}this.setMode=r,this.setIndex=a,this.render=l,this.renderInstances=u,this.renderMultiDraw=h,this.renderMultiDrawInstances=f}function o$(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function a$(n,e,t){const i=new WeakMap,r=new Un;function s(o,a,l){const u=o.morphTargetInfluences,h=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,f=h!==void 0?h.length:0;let g=i.get(a);if(g===void 0||g.count!==f){let N=function(){F.dispose(),i.delete(a),a.removeEventListener("dispose",N)};var v=N;g!==void 0&&g.texture.dispose();const x=a.morphAttributes.position!==void 0,S=a.morphAttributes.normal!==void 0,w=a.morphAttributes.color!==void 0,_=a.morphAttributes.position||[],b=a.morphAttributes.normal||[],M=a.morphAttributes.color||[];let T=0;x===!0&&(T=1),S===!0&&(T=2),w===!0&&(T=3);let L=a.attributes.position.count*T,D=1;L>e.maxTextureSize&&(D=Math.ceil(L/e.maxTextureSize),L=e.maxTextureSize);const U=new Float32Array(L*D*4*f),F=new c0(U,L,D,f);F.type=Ci,F.needsUpdate=!0;const k=T*4;for(let V=0;V<f;V++){const Z=_[V],Q=b[V],le=M[V],me=L*D*4*V;for(let fe=0;fe<Z.count;fe++){const xe=fe*k;x===!0&&(r.fromBufferAttribute(Z,fe),U[me+xe+0]=r.x,U[me+xe+1]=r.y,U[me+xe+2]=r.z,U[me+xe+3]=0),S===!0&&(r.fromBufferAttribute(Q,fe),U[me+xe+4]=r.x,U[me+xe+5]=r.y,U[me+xe+6]=r.z,U[me+xe+7]=0),w===!0&&(r.fromBufferAttribute(le,fe),U[me+xe+8]=r.x,U[me+xe+9]=r.y,U[me+xe+10]=r.z,U[me+xe+11]=le.itemSize===4?r.w:1)}}g={count:f,texture:F,size:new Xe(L,D)},i.set(a,g),a.addEventListener("dispose",N)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)l.getUniforms().setValue(n,"morphTexture",o.morphTexture,t);else{let x=0;for(let w=0;w<u.length;w++)x+=u[w];const S=a.morphTargetsRelative?1:1-x;l.getUniforms().setValue(n,"morphTargetBaseInfluence",S),l.getUniforms().setValue(n,"morphTargetInfluences",u)}l.getUniforms().setValue(n,"morphTargetsTexture",g.texture,t),l.getUniforms().setValue(n,"morphTargetsTextureSize",g.size)}return{update:s}}function l$(n,e,t,i){let r=new WeakMap;function s(l){const u=i.render.frame,h=l.geometry,f=e.get(l,h);if(r.get(f)!==u&&(e.update(f),r.set(f,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),r.get(l)!==u&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),r.set(l,u))),l.isSkinnedMesh){const g=l.skeleton;r.get(g)!==u&&(g.update(),r.set(g,u))}return f}function o(){r=new WeakMap}function a(l){const u=l.target;u.removeEventListener("dispose",a),t.remove(u.instanceMatrix),u.instanceColor!==null&&t.remove(u.instanceColor)}return{update:s,dispose:o}}const WL=new qn,uR=new p0(1,1),$L=new c0,XL=new B_,YL=new d0,dR=[],hR=[],fR=new Float32Array(16),pR=new Float32Array(9),mR=new Float32Array(4);function Tp(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=dR[r];if(s===void 0&&(s=new Float32Array(r),dR[r]=s),e!==0){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function Sr(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Er(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function t1(n,e){let t=hR[e];t===void 0&&(t=new Int32Array(e),hR[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function c$(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function u$(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Sr(t,e))return;n.uniform2fv(this.addr,e),Er(t,e)}}function d$(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Sr(t,e))return;n.uniform3fv(this.addr,e),Er(t,e)}}function h$(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Sr(t,e))return;n.uniform4fv(this.addr,e),Er(t,e)}}function f$(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Sr(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Er(t,e)}else{if(Sr(t,i))return;mR.set(i),n.uniformMatrix2fv(this.addr,!1,mR),Er(t,i)}}function p$(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Sr(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Er(t,e)}else{if(Sr(t,i))return;pR.set(i),n.uniformMatrix3fv(this.addr,!1,pR),Er(t,i)}}function m$(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Sr(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Er(t,e)}else{if(Sr(t,i))return;fR.set(i),n.uniformMatrix4fv(this.addr,!1,fR),Er(t,i)}}function g$(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function v$(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Sr(t,e))return;n.uniform2iv(this.addr,e),Er(t,e)}}function y$(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Sr(t,e))return;n.uniform3iv(this.addr,e),Er(t,e)}}function x$(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Sr(t,e))return;n.uniform4iv(this.addr,e),Er(t,e)}}function _$(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function w$(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Sr(t,e))return;n.uniform2uiv(this.addr,e),Er(t,e)}}function S$(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Sr(t,e))return;n.uniform3uiv(this.addr,e),Er(t,e)}}function E$(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Sr(t,e))return;n.uniform4uiv(this.addr,e),Er(t,e)}}function A$(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);let s;this.type===n.SAMPLER_2D_SHADOW?(uR.compareFunction=vb,s=uR):s=WL,t.setTexture2D(e||s,r)}function b$(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||XL,r)}function M$(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||YL,r)}function C$(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||$L,r)}function T$(n){switch(n){case 5126:return c$;case 35664:return u$;case 35665:return d$;case 35666:return h$;case 35674:return f$;case 35675:return p$;case 35676:return m$;case 5124:case 35670:return g$;case 35667:case 35671:return v$;case 35668:case 35672:return y$;case 35669:case 35673:return x$;case 5125:return _$;case 36294:return w$;case 36295:return S$;case 36296:return E$;case 35678:case 36198:case 36298:case 36306:case 35682:return A$;case 35679:case 36299:case 36307:return b$;case 35680:case 36300:case 36308:case 36293:return M$;case 36289:case 36303:case 36311:case 36292:return C$}}function R$(n,e){n.uniform1fv(this.addr,e)}function P$(n,e){const t=Tp(e,this.size,2);n.uniform2fv(this.addr,t)}function I$(n,e){const t=Tp(e,this.size,3);n.uniform3fv(this.addr,t)}function D$(n,e){const t=Tp(e,this.size,4);n.uniform4fv(this.addr,t)}function B$(n,e){const t=Tp(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function L$(n,e){const t=Tp(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function O$(n,e){const t=Tp(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function N$(n,e){n.uniform1iv(this.addr,e)}function F$(n,e){n.uniform2iv(this.addr,e)}function k$(n,e){n.uniform3iv(this.addr,e)}function U$(n,e){n.uniform4iv(this.addr,e)}function z$(n,e){n.uniform1uiv(this.addr,e)}function H$(n,e){n.uniform2uiv(this.addr,e)}function V$(n,e){n.uniform3uiv(this.addr,e)}function G$(n,e){n.uniform4uiv(this.addr,e)}function j$(n,e,t){const i=this.cache,r=e.length,s=t1(t,r);Sr(i,s)||(n.uniform1iv(this.addr,s),Er(i,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||WL,s[o])}function W$(n,e,t){const i=this.cache,r=e.length,s=t1(t,r);Sr(i,s)||(n.uniform1iv(this.addr,s),Er(i,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||XL,s[o])}function $$(n,e,t){const i=this.cache,r=e.length,s=t1(t,r);Sr(i,s)||(n.uniform1iv(this.addr,s),Er(i,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||YL,s[o])}function X$(n,e,t){const i=this.cache,r=e.length,s=t1(t,r);Sr(i,s)||(n.uniform1iv(this.addr,s),Er(i,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||$L,s[o])}function Y$(n){switch(n){case 5126:return R$;case 35664:return P$;case 35665:return I$;case 35666:return D$;case 35674:return B$;case 35675:return L$;case 35676:return O$;case 5124:case 35670:return N$;case 35667:case 35671:return F$;case 35668:case 35672:return k$;case 35669:case 35673:return U$;case 5125:return z$;case 36294:return H$;case 36295:return V$;case 36296:return G$;case 35678:case 36198:case 36298:case 36306:case 35682:return j$;case 35679:case 36299:case 36307:return W$;case 35680:case 36300:case 36308:case 36293:return $$;case 36289:case 36303:case 36311:case 36292:return X$}}class K${constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=T$(t.type)}}class J${constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=Y$(t.type)}}class q${constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,t[a.id],i)}}}const Zw=/(\w+)(\])?(\[|\.)?/g;function gR(n,e){n.seq.push(e),n.map[e.id]=e}function Z$(n,e,t){const i=n.name,r=i.length;for(Zw.lastIndex=0;;){const s=Zw.exec(i),o=Zw.lastIndex;let a=s[1];const l=s[2]==="]",u=s[3];if(l&&(a=a|0),u===void 0||u==="["&&o+2===r){gR(t,u===void 0?new K$(a,n,e):new J$(a,n,e));break}else{let f=t.map[a];f===void 0&&(f=new q$(a),gR(t,f)),t=f}}}class $y{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r),o=e.getUniformLocation(t,s.name);Z$(s,o,this)}}setValue(e,t,i,r){const s=this.map[t];s!==void 0&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=i[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&i.push(o)}return i}}function vR(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const Q$=37297;let eX=0;function tX(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return i.join(`
`)}const yR=new wn;function nX(n){kn._getMatrix(yR,kn.workingColorSpace,n);const e=`mat3( ${yR.elements.map(t=>t.toFixed(4))} )`;switch(kn.getTransfer(n)){case Ug:return[e,"LinearTransferOETF"];case Qn:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function xR(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+tX(n.getShaderSource(e),o)}else return r}function iX(n,e){const t=nX(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function rX(n,e){let t;switch(e){case CB:t="Linear";break;case TB:t="Reinhard";break;case RB:t="Cineon";break;case cb:t="ACESFilmic";break;case IB:t="AgX";break;case DB:t="Neutral";break;case PB:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const _y=new J;function sX(){kn.getLuminanceCoefficients(_y);const n=_y.x.toFixed(4),e=_y.y.toFixed(4),t=_y.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function oX(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(lg).join(`
`)}function aX(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function lX(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function lg(n){return n!==""}function _R(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function wR(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const cX=/^[ \t]*#include +<([\w\d./]+)>/gm;function zE(n){return n.replace(cX,dX)}const uX=new Map;function dX(n,e){let t=Cn[e];if(t===void 0){const i=uX.get(e);if(i!==void 0)t=Cn[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return zE(t)}const hX=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function SR(n){return n.replace(hX,fX)}function fX(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function ER(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function pX(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===E_?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===mg?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===ga&&(e="SHADOWMAP_TYPE_VSM"),e}function mX(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case qa:case du:e="ENVMAP_TYPE_CUBE";break;case Ap:e="ENVMAP_TYPE_CUBE_UV";break}return e}function gX(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case du:e="ENVMAP_MODE_REFRACTION";break}return e}function vX(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case s0:e="ENVMAP_BLENDING_MULTIPLY";break;case bB:e="ENVMAP_BLENDING_MIX";break;case MB:e="ENVMAP_BLENDING_ADD";break}return e}function yX(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:i,maxMip:t}}function xX(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=pX(t),u=mX(t),h=gX(t),f=vX(t),g=yX(t),v=oX(t),x=aX(s),S=r.createProgram();let w,_,b=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(w=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x].filter(lg).join(`
`),w.length>0&&(w+=`
`),_=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x].filter(lg).join(`
`),_.length>0&&(_+=`
`)):(w=[ER(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+h:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(lg).join(`
`),_=[ER(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.envMap?"#define "+h:"",t.envMap?"#define "+f:"",g?"#define CUBEUV_TEXEL_WIDTH "+g.texelWidth:"",g?"#define CUBEUV_TEXEL_HEIGHT "+g.texelHeight:"",g?"#define CUBEUV_MAX_MIP "+g.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Ya?"#define TONE_MAPPING":"",t.toneMapping!==Ya?Cn.tonemapping_pars_fragment:"",t.toneMapping!==Ya?rX("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Cn.colorspace_pars_fragment,iX("linearToOutputTexel",t.outputColorSpace),sX(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(lg).join(`
`)),o=zE(o),o=_R(o,t),o=wR(o,t),a=zE(a),a=_R(a,t),a=wR(a,t),o=SR(o),a=SR(a),t.isRawShaderMaterial!==!0&&(b=`#version 300 es
`,w=[v,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+w,_=["#define varying in",t.glslVersion===DE?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===DE?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+_);const M=b+w+o,T=b+_+a,L=vR(r,r.VERTEX_SHADER,M),D=vR(r,r.FRAGMENT_SHADER,T);r.attachShader(S,L),r.attachShader(S,D),t.index0AttributeName!==void 0?r.bindAttribLocation(S,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(S,0,"position"),r.linkProgram(S);function U(V){if(n.debug.checkShaderErrors){const Z=r.getProgramInfoLog(S).trim(),Q=r.getShaderInfoLog(L).trim(),le=r.getShaderInfoLog(D).trim();let me=!0,fe=!0;if(r.getProgramParameter(S,r.LINK_STATUS)===!1)if(me=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,S,L,D);else{const xe=xR(r,L,"vertex"),X=xR(r,D,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(S,r.VALIDATE_STATUS)+`

Material Name: `+V.name+`
Material Type: `+V.type+`

Program Info Log: `+Z+`
`+xe+`
`+X)}else Z!==""?console.warn("THREE.WebGLProgram: Program Info Log:",Z):(Q===""||le==="")&&(fe=!1);fe&&(V.diagnostics={runnable:me,programLog:Z,vertexShader:{log:Q,prefix:w},fragmentShader:{log:le,prefix:_}})}r.deleteShader(L),r.deleteShader(D),F=new $y(r,S),k=lX(r,S)}let F;this.getUniforms=function(){return F===void 0&&U(this),F};let k;this.getAttributes=function(){return k===void 0&&U(this),k};let N=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return N===!1&&(N=r.getProgramParameter(S,Q$)),N},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(S),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=eX++,this.cacheKey=e,this.usedTimes=1,this.program=S,this.vertexShader=L,this.fragmentShader=D,this}let _X=0;class wX{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new SX(e),t.set(e,i)),i}}class SX{constructor(e){this.id=_X++,this.code=e,this.usedTimes=0}}function EX(n,e,t,i,r,s,o){const a=new Yd,l=new wX,u=new Set,h=[],f=r.logarithmicDepthBuffer,g=r.vertexTextures;let v=r.precision;const x={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function S(k){return u.add(k),k===0?"uv":`uv${k}`}function w(k,N,V,Z,Q){const le=Z.fog,me=Q.geometry,fe=k.isMeshStandardMaterial?Z.environment:null,xe=(k.isMeshStandardMaterial?t:e).get(k.envMap||fe),X=xe&&xe.mapping===Ap?xe.image.height:null,de=x[k.type];k.precision!==null&&(v=r.getMaxPrecision(k.precision),v!==k.precision&&console.warn("THREE.WebGLProgram.getParameters:",k.precision,"not supported, using",v,"instead."));const se=me.morphAttributes.position||me.morphAttributes.normal||me.morphAttributes.color,Y=se!==void 0?se.length:0;let ge=0;me.morphAttributes.position!==void 0&&(ge=1),me.morphAttributes.normal!==void 0&&(ge=2),me.morphAttributes.color!==void 0&&(ge=3);let Ve,we,Ne,Le;if(de){const mn=va[de];Ve=mn.vertexShader,we=mn.fragmentShader}else Ve=k.vertexShader,we=k.fragmentShader,l.update(k),Ne=l.getVertexShaderID(k),Le=l.getFragmentShaderID(k);const Ge=n.getRenderTarget(),et=n.state.buffers.depth.getReversed(),ft=Q.isInstancedMesh===!0,yt=Q.isBatchedMesh===!0,nn=!!k.map,Xt=!!k.matcap,xt=!!xe,q=!!k.aoMap,at=!!k.lightMap,Je=!!k.bumpMap,tt=!!k.normalMap,$e=!!k.displacementMap,_t=!!k.emissiveMap,Ye=!!k.metalnessMap,K=!!k.roughnessMap,j=k.anisotropy>0,ne=k.clearcoat>0,Se=k.dispersion>0,ze=k.iridescence>0,Re=k.sheen>0,mt=k.transmission>0,lt=j&&!!k.anisotropyMap,Dt=ne&&!!k.clearcoatMap,Ft=ne&&!!k.clearcoatNormalMap,qe=ne&&!!k.clearcoatRoughnessMap,wt=ze&&!!k.iridescenceMap,Lt=ze&&!!k.iridescenceThicknessMap,It=Re&&!!k.sheenColorMap,St=Re&&!!k.sheenRoughnessMap,ue=!!k.specularMap,Oe=!!k.specularColorMap,st=!!k.specularIntensityMap,ce=mt&&!!k.transmissionMap,be=mt&&!!k.thicknessMap,Ie=!!k.gradientMap,We=!!k.alphaMap,Mt=k.alphaTest>0,vt=!!k.alphaHash,$t=!!k.extensions;let Tn=Ya;k.toneMapped&&(Ge===null||Ge.isXRRenderTarget===!0)&&(Tn=n.toneMapping);const Xn={shaderID:de,shaderType:k.type,shaderName:k.name,vertexShader:Ve,fragmentShader:we,defines:k.defines,customVertexShaderID:Ne,customFragmentShaderID:Le,isRawShaderMaterial:k.isRawShaderMaterial===!0,glslVersion:k.glslVersion,precision:v,batching:yt,batchingColor:yt&&Q._colorsTexture!==null,instancing:ft,instancingColor:ft&&Q.instanceColor!==null,instancingMorph:ft&&Q.morphTexture!==null,supportsVertexTextures:g,outputColorSpace:Ge===null?n.outputColorSpace:Ge.isXRRenderTarget===!0?Ge.texture.colorSpace:Qa,alphaToCoverage:!!k.alphaToCoverage,map:nn,matcap:Xt,envMap:xt,envMapMode:xt&&xe.mapping,envMapCubeUVHeight:X,aoMap:q,lightMap:at,bumpMap:Je,normalMap:tt,displacementMap:g&&$e,emissiveMap:_t,normalMapObjectSpace:tt&&k.normalMapType===zB,normalMapTangentSpace:tt&&k.normalMapType===_u,metalnessMap:Ye,roughnessMap:K,anisotropy:j,anisotropyMap:lt,clearcoat:ne,clearcoatMap:Dt,clearcoatNormalMap:Ft,clearcoatRoughnessMap:qe,dispersion:Se,iridescence:ze,iridescenceMap:wt,iridescenceThicknessMap:Lt,sheen:Re,sheenColorMap:It,sheenRoughnessMap:St,specularMap:ue,specularColorMap:Oe,specularIntensityMap:st,transmission:mt,transmissionMap:ce,thicknessMap:be,gradientMap:Ie,opaque:k.transparent===!1&&k.blending===Wd&&k.alphaToCoverage===!1,alphaMap:We,alphaTest:Mt,alphaHash:vt,combine:k.combine,mapUv:nn&&S(k.map.channel),aoMapUv:q&&S(k.aoMap.channel),lightMapUv:at&&S(k.lightMap.channel),bumpMapUv:Je&&S(k.bumpMap.channel),normalMapUv:tt&&S(k.normalMap.channel),displacementMapUv:$e&&S(k.displacementMap.channel),emissiveMapUv:_t&&S(k.emissiveMap.channel),metalnessMapUv:Ye&&S(k.metalnessMap.channel),roughnessMapUv:K&&S(k.roughnessMap.channel),anisotropyMapUv:lt&&S(k.anisotropyMap.channel),clearcoatMapUv:Dt&&S(k.clearcoatMap.channel),clearcoatNormalMapUv:Ft&&S(k.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:qe&&S(k.clearcoatRoughnessMap.channel),iridescenceMapUv:wt&&S(k.iridescenceMap.channel),iridescenceThicknessMapUv:Lt&&S(k.iridescenceThicknessMap.channel),sheenColorMapUv:It&&S(k.sheenColorMap.channel),sheenRoughnessMapUv:St&&S(k.sheenRoughnessMap.channel),specularMapUv:ue&&S(k.specularMap.channel),specularColorMapUv:Oe&&S(k.specularColorMap.channel),specularIntensityMapUv:st&&S(k.specularIntensityMap.channel),transmissionMapUv:ce&&S(k.transmissionMap.channel),thicknessMapUv:be&&S(k.thicknessMap.channel),alphaMapUv:We&&S(k.alphaMap.channel),vertexTangents:!!me.attributes.tangent&&(tt||j),vertexColors:k.vertexColors,vertexAlphas:k.vertexColors===!0&&!!me.attributes.color&&me.attributes.color.itemSize===4,pointsUvs:Q.isPoints===!0&&!!me.attributes.uv&&(nn||We),fog:!!le,useFog:k.fog===!0,fogExp2:!!le&&le.isFogExp2,flatShading:k.flatShading===!0,sizeAttenuation:k.sizeAttenuation===!0,logarithmicDepthBuffer:f,reverseDepthBuffer:et,skinning:Q.isSkinnedMesh===!0,morphTargets:me.morphAttributes.position!==void 0,morphNormals:me.morphAttributes.normal!==void 0,morphColors:me.morphAttributes.color!==void 0,morphTargetsCount:Y,morphTextureStride:ge,numDirLights:N.directional.length,numPointLights:N.point.length,numSpotLights:N.spot.length,numSpotLightMaps:N.spotLightMap.length,numRectAreaLights:N.rectArea.length,numHemiLights:N.hemi.length,numDirLightShadows:N.directionalShadowMap.length,numPointLightShadows:N.pointShadowMap.length,numSpotLightShadows:N.spotShadowMap.length,numSpotLightShadowsWithMaps:N.numSpotLightShadowsWithMaps,numLightProbes:N.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:k.dithering,shadowMapEnabled:n.shadowMap.enabled&&V.length>0,shadowMapType:n.shadowMap.type,toneMapping:Tn,decodeVideoTexture:nn&&k.map.isVideoTexture===!0&&kn.getTransfer(k.map.colorSpace)===Qn,decodeVideoTextureEmissive:_t&&k.emissiveMap.isVideoTexture===!0&&kn.getTransfer(k.emissiveMap.colorSpace)===Qn,premultipliedAlpha:k.premultipliedAlpha,doubleSided:k.side===co,flipSided:k.side===rs,useDepthPacking:k.depthPacking>=0,depthPacking:k.depthPacking||0,index0AttributeName:k.index0AttributeName,extensionClipCullDistance:$t&&k.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:($t&&k.extensions.multiDraw===!0||yt)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:k.customProgramCacheKey()};return Xn.vertexUv1s=u.has(1),Xn.vertexUv2s=u.has(2),Xn.vertexUv3s=u.has(3),u.clear(),Xn}function _(k){const N=[];if(k.shaderID?N.push(k.shaderID):(N.push(k.customVertexShaderID),N.push(k.customFragmentShaderID)),k.defines!==void 0)for(const V in k.defines)N.push(V),N.push(k.defines[V]);return k.isRawShaderMaterial===!1&&(b(N,k),M(N,k),N.push(n.outputColorSpace)),N.push(k.customProgramCacheKey),N.join()}function b(k,N){k.push(N.precision),k.push(N.outputColorSpace),k.push(N.envMapMode),k.push(N.envMapCubeUVHeight),k.push(N.mapUv),k.push(N.alphaMapUv),k.push(N.lightMapUv),k.push(N.aoMapUv),k.push(N.bumpMapUv),k.push(N.normalMapUv),k.push(N.displacementMapUv),k.push(N.emissiveMapUv),k.push(N.metalnessMapUv),k.push(N.roughnessMapUv),k.push(N.anisotropyMapUv),k.push(N.clearcoatMapUv),k.push(N.clearcoatNormalMapUv),k.push(N.clearcoatRoughnessMapUv),k.push(N.iridescenceMapUv),k.push(N.iridescenceThicknessMapUv),k.push(N.sheenColorMapUv),k.push(N.sheenRoughnessMapUv),k.push(N.specularMapUv),k.push(N.specularColorMapUv),k.push(N.specularIntensityMapUv),k.push(N.transmissionMapUv),k.push(N.thicknessMapUv),k.push(N.combine),k.push(N.fogExp2),k.push(N.sizeAttenuation),k.push(N.morphTargetsCount),k.push(N.morphAttributeCount),k.push(N.numDirLights),k.push(N.numPointLights),k.push(N.numSpotLights),k.push(N.numSpotLightMaps),k.push(N.numHemiLights),k.push(N.numRectAreaLights),k.push(N.numDirLightShadows),k.push(N.numPointLightShadows),k.push(N.numSpotLightShadows),k.push(N.numSpotLightShadowsWithMaps),k.push(N.numLightProbes),k.push(N.shadowMapType),k.push(N.toneMapping),k.push(N.numClippingPlanes),k.push(N.numClipIntersection),k.push(N.depthPacking)}function M(k,N){a.disableAll(),N.supportsVertexTextures&&a.enable(0),N.instancing&&a.enable(1),N.instancingColor&&a.enable(2),N.instancingMorph&&a.enable(3),N.matcap&&a.enable(4),N.envMap&&a.enable(5),N.normalMapObjectSpace&&a.enable(6),N.normalMapTangentSpace&&a.enable(7),N.clearcoat&&a.enable(8),N.iridescence&&a.enable(9),N.alphaTest&&a.enable(10),N.vertexColors&&a.enable(11),N.vertexAlphas&&a.enable(12),N.vertexUv1s&&a.enable(13),N.vertexUv2s&&a.enable(14),N.vertexUv3s&&a.enable(15),N.vertexTangents&&a.enable(16),N.anisotropy&&a.enable(17),N.alphaHash&&a.enable(18),N.batching&&a.enable(19),N.dispersion&&a.enable(20),N.batchingColor&&a.enable(21),k.push(a.mask),a.disableAll(),N.fog&&a.enable(0),N.useFog&&a.enable(1),N.flatShading&&a.enable(2),N.logarithmicDepthBuffer&&a.enable(3),N.reverseDepthBuffer&&a.enable(4),N.skinning&&a.enable(5),N.morphTargets&&a.enable(6),N.morphNormals&&a.enable(7),N.morphColors&&a.enable(8),N.premultipliedAlpha&&a.enable(9),N.shadowMapEnabled&&a.enable(10),N.doubleSided&&a.enable(11),N.flipSided&&a.enable(12),N.useDepthPacking&&a.enable(13),N.dithering&&a.enable(14),N.transmission&&a.enable(15),N.sheen&&a.enable(16),N.opaque&&a.enable(17),N.pointsUvs&&a.enable(18),N.decodeVideoTexture&&a.enable(19),N.decodeVideoTextureEmissive&&a.enable(20),N.alphaToCoverage&&a.enable(21),k.push(a.mask)}function T(k){const N=x[k.type];let V;if(N){const Z=va[N];V=wb.clone(Z.uniforms)}else V=k.uniforms;return V}function L(k,N){let V;for(let Z=0,Q=h.length;Z<Q;Z++){const le=h[Z];if(le.cacheKey===N){V=le,++V.usedTimes;break}}return V===void 0&&(V=new xX(n,N,k,s),h.push(V)),V}function D(k){if(--k.usedTimes===0){const N=h.indexOf(k);h[N]=h[h.length-1],h.pop(),k.destroy()}}function U(k){l.remove(k)}function F(){l.dispose()}return{getParameters:w,getProgramCacheKey:_,getUniforms:T,acquireProgram:L,releaseProgram:D,releaseShaderCache:U,programs:h,dispose:F}}function AX(){let n=new WeakMap;function e(o){return n.has(o)}function t(o){let a=n.get(o);return a===void 0&&(a={},n.set(o,a)),a}function i(o){n.delete(o)}function r(o,a,l){n.get(o)[a]=l}function s(){n=new WeakMap}return{has:e,get:t,remove:i,update:r,dispose:s}}function bX(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function AR(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function bR(){const n=[];let e=0;const t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function o(f,g,v,x,S,w){let _=n[e];return _===void 0?(_={id:f.id,object:f,geometry:g,material:v,groupOrder:x,renderOrder:f.renderOrder,z:S,group:w},n[e]=_):(_.id=f.id,_.object=f,_.geometry=g,_.material=v,_.groupOrder=x,_.renderOrder=f.renderOrder,_.z=S,_.group=w),e++,_}function a(f,g,v,x,S,w){const _=o(f,g,v,x,S,w);v.transmission>0?i.push(_):v.transparent===!0?r.push(_):t.push(_)}function l(f,g,v,x,S,w){const _=o(f,g,v,x,S,w);v.transmission>0?i.unshift(_):v.transparent===!0?r.unshift(_):t.unshift(_)}function u(f,g){t.length>1&&t.sort(f||bX),i.length>1&&i.sort(g||AR),r.length>1&&r.sort(g||AR)}function h(){for(let f=e,g=n.length;f<g;f++){const v=n[f];if(v.id===null)break;v.id=null,v.object=null,v.geometry=null,v.material=null,v.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:a,unshift:l,finish:h,sort:u}}function MX(){let n=new WeakMap;function e(i,r){const s=n.get(i);let o;return s===void 0?(o=new bR,n.set(i,[o])):r>=s.length?(o=new bR,s.push(o)):o=s[r],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function CX(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new J,color:new bt};break;case"SpotLight":t={position:new J,direction:new J,color:new bt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new J,color:new bt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new J,skyColor:new bt,groundColor:new bt};break;case"RectAreaLight":t={color:new bt,position:new J,halfWidth:new J,halfHeight:new J};break}return n[e.id]=t,t}}}function TX(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Xe};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Xe};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Xe,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let RX=0;function PX(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function IX(n){const e=new CX,t=TX(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)i.probe.push(new J);const r=new J,s=new Jt,o=new Jt;function a(u){let h=0,f=0,g=0;for(let k=0;k<9;k++)i.probe[k].set(0,0,0);let v=0,x=0,S=0,w=0,_=0,b=0,M=0,T=0,L=0,D=0,U=0;u.sort(PX);for(let k=0,N=u.length;k<N;k++){const V=u[k],Z=V.color,Q=V.intensity,le=V.distance,me=V.shadow&&V.shadow.map?V.shadow.map.texture:null;if(V.isAmbientLight)h+=Z.r*Q,f+=Z.g*Q,g+=Z.b*Q;else if(V.isLightProbe){for(let fe=0;fe<9;fe++)i.probe[fe].addScaledVector(V.sh.coefficients[fe],Q);U++}else if(V.isDirectionalLight){const fe=e.get(V);if(fe.color.copy(V.color).multiplyScalar(V.intensity),V.castShadow){const xe=V.shadow,X=t.get(V);X.shadowIntensity=xe.intensity,X.shadowBias=xe.bias,X.shadowNormalBias=xe.normalBias,X.shadowRadius=xe.radius,X.shadowMapSize=xe.mapSize,i.directionalShadow[v]=X,i.directionalShadowMap[v]=me,i.directionalShadowMatrix[v]=V.shadow.matrix,b++}i.directional[v]=fe,v++}else if(V.isSpotLight){const fe=e.get(V);fe.position.setFromMatrixPosition(V.matrixWorld),fe.color.copy(Z).multiplyScalar(Q),fe.distance=le,fe.coneCos=Math.cos(V.angle),fe.penumbraCos=Math.cos(V.angle*(1-V.penumbra)),fe.decay=V.decay,i.spot[S]=fe;const xe=V.shadow;if(V.map&&(i.spotLightMap[L]=V.map,L++,xe.updateMatrices(V),V.castShadow&&D++),i.spotLightMatrix[S]=xe.matrix,V.castShadow){const X=t.get(V);X.shadowIntensity=xe.intensity,X.shadowBias=xe.bias,X.shadowNormalBias=xe.normalBias,X.shadowRadius=xe.radius,X.shadowMapSize=xe.mapSize,i.spotShadow[S]=X,i.spotShadowMap[S]=me,T++}S++}else if(V.isRectAreaLight){const fe=e.get(V);fe.color.copy(Z).multiplyScalar(Q),fe.halfWidth.set(V.width*.5,0,0),fe.halfHeight.set(0,V.height*.5,0),i.rectArea[w]=fe,w++}else if(V.isPointLight){const fe=e.get(V);if(fe.color.copy(V.color).multiplyScalar(V.intensity),fe.distance=V.distance,fe.decay=V.decay,V.castShadow){const xe=V.shadow,X=t.get(V);X.shadowIntensity=xe.intensity,X.shadowBias=xe.bias,X.shadowNormalBias=xe.normalBias,X.shadowRadius=xe.radius,X.shadowMapSize=xe.mapSize,X.shadowCameraNear=xe.camera.near,X.shadowCameraFar=xe.camera.far,i.pointShadow[x]=X,i.pointShadowMap[x]=me,i.pointShadowMatrix[x]=V.shadow.matrix,M++}i.point[x]=fe,x++}else if(V.isHemisphereLight){const fe=e.get(V);fe.skyColor.copy(V.color).multiplyScalar(Q),fe.groundColor.copy(V.groundColor).multiplyScalar(Q),i.hemi[_]=fe,_++}}w>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Tt.LTC_FLOAT_1,i.rectAreaLTC2=Tt.LTC_FLOAT_2):(i.rectAreaLTC1=Tt.LTC_HALF_1,i.rectAreaLTC2=Tt.LTC_HALF_2)),i.ambient[0]=h,i.ambient[1]=f,i.ambient[2]=g;const F=i.hash;(F.directionalLength!==v||F.pointLength!==x||F.spotLength!==S||F.rectAreaLength!==w||F.hemiLength!==_||F.numDirectionalShadows!==b||F.numPointShadows!==M||F.numSpotShadows!==T||F.numSpotMaps!==L||F.numLightProbes!==U)&&(i.directional.length=v,i.spot.length=S,i.rectArea.length=w,i.point.length=x,i.hemi.length=_,i.directionalShadow.length=b,i.directionalShadowMap.length=b,i.pointShadow.length=M,i.pointShadowMap.length=M,i.spotShadow.length=T,i.spotShadowMap.length=T,i.directionalShadowMatrix.length=b,i.pointShadowMatrix.length=M,i.spotLightMatrix.length=T+L-D,i.spotLightMap.length=L,i.numSpotLightShadowsWithMaps=D,i.numLightProbes=U,F.directionalLength=v,F.pointLength=x,F.spotLength=S,F.rectAreaLength=w,F.hemiLength=_,F.numDirectionalShadows=b,F.numPointShadows=M,F.numSpotShadows=T,F.numSpotMaps=L,F.numLightProbes=U,i.version=RX++)}function l(u,h){let f=0,g=0,v=0,x=0,S=0;const w=h.matrixWorldInverse;for(let _=0,b=u.length;_<b;_++){const M=u[_];if(M.isDirectionalLight){const T=i.directional[f];T.direction.setFromMatrixPosition(M.matrixWorld),r.setFromMatrixPosition(M.target.matrixWorld),T.direction.sub(r),T.direction.transformDirection(w),f++}else if(M.isSpotLight){const T=i.spot[v];T.position.setFromMatrixPosition(M.matrixWorld),T.position.applyMatrix4(w),T.direction.setFromMatrixPosition(M.matrixWorld),r.setFromMatrixPosition(M.target.matrixWorld),T.direction.sub(r),T.direction.transformDirection(w),v++}else if(M.isRectAreaLight){const T=i.rectArea[x];T.position.setFromMatrixPosition(M.matrixWorld),T.position.applyMatrix4(w),o.identity(),s.copy(M.matrixWorld),s.premultiply(w),o.extractRotation(s),T.halfWidth.set(M.width*.5,0,0),T.halfHeight.set(0,M.height*.5,0),T.halfWidth.applyMatrix4(o),T.halfHeight.applyMatrix4(o),x++}else if(M.isPointLight){const T=i.point[g];T.position.setFromMatrixPosition(M.matrixWorld),T.position.applyMatrix4(w),g++}else if(M.isHemisphereLight){const T=i.hemi[S];T.direction.setFromMatrixPosition(M.matrixWorld),T.direction.transformDirection(w),S++}}}return{setup:a,setupView:l,state:i}}function MR(n){const e=new IX(n),t=[],i=[];function r(h){u.camera=h,t.length=0,i.length=0}function s(h){t.push(h)}function o(h){i.push(h)}function a(){e.setup(t)}function l(h){e.setupView(t,h)}const u={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:u,setupLights:a,setupLightsView:l,pushLight:s,pushShadow:o}}function DX(n){let e=new WeakMap;function t(r,s=0){const o=e.get(r);let a;return o===void 0?(a=new MR(n),e.set(r,[a])):s>=o.length?(a=new MR(n),o.push(a)):a=o[s],a}function i(){e=new WeakMap}return{get:t,dispose:i}}const BX=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,LX=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function OX(n,e,t){let i=new Mp;const r=new Xe,s=new Xe,o=new Un,a=new Ob({depthPacking:UB}),l=new Nb,u={},h=t.maxTextureSize,f={[Ja]:rs,[rs]:Ja,[co]:co},g=new Ps({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Xe},radius:{value:4}},vertexShader:BX,fragmentShader:LX}),v=g.clone();v.defines.HORIZONTAL_PASS=1;const x=new yn;x.setAttribute("position",new jn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const S=new Ti(x,g),w=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=E_;let _=this.type;this.render=function(D,U,F){if(w.enabled===!1||w.autoUpdate===!1&&w.needsUpdate===!1||D.length===0)return;const k=n.getRenderTarget(),N=n.getActiveCubeFace(),V=n.getActiveMipmapLevel(),Z=n.state;Z.setBlending(Xa),Z.buffers.color.setClear(1,1,1,1),Z.buffers.depth.setTest(!0),Z.setScissorTest(!1);const Q=_!==ga&&this.type===ga,le=_===ga&&this.type!==ga;for(let me=0,fe=D.length;me<fe;me++){const xe=D[me],X=xe.shadow;if(X===void 0){console.warn("THREE.WebGLShadowMap:",xe,"has no shadow.");continue}if(X.autoUpdate===!1&&X.needsUpdate===!1)continue;r.copy(X.mapSize);const de=X.getFrameExtents();if(r.multiply(de),s.copy(X.mapSize),(r.x>h||r.y>h)&&(r.x>h&&(s.x=Math.floor(h/de.x),r.x=s.x*de.x,X.mapSize.x=s.x),r.y>h&&(s.y=Math.floor(h/de.y),r.y=s.y*de.y,X.mapSize.y=s.y)),X.map===null||Q===!0||le===!0){const Y=this.type!==ga?{minFilter:ur,magFilter:ur}:{};X.map!==null&&X.map.dispose(),X.map=new Rs(r.x,r.y,Y),X.map.texture.name=xe.name+".shadowMap",X.camera.updateProjectionMatrix()}n.setRenderTarget(X.map),n.clear();const se=X.getViewportCount();for(let Y=0;Y<se;Y++){const ge=X.getViewport(Y);o.set(s.x*ge.x,s.y*ge.y,s.x*ge.z,s.y*ge.w),Z.viewport(o),X.updateMatrices(xe,Y),i=X.getFrustum(),T(U,F,X.camera,xe,this.type)}X.isPointLightShadow!==!0&&this.type===ga&&b(X,F),X.needsUpdate=!1}_=this.type,w.needsUpdate=!1,n.setRenderTarget(k,N,V)};function b(D,U){const F=e.update(S);g.defines.VSM_SAMPLES!==D.blurSamples&&(g.defines.VSM_SAMPLES=D.blurSamples,v.defines.VSM_SAMPLES=D.blurSamples,g.needsUpdate=!0,v.needsUpdate=!0),D.mapPass===null&&(D.mapPass=new Rs(r.x,r.y)),g.uniforms.shadow_pass.value=D.map.texture,g.uniforms.resolution.value=D.mapSize,g.uniforms.radius.value=D.radius,n.setRenderTarget(D.mapPass),n.clear(),n.renderBufferDirect(U,null,F,g,S,null),v.uniforms.shadow_pass.value=D.mapPass.texture,v.uniforms.resolution.value=D.mapSize,v.uniforms.radius.value=D.radius,n.setRenderTarget(D.map),n.clear(),n.renderBufferDirect(U,null,F,v,S,null)}function M(D,U,F,k){let N=null;const V=F.isPointLight===!0?D.customDistanceMaterial:D.customDepthMaterial;if(V!==void 0)N=V;else if(N=F.isPointLight===!0?l:a,n.localClippingEnabled&&U.clipShadows===!0&&Array.isArray(U.clippingPlanes)&&U.clippingPlanes.length!==0||U.displacementMap&&U.displacementScale!==0||U.alphaMap&&U.alphaTest>0||U.map&&U.alphaTest>0||U.alphaToCoverage===!0){const Z=N.uuid,Q=U.uuid;let le=u[Z];le===void 0&&(le={},u[Z]=le);let me=le[Q];me===void 0&&(me=N.clone(),le[Q]=me,U.addEventListener("dispose",L)),N=me}if(N.visible=U.visible,N.wireframe=U.wireframe,k===ga?N.side=U.shadowSide!==null?U.shadowSide:U.side:N.side=U.shadowSide!==null?U.shadowSide:f[U.side],N.alphaMap=U.alphaMap,N.alphaTest=U.alphaToCoverage===!0?.5:U.alphaTest,N.map=U.map,N.clipShadows=U.clipShadows,N.clippingPlanes=U.clippingPlanes,N.clipIntersection=U.clipIntersection,N.displacementMap=U.displacementMap,N.displacementScale=U.displacementScale,N.displacementBias=U.displacementBias,N.wireframeLinewidth=U.wireframeLinewidth,N.linewidth=U.linewidth,F.isPointLight===!0&&N.isMeshDistanceMaterial===!0){const Z=n.properties.get(N);Z.light=F}return N}function T(D,U,F,k,N){if(D.visible===!1)return;if(D.layers.test(U.layers)&&(D.isMesh||D.isLine||D.isPoints)&&(D.castShadow||D.receiveShadow&&N===ga)&&(!D.frustumCulled||i.intersectsObject(D))){D.modelViewMatrix.multiplyMatrices(F.matrixWorldInverse,D.matrixWorld);const Q=e.update(D),le=D.material;if(Array.isArray(le)){const me=Q.groups;for(let fe=0,xe=me.length;fe<xe;fe++){const X=me[fe],de=le[X.materialIndex];if(de&&de.visible){const se=M(D,de,k,N);D.onBeforeShadow(n,D,U,F,Q,se,X),n.renderBufferDirect(F,null,Q,se,D,X),D.onAfterShadow(n,D,U,F,Q,se,X)}}}else if(le.visible){const me=M(D,le,k,N);D.onBeforeShadow(n,D,U,F,Q,me,null),n.renderBufferDirect(F,null,Q,me,D,null),D.onAfterShadow(n,D,U,F,Q,me,null)}}const Z=D.children;for(let Q=0,le=Z.length;Q<le;Q++)T(Z[Q],U,F,k,N)}function L(D){D.target.removeEventListener("dispose",L);for(const F in u){const k=u[F],N=D.target.uuid;N in k&&(k[N].dispose(),delete k[N])}}}const NX={[lx]:cx,[ux]:fx,[dx]:px,[Zd]:hx,[cx]:lx,[fx]:ux,[px]:dx,[hx]:Zd};function FX(n,e){function t(){let ce=!1;const be=new Un;let Ie=null;const We=new Un(0,0,0,0);return{setMask:function(Mt){Ie!==Mt&&!ce&&(n.colorMask(Mt,Mt,Mt,Mt),Ie=Mt)},setLocked:function(Mt){ce=Mt},setClear:function(Mt,vt,$t,Tn,Xn){Xn===!0&&(Mt*=Tn,vt*=Tn,$t*=Tn),be.set(Mt,vt,$t,Tn),We.equals(be)===!1&&(n.clearColor(Mt,vt,$t,Tn),We.copy(be))},reset:function(){ce=!1,Ie=null,We.set(-1,0,0,0)}}}function i(){let ce=!1,be=!1,Ie=null,We=null,Mt=null;return{setReversed:function(vt){if(be!==vt){const $t=e.get("EXT_clip_control");vt?$t.clipControlEXT($t.LOWER_LEFT_EXT,$t.ZERO_TO_ONE_EXT):$t.clipControlEXT($t.LOWER_LEFT_EXT,$t.NEGATIVE_ONE_TO_ONE_EXT),be=vt;const Tn=Mt;Mt=null,this.setClear(Tn)}},getReversed:function(){return be},setTest:function(vt){vt?Ge(n.DEPTH_TEST):et(n.DEPTH_TEST)},setMask:function(vt){Ie!==vt&&!ce&&(n.depthMask(vt),Ie=vt)},setFunc:function(vt){if(be&&(vt=NX[vt]),We!==vt){switch(vt){case lx:n.depthFunc(n.NEVER);break;case cx:n.depthFunc(n.ALWAYS);break;case ux:n.depthFunc(n.LESS);break;case Zd:n.depthFunc(n.LEQUAL);break;case dx:n.depthFunc(n.EQUAL);break;case hx:n.depthFunc(n.GEQUAL);break;case fx:n.depthFunc(n.GREATER);break;case px:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}We=vt}},setLocked:function(vt){ce=vt},setClear:function(vt){Mt!==vt&&(be&&(vt=1-vt),n.clearDepth(vt),Mt=vt)},reset:function(){ce=!1,Ie=null,We=null,Mt=null,be=!1}}}function r(){let ce=!1,be=null,Ie=null,We=null,Mt=null,vt=null,$t=null,Tn=null,Xn=null;return{setTest:function(mn){ce||(mn?Ge(n.STENCIL_TEST):et(n.STENCIL_TEST))},setMask:function(mn){be!==mn&&!ce&&(n.stencilMask(mn),be=mn)},setFunc:function(mn,vi,Si){(Ie!==mn||We!==vi||Mt!==Si)&&(n.stencilFunc(mn,vi,Si),Ie=mn,We=vi,Mt=Si)},setOp:function(mn,vi,Si){(vt!==mn||$t!==vi||Tn!==Si)&&(n.stencilOp(mn,vi,Si),vt=mn,$t=vi,Tn=Si)},setLocked:function(mn){ce=mn},setClear:function(mn){Xn!==mn&&(n.clearStencil(mn),Xn=mn)},reset:function(){ce=!1,be=null,Ie=null,We=null,Mt=null,vt=null,$t=null,Tn=null,Xn=null}}}const s=new t,o=new i,a=new r,l=new WeakMap,u=new WeakMap;let h={},f={},g=new WeakMap,v=[],x=null,S=!1,w=null,_=null,b=null,M=null,T=null,L=null,D=null,U=new bt(0,0,0),F=0,k=!1,N=null,V=null,Z=null,Q=null,le=null;const me=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let fe=!1,xe=0;const X=n.getParameter(n.VERSION);X.indexOf("WebGL")!==-1?(xe=parseFloat(/^WebGL (\d)/.exec(X)[1]),fe=xe>=1):X.indexOf("OpenGL ES")!==-1&&(xe=parseFloat(/^OpenGL ES (\d)/.exec(X)[1]),fe=xe>=2);let de=null,se={};const Y=n.getParameter(n.SCISSOR_BOX),ge=n.getParameter(n.VIEWPORT),Ve=new Un().fromArray(Y),we=new Un().fromArray(ge);function Ne(ce,be,Ie,We){const Mt=new Uint8Array(4),vt=n.createTexture();n.bindTexture(ce,vt),n.texParameteri(ce,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(ce,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let $t=0;$t<Ie;$t++)ce===n.TEXTURE_3D||ce===n.TEXTURE_2D_ARRAY?n.texImage3D(be,0,n.RGBA,1,1,We,0,n.RGBA,n.UNSIGNED_BYTE,Mt):n.texImage2D(be+$t,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Mt);return vt}const Le={};Le[n.TEXTURE_2D]=Ne(n.TEXTURE_2D,n.TEXTURE_2D,1),Le[n.TEXTURE_CUBE_MAP]=Ne(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),Le[n.TEXTURE_2D_ARRAY]=Ne(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),Le[n.TEXTURE_3D]=Ne(n.TEXTURE_3D,n.TEXTURE_3D,1,1),s.setClear(0,0,0,1),o.setClear(1),a.setClear(0),Ge(n.DEPTH_TEST),o.setFunc(Zd),Je(!1),tt(bE),Ge(n.CULL_FACE),q(Xa);function Ge(ce){h[ce]!==!0&&(n.enable(ce),h[ce]=!0)}function et(ce){h[ce]!==!1&&(n.disable(ce),h[ce]=!1)}function ft(ce,be){return f[ce]!==be?(n.bindFramebuffer(ce,be),f[ce]=be,ce===n.DRAW_FRAMEBUFFER&&(f[n.FRAMEBUFFER]=be),ce===n.FRAMEBUFFER&&(f[n.DRAW_FRAMEBUFFER]=be),!0):!1}function yt(ce,be){let Ie=v,We=!1;if(ce){Ie=g.get(be),Ie===void 0&&(Ie=[],g.set(be,Ie));const Mt=ce.textures;if(Ie.length!==Mt.length||Ie[0]!==n.COLOR_ATTACHMENT0){for(let vt=0,$t=Mt.length;vt<$t;vt++)Ie[vt]=n.COLOR_ATTACHMENT0+vt;Ie.length=Mt.length,We=!0}}else Ie[0]!==n.BACK&&(Ie[0]=n.BACK,We=!0);We&&n.drawBuffers(Ie)}function nn(ce){return x!==ce?(n.useProgram(ce),x=ce,!0):!1}const Xt={[eu]:n.FUNC_ADD,[lB]:n.FUNC_SUBTRACT,[cB]:n.FUNC_REVERSE_SUBTRACT};Xt[uB]=n.MIN,Xt[dB]=n.MAX;const xt={[hB]:n.ZERO,[fB]:n.ONE,[pB]:n.SRC_COLOR,[ox]:n.SRC_ALPHA,[_B]:n.SRC_ALPHA_SATURATE,[yB]:n.DST_COLOR,[gB]:n.DST_ALPHA,[mB]:n.ONE_MINUS_SRC_COLOR,[ax]:n.ONE_MINUS_SRC_ALPHA,[xB]:n.ONE_MINUS_DST_COLOR,[vB]:n.ONE_MINUS_DST_ALPHA,[wB]:n.CONSTANT_COLOR,[SB]:n.ONE_MINUS_CONSTANT_COLOR,[EB]:n.CONSTANT_ALPHA,[AB]:n.ONE_MINUS_CONSTANT_ALPHA};function q(ce,be,Ie,We,Mt,vt,$t,Tn,Xn,mn){if(ce===Xa){S===!0&&(et(n.BLEND),S=!1);return}if(S===!1&&(Ge(n.BLEND),S=!0),ce!==aB){if(ce!==w||mn!==k){if((_!==eu||T!==eu)&&(n.blendEquation(n.FUNC_ADD),_=eu,T=eu),mn)switch(ce){case Wd:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case ME:n.blendFunc(n.ONE,n.ONE);break;case CE:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case TE:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",ce);break}else switch(ce){case Wd:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case ME:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case CE:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case TE:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",ce);break}b=null,M=null,L=null,D=null,U.set(0,0,0),F=0,w=ce,k=mn}return}Mt=Mt||be,vt=vt||Ie,$t=$t||We,(be!==_||Mt!==T)&&(n.blendEquationSeparate(Xt[be],Xt[Mt]),_=be,T=Mt),(Ie!==b||We!==M||vt!==L||$t!==D)&&(n.blendFuncSeparate(xt[Ie],xt[We],xt[vt],xt[$t]),b=Ie,M=We,L=vt,D=$t),(Tn.equals(U)===!1||Xn!==F)&&(n.blendColor(Tn.r,Tn.g,Tn.b,Xn),U.copy(Tn),F=Xn),w=ce,k=!1}function at(ce,be){ce.side===co?et(n.CULL_FACE):Ge(n.CULL_FACE);let Ie=ce.side===rs;be&&(Ie=!Ie),Je(Ie),ce.blending===Wd&&ce.transparent===!1?q(Xa):q(ce.blending,ce.blendEquation,ce.blendSrc,ce.blendDst,ce.blendEquationAlpha,ce.blendSrcAlpha,ce.blendDstAlpha,ce.blendColor,ce.blendAlpha,ce.premultipliedAlpha),o.setFunc(ce.depthFunc),o.setTest(ce.depthTest),o.setMask(ce.depthWrite),s.setMask(ce.colorWrite);const We=ce.stencilWrite;a.setTest(We),We&&(a.setMask(ce.stencilWriteMask),a.setFunc(ce.stencilFunc,ce.stencilRef,ce.stencilFuncMask),a.setOp(ce.stencilFail,ce.stencilZFail,ce.stencilZPass)),_t(ce.polygonOffset,ce.polygonOffsetFactor,ce.polygonOffsetUnits),ce.alphaToCoverage===!0?Ge(n.SAMPLE_ALPHA_TO_COVERAGE):et(n.SAMPLE_ALPHA_TO_COVERAGE)}function Je(ce){N!==ce&&(ce?n.frontFace(n.CW):n.frontFace(n.CCW),N=ce)}function tt(ce){ce!==rB?(Ge(n.CULL_FACE),ce!==V&&(ce===bE?n.cullFace(n.BACK):ce===sB?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):et(n.CULL_FACE),V=ce}function $e(ce){ce!==Z&&(fe&&n.lineWidth(ce),Z=ce)}function _t(ce,be,Ie){ce?(Ge(n.POLYGON_OFFSET_FILL),(Q!==be||le!==Ie)&&(n.polygonOffset(be,Ie),Q=be,le=Ie)):et(n.POLYGON_OFFSET_FILL)}function Ye(ce){ce?Ge(n.SCISSOR_TEST):et(n.SCISSOR_TEST)}function K(ce){ce===void 0&&(ce=n.TEXTURE0+me-1),de!==ce&&(n.activeTexture(ce),de=ce)}function j(ce,be,Ie){Ie===void 0&&(de===null?Ie=n.TEXTURE0+me-1:Ie=de);let We=se[Ie];We===void 0&&(We={type:void 0,texture:void 0},se[Ie]=We),(We.type!==ce||We.texture!==be)&&(de!==Ie&&(n.activeTexture(Ie),de=Ie),n.bindTexture(ce,be||Le[ce]),We.type=ce,We.texture=be)}function ne(){const ce=se[de];ce!==void 0&&ce.type!==void 0&&(n.bindTexture(ce.type,null),ce.type=void 0,ce.texture=void 0)}function Se(){try{n.compressedTexImage2D(...arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function ze(){try{n.compressedTexImage3D(...arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function Re(){try{n.texSubImage2D(...arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function mt(){try{n.texSubImage3D(...arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function lt(){try{n.compressedTexSubImage2D(...arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function Dt(){try{n.compressedTexSubImage3D(...arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function Ft(){try{n.texStorage2D(...arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function qe(){try{n.texStorage3D(...arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function wt(){try{n.texImage2D(...arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function Lt(){try{n.texImage3D(...arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function It(ce){Ve.equals(ce)===!1&&(n.scissor(ce.x,ce.y,ce.z,ce.w),Ve.copy(ce))}function St(ce){we.equals(ce)===!1&&(n.viewport(ce.x,ce.y,ce.z,ce.w),we.copy(ce))}function ue(ce,be){let Ie=u.get(be);Ie===void 0&&(Ie=new WeakMap,u.set(be,Ie));let We=Ie.get(ce);We===void 0&&(We=n.getUniformBlockIndex(be,ce.name),Ie.set(ce,We))}function Oe(ce,be){const We=u.get(be).get(ce);l.get(be)!==We&&(n.uniformBlockBinding(be,We,ce.__bindingPointIndex),l.set(be,We))}function st(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),o.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),h={},de=null,se={},f={},g=new WeakMap,v=[],x=null,S=!1,w=null,_=null,b=null,M=null,T=null,L=null,D=null,U=new bt(0,0,0),F=0,k=!1,N=null,V=null,Z=null,Q=null,le=null,Ve.set(0,0,n.canvas.width,n.canvas.height),we.set(0,0,n.canvas.width,n.canvas.height),s.reset(),o.reset(),a.reset()}return{buffers:{color:s,depth:o,stencil:a},enable:Ge,disable:et,bindFramebuffer:ft,drawBuffers:yt,useProgram:nn,setBlending:q,setMaterial:at,setFlipSided:Je,setCullFace:tt,setLineWidth:$e,setPolygonOffset:_t,setScissorTest:Ye,activeTexture:K,bindTexture:j,unbindTexture:ne,compressedTexImage2D:Se,compressedTexImage3D:ze,texImage2D:wt,texImage3D:Lt,updateUBOMapping:ue,uniformBlockBinding:Oe,texStorage2D:Ft,texStorage3D:qe,texSubImage2D:Re,texSubImage3D:mt,compressedTexSubImage2D:lt,compressedTexSubImage3D:Dt,scissor:It,viewport:St,reset:st}}function kX(n,e,t,i,r,s,o){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),u=new Xe,h=new WeakMap;let f;const g=new WeakMap;let v=!1;try{v=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function x(K,j){return v?new OffscreenCanvas(K,j):Vg("canvas")}function S(K,j,ne){let Se=1;const ze=Ye(K);if((ze.width>ne||ze.height>ne)&&(Se=ne/Math.max(ze.width,ze.height)),Se<1)if(typeof HTMLImageElement<"u"&&K instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&K instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&K instanceof ImageBitmap||typeof VideoFrame<"u"&&K instanceof VideoFrame){const Re=Math.floor(Se*ze.width),mt=Math.floor(Se*ze.height);f===void 0&&(f=x(Re,mt));const lt=j?x(Re,mt):f;return lt.width=Re,lt.height=mt,lt.getContext("2d").drawImage(K,0,0,Re,mt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ze.width+"x"+ze.height+") to ("+Re+"x"+mt+")."),lt}else return"data"in K&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ze.width+"x"+ze.height+")."),K;return K}function w(K){return K.generateMipmaps}function _(K){n.generateMipmap(K)}function b(K){return K.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:K.isWebGL3DRenderTarget?n.TEXTURE_3D:K.isWebGLArrayRenderTarget||K.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function M(K,j,ne,Se,ze=!1){if(K!==null){if(n[K]!==void 0)return n[K];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+K+"'")}let Re=j;if(j===n.RED&&(ne===n.FLOAT&&(Re=n.R32F),ne===n.HALF_FLOAT&&(Re=n.R16F),ne===n.UNSIGNED_BYTE&&(Re=n.R8)),j===n.RED_INTEGER&&(ne===n.UNSIGNED_BYTE&&(Re=n.R8UI),ne===n.UNSIGNED_SHORT&&(Re=n.R16UI),ne===n.UNSIGNED_INT&&(Re=n.R32UI),ne===n.BYTE&&(Re=n.R8I),ne===n.SHORT&&(Re=n.R16I),ne===n.INT&&(Re=n.R32I)),j===n.RG&&(ne===n.FLOAT&&(Re=n.RG32F),ne===n.HALF_FLOAT&&(Re=n.RG16F),ne===n.UNSIGNED_BYTE&&(Re=n.RG8)),j===n.RG_INTEGER&&(ne===n.UNSIGNED_BYTE&&(Re=n.RG8UI),ne===n.UNSIGNED_SHORT&&(Re=n.RG16UI),ne===n.UNSIGNED_INT&&(Re=n.RG32UI),ne===n.BYTE&&(Re=n.RG8I),ne===n.SHORT&&(Re=n.RG16I),ne===n.INT&&(Re=n.RG32I)),j===n.RGB_INTEGER&&(ne===n.UNSIGNED_BYTE&&(Re=n.RGB8UI),ne===n.UNSIGNED_SHORT&&(Re=n.RGB16UI),ne===n.UNSIGNED_INT&&(Re=n.RGB32UI),ne===n.BYTE&&(Re=n.RGB8I),ne===n.SHORT&&(Re=n.RGB16I),ne===n.INT&&(Re=n.RGB32I)),j===n.RGBA_INTEGER&&(ne===n.UNSIGNED_BYTE&&(Re=n.RGBA8UI),ne===n.UNSIGNED_SHORT&&(Re=n.RGBA16UI),ne===n.UNSIGNED_INT&&(Re=n.RGBA32UI),ne===n.BYTE&&(Re=n.RGBA8I),ne===n.SHORT&&(Re=n.RGBA16I),ne===n.INT&&(Re=n.RGBA32I)),j===n.RGB&&ne===n.UNSIGNED_INT_5_9_9_9_REV&&(Re=n.RGB9_E5),j===n.RGBA){const mt=ze?Ug:kn.getTransfer(Se);ne===n.FLOAT&&(Re=n.RGBA32F),ne===n.HALF_FLOAT&&(Re=n.RGBA16F),ne===n.UNSIGNED_BYTE&&(Re=mt===Qn?n.SRGB8_ALPHA8:n.RGBA8),ne===n.UNSIGNED_SHORT_4_4_4_4&&(Re=n.RGBA4),ne===n.UNSIGNED_SHORT_5_5_5_1&&(Re=n.RGB5_A1)}return(Re===n.R16F||Re===n.R32F||Re===n.RG16F||Re===n.RG32F||Re===n.RGBA16F||Re===n.RGBA32F)&&e.get("EXT_color_buffer_float"),Re}function T(K,j){let ne;return K?j===null||j===Za||j===ap?ne=n.DEPTH24_STENCIL8:j===Ci?ne=n.DEPTH32F_STENCIL8:j===op&&(ne=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):j===null||j===Za||j===ap?ne=n.DEPTH_COMPONENT24:j===Ci?ne=n.DEPTH_COMPONENT32F:j===op&&(ne=n.DEPTH_COMPONENT16),ne}function L(K,j){return w(K)===!0||K.isFramebufferTexture&&K.minFilter!==ur&&K.minFilter!==Gn?Math.log2(Math.max(j.width,j.height))+1:K.mipmaps!==void 0&&K.mipmaps.length>0?K.mipmaps.length:K.isCompressedTexture&&Array.isArray(K.image)?j.mipmaps.length:1}function D(K){const j=K.target;j.removeEventListener("dispose",D),F(j),j.isVideoTexture&&h.delete(j)}function U(K){const j=K.target;j.removeEventListener("dispose",U),N(j)}function F(K){const j=i.get(K);if(j.__webglInit===void 0)return;const ne=K.source,Se=g.get(ne);if(Se){const ze=Se[j.__cacheKey];ze.usedTimes--,ze.usedTimes===0&&k(K),Object.keys(Se).length===0&&g.delete(ne)}i.remove(K)}function k(K){const j=i.get(K);n.deleteTexture(j.__webglTexture);const ne=K.source,Se=g.get(ne);delete Se[j.__cacheKey],o.memory.textures--}function N(K){const j=i.get(K);if(K.depthTexture&&(K.depthTexture.dispose(),i.remove(K.depthTexture)),K.isWebGLCubeRenderTarget)for(let Se=0;Se<6;Se++){if(Array.isArray(j.__webglFramebuffer[Se]))for(let ze=0;ze<j.__webglFramebuffer[Se].length;ze++)n.deleteFramebuffer(j.__webglFramebuffer[Se][ze]);else n.deleteFramebuffer(j.__webglFramebuffer[Se]);j.__webglDepthbuffer&&n.deleteRenderbuffer(j.__webglDepthbuffer[Se])}else{if(Array.isArray(j.__webglFramebuffer))for(let Se=0;Se<j.__webglFramebuffer.length;Se++)n.deleteFramebuffer(j.__webglFramebuffer[Se]);else n.deleteFramebuffer(j.__webglFramebuffer);if(j.__webglDepthbuffer&&n.deleteRenderbuffer(j.__webglDepthbuffer),j.__webglMultisampledFramebuffer&&n.deleteFramebuffer(j.__webglMultisampledFramebuffer),j.__webglColorRenderbuffer)for(let Se=0;Se<j.__webglColorRenderbuffer.length;Se++)j.__webglColorRenderbuffer[Se]&&n.deleteRenderbuffer(j.__webglColorRenderbuffer[Se]);j.__webglDepthRenderbuffer&&n.deleteRenderbuffer(j.__webglDepthRenderbuffer)}const ne=K.textures;for(let Se=0,ze=ne.length;Se<ze;Se++){const Re=i.get(ne[Se]);Re.__webglTexture&&(n.deleteTexture(Re.__webglTexture),o.memory.textures--),i.remove(ne[Se])}i.remove(K)}let V=0;function Z(){V=0}function Q(){const K=V;return K>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+K+" texture units while this GPU supports only "+r.maxTextures),V+=1,K}function le(K){const j=[];return j.push(K.wrapS),j.push(K.wrapT),j.push(K.wrapR||0),j.push(K.magFilter),j.push(K.minFilter),j.push(K.anisotropy),j.push(K.internalFormat),j.push(K.format),j.push(K.type),j.push(K.generateMipmaps),j.push(K.premultiplyAlpha),j.push(K.flipY),j.push(K.unpackAlignment),j.push(K.colorSpace),j.join()}function me(K,j){const ne=i.get(K);if(K.isVideoTexture&&$e(K),K.isRenderTargetTexture===!1&&K.version>0&&ne.__version!==K.version){const Se=K.image;if(Se===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Se.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{we(ne,K,j);return}}t.bindTexture(n.TEXTURE_2D,ne.__webglTexture,n.TEXTURE0+j)}function fe(K,j){const ne=i.get(K);if(K.version>0&&ne.__version!==K.version){we(ne,K,j);return}t.bindTexture(n.TEXTURE_2D_ARRAY,ne.__webglTexture,n.TEXTURE0+j)}function xe(K,j){const ne=i.get(K);if(K.version>0&&ne.__version!==K.version){we(ne,K,j);return}t.bindTexture(n.TEXTURE_3D,ne.__webglTexture,n.TEXTURE0+j)}function X(K,j){const ne=i.get(K);if(K.version>0&&ne.__version!==K.version){Ne(ne,K,j);return}t.bindTexture(n.TEXTURE_CUBE_MAP,ne.__webglTexture,n.TEXTURE0+j)}const de={[hu]:n.REPEAT,[Zi]:n.CLAMP_TO_EDGE,[sp]:n.MIRRORED_REPEAT},se={[ur]:n.NEAREST,[A_]:n.NEAREST_MIPMAP_NEAREST,[Od]:n.NEAREST_MIPMAP_LINEAR,[Gn]:n.LINEAR,[Jf]:n.LINEAR_MIPMAP_NEAREST,[Bo]:n.LINEAR_MIPMAP_LINEAR},Y={[HB]:n.NEVER,[XB]:n.ALWAYS,[VB]:n.LESS,[vb]:n.LEQUAL,[GB]:n.EQUAL,[$B]:n.GEQUAL,[jB]:n.GREATER,[WB]:n.NOTEQUAL};function ge(K,j){if(j.type===Ci&&e.has("OES_texture_float_linear")===!1&&(j.magFilter===Gn||j.magFilter===Jf||j.magFilter===Od||j.magFilter===Bo||j.minFilter===Gn||j.minFilter===Jf||j.minFilter===Od||j.minFilter===Bo)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(K,n.TEXTURE_WRAP_S,de[j.wrapS]),n.texParameteri(K,n.TEXTURE_WRAP_T,de[j.wrapT]),(K===n.TEXTURE_3D||K===n.TEXTURE_2D_ARRAY)&&n.texParameteri(K,n.TEXTURE_WRAP_R,de[j.wrapR]),n.texParameteri(K,n.TEXTURE_MAG_FILTER,se[j.magFilter]),n.texParameteri(K,n.TEXTURE_MIN_FILTER,se[j.minFilter]),j.compareFunction&&(n.texParameteri(K,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(K,n.TEXTURE_COMPARE_FUNC,Y[j.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(j.magFilter===ur||j.minFilter!==Od&&j.minFilter!==Bo||j.type===Ci&&e.has("OES_texture_float_linear")===!1)return;if(j.anisotropy>1||i.get(j).__currentAnisotropy){const ne=e.get("EXT_texture_filter_anisotropic");n.texParameterf(K,ne.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(j.anisotropy,r.getMaxAnisotropy())),i.get(j).__currentAnisotropy=j.anisotropy}}}function Ve(K,j){let ne=!1;K.__webglInit===void 0&&(K.__webglInit=!0,j.addEventListener("dispose",D));const Se=j.source;let ze=g.get(Se);ze===void 0&&(ze={},g.set(Se,ze));const Re=le(j);if(Re!==K.__cacheKey){ze[Re]===void 0&&(ze[Re]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,ne=!0),ze[Re].usedTimes++;const mt=ze[K.__cacheKey];mt!==void 0&&(ze[K.__cacheKey].usedTimes--,mt.usedTimes===0&&k(j)),K.__cacheKey=Re,K.__webglTexture=ze[Re].texture}return ne}function we(K,j,ne){let Se=n.TEXTURE_2D;(j.isDataArrayTexture||j.isCompressedArrayTexture)&&(Se=n.TEXTURE_2D_ARRAY),j.isData3DTexture&&(Se=n.TEXTURE_3D);const ze=Ve(K,j),Re=j.source;t.bindTexture(Se,K.__webglTexture,n.TEXTURE0+ne);const mt=i.get(Re);if(Re.version!==mt.__version||ze===!0){t.activeTexture(n.TEXTURE0+ne);const lt=kn.getPrimaries(kn.workingColorSpace),Dt=j.colorSpace===Xl?null:kn.getPrimaries(j.colorSpace),Ft=j.colorSpace===Xl||lt===Dt?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,j.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,j.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,j.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ft);let qe=S(j.image,!1,r.maxTextureSize);qe=_t(j,qe);const wt=s.convert(j.format,j.colorSpace),Lt=s.convert(j.type);let It=M(j.internalFormat,wt,Lt,j.colorSpace,j.isVideoTexture);ge(Se,j);let St;const ue=j.mipmaps,Oe=j.isVideoTexture!==!0,st=mt.__version===void 0||ze===!0,ce=Re.dataReady,be=L(j,qe);if(j.isDepthTexture)It=T(j.format===cp,j.type),st&&(Oe?t.texStorage2D(n.TEXTURE_2D,1,It,qe.width,qe.height):t.texImage2D(n.TEXTURE_2D,0,It,qe.width,qe.height,0,wt,Lt,null));else if(j.isDataTexture)if(ue.length>0){Oe&&st&&t.texStorage2D(n.TEXTURE_2D,be,It,ue[0].width,ue[0].height);for(let Ie=0,We=ue.length;Ie<We;Ie++)St=ue[Ie],Oe?ce&&t.texSubImage2D(n.TEXTURE_2D,Ie,0,0,St.width,St.height,wt,Lt,St.data):t.texImage2D(n.TEXTURE_2D,Ie,It,St.width,St.height,0,wt,Lt,St.data);j.generateMipmaps=!1}else Oe?(st&&t.texStorage2D(n.TEXTURE_2D,be,It,qe.width,qe.height),ce&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,qe.width,qe.height,wt,Lt,qe.data)):t.texImage2D(n.TEXTURE_2D,0,It,qe.width,qe.height,0,wt,Lt,qe.data);else if(j.isCompressedTexture)if(j.isCompressedArrayTexture){Oe&&st&&t.texStorage3D(n.TEXTURE_2D_ARRAY,be,It,ue[0].width,ue[0].height,qe.depth);for(let Ie=0,We=ue.length;Ie<We;Ie++)if(St=ue[Ie],j.format!==Qi)if(wt!==null)if(Oe){if(ce)if(j.layerUpdates.size>0){const Mt=kE(St.width,St.height,j.format,j.type);for(const vt of j.layerUpdates){const $t=St.data.subarray(vt*Mt/St.data.BYTES_PER_ELEMENT,(vt+1)*Mt/St.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Ie,0,0,vt,St.width,St.height,1,wt,$t)}j.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Ie,0,0,0,St.width,St.height,qe.depth,wt,St.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Ie,It,St.width,St.height,qe.depth,0,St.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Oe?ce&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,Ie,0,0,0,St.width,St.height,qe.depth,wt,Lt,St.data):t.texImage3D(n.TEXTURE_2D_ARRAY,Ie,It,St.width,St.height,qe.depth,0,wt,Lt,St.data)}else{Oe&&st&&t.texStorage2D(n.TEXTURE_2D,be,It,ue[0].width,ue[0].height);for(let Ie=0,We=ue.length;Ie<We;Ie++)St=ue[Ie],j.format!==Qi?wt!==null?Oe?ce&&t.compressedTexSubImage2D(n.TEXTURE_2D,Ie,0,0,St.width,St.height,wt,St.data):t.compressedTexImage2D(n.TEXTURE_2D,Ie,It,St.width,St.height,0,St.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Oe?ce&&t.texSubImage2D(n.TEXTURE_2D,Ie,0,0,St.width,St.height,wt,Lt,St.data):t.texImage2D(n.TEXTURE_2D,Ie,It,St.width,St.height,0,wt,Lt,St.data)}else if(j.isDataArrayTexture)if(Oe){if(st&&t.texStorage3D(n.TEXTURE_2D_ARRAY,be,It,qe.width,qe.height,qe.depth),ce)if(j.layerUpdates.size>0){const Ie=kE(qe.width,qe.height,j.format,j.type);for(const We of j.layerUpdates){const Mt=qe.data.subarray(We*Ie/qe.data.BYTES_PER_ELEMENT,(We+1)*Ie/qe.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,We,qe.width,qe.height,1,wt,Lt,Mt)}j.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,qe.width,qe.height,qe.depth,wt,Lt,qe.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,It,qe.width,qe.height,qe.depth,0,wt,Lt,qe.data);else if(j.isData3DTexture)Oe?(st&&t.texStorage3D(n.TEXTURE_3D,be,It,qe.width,qe.height,qe.depth),ce&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,qe.width,qe.height,qe.depth,wt,Lt,qe.data)):t.texImage3D(n.TEXTURE_3D,0,It,qe.width,qe.height,qe.depth,0,wt,Lt,qe.data);else if(j.isFramebufferTexture){if(st)if(Oe)t.texStorage2D(n.TEXTURE_2D,be,It,qe.width,qe.height);else{let Ie=qe.width,We=qe.height;for(let Mt=0;Mt<be;Mt++)t.texImage2D(n.TEXTURE_2D,Mt,It,Ie,We,0,wt,Lt,null),Ie>>=1,We>>=1}}else if(ue.length>0){if(Oe&&st){const Ie=Ye(ue[0]);t.texStorage2D(n.TEXTURE_2D,be,It,Ie.width,Ie.height)}for(let Ie=0,We=ue.length;Ie<We;Ie++)St=ue[Ie],Oe?ce&&t.texSubImage2D(n.TEXTURE_2D,Ie,0,0,wt,Lt,St):t.texImage2D(n.TEXTURE_2D,Ie,It,wt,Lt,St);j.generateMipmaps=!1}else if(Oe){if(st){const Ie=Ye(qe);t.texStorage2D(n.TEXTURE_2D,be,It,Ie.width,Ie.height)}ce&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,wt,Lt,qe)}else t.texImage2D(n.TEXTURE_2D,0,It,wt,Lt,qe);w(j)&&_(Se),mt.__version=Re.version,j.onUpdate&&j.onUpdate(j)}K.__version=j.version}function Ne(K,j,ne){if(j.image.length!==6)return;const Se=Ve(K,j),ze=j.source;t.bindTexture(n.TEXTURE_CUBE_MAP,K.__webglTexture,n.TEXTURE0+ne);const Re=i.get(ze);if(ze.version!==Re.__version||Se===!0){t.activeTexture(n.TEXTURE0+ne);const mt=kn.getPrimaries(kn.workingColorSpace),lt=j.colorSpace===Xl?null:kn.getPrimaries(j.colorSpace),Dt=j.colorSpace===Xl||mt===lt?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,j.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,j.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,j.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Dt);const Ft=j.isCompressedTexture||j.image[0].isCompressedTexture,qe=j.image[0]&&j.image[0].isDataTexture,wt=[];for(let We=0;We<6;We++)!Ft&&!qe?wt[We]=S(j.image[We],!0,r.maxCubemapSize):wt[We]=qe?j.image[We].image:j.image[We],wt[We]=_t(j,wt[We]);const Lt=wt[0],It=s.convert(j.format,j.colorSpace),St=s.convert(j.type),ue=M(j.internalFormat,It,St,j.colorSpace),Oe=j.isVideoTexture!==!0,st=Re.__version===void 0||Se===!0,ce=ze.dataReady;let be=L(j,Lt);ge(n.TEXTURE_CUBE_MAP,j);let Ie;if(Ft){Oe&&st&&t.texStorage2D(n.TEXTURE_CUBE_MAP,be,ue,Lt.width,Lt.height);for(let We=0;We<6;We++){Ie=wt[We].mipmaps;for(let Mt=0;Mt<Ie.length;Mt++){const vt=Ie[Mt];j.format!==Qi?It!==null?Oe?ce&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+We,Mt,0,0,vt.width,vt.height,It,vt.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+We,Mt,ue,vt.width,vt.height,0,vt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Oe?ce&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+We,Mt,0,0,vt.width,vt.height,It,St,vt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+We,Mt,ue,vt.width,vt.height,0,It,St,vt.data)}}}else{if(Ie=j.mipmaps,Oe&&st){Ie.length>0&&be++;const We=Ye(wt[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,be,ue,We.width,We.height)}for(let We=0;We<6;We++)if(qe){Oe?ce&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+We,0,0,0,wt[We].width,wt[We].height,It,St,wt[We].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+We,0,ue,wt[We].width,wt[We].height,0,It,St,wt[We].data);for(let Mt=0;Mt<Ie.length;Mt++){const $t=Ie[Mt].image[We].image;Oe?ce&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+We,Mt+1,0,0,$t.width,$t.height,It,St,$t.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+We,Mt+1,ue,$t.width,$t.height,0,It,St,$t.data)}}else{Oe?ce&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+We,0,0,0,It,St,wt[We]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+We,0,ue,It,St,wt[We]);for(let Mt=0;Mt<Ie.length;Mt++){const vt=Ie[Mt];Oe?ce&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+We,Mt+1,0,0,It,St,vt.image[We]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+We,Mt+1,ue,It,St,vt.image[We])}}}w(j)&&_(n.TEXTURE_CUBE_MAP),Re.__version=ze.version,j.onUpdate&&j.onUpdate(j)}K.__version=j.version}function Le(K,j,ne,Se,ze,Re){const mt=s.convert(ne.format,ne.colorSpace),lt=s.convert(ne.type),Dt=M(ne.internalFormat,mt,lt,ne.colorSpace),Ft=i.get(j),qe=i.get(ne);if(qe.__renderTarget=j,!Ft.__hasExternalTextures){const wt=Math.max(1,j.width>>Re),Lt=Math.max(1,j.height>>Re);ze===n.TEXTURE_3D||ze===n.TEXTURE_2D_ARRAY?t.texImage3D(ze,Re,Dt,wt,Lt,j.depth,0,mt,lt,null):t.texImage2D(ze,Re,Dt,wt,Lt,0,mt,lt,null)}t.bindFramebuffer(n.FRAMEBUFFER,K),tt(j)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Se,ze,qe.__webglTexture,0,Je(j)):(ze===n.TEXTURE_2D||ze>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&ze<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,Se,ze,qe.__webglTexture,Re),t.bindFramebuffer(n.FRAMEBUFFER,null)}function Ge(K,j,ne){if(n.bindRenderbuffer(n.RENDERBUFFER,K),j.depthBuffer){const Se=j.depthTexture,ze=Se&&Se.isDepthTexture?Se.type:null,Re=T(j.stencilBuffer,ze),mt=j.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,lt=Je(j);tt(j)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,lt,Re,j.width,j.height):ne?n.renderbufferStorageMultisample(n.RENDERBUFFER,lt,Re,j.width,j.height):n.renderbufferStorage(n.RENDERBUFFER,Re,j.width,j.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,mt,n.RENDERBUFFER,K)}else{const Se=j.textures;for(let ze=0;ze<Se.length;ze++){const Re=Se[ze],mt=s.convert(Re.format,Re.colorSpace),lt=s.convert(Re.type),Dt=M(Re.internalFormat,mt,lt,Re.colorSpace),Ft=Je(j);ne&&tt(j)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Ft,Dt,j.width,j.height):tt(j)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Ft,Dt,j.width,j.height):n.renderbufferStorage(n.RENDERBUFFER,Dt,j.width,j.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function et(K,j){if(j&&j.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,K),!(j.depthTexture&&j.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Se=i.get(j.depthTexture);Se.__renderTarget=j,(!Se.__webglTexture||j.depthTexture.image.width!==j.width||j.depthTexture.image.height!==j.height)&&(j.depthTexture.image.width=j.width,j.depthTexture.image.height=j.height,j.depthTexture.needsUpdate=!0),me(j.depthTexture,0);const ze=Se.__webglTexture,Re=Je(j);if(j.depthTexture.format===lp)tt(j)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,ze,0,Re):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,ze,0);else if(j.depthTexture.format===cp)tt(j)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,ze,0,Re):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,ze,0);else throw new Error("Unknown depthTexture format")}function ft(K){const j=i.get(K),ne=K.isWebGLCubeRenderTarget===!0;if(j.__boundDepthTexture!==K.depthTexture){const Se=K.depthTexture;if(j.__depthDisposeCallback&&j.__depthDisposeCallback(),Se){const ze=()=>{delete j.__boundDepthTexture,delete j.__depthDisposeCallback,Se.removeEventListener("dispose",ze)};Se.addEventListener("dispose",ze),j.__depthDisposeCallback=ze}j.__boundDepthTexture=Se}if(K.depthTexture&&!j.__autoAllocateDepthBuffer){if(ne)throw new Error("target.depthTexture not supported in Cube render targets");const Se=K.texture.mipmaps;Se&&Se.length>0?et(j.__webglFramebuffer[0],K):et(j.__webglFramebuffer,K)}else if(ne){j.__webglDepthbuffer=[];for(let Se=0;Se<6;Se++)if(t.bindFramebuffer(n.FRAMEBUFFER,j.__webglFramebuffer[Se]),j.__webglDepthbuffer[Se]===void 0)j.__webglDepthbuffer[Se]=n.createRenderbuffer(),Ge(j.__webglDepthbuffer[Se],K,!1);else{const ze=K.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Re=j.__webglDepthbuffer[Se];n.bindRenderbuffer(n.RENDERBUFFER,Re),n.framebufferRenderbuffer(n.FRAMEBUFFER,ze,n.RENDERBUFFER,Re)}}else{const Se=K.texture.mipmaps;if(Se&&Se.length>0?t.bindFramebuffer(n.FRAMEBUFFER,j.__webglFramebuffer[0]):t.bindFramebuffer(n.FRAMEBUFFER,j.__webglFramebuffer),j.__webglDepthbuffer===void 0)j.__webglDepthbuffer=n.createRenderbuffer(),Ge(j.__webglDepthbuffer,K,!1);else{const ze=K.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Re=j.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,Re),n.framebufferRenderbuffer(n.FRAMEBUFFER,ze,n.RENDERBUFFER,Re)}}t.bindFramebuffer(n.FRAMEBUFFER,null)}function yt(K,j,ne){const Se=i.get(K);j!==void 0&&Le(Se.__webglFramebuffer,K,K.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),ne!==void 0&&ft(K)}function nn(K){const j=K.texture,ne=i.get(K),Se=i.get(j);K.addEventListener("dispose",U);const ze=K.textures,Re=K.isWebGLCubeRenderTarget===!0,mt=ze.length>1;if(mt||(Se.__webglTexture===void 0&&(Se.__webglTexture=n.createTexture()),Se.__version=j.version,o.memory.textures++),Re){ne.__webglFramebuffer=[];for(let lt=0;lt<6;lt++)if(j.mipmaps&&j.mipmaps.length>0){ne.__webglFramebuffer[lt]=[];for(let Dt=0;Dt<j.mipmaps.length;Dt++)ne.__webglFramebuffer[lt][Dt]=n.createFramebuffer()}else ne.__webglFramebuffer[lt]=n.createFramebuffer()}else{if(j.mipmaps&&j.mipmaps.length>0){ne.__webglFramebuffer=[];for(let lt=0;lt<j.mipmaps.length;lt++)ne.__webglFramebuffer[lt]=n.createFramebuffer()}else ne.__webglFramebuffer=n.createFramebuffer();if(mt)for(let lt=0,Dt=ze.length;lt<Dt;lt++){const Ft=i.get(ze[lt]);Ft.__webglTexture===void 0&&(Ft.__webglTexture=n.createTexture(),o.memory.textures++)}if(K.samples>0&&tt(K)===!1){ne.__webglMultisampledFramebuffer=n.createFramebuffer(),ne.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,ne.__webglMultisampledFramebuffer);for(let lt=0;lt<ze.length;lt++){const Dt=ze[lt];ne.__webglColorRenderbuffer[lt]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,ne.__webglColorRenderbuffer[lt]);const Ft=s.convert(Dt.format,Dt.colorSpace),qe=s.convert(Dt.type),wt=M(Dt.internalFormat,Ft,qe,Dt.colorSpace,K.isXRRenderTarget===!0),Lt=Je(K);n.renderbufferStorageMultisample(n.RENDERBUFFER,Lt,wt,K.width,K.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+lt,n.RENDERBUFFER,ne.__webglColorRenderbuffer[lt])}n.bindRenderbuffer(n.RENDERBUFFER,null),K.depthBuffer&&(ne.__webglDepthRenderbuffer=n.createRenderbuffer(),Ge(ne.__webglDepthRenderbuffer,K,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Re){t.bindTexture(n.TEXTURE_CUBE_MAP,Se.__webglTexture),ge(n.TEXTURE_CUBE_MAP,j);for(let lt=0;lt<6;lt++)if(j.mipmaps&&j.mipmaps.length>0)for(let Dt=0;Dt<j.mipmaps.length;Dt++)Le(ne.__webglFramebuffer[lt][Dt],K,j,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+lt,Dt);else Le(ne.__webglFramebuffer[lt],K,j,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+lt,0);w(j)&&_(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(mt){for(let lt=0,Dt=ze.length;lt<Dt;lt++){const Ft=ze[lt],qe=i.get(Ft);t.bindTexture(n.TEXTURE_2D,qe.__webglTexture),ge(n.TEXTURE_2D,Ft),Le(ne.__webglFramebuffer,K,Ft,n.COLOR_ATTACHMENT0+lt,n.TEXTURE_2D,0),w(Ft)&&_(n.TEXTURE_2D)}t.unbindTexture()}else{let lt=n.TEXTURE_2D;if((K.isWebGL3DRenderTarget||K.isWebGLArrayRenderTarget)&&(lt=K.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(lt,Se.__webglTexture),ge(lt,j),j.mipmaps&&j.mipmaps.length>0)for(let Dt=0;Dt<j.mipmaps.length;Dt++)Le(ne.__webglFramebuffer[Dt],K,j,n.COLOR_ATTACHMENT0,lt,Dt);else Le(ne.__webglFramebuffer,K,j,n.COLOR_ATTACHMENT0,lt,0);w(j)&&_(lt),t.unbindTexture()}K.depthBuffer&&ft(K)}function Xt(K){const j=K.textures;for(let ne=0,Se=j.length;ne<Se;ne++){const ze=j[ne];if(w(ze)){const Re=b(K),mt=i.get(ze).__webglTexture;t.bindTexture(Re,mt),_(Re),t.unbindTexture()}}}const xt=[],q=[];function at(K){if(K.samples>0){if(tt(K)===!1){const j=K.textures,ne=K.width,Se=K.height;let ze=n.COLOR_BUFFER_BIT;const Re=K.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,mt=i.get(K),lt=j.length>1;if(lt)for(let Ft=0;Ft<j.length;Ft++)t.bindFramebuffer(n.FRAMEBUFFER,mt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ft,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,mt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ft,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,mt.__webglMultisampledFramebuffer);const Dt=K.texture.mipmaps;Dt&&Dt.length>0?t.bindFramebuffer(n.DRAW_FRAMEBUFFER,mt.__webglFramebuffer[0]):t.bindFramebuffer(n.DRAW_FRAMEBUFFER,mt.__webglFramebuffer);for(let Ft=0;Ft<j.length;Ft++){if(K.resolveDepthBuffer&&(K.depthBuffer&&(ze|=n.DEPTH_BUFFER_BIT),K.stencilBuffer&&K.resolveStencilBuffer&&(ze|=n.STENCIL_BUFFER_BIT)),lt){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,mt.__webglColorRenderbuffer[Ft]);const qe=i.get(j[Ft]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,qe,0)}n.blitFramebuffer(0,0,ne,Se,0,0,ne,Se,ze,n.NEAREST),l===!0&&(xt.length=0,q.length=0,xt.push(n.COLOR_ATTACHMENT0+Ft),K.depthBuffer&&K.resolveDepthBuffer===!1&&(xt.push(Re),q.push(Re),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,q)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,xt))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),lt)for(let Ft=0;Ft<j.length;Ft++){t.bindFramebuffer(n.FRAMEBUFFER,mt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ft,n.RENDERBUFFER,mt.__webglColorRenderbuffer[Ft]);const qe=i.get(j[Ft]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,mt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ft,n.TEXTURE_2D,qe,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,mt.__webglMultisampledFramebuffer)}else if(K.depthBuffer&&K.resolveDepthBuffer===!1&&l){const j=K.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[j])}}}function Je(K){return Math.min(r.maxSamples,K.samples)}function tt(K){const j=i.get(K);return K.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&j.__useRenderToTexture!==!1}function $e(K){const j=o.render.frame;h.get(K)!==j&&(h.set(K,j),K.update())}function _t(K,j){const ne=K.colorSpace,Se=K.format,ze=K.type;return K.isCompressedTexture===!0||K.isVideoTexture===!0||ne!==Qa&&ne!==Xl&&(kn.getTransfer(ne)===Qn?(Se!==Qi||ze!==Ts)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ne)),j}function Ye(K){return typeof HTMLImageElement<"u"&&K instanceof HTMLImageElement?(u.width=K.naturalWidth||K.width,u.height=K.naturalHeight||K.height):typeof VideoFrame<"u"&&K instanceof VideoFrame?(u.width=K.displayWidth,u.height=K.displayHeight):(u.width=K.width,u.height=K.height),u}this.allocateTextureUnit=Q,this.resetTextureUnits=Z,this.setTexture2D=me,this.setTexture2DArray=fe,this.setTexture3D=xe,this.setTextureCube=X,this.rebindTextures=yt,this.setupRenderTarget=nn,this.updateRenderTargetMipmap=Xt,this.updateMultisampleRenderTarget=at,this.setupDepthRenderbuffer=ft,this.setupFrameBufferTexture=Le,this.useMultisampledRTT=tt}function KL(n,e){function t(i,r=Xl){let s;const o=kn.getTransfer(r);if(i===Ts)return n.UNSIGNED_BYTE;if(i===C_)return n.UNSIGNED_SHORT_4_4_4_4;if(i===T_)return n.UNSIGNED_SHORT_5_5_5_1;if(i===ub)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===b_)return n.BYTE;if(i===M_)return n.SHORT;if(i===op)return n.UNSIGNED_SHORT;if(i===o0)return n.INT;if(i===Za)return n.UNSIGNED_INT;if(i===Ci)return n.FLOAT;if(i===cr)return n.HALF_FLOAT;if(i===db)return n.ALPHA;if(i===hb)return n.RGB;if(i===Qi)return n.RGBA;if(i===lp)return n.DEPTH_COMPONENT;if(i===cp)return n.DEPTH_STENCIL;if(i===a0)return n.RED;if(i===l0)return n.RED_INTEGER;if(i===fb)return n.RG;if(i===R_)return n.RG_INTEGER;if(i===P_)return n.RGBA_INTEGER;if(i===gg||i===vg||i===yg||i===xg)if(o===Qn)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(i===gg)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===vg)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===yg)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===xg)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(i===gg)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===vg)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===yg)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===xg)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===mx||i===gx||i===vx||i===yx)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(i===mx)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===gx)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===vx)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===yx)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===xx||i===_x||i===wx)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(i===xx||i===_x)return o===Qn?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(i===wx)return o===Qn?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===Sx||i===Ex||i===Ax||i===bx||i===Mx||i===Cx||i===Tx||i===Rx||i===Px||i===Ix||i===Dx||i===Bx||i===Lx||i===Ox)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(i===Sx)return o===Qn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===Ex)return o===Qn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===Ax)return o===Qn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===bx)return o===Qn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===Mx)return o===Qn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===Cx)return o===Qn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===Tx)return o===Qn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===Rx)return o===Qn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===Px)return o===Qn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===Ix)return o===Qn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===Dx)return o===Qn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===Bx)return o===Qn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===Lx)return o===Qn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===Ox)return o===Qn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===_g||i===Nx||i===Fx)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(i===_g)return o===Qn?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===Nx)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===Fx)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===pb||i===kx||i===Ux||i===zx)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(i===_g)return s.COMPRESSED_RED_RGTC1_EXT;if(i===kx)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===Ux)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===zx)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===ap?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}const UX=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,zX=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class HX{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(this.texture===null){const r=new qn,s=e.properties.get(r);s.__webglTexture=t.texture,(t.depthNear!==i.depthNear||t.depthFar!==i.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,i=new Ps({vertexShader:UX,fragmentShader:zX,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Ti(new Su(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class VX extends nl{constructor(e,t){super();const i=this;let r=null,s=1,o=null,a="local-floor",l=1,u=null,h=null,f=null,g=null,v=null,x=null;const S=new HX,w=t.getContextAttributes();let _=null,b=null;const M=[],T=[],L=new Xe;let D=null;const U=new ji;U.viewport=new Un;const F=new ji;F.viewport=new Un;const k=[U,F],N=new UL;let V=null,Z=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(we){let Ne=M[we];return Ne===void 0&&(Ne=new Wy,M[we]=Ne),Ne.getTargetRaySpace()},this.getControllerGrip=function(we){let Ne=M[we];return Ne===void 0&&(Ne=new Wy,M[we]=Ne),Ne.getGripSpace()},this.getHand=function(we){let Ne=M[we];return Ne===void 0&&(Ne=new Wy,M[we]=Ne),Ne.getHandSpace()};function Q(we){const Ne=T.indexOf(we.inputSource);if(Ne===-1)return;const Le=M[Ne];Le!==void 0&&(Le.update(we.inputSource,we.frame,u||o),Le.dispatchEvent({type:we.type,data:we.inputSource}))}function le(){r.removeEventListener("select",Q),r.removeEventListener("selectstart",Q),r.removeEventListener("selectend",Q),r.removeEventListener("squeeze",Q),r.removeEventListener("squeezestart",Q),r.removeEventListener("squeezeend",Q),r.removeEventListener("end",le),r.removeEventListener("inputsourceschange",me);for(let we=0;we<M.length;we++){const Ne=T[we];Ne!==null&&(T[we]=null,M[we].disconnect(Ne))}V=null,Z=null,S.reset(),e.setRenderTarget(_),v=null,g=null,f=null,r=null,b=null,Ve.stop(),i.isPresenting=!1,e.setPixelRatio(D),e.setSize(L.width,L.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(we){s=we,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(we){a=we,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||o},this.setReferenceSpace=function(we){u=we},this.getBaseLayer=function(){return g!==null?g:v},this.getBinding=function(){return f},this.getFrame=function(){return x},this.getSession=function(){return r},this.setSession=async function(we){if(r=we,r!==null){if(_=e.getRenderTarget(),r.addEventListener("select",Q),r.addEventListener("selectstart",Q),r.addEventListener("selectend",Q),r.addEventListener("squeeze",Q),r.addEventListener("squeezestart",Q),r.addEventListener("squeezeend",Q),r.addEventListener("end",le),r.addEventListener("inputsourceschange",me),w.xrCompatible!==!0&&await t.makeXRCompatible(),D=e.getPixelRatio(),e.getSize(L),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let Le=null,Ge=null,et=null;w.depth&&(et=w.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Le=w.stencil?cp:lp,Ge=w.stencil?ap:Za);const ft={colorFormat:t.RGBA8,depthFormat:et,scaleFactor:s};f=new XRWebGLBinding(r,t),g=f.createProjectionLayer(ft),r.updateRenderState({layers:[g]}),e.setPixelRatio(1),e.setSize(g.textureWidth,g.textureHeight,!1),b=new Rs(g.textureWidth,g.textureHeight,{format:Qi,type:Ts,depthTexture:new p0(g.textureWidth,g.textureHeight,Ge,void 0,void 0,void 0,void 0,void 0,void 0,Le),stencilBuffer:w.stencil,colorSpace:e.outputColorSpace,samples:w.antialias?4:0,resolveDepthBuffer:g.ignoreDepthValues===!1,resolveStencilBuffer:g.ignoreDepthValues===!1})}else{const Le={antialias:w.antialias,alpha:!0,depth:w.depth,stencil:w.stencil,framebufferScaleFactor:s};v=new XRWebGLLayer(r,t,Le),r.updateRenderState({baseLayer:v}),e.setPixelRatio(1),e.setSize(v.framebufferWidth,v.framebufferHeight,!1),b=new Rs(v.framebufferWidth,v.framebufferHeight,{format:Qi,type:Ts,colorSpace:e.outputColorSpace,stencilBuffer:w.stencil,resolveDepthBuffer:v.ignoreDepthValues===!1,resolveStencilBuffer:v.ignoreDepthValues===!1})}b.isXRRenderTarget=!0,this.setFoveation(l),u=null,o=await r.requestReferenceSpace(a),Ve.setContext(r),Ve.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return S.getDepthTexture()};function me(we){for(let Ne=0;Ne<we.removed.length;Ne++){const Le=we.removed[Ne],Ge=T.indexOf(Le);Ge>=0&&(T[Ge]=null,M[Ge].disconnect(Le))}for(let Ne=0;Ne<we.added.length;Ne++){const Le=we.added[Ne];let Ge=T.indexOf(Le);if(Ge===-1){for(let ft=0;ft<M.length;ft++)if(ft>=T.length){T.push(Le),Ge=ft;break}else if(T[ft]===null){T[ft]=Le,Ge=ft;break}if(Ge===-1)break}const et=M[Ge];et&&et.connect(Le)}}const fe=new J,xe=new J;function X(we,Ne,Le){fe.setFromMatrixPosition(Ne.matrixWorld),xe.setFromMatrixPosition(Le.matrixWorld);const Ge=fe.distanceTo(xe),et=Ne.projectionMatrix.elements,ft=Le.projectionMatrix.elements,yt=et[14]/(et[10]-1),nn=et[14]/(et[10]+1),Xt=(et[9]+1)/et[5],xt=(et[9]-1)/et[5],q=(et[8]-1)/et[0],at=(ft[8]+1)/ft[0],Je=yt*q,tt=yt*at,$e=Ge/(-q+at),_t=$e*-q;if(Ne.matrixWorld.decompose(we.position,we.quaternion,we.scale),we.translateX(_t),we.translateZ($e),we.matrixWorld.compose(we.position,we.quaternion,we.scale),we.matrixWorldInverse.copy(we.matrixWorld).invert(),et[10]===-1)we.projectionMatrix.copy(Ne.projectionMatrix),we.projectionMatrixInverse.copy(Ne.projectionMatrixInverse);else{const Ye=yt+$e,K=nn+$e,j=Je-_t,ne=tt+(Ge-_t),Se=Xt*nn/K*Ye,ze=xt*nn/K*Ye;we.projectionMatrix.makePerspective(j,ne,Se,ze,Ye,K),we.projectionMatrixInverse.copy(we.projectionMatrix).invert()}}function de(we,Ne){Ne===null?we.matrixWorld.copy(we.matrix):we.matrixWorld.multiplyMatrices(Ne.matrixWorld,we.matrix),we.matrixWorldInverse.copy(we.matrixWorld).invert()}this.updateCamera=function(we){if(r===null)return;let Ne=we.near,Le=we.far;S.texture!==null&&(S.depthNear>0&&(Ne=S.depthNear),S.depthFar>0&&(Le=S.depthFar)),N.near=F.near=U.near=Ne,N.far=F.far=U.far=Le,(V!==N.near||Z!==N.far)&&(r.updateRenderState({depthNear:N.near,depthFar:N.far}),V=N.near,Z=N.far),U.layers.mask=we.layers.mask|2,F.layers.mask=we.layers.mask|4,N.layers.mask=U.layers.mask|F.layers.mask;const Ge=we.parent,et=N.cameras;de(N,Ge);for(let ft=0;ft<et.length;ft++)de(et[ft],Ge);et.length===2?X(N,U,F):N.projectionMatrix.copy(U.projectionMatrix),se(we,N,Ge)};function se(we,Ne,Le){Le===null?we.matrix.copy(Ne.matrixWorld):(we.matrix.copy(Le.matrixWorld),we.matrix.invert(),we.matrix.multiply(Ne.matrixWorld)),we.matrix.decompose(we.position,we.quaternion,we.scale),we.updateMatrixWorld(!0),we.projectionMatrix.copy(Ne.projectionMatrix),we.projectionMatrixInverse.copy(Ne.projectionMatrixInverse),we.isPerspectiveCamera&&(we.fov=hp*2*Math.atan(1/we.projectionMatrix.elements[5]),we.zoom=1)}this.getCamera=function(){return N},this.getFoveation=function(){if(!(g===null&&v===null))return l},this.setFoveation=function(we){l=we,g!==null&&(g.fixedFoveation=we),v!==null&&v.fixedFoveation!==void 0&&(v.fixedFoveation=we)},this.hasDepthSensing=function(){return S.texture!==null},this.getDepthSensingMesh=function(){return S.getMesh(N)};let Y=null;function ge(we,Ne){if(h=Ne.getViewerPose(u||o),x=Ne,h!==null){const Le=h.views;v!==null&&(e.setRenderTargetFramebuffer(b,v.framebuffer),e.setRenderTarget(b));let Ge=!1;Le.length!==N.cameras.length&&(N.cameras.length=0,Ge=!0);for(let yt=0;yt<Le.length;yt++){const nn=Le[yt];let Xt=null;if(v!==null)Xt=v.getViewport(nn);else{const q=f.getViewSubImage(g,nn);Xt=q.viewport,yt===0&&(e.setRenderTargetTextures(b,q.colorTexture,q.depthStencilTexture),e.setRenderTarget(b))}let xt=k[yt];xt===void 0&&(xt=new ji,xt.layers.enable(yt),xt.viewport=new Un,k[yt]=xt),xt.matrix.fromArray(nn.transform.matrix),xt.matrix.decompose(xt.position,xt.quaternion,xt.scale),xt.projectionMatrix.fromArray(nn.projectionMatrix),xt.projectionMatrixInverse.copy(xt.projectionMatrix).invert(),xt.viewport.set(Xt.x,Xt.y,Xt.width,Xt.height),yt===0&&(N.matrix.copy(xt.matrix),N.matrix.decompose(N.position,N.quaternion,N.scale)),Ge===!0&&N.cameras.push(xt)}const et=r.enabledFeatures;if(et&&et.includes("depth-sensing")&&r.depthUsage=="gpu-optimized"&&f){const yt=f.getDepthInformation(Le[0]);yt&&yt.isValid&&yt.texture&&S.init(e,yt,r.renderState)}}for(let Le=0;Le<M.length;Le++){const Ge=T[Le],et=M[Le];Ge!==null&&et!==void 0&&et.update(Ge,Ne,u||o)}Y&&Y(we,Ne),Ne.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:Ne}),x=null}const Ve=new jL;Ve.setAnimationLoop(ge),this.setAnimationLoop=function(we){Y=we},this.dispose=function(){}}}const Sd=new ho,GX=new Jt;function jX(n,e){function t(w,_){w.matrixAutoUpdate===!0&&w.updateMatrix(),_.value.copy(w.matrix)}function i(w,_){_.color.getRGB(w.fogColor.value,ZB(n)),_.isFog?(w.fogNear.value=_.near,w.fogFar.value=_.far):_.isFogExp2&&(w.fogDensity.value=_.density)}function r(w,_,b,M,T){_.isMeshBasicMaterial||_.isMeshLambertMaterial?s(w,_):_.isMeshToonMaterial?(s(w,_),f(w,_)):_.isMeshPhongMaterial?(s(w,_),h(w,_)):_.isMeshStandardMaterial?(s(w,_),g(w,_),_.isMeshPhysicalMaterial&&v(w,_,T)):_.isMeshMatcapMaterial?(s(w,_),x(w,_)):_.isMeshDepthMaterial?s(w,_):_.isMeshDistanceMaterial?(s(w,_),S(w,_)):_.isMeshNormalMaterial?s(w,_):_.isLineBasicMaterial?(o(w,_),_.isLineDashedMaterial&&a(w,_)):_.isPointsMaterial?l(w,_,b,M):_.isSpriteMaterial?u(w,_):_.isShadowMaterial?(w.color.value.copy(_.color),w.opacity.value=_.opacity):_.isShaderMaterial&&(_.uniformsNeedUpdate=!1)}function s(w,_){w.opacity.value=_.opacity,_.color&&w.diffuse.value.copy(_.color),_.emissive&&w.emissive.value.copy(_.emissive).multiplyScalar(_.emissiveIntensity),_.map&&(w.map.value=_.map,t(_.map,w.mapTransform)),_.alphaMap&&(w.alphaMap.value=_.alphaMap,t(_.alphaMap,w.alphaMapTransform)),_.bumpMap&&(w.bumpMap.value=_.bumpMap,t(_.bumpMap,w.bumpMapTransform),w.bumpScale.value=_.bumpScale,_.side===rs&&(w.bumpScale.value*=-1)),_.normalMap&&(w.normalMap.value=_.normalMap,t(_.normalMap,w.normalMapTransform),w.normalScale.value.copy(_.normalScale),_.side===rs&&w.normalScale.value.negate()),_.displacementMap&&(w.displacementMap.value=_.displacementMap,t(_.displacementMap,w.displacementMapTransform),w.displacementScale.value=_.displacementScale,w.displacementBias.value=_.displacementBias),_.emissiveMap&&(w.emissiveMap.value=_.emissiveMap,t(_.emissiveMap,w.emissiveMapTransform)),_.specularMap&&(w.specularMap.value=_.specularMap,t(_.specularMap,w.specularMapTransform)),_.alphaTest>0&&(w.alphaTest.value=_.alphaTest);const b=e.get(_),M=b.envMap,T=b.envMapRotation;M&&(w.envMap.value=M,Sd.copy(T),Sd.x*=-1,Sd.y*=-1,Sd.z*=-1,M.isCubeTexture&&M.isRenderTargetTexture===!1&&(Sd.y*=-1,Sd.z*=-1),w.envMapRotation.value.setFromMatrix4(GX.makeRotationFromEuler(Sd)),w.flipEnvMap.value=M.isCubeTexture&&M.isRenderTargetTexture===!1?-1:1,w.reflectivity.value=_.reflectivity,w.ior.value=_.ior,w.refractionRatio.value=_.refractionRatio),_.lightMap&&(w.lightMap.value=_.lightMap,w.lightMapIntensity.value=_.lightMapIntensity,t(_.lightMap,w.lightMapTransform)),_.aoMap&&(w.aoMap.value=_.aoMap,w.aoMapIntensity.value=_.aoMapIntensity,t(_.aoMap,w.aoMapTransform))}function o(w,_){w.diffuse.value.copy(_.color),w.opacity.value=_.opacity,_.map&&(w.map.value=_.map,t(_.map,w.mapTransform))}function a(w,_){w.dashSize.value=_.dashSize,w.totalSize.value=_.dashSize+_.gapSize,w.scale.value=_.scale}function l(w,_,b,M){w.diffuse.value.copy(_.color),w.opacity.value=_.opacity,w.size.value=_.size*b,w.scale.value=M*.5,_.map&&(w.map.value=_.map,t(_.map,w.uvTransform)),_.alphaMap&&(w.alphaMap.value=_.alphaMap,t(_.alphaMap,w.alphaMapTransform)),_.alphaTest>0&&(w.alphaTest.value=_.alphaTest)}function u(w,_){w.diffuse.value.copy(_.color),w.opacity.value=_.opacity,w.rotation.value=_.rotation,_.map&&(w.map.value=_.map,t(_.map,w.mapTransform)),_.alphaMap&&(w.alphaMap.value=_.alphaMap,t(_.alphaMap,w.alphaMapTransform)),_.alphaTest>0&&(w.alphaTest.value=_.alphaTest)}function h(w,_){w.specular.value.copy(_.specular),w.shininess.value=Math.max(_.shininess,1e-4)}function f(w,_){_.gradientMap&&(w.gradientMap.value=_.gradientMap)}function g(w,_){w.metalness.value=_.metalness,_.metalnessMap&&(w.metalnessMap.value=_.metalnessMap,t(_.metalnessMap,w.metalnessMapTransform)),w.roughness.value=_.roughness,_.roughnessMap&&(w.roughnessMap.value=_.roughnessMap,t(_.roughnessMap,w.roughnessMapTransform)),_.envMap&&(w.envMapIntensity.value=_.envMapIntensity)}function v(w,_,b){w.ior.value=_.ior,_.sheen>0&&(w.sheenColor.value.copy(_.sheenColor).multiplyScalar(_.sheen),w.sheenRoughness.value=_.sheenRoughness,_.sheenColorMap&&(w.sheenColorMap.value=_.sheenColorMap,t(_.sheenColorMap,w.sheenColorMapTransform)),_.sheenRoughnessMap&&(w.sheenRoughnessMap.value=_.sheenRoughnessMap,t(_.sheenRoughnessMap,w.sheenRoughnessMapTransform))),_.clearcoat>0&&(w.clearcoat.value=_.clearcoat,w.clearcoatRoughness.value=_.clearcoatRoughness,_.clearcoatMap&&(w.clearcoatMap.value=_.clearcoatMap,t(_.clearcoatMap,w.clearcoatMapTransform)),_.clearcoatRoughnessMap&&(w.clearcoatRoughnessMap.value=_.clearcoatRoughnessMap,t(_.clearcoatRoughnessMap,w.clearcoatRoughnessMapTransform)),_.clearcoatNormalMap&&(w.clearcoatNormalMap.value=_.clearcoatNormalMap,t(_.clearcoatNormalMap,w.clearcoatNormalMapTransform),w.clearcoatNormalScale.value.copy(_.clearcoatNormalScale),_.side===rs&&w.clearcoatNormalScale.value.negate())),_.dispersion>0&&(w.dispersion.value=_.dispersion),_.iridescence>0&&(w.iridescence.value=_.iridescence,w.iridescenceIOR.value=_.iridescenceIOR,w.iridescenceThicknessMinimum.value=_.iridescenceThicknessRange[0],w.iridescenceThicknessMaximum.value=_.iridescenceThicknessRange[1],_.iridescenceMap&&(w.iridescenceMap.value=_.iridescenceMap,t(_.iridescenceMap,w.iridescenceMapTransform)),_.iridescenceThicknessMap&&(w.iridescenceThicknessMap.value=_.iridescenceThicknessMap,t(_.iridescenceThicknessMap,w.iridescenceThicknessMapTransform))),_.transmission>0&&(w.transmission.value=_.transmission,w.transmissionSamplerMap.value=b.texture,w.transmissionSamplerSize.value.set(b.width,b.height),_.transmissionMap&&(w.transmissionMap.value=_.transmissionMap,t(_.transmissionMap,w.transmissionMapTransform)),w.thickness.value=_.thickness,_.thicknessMap&&(w.thicknessMap.value=_.thicknessMap,t(_.thicknessMap,w.thicknessMapTransform)),w.attenuationDistance.value=_.attenuationDistance,w.attenuationColor.value.copy(_.attenuationColor)),_.anisotropy>0&&(w.anisotropyVector.value.set(_.anisotropy*Math.cos(_.anisotropyRotation),_.anisotropy*Math.sin(_.anisotropyRotation)),_.anisotropyMap&&(w.anisotropyMap.value=_.anisotropyMap,t(_.anisotropyMap,w.anisotropyMapTransform))),w.specularIntensity.value=_.specularIntensity,w.specularColor.value.copy(_.specularColor),_.specularColorMap&&(w.specularColorMap.value=_.specularColorMap,t(_.specularColorMap,w.specularColorMapTransform)),_.specularIntensityMap&&(w.specularIntensityMap.value=_.specularIntensityMap,t(_.specularIntensityMap,w.specularIntensityMapTransform))}function x(w,_){_.matcap&&(w.matcap.value=_.matcap)}function S(w,_){const b=e.get(_).light;w.referencePosition.value.setFromMatrixPosition(b.matrixWorld),w.nearDistance.value=b.shadow.camera.near,w.farDistance.value=b.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function WX(n,e,t,i){let r={},s={},o=[];const a=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function l(b,M){const T=M.program;i.uniformBlockBinding(b,T)}function u(b,M){let T=r[b.id];T===void 0&&(x(b),T=h(b),r[b.id]=T,b.addEventListener("dispose",w));const L=M.program;i.updateUBOMapping(b,L);const D=e.render.frame;s[b.id]!==D&&(g(b),s[b.id]=D)}function h(b){const M=f();b.__bindingPointIndex=M;const T=n.createBuffer(),L=b.__size,D=b.usage;return n.bindBuffer(n.UNIFORM_BUFFER,T),n.bufferData(n.UNIFORM_BUFFER,L,D),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,M,T),T}function f(){for(let b=0;b<a;b++)if(o.indexOf(b)===-1)return o.push(b),b;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function g(b){const M=r[b.id],T=b.uniforms,L=b.__cache;n.bindBuffer(n.UNIFORM_BUFFER,M);for(let D=0,U=T.length;D<U;D++){const F=Array.isArray(T[D])?T[D]:[T[D]];for(let k=0,N=F.length;k<N;k++){const V=F[k];if(v(V,D,k,L)===!0){const Z=V.__offset,Q=Array.isArray(V.value)?V.value:[V.value];let le=0;for(let me=0;me<Q.length;me++){const fe=Q[me],xe=S(fe);typeof fe=="number"||typeof fe=="boolean"?(V.__data[0]=fe,n.bufferSubData(n.UNIFORM_BUFFER,Z+le,V.__data)):fe.isMatrix3?(V.__data[0]=fe.elements[0],V.__data[1]=fe.elements[1],V.__data[2]=fe.elements[2],V.__data[3]=0,V.__data[4]=fe.elements[3],V.__data[5]=fe.elements[4],V.__data[6]=fe.elements[5],V.__data[7]=0,V.__data[8]=fe.elements[6],V.__data[9]=fe.elements[7],V.__data[10]=fe.elements[8],V.__data[11]=0):(fe.toArray(V.__data,le),le+=xe.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,Z,V.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function v(b,M,T,L){const D=b.value,U=M+"_"+T;if(L[U]===void 0)return typeof D=="number"||typeof D=="boolean"?L[U]=D:L[U]=D.clone(),!0;{const F=L[U];if(typeof D=="number"||typeof D=="boolean"){if(F!==D)return L[U]=D,!0}else if(F.equals(D)===!1)return F.copy(D),!0}return!1}function x(b){const M=b.uniforms;let T=0;const L=16;for(let U=0,F=M.length;U<F;U++){const k=Array.isArray(M[U])?M[U]:[M[U]];for(let N=0,V=k.length;N<V;N++){const Z=k[N],Q=Array.isArray(Z.value)?Z.value:[Z.value];for(let le=0,me=Q.length;le<me;le++){const fe=Q[le],xe=S(fe),X=T%L,de=X%xe.boundary,se=X+de;T+=de,se!==0&&L-se<xe.storage&&(T+=L-se),Z.__data=new Float32Array(xe.storage/Float32Array.BYTES_PER_ELEMENT),Z.__offset=T,T+=xe.storage}}}const D=T%L;return D>0&&(T+=L-D),b.__size=T,b.__cache={},this}function S(b){const M={boundary:0,storage:0};return typeof b=="number"||typeof b=="boolean"?(M.boundary=4,M.storage=4):b.isVector2?(M.boundary=8,M.storage=8):b.isVector3||b.isColor?(M.boundary=16,M.storage=12):b.isVector4?(M.boundary=16,M.storage=16):b.isMatrix3?(M.boundary=48,M.storage=48):b.isMatrix4?(M.boundary=64,M.storage=64):b.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",b),M}function w(b){const M=b.target;M.removeEventListener("dispose",w);const T=o.indexOf(M.__bindingPointIndex);o.splice(T,1),n.deleteBuffer(r[M.id]),delete r[M.id],delete s[M.id]}function _(){for(const b in r)n.deleteBuffer(r[b]);o=[],r={},s={}}return{bind:l,update:u,dispose:_}}class Zb{constructor(e={}){const{canvas:t=KB(),context:i=null,depth:r=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:u=!1,powerPreference:h="default",failIfMajorPerformanceCaveat:f=!1,reverseDepthBuffer:g=!1}=e;this.isWebGLRenderer=!0;let v;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");v=i.getContextAttributes().alpha}else v=o;const x=new Uint32Array(4),S=new Int32Array(4);let w=null,_=null;const b=[],M=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=Ya,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const T=this;let L=!1;this._outputColorSpace=As;let D=0,U=0,F=null,k=-1,N=null;const V=new Un,Z=new Un;let Q=null;const le=new bt(0);let me=0,fe=t.width,xe=t.height,X=1,de=null,se=null;const Y=new Un(0,0,fe,xe),ge=new Un(0,0,fe,xe);let Ve=!1;const we=new Mp;let Ne=!1,Le=!1;const Ge=new Jt,et=new Jt,ft=new J,yt=new Un,nn={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Xt=!1;function xt(){return F===null?X:1}let q=i;function at(G,te){return t.getContext(G,te)}try{const G={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:h,failIfMajorPerformanceCaveat:f};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Ep}`),t.addEventListener("webglcontextlost",We,!1),t.addEventListener("webglcontextrestored",Mt,!1),t.addEventListener("webglcontextcreationerror",vt,!1),q===null){const te="webgl2";if(q=at(te,G),q===null)throw at(te)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(G){throw console.error("THREE.WebGLRenderer: "+G.message),G}let Je,tt,$e,_t,Ye,K,j,ne,Se,ze,Re,mt,lt,Dt,Ft,qe,wt,Lt,It,St,ue,Oe,st,ce;function be(){Je=new i$(q),Je.init(),Oe=new KL(q,Je),tt=new JW(q,Je,e,Oe),$e=new FX(q,Je),tt.reverseDepthBuffer&&g&&$e.buffers.depth.setReversed(!0),_t=new o$(q),Ye=new AX,K=new kX(q,Je,$e,Ye,tt,Oe,_t),j=new ZW(T),ne=new n$(T),Se=new hj(q),st=new YW(q,Se),ze=new r$(q,Se,_t,st),Re=new l$(q,ze,Se,_t),It=new a$(q,tt,K),qe=new qW(Ye),mt=new EX(T,j,ne,Je,tt,st,qe),lt=new jX(T,Ye),Dt=new MX,Ft=new DX(Je),Lt=new XW(T,j,ne,$e,Re,v,l),wt=new OX(T,Re,tt),ce=new WX(q,_t,tt,$e),St=new KW(q,Je,_t),ue=new s$(q,Je,_t),_t.programs=mt.programs,T.capabilities=tt,T.extensions=Je,T.properties=Ye,T.renderLists=Dt,T.shadowMap=wt,T.state=$e,T.info=_t}be();const Ie=new VX(T,q);this.xr=Ie,this.getContext=function(){return q},this.getContextAttributes=function(){return q.getContextAttributes()},this.forceContextLoss=function(){const G=Je.get("WEBGL_lose_context");G&&G.loseContext()},this.forceContextRestore=function(){const G=Je.get("WEBGL_lose_context");G&&G.restoreContext()},this.getPixelRatio=function(){return X},this.setPixelRatio=function(G){G!==void 0&&(X=G,this.setSize(fe,xe,!1))},this.getSize=function(G){return G.set(fe,xe)},this.setSize=function(G,te,ae=!0){if(Ie.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}fe=G,xe=te,t.width=Math.floor(G*X),t.height=Math.floor(te*X),ae===!0&&(t.style.width=G+"px",t.style.height=te+"px"),this.setViewport(0,0,G,te)},this.getDrawingBufferSize=function(G){return G.set(fe*X,xe*X).floor()},this.setDrawingBufferSize=function(G,te,ae){fe=G,xe=te,X=ae,t.width=Math.floor(G*ae),t.height=Math.floor(te*ae),this.setViewport(0,0,G,te)},this.getCurrentViewport=function(G){return G.copy(V)},this.getViewport=function(G){return G.copy(Y)},this.setViewport=function(G,te,ae,ie){G.isVector4?Y.set(G.x,G.y,G.z,G.w):Y.set(G,te,ae,ie),$e.viewport(V.copy(Y).multiplyScalar(X).round())},this.getScissor=function(G){return G.copy(ge)},this.setScissor=function(G,te,ae,ie){G.isVector4?ge.set(G.x,G.y,G.z,G.w):ge.set(G,te,ae,ie),$e.scissor(Z.copy(ge).multiplyScalar(X).round())},this.getScissorTest=function(){return Ve},this.setScissorTest=function(G){$e.setScissorTest(Ve=G)},this.setOpaqueSort=function(G){de=G},this.setTransparentSort=function(G){se=G},this.getClearColor=function(G){return G.copy(Lt.getClearColor())},this.setClearColor=function(){Lt.setClearColor(...arguments)},this.getClearAlpha=function(){return Lt.getClearAlpha()},this.setClearAlpha=function(){Lt.setClearAlpha(...arguments)},this.clear=function(G=!0,te=!0,ae=!0){let ie=0;if(G){let ve=!1;if(F!==null){const Ce=F.texture.format;ve=Ce===P_||Ce===R_||Ce===l0}if(ve){const Ce=F.texture.type,He=Ce===Ts||Ce===Za||Ce===op||Ce===ap||Ce===C_||Ce===T_,Ke=Lt.getClearColor(),Qe=Lt.getClearAlpha(),gt=Ke.r,ht=Ke.g,Ze=Ke.b;He?(x[0]=gt,x[1]=ht,x[2]=Ze,x[3]=Qe,q.clearBufferuiv(q.COLOR,0,x)):(S[0]=gt,S[1]=ht,S[2]=Ze,S[3]=Qe,q.clearBufferiv(q.COLOR,0,S))}else ie|=q.COLOR_BUFFER_BIT}te&&(ie|=q.DEPTH_BUFFER_BIT),ae&&(ie|=q.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),q.clear(ie)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",We,!1),t.removeEventListener("webglcontextrestored",Mt,!1),t.removeEventListener("webglcontextcreationerror",vt,!1),Lt.dispose(),Dt.dispose(),Ft.dispose(),Ye.dispose(),j.dispose(),ne.dispose(),Re.dispose(),st.dispose(),ce.dispose(),mt.dispose(),Ie.dispose(),Ie.removeEventListener("sessionstart",ba),Ie.removeEventListener("sessionend",fo),Dr.stop()};function We(G){G.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),L=!0}function Mt(){console.log("THREE.WebGLRenderer: Context Restored."),L=!1;const G=_t.autoReset,te=wt.enabled,ae=wt.autoUpdate,ie=wt.needsUpdate,ve=wt.type;be(),_t.autoReset=G,wt.enabled=te,wt.autoUpdate=ae,wt.needsUpdate=ie,wt.type=ve}function vt(G){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",G.statusMessage)}function $t(G){const te=G.target;te.removeEventListener("dispose",$t),Tn(te)}function Tn(G){Xn(G),Ye.remove(G)}function Xn(G){const te=Ye.get(G).programs;te!==void 0&&(te.forEach(function(ae){mt.releaseProgram(ae)}),G.isShaderMaterial&&mt.releaseShaderCache(G))}this.renderBufferDirect=function(G,te,ae,ie,ve,Ce){te===null&&(te=nn);const He=ve.isMesh&&ve.matrixWorld.determinant()<0,Ke=he(G,te,ae,ie,ve);$e.setMaterial(ie,He);let Qe=ae.index,gt=1;if(ie.wireframe===!0){if(Qe=ze.getWireframeAttribute(ae),Qe===void 0)return;gt=2}const ht=ae.drawRange,Ze=ae.attributes.position;let Et=ht.start*gt,At=(ht.start+ht.count)*gt;Ce!==null&&(Et=Math.max(Et,Ce.start*gt),At=Math.min(At,(Ce.start+Ce.count)*gt)),Qe!==null?(Et=Math.max(Et,0),At=Math.min(At,Qe.count)):Ze!=null&&(Et=Math.max(Et,0),At=Math.min(At,Ze.count));const rn=At-Et;if(rn<0||rn===1/0)return;st.setup(ve,ie,Ke,ae,Qe);let kt,Gt=St;if(Qe!==null&&(kt=Se.get(Qe),Gt=ue,Gt.setIndex(kt)),ve.isMesh)ie.wireframe===!0?($e.setLineWidth(ie.wireframeLinewidth*xt()),Gt.setMode(q.LINES)):Gt.setMode(q.TRIANGLES);else if(ve.isLine){let Rt=ie.linewidth;Rt===void 0&&(Rt=1),$e.setLineWidth(Rt*xt()),ve.isLineSegments?Gt.setMode(q.LINES):ve.isLineLoop?Gt.setMode(q.LINE_LOOP):Gt.setMode(q.LINE_STRIP)}else ve.isPoints?Gt.setMode(q.POINTS):ve.isSprite&&Gt.setMode(q.TRIANGLES);if(ve.isBatchedMesh)if(ve._multiDrawInstances!==null)jy("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),Gt.renderMultiDrawInstances(ve._multiDrawStarts,ve._multiDrawCounts,ve._multiDrawCount,ve._multiDrawInstances);else if(Je.get("WEBGL_multi_draw"))Gt.renderMultiDraw(ve._multiDrawStarts,ve._multiDrawCounts,ve._multiDrawCount);else{const Rt=ve._multiDrawStarts,xn=ve._multiDrawCounts,Yt=ve._multiDrawCount,ln=Qe?Se.get(Qe).bytesPerElement:1,ei=Ye.get(ie).currentProgram.getUniforms();for(let pn=0;pn<Yt;pn++)ei.setValue(q,"_gl_DrawID",pn),Gt.render(Rt[pn]/ln,xn[pn])}else if(ve.isInstancedMesh)Gt.renderInstances(Et,rn,ve.count);else if(ae.isInstancedBufferGeometry){const Rt=ae._maxInstanceCount!==void 0?ae._maxInstanceCount:1/0,xn=Math.min(ae.instanceCount,Rt);Gt.renderInstances(Et,rn,xn)}else Gt.render(Et,rn)};function mn(G,te,ae){G.transparent===!0&&G.side===co&&G.forceSinglePass===!1?(G.side=rs,G.needsUpdate=!0,Ma(G,te,ae),G.side=Ja,G.needsUpdate=!0,Ma(G,te,ae),G.side=co):Ma(G,te,ae)}this.compile=function(G,te,ae=null){ae===null&&(ae=G),_=Ft.get(ae),_.init(te),M.push(_),ae.traverseVisible(function(ve){ve.isLight&&ve.layers.test(te.layers)&&(_.pushLight(ve),ve.castShadow&&_.pushShadow(ve))}),G!==ae&&G.traverseVisible(function(ve){ve.isLight&&ve.layers.test(te.layers)&&(_.pushLight(ve),ve.castShadow&&_.pushShadow(ve))}),_.setupLights();const ie=new Set;return G.traverse(function(ve){if(!(ve.isMesh||ve.isPoints||ve.isLine||ve.isSprite))return;const Ce=ve.material;if(Ce)if(Array.isArray(Ce))for(let He=0;He<Ce.length;He++){const Ke=Ce[He];mn(Ke,ae,ve),ie.add(Ke)}else mn(Ce,ae,ve),ie.add(Ce)}),_=M.pop(),ie},this.compileAsync=function(G,te,ae=null){const ie=this.compile(G,te,ae);return new Promise(ve=>{function Ce(){if(ie.forEach(function(He){Ye.get(He).currentProgram.isReady()&&ie.delete(He)}),ie.size===0){ve(G);return}setTimeout(Ce,10)}Je.get("KHR_parallel_shader_compile")!==null?Ce():setTimeout(Ce,10)})};let vi=null;function Si(G){vi&&vi(G)}function ba(){Dr.stop()}function fo(){Dr.start()}const Dr=new jL;Dr.setAnimationLoop(Si),typeof self<"u"&&Dr.setContext(self),this.setAnimationLoop=function(G){vi=G,Ie.setAnimationLoop(G),G===null?Dr.stop():Dr.start()},Ie.addEventListener("sessionstart",ba),Ie.addEventListener("sessionend",fo),this.render=function(G,te){if(te!==void 0&&te.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(L===!0)return;if(G.matrixWorldAutoUpdate===!0&&G.updateMatrixWorld(),te.parent===null&&te.matrixWorldAutoUpdate===!0&&te.updateMatrixWorld(),Ie.enabled===!0&&Ie.isPresenting===!0&&(Ie.cameraAutoUpdate===!0&&Ie.updateCamera(te),te=Ie.getCamera()),G.isScene===!0&&G.onBeforeRender(T,G,te,F),_=Ft.get(G,M.length),_.init(te),M.push(_),et.multiplyMatrices(te.projectionMatrix,te.matrixWorldInverse),we.setFromProjectionMatrix(et),Le=this.localClippingEnabled,Ne=qe.init(this.clippingPlanes,Le),w=Dt.get(G,b.length),w.init(),b.push(w),Ie.enabled===!0&&Ie.isPresenting===!0){const Ce=T.xr.getDepthSensingMesh();Ce!==null&&ls(Ce,te,-1/0,T.sortObjects)}ls(G,te,0,T.sortObjects),w.finish(),T.sortObjects===!0&&w.sort(de,se),Xt=Ie.enabled===!1||Ie.isPresenting===!1||Ie.hasDepthSensing()===!1,Xt&&Lt.addToRenderList(w,G),this.info.render.frame++,Ne===!0&&qe.beginShadows();const ae=_.state.shadowsArray;wt.render(ae,G,te),Ne===!0&&qe.endShadows(),this.info.autoReset===!0&&this.info.reset();const ie=w.opaque,ve=w.transmissive;if(_.setupLights(),te.isArrayCamera){const Ce=te.cameras;if(ve.length>0)for(let He=0,Ke=Ce.length;He<Ke;He++){const Qe=Ce[He];dr(ie,ve,G,Qe)}Xt&&Lt.render(G);for(let He=0,Ke=Ce.length;He<Ke;He++){const Qe=Ce[He];cs(w,G,Qe,Qe.viewport)}}else ve.length>0&&dr(ie,ve,G,te),Xt&&Lt.render(G),cs(w,G,te);F!==null&&U===0&&(K.updateMultisampleRenderTarget(F),K.updateRenderTargetMipmap(F)),G.isScene===!0&&G.onAfterRender(T,G,te),st.resetDefaultState(),k=-1,N=null,M.pop(),M.length>0?(_=M[M.length-1],Ne===!0&&qe.setGlobalState(T.clippingPlanes,_.state.camera)):_=null,b.pop(),b.length>0?w=b[b.length-1]:w=null};function ls(G,te,ae,ie){if(G.visible===!1)return;if(G.layers.test(te.layers)){if(G.isGroup)ae=G.renderOrder;else if(G.isLOD)G.autoUpdate===!0&&G.update(te);else if(G.isLight)_.pushLight(G),G.castShadow&&_.pushShadow(G);else if(G.isSprite){if(!G.frustumCulled||we.intersectsSprite(G)){ie&&yt.setFromMatrixPosition(G.matrixWorld).applyMatrix4(et);const He=Re.update(G),Ke=G.material;Ke.visible&&w.push(G,He,Ke,ae,yt.z,null)}}else if((G.isMesh||G.isLine||G.isPoints)&&(!G.frustumCulled||we.intersectsObject(G))){const He=Re.update(G),Ke=G.material;if(ie&&(G.boundingSphere!==void 0?(G.boundingSphere===null&&G.computeBoundingSphere(),yt.copy(G.boundingSphere.center)):(He.boundingSphere===null&&He.computeBoundingSphere(),yt.copy(He.boundingSphere.center)),yt.applyMatrix4(G.matrixWorld).applyMatrix4(et)),Array.isArray(Ke)){const Qe=He.groups;for(let gt=0,ht=Qe.length;gt<ht;gt++){const Ze=Qe[gt],Et=Ke[Ze.materialIndex];Et&&Et.visible&&w.push(G,He,Et,ae,yt.z,Ze)}}else Ke.visible&&w.push(G,He,Ke,ae,yt.z,null)}}const Ce=G.children;for(let He=0,Ke=Ce.length;He<Ke;He++)ls(Ce[He],te,ae,ie)}function cs(G,te,ae,ie){const ve=G.opaque,Ce=G.transmissive,He=G.transparent;_.setupLightsView(ae),Ne===!0&&qe.setGlobalState(T.clippingPlanes,ae),ie&&$e.viewport(V.copy(ie)),ve.length>0&&dn(ve,te,ae),Ce.length>0&&dn(Ce,te,ae),He.length>0&&dn(He,te,ae),$e.buffers.depth.setTest(!0),$e.buffers.depth.setMask(!0),$e.buffers.color.setMask(!0),$e.setPolygonOffset(!1)}function dr(G,te,ae,ie){if((ae.isScene===!0?ae.overrideMaterial:null)!==null)return;_.state.transmissionRenderTarget[ie.id]===void 0&&(_.state.transmissionRenderTarget[ie.id]=new Rs(1,1,{generateMipmaps:!0,type:Je.has("EXT_color_buffer_half_float")||Je.has("EXT_color_buffer_float")?cr:Ts,minFilter:Bo,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:kn.workingColorSpace}));const Ce=_.state.transmissionRenderTarget[ie.id],He=ie.viewport||V;Ce.setSize(He.z*T.transmissionResolutionScale,He.w*T.transmissionResolutionScale);const Ke=T.getRenderTarget();T.setRenderTarget(Ce),T.getClearColor(le),me=T.getClearAlpha(),me<1&&T.setClearColor(16777215,.5),T.clear(),Xt&&Lt.render(ae);const Qe=T.toneMapping;T.toneMapping=Ya;const gt=ie.viewport;if(ie.viewport!==void 0&&(ie.viewport=void 0),_.setupLightsView(ie),Ne===!0&&qe.setGlobalState(T.clippingPlanes,ie),dn(G,ae,ie),K.updateMultisampleRenderTarget(Ce),K.updateRenderTargetMipmap(Ce),Je.has("WEBGL_multisampled_render_to_texture")===!1){let ht=!1;for(let Ze=0,Et=te.length;Ze<Et;Ze++){const At=te[Ze],rn=At.object,kt=At.geometry,Gt=At.material,Rt=At.group;if(Gt.side===co&&rn.layers.test(ie.layers)){const xn=Gt.side;Gt.side=rs,Gt.needsUpdate=!0,il(rn,ae,ie,kt,Gt,Rt),Gt.side=xn,Gt.needsUpdate=!0,ht=!0}}ht===!0&&(K.updateMultisampleRenderTarget(Ce),K.updateRenderTargetMipmap(Ce))}T.setRenderTarget(Ke),T.setClearColor(le,me),gt!==void 0&&(ie.viewport=gt),T.toneMapping=Qe}function dn(G,te,ae){const ie=te.isScene===!0?te.overrideMaterial:null;for(let ve=0,Ce=G.length;ve<Ce;ve++){const He=G[ve],Ke=He.object,Qe=He.geometry,gt=He.group;let ht=He.material;ht.allowOverride===!0&&ie!==null&&(ht=ie),Ke.layers.test(ae.layers)&&il(Ke,te,ae,Qe,ht,gt)}}function il(G,te,ae,ie,ve,Ce){G.onBeforeRender(T,te,ae,ie,ve,Ce),G.modelViewMatrix.multiplyMatrices(ae.matrixWorldInverse,G.matrixWorld),G.normalMatrix.getNormalMatrix(G.modelViewMatrix),ve.onBeforeRender(T,te,ae,ie,G,Ce),ve.transparent===!0&&ve.side===co&&ve.forceSinglePass===!1?(ve.side=rs,ve.needsUpdate=!0,T.renderBufferDirect(ae,te,ie,ve,G,Ce),ve.side=Ja,ve.needsUpdate=!0,T.renderBufferDirect(ae,te,ie,ve,G,Ce),ve.side=co):T.renderBufferDirect(ae,te,ie,ve,G,Ce),G.onAfterRender(T,te,ae,ie,ve,Ce)}function Ma(G,te,ae){te.isScene!==!0&&(te=nn);const ie=Ye.get(G),ve=_.state.lights,Ce=_.state.shadowsArray,He=ve.state.version,Ke=mt.getParameters(G,ve.state,Ce,te,ae),Qe=mt.getProgramCacheKey(Ke);let gt=ie.programs;ie.environment=G.isMeshStandardMaterial?te.environment:null,ie.fog=te.fog,ie.envMap=(G.isMeshStandardMaterial?ne:j).get(G.envMap||ie.environment),ie.envMapRotation=ie.environment!==null&&G.envMap===null?te.environmentRotation:G.envMapRotation,gt===void 0&&(G.addEventListener("dispose",$t),gt=new Map,ie.programs=gt);let ht=gt.get(Qe);if(ht!==void 0){if(ie.currentProgram===ht&&ie.lightsStateVersion===He)return $(G,Ke),ht}else Ke.uniforms=mt.getUniforms(G),G.onBeforeCompile(Ke,T),ht=mt.acquireProgram(Ke,Qe),gt.set(Qe,ht),ie.uniforms=Ke.uniforms;const Ze=ie.uniforms;return(!G.isShaderMaterial&&!G.isRawShaderMaterial||G.clipping===!0)&&(Ze.clippingPlanes=qe.uniform),$(G,Ke),ie.needsLights=ke(G),ie.lightsStateVersion=He,ie.needsLights&&(Ze.ambientLightColor.value=ve.state.ambient,Ze.lightProbe.value=ve.state.probe,Ze.directionalLights.value=ve.state.directional,Ze.directionalLightShadows.value=ve.state.directionalShadow,Ze.spotLights.value=ve.state.spot,Ze.spotLightShadows.value=ve.state.spotShadow,Ze.rectAreaLights.value=ve.state.rectArea,Ze.ltc_1.value=ve.state.rectAreaLTC1,Ze.ltc_2.value=ve.state.rectAreaLTC2,Ze.pointLights.value=ve.state.point,Ze.pointLightShadows.value=ve.state.pointShadow,Ze.hemisphereLights.value=ve.state.hemi,Ze.directionalShadowMap.value=ve.state.directionalShadowMap,Ze.directionalShadowMatrix.value=ve.state.directionalShadowMatrix,Ze.spotShadowMap.value=ve.state.spotShadowMap,Ze.spotLightMatrix.value=ve.state.spotLightMatrix,Ze.spotLightMap.value=ve.state.spotLightMap,Ze.pointShadowMap.value=ve.state.pointShadowMap,Ze.pointShadowMatrix.value=ve.state.pointShadowMatrix),ie.currentProgram=ht,ie.uniformsList=null,ht}function H(G){if(G.uniformsList===null){const te=G.currentProgram.getUniforms();G.uniformsList=$y.seqWithValue(te.seq,G.uniforms)}return G.uniformsList}function $(G,te){const ae=Ye.get(G);ae.outputColorSpace=te.outputColorSpace,ae.batching=te.batching,ae.batchingColor=te.batchingColor,ae.instancing=te.instancing,ae.instancingColor=te.instancingColor,ae.instancingMorph=te.instancingMorph,ae.skinning=te.skinning,ae.morphTargets=te.morphTargets,ae.morphNormals=te.morphNormals,ae.morphColors=te.morphColors,ae.morphTargetsCount=te.morphTargetsCount,ae.numClippingPlanes=te.numClippingPlanes,ae.numIntersection=te.numClipIntersection,ae.vertexAlphas=te.vertexAlphas,ae.vertexTangents=te.vertexTangents,ae.toneMapping=te.toneMapping}function he(G,te,ae,ie,ve){te.isScene!==!0&&(te=nn),K.resetTextureUnits();const Ce=te.fog,He=ie.isMeshStandardMaterial?te.environment:null,Ke=F===null?T.outputColorSpace:F.isXRRenderTarget===!0?F.texture.colorSpace:Qa,Qe=(ie.isMeshStandardMaterial?ne:j).get(ie.envMap||He),gt=ie.vertexColors===!0&&!!ae.attributes.color&&ae.attributes.color.itemSize===4,ht=!!ae.attributes.tangent&&(!!ie.normalMap||ie.anisotropy>0),Ze=!!ae.morphAttributes.position,Et=!!ae.morphAttributes.normal,At=!!ae.morphAttributes.color;let rn=Ya;ie.toneMapped&&(F===null||F.isXRRenderTarget===!0)&&(rn=T.toneMapping);const kt=ae.morphAttributes.position||ae.morphAttributes.normal||ae.morphAttributes.color,Gt=kt!==void 0?kt.length:0,Rt=Ye.get(ie),xn=_.state.lights;if(Ne===!0&&(Le===!0||G!==N)){const ti=G===N&&ie.id===k;qe.setState(ie,G,ti)}let Yt=!1;ie.version===Rt.__version?(Rt.needsLights&&Rt.lightsStateVersion!==xn.state.version||Rt.outputColorSpace!==Ke||ve.isBatchedMesh&&Rt.batching===!1||!ve.isBatchedMesh&&Rt.batching===!0||ve.isBatchedMesh&&Rt.batchingColor===!0&&ve.colorTexture===null||ve.isBatchedMesh&&Rt.batchingColor===!1&&ve.colorTexture!==null||ve.isInstancedMesh&&Rt.instancing===!1||!ve.isInstancedMesh&&Rt.instancing===!0||ve.isSkinnedMesh&&Rt.skinning===!1||!ve.isSkinnedMesh&&Rt.skinning===!0||ve.isInstancedMesh&&Rt.instancingColor===!0&&ve.instanceColor===null||ve.isInstancedMesh&&Rt.instancingColor===!1&&ve.instanceColor!==null||ve.isInstancedMesh&&Rt.instancingMorph===!0&&ve.morphTexture===null||ve.isInstancedMesh&&Rt.instancingMorph===!1&&ve.morphTexture!==null||Rt.envMap!==Qe||ie.fog===!0&&Rt.fog!==Ce||Rt.numClippingPlanes!==void 0&&(Rt.numClippingPlanes!==qe.numPlanes||Rt.numIntersection!==qe.numIntersection)||Rt.vertexAlphas!==gt||Rt.vertexTangents!==ht||Rt.morphTargets!==Ze||Rt.morphNormals!==Et||Rt.morphColors!==At||Rt.toneMapping!==rn||Rt.morphTargetsCount!==Gt)&&(Yt=!0):(Yt=!0,Rt.__version=ie.version);let ln=Rt.currentProgram;Yt===!0&&(ln=Ma(ie,te,ve));let ei=!1,pn=!1,Sn=!1;const qt=ln.getUniforms(),di=Rt.uniforms;if($e.useProgram(ln.program)&&(ei=!0,pn=!0,Sn=!0),ie.id!==k&&(k=ie.id,pn=!0),ei||N!==G){$e.buffers.depth.getReversed()?(Ge.copy(G.projectionMatrix),F9(Ge),k9(Ge),qt.setValue(q,"projectionMatrix",Ge)):qt.setValue(q,"projectionMatrix",G.projectionMatrix),qt.setValue(q,"viewMatrix",G.matrixWorldInverse);const Pi=qt.map.cameraPosition;Pi!==void 0&&Pi.setValue(q,ft.setFromMatrixPosition(G.matrixWorld)),tt.logarithmicDepthBuffer&&qt.setValue(q,"logDepthBufFC",2/(Math.log(G.far+1)/Math.LN2)),(ie.isMeshPhongMaterial||ie.isMeshToonMaterial||ie.isMeshLambertMaterial||ie.isMeshBasicMaterial||ie.isMeshStandardMaterial||ie.isShaderMaterial)&&qt.setValue(q,"isOrthographic",G.isOrthographicCamera===!0),N!==G&&(N=G,pn=!0,Sn=!0)}if(ve.isSkinnedMesh){qt.setOptional(q,ve,"bindMatrix"),qt.setOptional(q,ve,"bindMatrixInverse");const ti=ve.skeleton;ti&&(ti.boneTexture===null&&ti.computeBoneTexture(),qt.setValue(q,"boneTexture",ti.boneTexture,K))}ve.isBatchedMesh&&(qt.setOptional(q,ve,"batchingTexture"),qt.setValue(q,"batchingTexture",ve._matricesTexture,K),qt.setOptional(q,ve,"batchingIdTexture"),qt.setValue(q,"batchingIdTexture",ve._indirectTexture,K),qt.setOptional(q,ve,"batchingColorTexture"),ve._colorsTexture!==null&&qt.setValue(q,"batchingColorTexture",ve._colorsTexture,K));const On=ae.morphAttributes;if((On.position!==void 0||On.normal!==void 0||On.color!==void 0)&&It.update(ve,ae,ln),(pn||Rt.receiveShadow!==ve.receiveShadow)&&(Rt.receiveShadow=ve.receiveShadow,qt.setValue(q,"receiveShadow",ve.receiveShadow)),ie.isMeshGouraudMaterial&&ie.envMap!==null&&(di.envMap.value=Qe,di.flipEnvMap.value=Qe.isCubeTexture&&Qe.isRenderTargetTexture===!1?-1:1),ie.isMeshStandardMaterial&&ie.envMap===null&&te.environment!==null&&(di.envMapIntensity.value=te.environmentIntensity),pn&&(qt.setValue(q,"toneMappingExposure",T.toneMappingExposure),Rt.needsLights&&Pe(di,Sn),Ce&&ie.fog===!0&&lt.refreshFogUniforms(di,Ce),lt.refreshMaterialUniforms(di,ie,X,xe,_.state.transmissionRenderTarget[G.id]),$y.upload(q,H(Rt),di,K)),ie.isShaderMaterial&&ie.uniformsNeedUpdate===!0&&($y.upload(q,H(Rt),di,K),ie.uniformsNeedUpdate=!1),ie.isSpriteMaterial&&qt.setValue(q,"center",ve.center),qt.setValue(q,"modelViewMatrix",ve.modelViewMatrix),qt.setValue(q,"normalMatrix",ve.normalMatrix),qt.setValue(q,"modelMatrix",ve.matrixWorld),ie.isShaderMaterial||ie.isRawShaderMaterial){const ti=ie.uniformsGroups;for(let Pi=0,Rn=ti.length;Pi<Rn;Pi++){const Wr=ti[Pi];ce.update(Wr,ln),ce.bind(Wr,ln)}}return ln}function Pe(G,te){G.ambientLightColor.needsUpdate=te,G.lightProbe.needsUpdate=te,G.directionalLights.needsUpdate=te,G.directionalLightShadows.needsUpdate=te,G.pointLights.needsUpdate=te,G.pointLightShadows.needsUpdate=te,G.spotLights.needsUpdate=te,G.spotLightShadows.needsUpdate=te,G.rectAreaLights.needsUpdate=te,G.hemisphereLights.needsUpdate=te}function ke(G){return G.isMeshLambertMaterial||G.isMeshToonMaterial||G.isMeshPhongMaterial||G.isMeshStandardMaterial||G.isShadowMaterial||G.isShaderMaterial&&G.lights===!0}this.getActiveCubeFace=function(){return D},this.getActiveMipmapLevel=function(){return U},this.getRenderTarget=function(){return F},this.setRenderTargetTextures=function(G,te,ae){const ie=Ye.get(G);ie.__autoAllocateDepthBuffer=G.resolveDepthBuffer===!1,ie.__autoAllocateDepthBuffer===!1&&(ie.__useRenderToTexture=!1),Ye.get(G.texture).__webglTexture=te,Ye.get(G.depthTexture).__webglTexture=ie.__autoAllocateDepthBuffer?void 0:ae,ie.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(G,te){const ae=Ye.get(G);ae.__webglFramebuffer=te,ae.__useDefaultFramebuffer=te===void 0};const Ue=q.createFramebuffer();this.setRenderTarget=function(G,te=0,ae=0){F=G,D=te,U=ae;let ie=!0,ve=null,Ce=!1,He=!1;if(G){const Qe=Ye.get(G);if(Qe.__useDefaultFramebuffer!==void 0)$e.bindFramebuffer(q.FRAMEBUFFER,null),ie=!1;else if(Qe.__webglFramebuffer===void 0)K.setupRenderTarget(G);else if(Qe.__hasExternalTextures)K.rebindTextures(G,Ye.get(G.texture).__webglTexture,Ye.get(G.depthTexture).__webglTexture);else if(G.depthBuffer){const Ze=G.depthTexture;if(Qe.__boundDepthTexture!==Ze){if(Ze!==null&&Ye.has(Ze)&&(G.width!==Ze.image.width||G.height!==Ze.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");K.setupDepthRenderbuffer(G)}}const gt=G.texture;(gt.isData3DTexture||gt.isDataArrayTexture||gt.isCompressedArrayTexture)&&(He=!0);const ht=Ye.get(G).__webglFramebuffer;G.isWebGLCubeRenderTarget?(Array.isArray(ht[te])?ve=ht[te][ae]:ve=ht[te],Ce=!0):G.samples>0&&K.useMultisampledRTT(G)===!1?ve=Ye.get(G).__webglMultisampledFramebuffer:Array.isArray(ht)?ve=ht[ae]:ve=ht,V.copy(G.viewport),Z.copy(G.scissor),Q=G.scissorTest}else V.copy(Y).multiplyScalar(X).floor(),Z.copy(ge).multiplyScalar(X).floor(),Q=Ve;if(ae!==0&&(ve=Ue),$e.bindFramebuffer(q.FRAMEBUFFER,ve)&&ie&&$e.drawBuffers(G,ve),$e.viewport(V),$e.scissor(Z),$e.setScissorTest(Q),Ce){const Qe=Ye.get(G.texture);q.framebufferTexture2D(q.FRAMEBUFFER,q.COLOR_ATTACHMENT0,q.TEXTURE_CUBE_MAP_POSITIVE_X+te,Qe.__webglTexture,ae)}else if(He){const Qe=Ye.get(G.texture),gt=te;q.framebufferTextureLayer(q.FRAMEBUFFER,q.COLOR_ATTACHMENT0,Qe.__webglTexture,ae,gt)}else if(G!==null&&ae!==0){const Qe=Ye.get(G.texture);q.framebufferTexture2D(q.FRAMEBUFFER,q.COLOR_ATTACHMENT0,q.TEXTURE_2D,Qe.__webglTexture,ae)}k=-1},this.readRenderTargetPixels=function(G,te,ae,ie,ve,Ce,He){if(!(G&&G.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Ke=Ye.get(G).__webglFramebuffer;if(G.isWebGLCubeRenderTarget&&He!==void 0&&(Ke=Ke[He]),Ke){$e.bindFramebuffer(q.FRAMEBUFFER,Ke);try{const Qe=G.texture,gt=Qe.format,ht=Qe.type;if(!tt.textureFormatReadable(gt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!tt.textureTypeReadable(ht)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}te>=0&&te<=G.width-ie&&ae>=0&&ae<=G.height-ve&&q.readPixels(te,ae,ie,ve,Oe.convert(gt),Oe.convert(ht),Ce)}finally{const Qe=F!==null?Ye.get(F).__webglFramebuffer:null;$e.bindFramebuffer(q.FRAMEBUFFER,Qe)}}},this.readRenderTargetPixelsAsync=async function(G,te,ae,ie,ve,Ce,He){if(!(G&&G.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Ke=Ye.get(G).__webglFramebuffer;if(G.isWebGLCubeRenderTarget&&He!==void 0&&(Ke=Ke[He]),Ke)if(te>=0&&te<=G.width-ie&&ae>=0&&ae<=G.height-ve){$e.bindFramebuffer(q.FRAMEBUFFER,Ke);const Qe=G.texture,gt=Qe.format,ht=Qe.type;if(!tt.textureFormatReadable(gt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!tt.textureTypeReadable(ht))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const Ze=q.createBuffer();q.bindBuffer(q.PIXEL_PACK_BUFFER,Ze),q.bufferData(q.PIXEL_PACK_BUFFER,Ce.byteLength,q.STREAM_READ),q.readPixels(te,ae,ie,ve,Oe.convert(gt),Oe.convert(ht),0);const Et=F!==null?Ye.get(F).__webglFramebuffer:null;$e.bindFramebuffer(q.FRAMEBUFFER,Et);const At=q.fenceSync(q.SYNC_GPU_COMMANDS_COMPLETE,0);return q.flush(),await N9(q,At,4),q.bindBuffer(q.PIXEL_PACK_BUFFER,Ze),q.getBufferSubData(q.PIXEL_PACK_BUFFER,0,Ce),q.deleteBuffer(Ze),q.deleteSync(At),Ce}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(G,te=null,ae=0){const ie=Math.pow(2,-ae),ve=Math.floor(G.image.width*ie),Ce=Math.floor(G.image.height*ie),He=te!==null?te.x:0,Ke=te!==null?te.y:0;K.setTexture2D(G,0),q.copyTexSubImage2D(q.TEXTURE_2D,ae,0,0,He,Ke,ve,Ce),$e.unbindTexture()};const ct=q.createFramebuffer(),it=q.createFramebuffer();this.copyTextureToTexture=function(G,te,ae=null,ie=null,ve=0,Ce=null){Ce===null&&(ve!==0?(jy("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Ce=ve,ve=0):Ce=0);let He,Ke,Qe,gt,ht,Ze,Et,At,rn;const kt=G.isCompressedTexture?G.mipmaps[Ce]:G.image;if(ae!==null)He=ae.max.x-ae.min.x,Ke=ae.max.y-ae.min.y,Qe=ae.isBox3?ae.max.z-ae.min.z:1,gt=ae.min.x,ht=ae.min.y,Ze=ae.isBox3?ae.min.z:0;else{const On=Math.pow(2,-ve);He=Math.floor(kt.width*On),Ke=Math.floor(kt.height*On),G.isDataArrayTexture?Qe=kt.depth:G.isData3DTexture?Qe=Math.floor(kt.depth*On):Qe=1,gt=0,ht=0,Ze=0}ie!==null?(Et=ie.x,At=ie.y,rn=ie.z):(Et=0,At=0,rn=0);const Gt=Oe.convert(te.format),Rt=Oe.convert(te.type);let xn;te.isData3DTexture?(K.setTexture3D(te,0),xn=q.TEXTURE_3D):te.isDataArrayTexture||te.isCompressedArrayTexture?(K.setTexture2DArray(te,0),xn=q.TEXTURE_2D_ARRAY):(K.setTexture2D(te,0),xn=q.TEXTURE_2D),q.pixelStorei(q.UNPACK_FLIP_Y_WEBGL,te.flipY),q.pixelStorei(q.UNPACK_PREMULTIPLY_ALPHA_WEBGL,te.premultiplyAlpha),q.pixelStorei(q.UNPACK_ALIGNMENT,te.unpackAlignment);const Yt=q.getParameter(q.UNPACK_ROW_LENGTH),ln=q.getParameter(q.UNPACK_IMAGE_HEIGHT),ei=q.getParameter(q.UNPACK_SKIP_PIXELS),pn=q.getParameter(q.UNPACK_SKIP_ROWS),Sn=q.getParameter(q.UNPACK_SKIP_IMAGES);q.pixelStorei(q.UNPACK_ROW_LENGTH,kt.width),q.pixelStorei(q.UNPACK_IMAGE_HEIGHT,kt.height),q.pixelStorei(q.UNPACK_SKIP_PIXELS,gt),q.pixelStorei(q.UNPACK_SKIP_ROWS,ht),q.pixelStorei(q.UNPACK_SKIP_IMAGES,Ze);const qt=G.isDataArrayTexture||G.isData3DTexture,di=te.isDataArrayTexture||te.isData3DTexture;if(G.isDepthTexture){const On=Ye.get(G),ti=Ye.get(te),Pi=Ye.get(On.__renderTarget),Rn=Ye.get(ti.__renderTarget);$e.bindFramebuffer(q.READ_FRAMEBUFFER,Pi.__webglFramebuffer),$e.bindFramebuffer(q.DRAW_FRAMEBUFFER,Rn.__webglFramebuffer);for(let Wr=0;Wr<Qe;Wr++)qt&&(q.framebufferTextureLayer(q.READ_FRAMEBUFFER,q.COLOR_ATTACHMENT0,Ye.get(G).__webglTexture,ve,Ze+Wr),q.framebufferTextureLayer(q.DRAW_FRAMEBUFFER,q.COLOR_ATTACHMENT0,Ye.get(te).__webglTexture,Ce,rn+Wr)),q.blitFramebuffer(gt,ht,He,Ke,Et,At,He,Ke,q.DEPTH_BUFFER_BIT,q.NEAREST);$e.bindFramebuffer(q.READ_FRAMEBUFFER,null),$e.bindFramebuffer(q.DRAW_FRAMEBUFFER,null)}else if(ve!==0||G.isRenderTargetTexture||Ye.has(G)){const On=Ye.get(G),ti=Ye.get(te);$e.bindFramebuffer(q.READ_FRAMEBUFFER,ct),$e.bindFramebuffer(q.DRAW_FRAMEBUFFER,it);for(let Pi=0;Pi<Qe;Pi++)qt?q.framebufferTextureLayer(q.READ_FRAMEBUFFER,q.COLOR_ATTACHMENT0,On.__webglTexture,ve,Ze+Pi):q.framebufferTexture2D(q.READ_FRAMEBUFFER,q.COLOR_ATTACHMENT0,q.TEXTURE_2D,On.__webglTexture,ve),di?q.framebufferTextureLayer(q.DRAW_FRAMEBUFFER,q.COLOR_ATTACHMENT0,ti.__webglTexture,Ce,rn+Pi):q.framebufferTexture2D(q.DRAW_FRAMEBUFFER,q.COLOR_ATTACHMENT0,q.TEXTURE_2D,ti.__webglTexture,Ce),ve!==0?q.blitFramebuffer(gt,ht,He,Ke,Et,At,He,Ke,q.COLOR_BUFFER_BIT,q.NEAREST):di?q.copyTexSubImage3D(xn,Ce,Et,At,rn+Pi,gt,ht,He,Ke):q.copyTexSubImage2D(xn,Ce,Et,At,gt,ht,He,Ke);$e.bindFramebuffer(q.READ_FRAMEBUFFER,null),$e.bindFramebuffer(q.DRAW_FRAMEBUFFER,null)}else di?G.isDataTexture||G.isData3DTexture?q.texSubImage3D(xn,Ce,Et,At,rn,He,Ke,Qe,Gt,Rt,kt.data):te.isCompressedArrayTexture?q.compressedTexSubImage3D(xn,Ce,Et,At,rn,He,Ke,Qe,Gt,kt.data):q.texSubImage3D(xn,Ce,Et,At,rn,He,Ke,Qe,Gt,Rt,kt):G.isDataTexture?q.texSubImage2D(q.TEXTURE_2D,Ce,Et,At,He,Ke,Gt,Rt,kt.data):G.isCompressedTexture?q.compressedTexSubImage2D(q.TEXTURE_2D,Ce,Et,At,kt.width,kt.height,Gt,kt.data):q.texSubImage2D(q.TEXTURE_2D,Ce,Et,At,He,Ke,Gt,Rt,kt);q.pixelStorei(q.UNPACK_ROW_LENGTH,Yt),q.pixelStorei(q.UNPACK_IMAGE_HEIGHT,ln),q.pixelStorei(q.UNPACK_SKIP_PIXELS,ei),q.pixelStorei(q.UNPACK_SKIP_ROWS,pn),q.pixelStorei(q.UNPACK_SKIP_IMAGES,Sn),Ce===0&&te.generateMipmaps&&q.generateMipmap(xn),$e.unbindTexture()},this.copyTextureToTexture3D=function(G,te,ae=null,ie=null,ve=0){return jy('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(G,te,ae,ie,ve)},this.initRenderTarget=function(G){Ye.get(G).__webglFramebuffer===void 0&&K.setupRenderTarget(G)},this.initTexture=function(G){G.isCubeTexture?K.setTextureCube(G,0):G.isData3DTexture?K.setTexture3D(G,0):G.isDataArrayTexture||G.isCompressedArrayTexture?K.setTexture2DArray(G,0):K.setTexture2D(G,0),$e.unbindTexture()},this.resetState=function(){D=0,U=0,F=null,$e.reset(),st.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Lo}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=kn._getDrawingBufferColorSpace(e),t.unpackColorSpace=kn._getUnpackColorSpace()}}const $X=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:cb,AddEquation:eu,AddOperation:MB,AdditiveAnimationBlendMode:mb,AdditiveBlending:ME,AgXToneMapping:IB,AlphaFormat:db,AlwaysCompare:XB,AlwaysDepth:cx,AlwaysStencilFunc:IE,AmbientLight:DL,AnimationAction:VL,AnimationClip:mp,AnimationLoader:uG,AnimationMixer:OG,AnimationObjectGroup:BG,AnimationUtils:oG,ArcCurve:oL,ArrayCamera:UL,ArrowHelper:ij,AttachedBindMode:RE,Audio:zL,AudioAnalyser:EG,AudioContext:Wb,AudioListener:_G,AudioLoader:vG,AxesHelper:rj,BackSide:rs,BasicDepthPacking:kB,BasicShadowMap:oB,BatchedMesh:iL,Bone:N_,BooleanKeyframeTrack:ch,Box2:GG,Box3:Ir,Box3Helper:tj,BoxGeometry:lh,BoxHelper:ej,BufferAttribute:jn,BufferGeometry:yn,BufferGeometryLoader:FL,ByteType:b_,Cache:ql,Camera:u0,CameraHelper:QG,CanvasTexture:TV,CapsuleGeometry:z_,CatmullRomCurve3:aL,CineonToneMapping:RB,CircleGeometry:H_,ClampToEdgeWrapping:Zi,Clock:$b,Color:bt,ColorKeyframeTrack:Ub,ColorManagement:kn,CompressedArrayTexture:MV,CompressedCubeTexture:CV,CompressedTexture:U_,CompressedTextureLoader:dG,ConeGeometry:g0,ConstantAlphaFactor:EB,ConstantColorFactor:wB,Controls:oj,CubeCamera:QB,CubeReflectionMapping:qa,CubeRefractionMapping:du,CubeTexture:d0,CubeTextureLoader:RL,CubeUVReflectionMapping:Ap,CubicBezierCurve:Rb,CubicBezierCurve3:lL,CubicInterpolant:bL,CullFaceBack:bE,CullFaceFront:sB,CullFaceFrontBack:zH,CullFaceNone:rB,Curve:Ea,CurvePath:uL,CustomBlending:aB,CustomToneMapping:PB,CylinderGeometry:m0,Cylindrical:VG,Data3DTexture:B_,DataArrayTexture:c0,DataTexture:xa,DataTextureLoader:zb,DataUtils:kd,DecrementStencilOp:JH,DecrementWrapStencilOp:ZH,DefaultLoadingManager:TL,DepthArrayTexture:RV,DepthFormat:lp,DepthStencilFormat:cp,DepthTexture:p0,DetachedBindMode:BB,DirectionalLight:jb,DirectionalLightHelper:ZG,DiscreteInterpolant:ML,DodecahedronGeometry:V_,DoubleSide:co,DstAlphaFactor:gB,DstColorFactor:yB,DynamicCopyUsage:f9,DynamicDrawUsage:a9,DynamicReadUsage:u9,EdgesGeometry:sL,EllipseCurve:G_,EqualCompare:GB,EqualDepth:dx,EqualStencilFunc:n9,EquirectangularReflectionMapping:rp,EquirectangularRefractionMapping:Fg,Euler:ho,EventDispatcher:nl,ExtrudeGeometry:j_,FileLoader:Gr,Float16BufferAttribute:sV,Float32BufferAttribute:Ht,FloatType:Ci,Fog:O_,FogExp2:L_,FramebufferTexture:bV,FrontSide:Ja,Frustum:Mp,FrustumArray:F_,GLBufferAttribute:HG,GLSL1:m9,GLSL3:DE,GreaterCompare:jB,GreaterDepth:fx,GreaterEqualCompare:$B,GreaterEqualDepth:hx,GreaterEqualStencilFunc:o9,GreaterStencilFunc:r9,GridHelper:JG,Group:Jl,HalfFloatType:cr,HemisphereLight:IL,HemisphereLightHelper:KG,IcosahedronGeometry:v0,ImageBitmapLoader:kL,ImageLoader:$g,ImageUtils:JB,IncrementStencilOp:KH,IncrementWrapStencilOp:qH,InstancedBufferAttribute:Qd,InstancedBufferGeometry:NL,InstancedInterleavedBuffer:zG,InstancedMesh:bb,Int16BufferAttribute:iV,Int32BufferAttribute:rV,Int8BufferAttribute:eV,IntType:o0,InterleavedBuffer:h0,InterleavedBufferAttribute:fu,Interpolant:Cp,InterpolateDiscrete:up,InterpolateLinear:dp,InterpolateSmooth:Gy,InterpolationSamplingMode:y9,InterpolationSamplingType:v9,InvertStencilOp:QH,KeepStencilOp:Rd,KeyframeTrack:ko,LOD:nL,LatheGeometry:W_,Layers:Yd,LessCompare:VB,LessDepth:ux,LessEqualCompare:vb,LessEqualDepth:Zd,LessEqualStencilFunc:i9,LessStencilFunc:t9,Light:Eu,LightProbe:OL,Line:sc,Line3:jG,LineBasicMaterial:os,LineCurve:Pb,LineCurve3:cL,LineDashedMaterial:SL,LineLoop:Mb,LineSegments:Sa,LinearFilter:Gn,LinearInterpolant:kb,LinearMipMapLinearFilter:PE,LinearMipMapNearestFilter:GH,LinearMipmapLinearFilter:Bo,LinearMipmapNearestFilter:Jf,LinearSRGBColorSpace:Qa,LinearToneMapping:CB,LinearTransfer:Ug,Loader:jr,LoaderUtils:ou,LoadingManager:Z_,LoopOnce:LB,LoopPingPong:NB,LoopRepeat:OB,MOUSE:Cd,Material:wr,MaterialLoader:Q_,MathUtils:Xd,Matrix2:Jb,Matrix3:wn,Matrix4:Jt,MaxEquation:dB,Mesh:Ti,MeshBasicMaterial:Ks,MeshDepthMaterial:Ob,MeshDistanceMaterial:Nb,MeshLambertMaterial:Lb,MeshMatcapMaterial:wL,MeshNormalMaterial:_L,MeshPhongMaterial:yL,MeshPhysicalMaterial:Fo,MeshStandardMaterial:_0,MeshToonMaterial:xL,MinEquation:uB,MirroredRepeatWrapping:sp,MixOperation:bB,MultiplyBlending:TE,MultiplyOperation:s0,NearestFilter:ur,NearestMipMapLinearFilter:VH,NearestMipMapNearestFilter:HH,NearestMipmapLinearFilter:Od,NearestMipmapNearestFilter:A_,NeutralToneMapping:DB,NeverCompare:HB,NeverDepth:lx,NeverStencilFunc:e9,NoBlending:Xa,NoColorSpace:Xl,NoToneMapping:Ya,NormalAnimationBlendMode:I_,NormalBlending:Wd,NotEqualCompare:WB,NotEqualDepth:px,NotEqualStencilFunc:s9,NumberKeyframeTrack:th,Object3D:Bn,ObjectLoader:mG,ObjectSpaceNormalMap:zB,OctahedronGeometry:y0,OneFactor:fB,OneMinusConstantAlphaFactor:AB,OneMinusConstantColorFactor:SB,OneMinusDstAlphaFactor:vB,OneMinusDstColorFactor:xB,OneMinusSrcAlphaFactor:ax,OneMinusSrcColorFactor:mB,OrthographicCamera:Ka,PCFShadowMap:E_,PCFSoftShadowMap:mg,PMREMGenerator:UE,Path:Wx,PerspectiveCamera:ji,Plane:jl,PlaneGeometry:Su,PlaneHelper:nj,PointLight:Gb,PointLightHelper:XG,Points:Cb,PointsMaterial:k_,PolarGridHelper:qG,PolyhedronGeometry:wu,PositionalAudio:SG,PropertyBinding:Fn,PropertyMixer:HL,QuadraticBezierCurve:Ib,QuadraticBezierCurve3:Db,Quaternion:xr,QuaternionKeyframeTrack:nh,QuaternionLinearInterpolant:CL,RED_GREEN_RGTC2_Format:Ux,RED_RGTC1_Format:pb,REVISION:Ep,RGBADepthPacking:UB,RGBAFormat:Qi,RGBAIntegerFormat:P_,RGBA_ASTC_10x10_Format:Bx,RGBA_ASTC_10x5_Format:Px,RGBA_ASTC_10x6_Format:Ix,RGBA_ASTC_10x8_Format:Dx,RGBA_ASTC_12x10_Format:Lx,RGBA_ASTC_12x12_Format:Ox,RGBA_ASTC_4x4_Format:Sx,RGBA_ASTC_5x4_Format:Ex,RGBA_ASTC_5x5_Format:Ax,RGBA_ASTC_6x5_Format:bx,RGBA_ASTC_6x6_Format:Mx,RGBA_ASTC_8x5_Format:Cx,RGBA_ASTC_8x6_Format:Tx,RGBA_ASTC_8x8_Format:Rx,RGBA_BPTC_Format:_g,RGBA_ETC2_EAC_Format:wx,RGBA_PVRTC_2BPPV1_Format:yx,RGBA_PVRTC_4BPPV1_Format:vx,RGBA_S3TC_DXT1_Format:vg,RGBA_S3TC_DXT3_Format:yg,RGBA_S3TC_DXT5_Format:xg,RGBDepthPacking:WH,RGBFormat:hb,RGBIntegerFormat:jH,RGB_BPTC_SIGNED_Format:Nx,RGB_BPTC_UNSIGNED_Format:Fx,RGB_ETC1_Format:xx,RGB_ETC2_Format:_x,RGB_PVRTC_2BPPV1_Format:gx,RGB_PVRTC_4BPPV1_Format:mx,RGB_S3TC_DXT1_Format:gg,RGDepthPacking:$H,RGFormat:fb,RGIntegerFormat:R_,RawShaderMaterial:vL,Ray:ah,Raycaster:e1,RectAreaLight:BL,RedFormat:a0,RedIntegerFormat:l0,ReinhardToneMapping:TB,RenderTarget:D_,RenderTarget3D:NG,RenderTargetArray:FG,RepeatWrapping:hu,ReplaceStencilOp:YH,ReverseSubtractEquation:cB,RingGeometry:$_,SIGNED_RED_GREEN_RGTC2_Format:zx,SIGNED_RED_RGTC1_Format:kx,SRGBColorSpace:As,SRGBTransfer:Qn,Scene:bp,ShaderChunk:Cn,ShaderLib:va,ShaderMaterial:Ps,ShadowMaterial:gL,Shape:Kd,ShapeGeometry:X_,ShapePath:sj,ShapeUtils:ya,ShortType:M_,Skeleton:f0,SkeletonHelper:$G,SkinnedMesh:Ab,Source:nu,Sphere:_r,SphereGeometry:x0,Spherical:$x,SphericalHarmonics3:LL,SplineCurve:Bb,SpotLight:Vb,SpotLightHelper:WG,Sprite:tL,SpriteMaterial:Eb,SrcAlphaFactor:ox,SrcAlphaSaturateFactor:_B,SrcColorFactor:pB,StaticCopyUsage:h9,StaticDrawUsage:zg,StaticReadUsage:c9,StereoCamera:yG,StreamCopyUsage:p9,StreamDrawUsage:l9,StreamReadUsage:d9,StringKeyframeTrack:uh,SubtractEquation:lB,SubtractiveBlending:CE,TOUCH:Td,TangentSpaceNormalMap:_u,TetrahedronGeometry:Y_,Texture:qn,TextureLoader:PL,TextureUtils:dj,TimestampQuery:g9,TorusGeometry:K_,TorusKnotGeometry:J_,Triangle:Xs,TriangleFanDrawMode:Hx,TriangleStripDrawMode:gb,TrianglesDrawMode:FB,TubeGeometry:q_,UVMapping:uu,Uint16BufferAttribute:xb,Uint32BufferAttribute:_b,Uint8BufferAttribute:tV,Uint8ClampedBufferAttribute:nV,Uniform:Kb,UniformsGroup:UG,UniformsLib:Tt,UniformsUtils:wb,UnsignedByteType:Ts,UnsignedInt248Type:ap,UnsignedInt5999Type:ub,UnsignedIntType:Za,UnsignedShort4444Type:C_,UnsignedShort5551Type:T_,UnsignedShortType:op,VSMShadowMap:ga,Vector2:Xe,Vector3:J,Vector4:Un,VectorKeyframeTrack:ih,VideoFrameTexture:AV,VideoTexture:rL,WebGL3DRenderTarget:G9,WebGLArrayRenderTarget:V9,WebGLCoordinateSystem:Lo,WebGLCubeRenderTarget:Sb,WebGLRenderTarget:Rs,WebGLRenderer:Zb,WebGLUtils:KL,WebGPUCoordinateSystem:Hg,WebXRController:Wy,WireframeGeometry:mL,WrapAroundEnding:kg,ZeroCurvatureEnding:Nd,ZeroFactor:hB,ZeroSlopeEnding:Fd,ZeroStencilOp:XH,createCanvasElement:KB},Symbol.toStringTag,{value:"Module"}));var Qw={exports:{}},Yc={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CR;function XX(){return CR||(CR=1,Yc.ConcurrentRoot=1,Yc.ContinuousEventPriority=4,Yc.DefaultEventPriority=16,Yc.DiscreteEventPriority=1,Yc.IdleEventPriority=536870912,Yc.LegacyRoot=0),Yc}var TR;function YX(){return TR||(TR=1,Qw.exports=XX()),Qw.exports}var Xf=YX();function KX(n){let e;const t=new Set,i=(u,h)=>{const f=typeof u=="function"?u(e):u;if(f!==e){const g=e;e=h?f:Object.assign({},e,f),t.forEach(v=>v(e,g))}},r=()=>e,s=(u,h=r,f=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let g=h(e);function v(){const x=h(e);if(!f(g,x)){const S=g;u(g=x,S)}}return t.add(v),()=>t.delete(v)},l={setState:i,getState:r,subscribe:(u,h,f)=>h||f?s(u,h,f):(t.add(u),()=>t.delete(u)),destroy:()=>t.clear()};return e=n(i,r,l),l}const JX=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),RR=JX?I.useEffect:I.useLayoutEffect;function JL(n){const e=typeof n=="function"?KX(n):n,t=(i=e.getState,r=Object.is)=>{const[,s]=I.useReducer(w=>w+1,0),o=e.getState(),a=I.useRef(o),l=I.useRef(i),u=I.useRef(r),h=I.useRef(!1),f=I.useRef();f.current===void 0&&(f.current=i(o));let g,v=!1;(a.current!==o||l.current!==i||u.current!==r||h.current)&&(g=i(o),v=!r(f.current,g)),RR(()=>{v&&(f.current=g),a.current=o,l.current=i,u.current=r,h.current=!1});const x=I.useRef(o);RR(()=>{const w=()=>{try{const b=e.getState(),M=l.current(b);u.current(f.current,M)||(a.current=b,f.current=M,s())}catch{h.current=!0,s()}},_=e.subscribe(w);return e.getState()!==x.current&&w(),_},[]);const S=v?g:f.current;return I.useDebugValue(S),S};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[t,e];return{next(){const r=i.length<=0;return{value:i.shift(),done:r}}}},t}const qX=n=>typeof n=="object"&&typeof n.then=="function",zd=[];function qL(n,e,t=(i,r)=>i===r){if(n===e)return!0;if(!n||!e)return!1;const i=n.length;if(e.length!==i)return!1;for(let r=0;r<i;r++)if(!t(n[r],e[r]))return!1;return!0}function ZL(n,e=null,t=!1,i={}){e===null&&(e=[n]);for(const s of zd)if(qL(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return i.lifespan&&i.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,i.lifespan)),s.response;if(!t)throw s.promise}const r={keys:e,equal:i.equal,remove:()=>{const s=zd.indexOf(r);s!==-1&&zd.splice(s,1)},promise:(qX(n)?n:n(...e)).then(s=>{r.response=s,i.lifespan&&i.lifespan>0&&(r.timeout=setTimeout(r.remove,i.lifespan))}).catch(s=>r.error=s)};if(zd.push(r),!t)throw r.promise}const ZX=(n,e,t)=>ZL(n,e,!1,t),QX=(n,e,t)=>void ZL(n,e,!0,t),eY=n=>{if(n===void 0||n.length===0)zd.splice(0,zd.length);else{const e=zd.find(t=>qL(n,t.keys,t.equal));e&&e.remove()}};var eS={exports:{}},tS={exports:{}},nS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PR;function tY(){return PR||(PR=1,(function(n){function e(X,de){var se=X.length;X.push(de);e:for(;0<se;){var Y=se-1>>>1,ge=X[Y];if(0<r(ge,de))X[Y]=de,X[se]=ge,se=Y;else break e}}function t(X){return X.length===0?null:X[0]}function i(X){if(X.length===0)return null;var de=X[0],se=X.pop();if(se!==de){X[0]=se;e:for(var Y=0,ge=X.length,Ve=ge>>>1;Y<Ve;){var we=2*(Y+1)-1,Ne=X[we],Le=we+1,Ge=X[Le];if(0>r(Ne,se))Le<ge&&0>r(Ge,Ne)?(X[Y]=Ge,X[Le]=se,Y=Le):(X[Y]=Ne,X[we]=se,Y=we);else if(Le<ge&&0>r(Ge,se))X[Y]=Ge,X[Le]=se,Y=Le;else break e}}return de}function r(X,de){var se=X.sortIndex-de.sortIndex;return se!==0?se:X.id-de.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,f=null,g=3,v=!1,x=!1,S=!1,w=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M(X){for(var de=t(u);de!==null;){if(de.callback===null)i(u);else if(de.startTime<=X)i(u),de.sortIndex=de.expirationTime,e(l,de);else break;de=t(u)}}function T(X){if(S=!1,M(X),!x)if(t(l)!==null)x=!0,fe(L);else{var de=t(u);de!==null&&xe(T,de.startTime-X)}}function L(X,de){x=!1,S&&(S=!1,_(F),F=-1),v=!0;var se=g;try{for(M(de),f=t(l);f!==null&&(!(f.expirationTime>de)||X&&!V());){var Y=f.callback;if(typeof Y=="function"){f.callback=null,g=f.priorityLevel;var ge=Y(f.expirationTime<=de);de=n.unstable_now(),typeof ge=="function"?f.callback=ge:f===t(l)&&i(l),M(de)}else i(l);f=t(l)}if(f!==null)var Ve=!0;else{var we=t(u);we!==null&&xe(T,we.startTime-de),Ve=!1}return Ve}finally{f=null,g=se,v=!1}}var D=!1,U=null,F=-1,k=5,N=-1;function V(){return!(n.unstable_now()-N<k)}function Z(){if(U!==null){var X=n.unstable_now();N=X;var de=!0;try{de=U(!0,X)}finally{de?Q():(D=!1,U=null)}}else D=!1}var Q;if(typeof b=="function")Q=function(){b(Z)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,me=le.port2;le.port1.onmessage=Z,Q=function(){me.postMessage(null)}}else Q=function(){w(Z,0)};function fe(X){U=X,D||(D=!0,Q())}function xe(X,de){F=w(function(){X(n.unstable_now())},de)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(X){X.callback=null},n.unstable_continueExecution=function(){x||v||(x=!0,fe(L))},n.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<X?Math.floor(1e3/X):5},n.unstable_getCurrentPriorityLevel=function(){return g},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(X){switch(g){case 1:case 2:case 3:var de=3;break;default:de=g}var se=g;g=de;try{return X()}finally{g=se}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(X,de){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var se=g;g=X;try{return de()}finally{g=se}},n.unstable_scheduleCallback=function(X,de,se){var Y=n.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?Y+se:Y):se=Y,X){case 1:var ge=-1;break;case 2:ge=250;break;case 5:ge=1073741823;break;case 4:ge=1e4;break;default:ge=5e3}return ge=se+ge,X={id:h++,callback:de,priorityLevel:X,startTime:se,expirationTime:ge,sortIndex:-1},se>Y?(X.sortIndex=se,e(u,X),t(l)===null&&X===t(u)&&(S?(_(F),F=-1):S=!0,xe(T,se-Y))):(X.sortIndex=ge,e(l,X),x||v||(x=!0,fe(L))),X},n.unstable_shouldYield=V,n.unstable_wrapCallback=function(X){var de=g;return function(){var se=g;g=de;try{return X.apply(this,arguments)}finally{g=se}}}})(nS)),nS}var IR;function QL(){return IR||(IR=1,tS.exports=tY()),tS.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iS,DR;function nY(){return DR||(DR=1,iS=function(e){var t={},i=p_(),r=QL(),s=Object.assign;function o(p){for(var m="https://reactjs.org/docs/error-decoder.html?invariant="+p,E=1;E<arguments.length;E++)m+="&args[]="+encodeURIComponent(arguments[E]);return"Minified React error #"+p+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),u=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),g=Symbol.for("react.profiler"),v=Symbol.for("react.provider"),x=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),b=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),T=Symbol.for("react.offscreen"),L=Symbol.iterator;function D(p){return p===null||typeof p!="object"?null:(p=L&&p[L]||p["@@iterator"],typeof p=="function"?p:null)}function U(p){if(p==null)return null;if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p;switch(p){case h:return"Fragment";case u:return"Portal";case g:return"Profiler";case f:return"StrictMode";case w:return"Suspense";case _:return"SuspenseList"}if(typeof p=="object")switch(p.$$typeof){case x:return(p.displayName||"Context")+".Consumer";case v:return(p._context.displayName||"Context")+".Provider";case S:var m=p.render;return p=p.displayName,p||(p=m.displayName||m.name||"",p=p!==""?"ForwardRef("+p+")":"ForwardRef"),p;case b:return m=p.displayName||null,m!==null?m:U(p.type)||"Memo";case M:m=p._payload,p=p._init;try{return U(p(m))}catch{}}return null}function F(p){var m=p.type;switch(p.tag){case 24:return"Cache";case 9:return(m.displayName||"Context")+".Consumer";case 10:return(m._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return p=m.render,p=p.displayName||p.name||"",m.displayName||(p!==""?"ForwardRef("+p+")":"ForwardRef");case 7:return"Fragment";case 5:return m;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U(m);case 8:return m===f?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof m=="function")return m.displayName||m.name||null;if(typeof m=="string")return m}return null}function k(p){var m=p,E=p;if(p.alternate)for(;m.return;)m=m.return;else{p=m;do m=p,(m.flags&4098)!==0&&(E=m.return),p=m.return;while(p)}return m.tag===3?E:null}function N(p){if(k(p)!==p)throw Error(o(188))}function V(p){var m=p.alternate;if(!m){if(m=k(p),m===null)throw Error(o(188));return m!==p?null:p}for(var E=p,C=m;;){var B=E.return;if(B===null)break;var z=B.alternate;if(z===null){if(C=B.return,C!==null){E=C;continue}break}if(B.child===z.child){for(z=B.child;z;){if(z===E)return N(B),p;if(z===C)return N(B),m;z=z.sibling}throw Error(o(188))}if(E.return!==C.return)E=B,C=z;else{for(var ee=!1,_e=B.child;_e;){if(_e===E){ee=!0,E=B,C=z;break}if(_e===C){ee=!0,C=B,E=z;break}_e=_e.sibling}if(!ee){for(_e=z.child;_e;){if(_e===E){ee=!0,E=z,C=B;break}if(_e===C){ee=!0,C=z,E=B;break}_e=_e.sibling}if(!ee)throw Error(o(189))}}if(E.alternate!==C)throw Error(o(190))}if(E.tag!==3)throw Error(o(188));return E.stateNode.current===E?p:m}function Z(p){return p=V(p),p!==null?Q(p):null}function Q(p){if(p.tag===5||p.tag===6)return p;for(p=p.child;p!==null;){var m=Q(p);if(m!==null)return m;p=p.sibling}return null}function le(p){if(p.tag===5||p.tag===6)return p;for(p=p.child;p!==null;){if(p.tag!==4){var m=le(p);if(m!==null)return m}p=p.sibling}return null}var me=Array.isArray,fe=e.getPublicInstance,xe=e.getRootHostContext,X=e.getChildHostContext,de=e.prepareForCommit,se=e.resetAfterCommit,Y=e.createInstance,ge=e.appendInitialChild,Ve=e.finalizeInitialChildren,we=e.prepareUpdate,Ne=e.shouldSetTextContent,Le=e.createTextInstance,Ge=e.scheduleTimeout,et=e.cancelTimeout,ft=e.noTimeout,yt=e.isPrimaryRenderer,nn=e.supportsMutation,Xt=e.supportsPersistence,xt=e.supportsHydration,q=e.getInstanceFromNode,at=e.preparePortalMount,Je=e.getCurrentEventPriority,tt=e.detachDeletedInstance,$e=e.supportsMicrotasks,_t=e.scheduleMicrotask,Ye=e.supportsTestSelectors,K=e.findFiberRoot,j=e.getBoundingRect,ne=e.getTextContent,Se=e.isHiddenSubtree,ze=e.matchAccessibilityRole,Re=e.setFocusIfFocusable,mt=e.setupIntersectionObserver,lt=e.appendChild,Dt=e.appendChildToContainer,Ft=e.commitTextUpdate,qe=e.commitMount,wt=e.commitUpdate,Lt=e.insertBefore,It=e.insertInContainerBefore,St=e.removeChild,ue=e.removeChildFromContainer,Oe=e.resetTextContent,st=e.hideInstance,ce=e.hideTextInstance,be=e.unhideInstance,Ie=e.unhideTextInstance,We=e.clearContainer,Mt=e.cloneInstance,vt=e.createContainerChildSet,$t=e.appendChildToContainerChildSet,Tn=e.finalizeContainerChildren,Xn=e.replaceContainerChildren,mn=e.cloneHiddenInstance,vi=e.cloneHiddenTextInstance,Si=e.canHydrateInstance,ba=e.canHydrateTextInstance,fo=e.canHydrateSuspenseInstance,Dr=e.isSuspenseInstancePending,ls=e.isSuspenseInstanceFallback,cs=e.registerSuspenseInstanceRetry,dr=e.getNextHydratableSibling,dn=e.getFirstHydratableChild,il=e.getFirstHydratableChildWithinContainer,Ma=e.getFirstHydratableChildWithinSuspenseInstance,H=e.hydrateInstance,$=e.hydrateTextInstance,he=e.hydrateSuspenseInstance,Pe=e.getNextHydratableInstanceAfterSuspenseInstance,ke=e.commitHydratedContainer,Ue=e.commitHydratedSuspenseInstance,ct=e.clearSuspenseBoundary,it=e.clearSuspenseBoundaryFromContainer,G=e.shouldDeleteUnhydratedTailInstances,te=e.didNotMatchHydratedContainerTextInstance,ae=e.didNotMatchHydratedTextInstance,ie;function ve(p){if(ie===void 0)try{throw Error()}catch(E){var m=E.stack.trim().match(/\n( *(at )?)/);ie=m&&m[1]||""}return`
`+ie+p}var Ce=!1;function He(p,m){if(!p||Ce)return"";Ce=!0;var E=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(m)if(m=function(){throw Error()},Object.defineProperty(m.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(m,[])}catch(ut){var C=ut}Reflect.construct(p,[],m)}else{try{m.call()}catch(ut){C=ut}p.call(m.prototype)}else{try{throw Error()}catch(ut){C=ut}p()}}catch(ut){if(ut&&C&&typeof ut.stack=="string"){for(var B=ut.stack.split(`
`),z=C.stack.split(`
`),ee=B.length-1,_e=z.length-1;1<=ee&&0<=_e&&B[ee]!==z[_e];)_e--;for(;1<=ee&&0<=_e;ee--,_e--)if(B[ee]!==z[_e]){if(ee!==1||_e!==1)do if(ee--,_e--,0>_e||B[ee]!==z[_e]){var je=`
`+B[ee].replace(" at new "," at ");return p.displayName&&je.includes("<anonymous>")&&(je=je.replace("<anonymous>",p.displayName)),je}while(1<=ee&&0<=_e);break}}}finally{Ce=!1,Error.prepareStackTrace=E}return(p=p?p.displayName||p.name:"")?ve(p):""}var Ke=Object.prototype.hasOwnProperty,Qe=[],gt=-1;function ht(p){return{current:p}}function Ze(p){0>gt||(p.current=Qe[gt],Qe[gt]=null,gt--)}function Et(p,m){gt++,Qe[gt]=p.current,p.current=m}var At={},rn=ht(At),kt=ht(!1),Gt=At;function Rt(p,m){var E=p.type.contextTypes;if(!E)return At;var C=p.stateNode;if(C&&C.__reactInternalMemoizedUnmaskedChildContext===m)return C.__reactInternalMemoizedMaskedChildContext;var B={},z;for(z in E)B[z]=m[z];return C&&(p=p.stateNode,p.__reactInternalMemoizedUnmaskedChildContext=m,p.__reactInternalMemoizedMaskedChildContext=B),B}function xn(p){return p=p.childContextTypes,p!=null}function Yt(){Ze(kt),Ze(rn)}function ln(p,m,E){if(rn.current!==At)throw Error(o(168));Et(rn,m),Et(kt,E)}function ei(p,m,E){var C=p.stateNode;if(m=m.childContextTypes,typeof C.getChildContext!="function")return E;C=C.getChildContext();for(var B in C)if(!(B in m))throw Error(o(108,F(p)||"Unknown",B));return s({},E,C)}function pn(p){return p=(p=p.stateNode)&&p.__reactInternalMemoizedMergedChildContext||At,Gt=rn.current,Et(rn,p),Et(kt,kt.current),!0}function Sn(p,m,E){var C=p.stateNode;if(!C)throw Error(o(169));E?(p=ei(p,m,Gt),C.__reactInternalMemoizedMergedChildContext=p,Ze(kt),Ze(rn),Et(rn,p)):Ze(kt),Et(kt,E)}var qt=Math.clz32?Math.clz32:ti,di=Math.log,On=Math.LN2;function ti(p){return p>>>=0,p===0?32:31-(di(p)/On|0)|0}var Pi=64,Rn=4194304;function Wr(p){switch(p&-p){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return p&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return p}}function Au(p,m){var E=p.pendingLanes;if(E===0)return 0;var C=0,B=p.suspendedLanes,z=p.pingedLanes,ee=E&268435455;if(ee!==0){var _e=ee&~B;_e!==0?C=Wr(_e):(z&=ee,z!==0&&(C=Wr(z)))}else ee=E&~B,ee!==0?C=Wr(ee):z!==0&&(C=Wr(z));if(C===0)return 0;if(m!==0&&m!==C&&(m&B)===0&&(B=C&-C,z=m&-m,B>=z||B===16&&(z&4194240)!==0))return m;if((C&4)!==0&&(C|=E&16),m=p.entangledLanes,m!==0)for(p=p.entanglements,m&=C;0<m;)E=31-qt(m),B=1<<E,C|=p[E],m&=~B;return C}function Fp(p,m){switch(p){case 1:case 2:case 4:return m+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function I0(p,m){for(var E=p.suspendedLanes,C=p.pingedLanes,B=p.expirationTimes,z=p.pendingLanes;0<z;){var ee=31-qt(z),_e=1<<ee,je=B[ee];je===-1?((_e&E)===0||(_e&C)!==0)&&(B[ee]=Fp(_e,m)):je<=m&&(p.expiredLanes|=_e),z&=~_e}}function fh(p){return p=p.pendingLanes&-1073741825,p!==0?p:p&1073741824?1073741824:0}function ph(p){for(var m=[],E=0;31>E;E++)m.push(p);return m}function rl(p,m,E){p.pendingLanes|=m,m!==536870912&&(p.suspendedLanes=0,p.pingedLanes=0),p=p.eventTimes,m=31-qt(m),p[m]=E}function mh(p,m){var E=p.pendingLanes&~m;p.pendingLanes=m,p.suspendedLanes=0,p.pingedLanes=0,p.expiredLanes&=m,p.mutableReadLanes&=m,p.entangledLanes&=m,m=p.entanglements;var C=p.eventTimes;for(p=p.expirationTimes;0<E;){var B=31-qt(E),z=1<<B;m[B]=0,C[B]=-1,p[B]=-1,E&=~z}}function po(p,m){var E=p.entangledLanes|=m;for(p=p.entanglements;E;){var C=31-qt(E),B=1<<C;B&m|p[C]&m&&(p[C]|=m),E&=~B}}var bn=0;function zo(p){return p&=-p,1<p?4<p?(p&268435455)!==0?16:536870912:4:1}var sl=r.unstable_scheduleCallback,dc=r.unstable_cancelCallback,Ca=r.unstable_shouldYield,h1=r.unstable_requestPaint,Xi=r.unstable_now,ol=r.unstable_ImmediatePriority,f1=r.unstable_UserBlockingPriority,gh=r.unstable_NormalPriority,vh=r.unstable_IdlePriority,bu=null,mo=null;function Mu(p){if(mo&&typeof mo.onCommitFiberRoot=="function")try{mo.onCommitFiberRoot(bu,p,void 0,(p.current.flags&128)===128)}catch{}}function Cu(p,m){return p===m&&(p!==0||1/p===1/m)||p!==p&&m!==m}var Br=typeof Object.is=="function"?Object.is:Cu,Is=null,yh=!1,kp=!1;function xh(p){Is===null?Is=[p]:Is.push(p)}function _h(p){yh=!0,xh(p)}function Ds(){if(!kp&&Is!==null){kp=!0;var p=0,m=bn;try{var E=Is;for(bn=1;p<E.length;p++){var C=E[p];do C=C(!0);while(C!==null)}Is=null,yh=!1}catch(B){throw Is!==null&&(Is=Is.slice(p+1)),sl(ol,Ds),B}finally{bn=m,kp=!1}}return null}var D0=a.ReactCurrentBatchConfig;function qs(p,m){if(Br(p,m))return!0;if(typeof p!="object"||p===null||typeof m!="object"||m===null)return!1;var E=Object.keys(p),C=Object.keys(m);if(E.length!==C.length)return!1;for(C=0;C<E.length;C++){var B=E[C];if(!Ke.call(m,B)||!Br(p[B],m[B]))return!1}return!0}function Up(p){switch(p.tag){case 5:return ve(p.type);case 16:return ve("Lazy");case 13:return ve("Suspense");case 19:return ve("SuspenseList");case 0:case 2:case 15:return p=He(p.type,!1),p;case 11:return p=He(p.type.render,!1),p;case 1:return p=He(p.type,!0),p;default:return""}}function $r(p,m){if(p&&p.defaultProps){m=s({},m),p=p.defaultProps;for(var E in p)m[E]===void 0&&(m[E]=p[E]);return m}return m}var Tu=ht(null),al=null,Ho=null,wh=null;function Lr(){wh=Ho=al=null}function ll(p,m,E){yt?(Et(Tu,m._currentValue),m._currentValue=E):(Et(Tu,m._currentValue2),m._currentValue2=E)}function Ru(p){var m=Tu.current;Ze(Tu),yt?p._currentValue=m:p._currentValue2=m}function cl(p,m,E){for(;p!==null;){var C=p.alternate;if((p.childLanes&m)!==m?(p.childLanes|=m,C!==null&&(C.childLanes|=m)):C!==null&&(C.childLanes&m)!==m&&(C.childLanes|=m),p===E)break;p=p.return}}function hc(p,m){al=p,wh=Ho=null,p=p.dependencies,p!==null&&p.firstContext!==null&&((p.lanes&m)!==0&&(ir=!0),p.firstContext=null)}function Xr(p){var m=yt?p._currentValue:p._currentValue2;if(wh!==p)if(p={context:p,memoizedValue:m,next:null},Ho===null){if(al===null)throw Error(o(308));Ho=p,al.dependencies={lanes:0,firstContext:p}}else Ho=Ho.next=p;return m}var Bs=null,Ls=!1;function fc(p){p.updateQueue={baseState:p.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zp(p,m){p=p.updateQueue,m.updateQueue===p&&(m.updateQueue={baseState:p.baseState,firstBaseUpdate:p.firstBaseUpdate,lastBaseUpdate:p.lastBaseUpdate,shared:p.shared,effects:p.effects})}function Vo(p,m){return{eventTime:p,lane:m,tag:0,payload:null,callback:null,next:null}}function Ta(p,m){var E=p.updateQueue;E!==null&&(E=E.shared,Di!==null&&(p.mode&1)!==0&&(_n&2)===0?(p=E.interleaved,p===null?(m.next=m,Bs===null?Bs=[E]:Bs.push(E)):(m.next=p.next,p.next=m),E.interleaved=m):(p=E.pending,p===null?m.next=m:(m.next=p.next,p.next=m),E.pending=m))}function Sh(p,m,E){if(m=m.updateQueue,m!==null&&(m=m.shared,(E&4194240)!==0)){var C=m.lanes;C&=p.pendingLanes,E|=C,m.lanes=E,po(p,E)}}function Eh(p,m){var E=p.updateQueue,C=p.alternate;if(C!==null&&(C=C.updateQueue,E===C)){var B=null,z=null;if(E=E.firstBaseUpdate,E!==null){do{var ee={eventTime:E.eventTime,lane:E.lane,tag:E.tag,payload:E.payload,callback:E.callback,next:null};z===null?B=z=ee:z=z.next=ee,E=E.next}while(E!==null);z===null?B=z=m:z=z.next=m}else B=z=m;E={baseState:C.baseState,firstBaseUpdate:B,lastBaseUpdate:z,shared:C.shared,effects:C.effects},p.updateQueue=E;return}p=E.lastBaseUpdate,p===null?E.firstBaseUpdate=m:p.next=m,E.lastBaseUpdate=m}function Ah(p,m,E,C){var B=p.updateQueue;Ls=!1;var z=B.firstBaseUpdate,ee=B.lastBaseUpdate,_e=B.shared.pending;if(_e!==null){B.shared.pending=null;var je=_e,ut=je.next;je.next=null,ee===null?z=ut:ee.next=ut,ee=je;var Ot=p.alternate;Ot!==null&&(Ot=Ot.updateQueue,_e=Ot.lastBaseUpdate,_e!==ee&&(_e===null?Ot.firstBaseUpdate=ut:_e.next=ut,Ot.lastBaseUpdate=je))}if(z!==null){var hn=B.baseState;ee=0,Ot=ut=je=null,_e=z;do{var Kt=_e.lane,En=_e.eventTime;if((C&Kt)===Kt){Ot!==null&&(Ot=Ot.next={eventTime:En,lane:0,tag:_e.tag,payload:_e.payload,callback:_e.callback,next:null});e:{var Pt=p,vr=_e;switch(Kt=m,En=E,vr.tag){case 1:if(Pt=vr.payload,typeof Pt=="function"){hn=Pt.call(En,hn,Kt);break e}hn=Pt;break e;case 3:Pt.flags=Pt.flags&-65537|128;case 0:if(Pt=vr.payload,Kt=typeof Pt=="function"?Pt.call(En,hn,Kt):Pt,Kt==null)break e;hn=s({},hn,Kt);break e;case 2:Ls=!0}}_e.callback!==null&&_e.lane!==0&&(p.flags|=64,Kt=B.effects,Kt===null?B.effects=[_e]:Kt.push(_e))}else En={eventTime:En,lane:Kt,tag:_e.tag,payload:_e.payload,callback:_e.callback,next:null},Ot===null?(ut=Ot=En,je=hn):Ot=Ot.next=En,ee|=Kt;if(_e=_e.next,_e===null){if(_e=B.shared.pending,_e===null)break;Kt=_e,_e=Kt.next,Kt.next=null,B.lastBaseUpdate=Kt,B.shared.pending=null}}while(!0);if(Ot===null&&(je=hn),B.baseState=je,B.firstBaseUpdate=ut,B.lastBaseUpdate=Ot,m=B.shared.interleaved,m!==null){B=m;do ee|=B.lane,B=B.next;while(B!==m)}else z===null&&(B.shared.lanes=0);xo|=ee,p.lanes=ee,p.memoizedState=hn}}function B0(p,m,E){if(p=m.effects,m.effects=null,p!==null)for(m=0;m<p.length;m++){var C=p[m],B=C.callback;if(B!==null){if(C.callback=null,C=E,typeof B!="function")throw Error(o(191,B));B.call(C)}}}var L0=new i.Component().refs;function Hp(p,m,E,C){m=p.memoizedState,E=E(C,m),E=E==null?m:s({},m,E),p.memoizedState=E,p.lanes===0&&(p.updateQueue.baseState=E)}var bh={isMounted:function(p){return(p=p._reactInternals)?k(p)===p:!1},enqueueSetState:function(p,m,E){p=p._reactInternals;var C=Nn(),B=ro(p),z=Vo(C,B);z.payload=m,E!=null&&(z.callback=E),Ta(p,z),m=Mr(p,B,C),m!==null&&Sh(m,p,B)},enqueueReplaceState:function(p,m,E){p=p._reactInternals;var C=Nn(),B=ro(p),z=Vo(C,B);z.tag=1,z.payload=m,E!=null&&(z.callback=E),Ta(p,z),m=Mr(p,B,C),m!==null&&Sh(m,p,B)},enqueueForceUpdate:function(p,m){p=p._reactInternals;var E=Nn(),C=ro(p),B=Vo(E,C);B.tag=2,m!=null&&(B.callback=m),Ta(p,B),m=Mr(p,C,E),m!==null&&Sh(m,p,C)}};function Vp(p,m,E,C,B,z,ee){return p=p.stateNode,typeof p.shouldComponentUpdate=="function"?p.shouldComponentUpdate(C,z,ee):m.prototype&&m.prototype.isPureReactComponent?!qs(E,C)||!qs(B,z):!0}function O0(p,m,E){var C=!1,B=At,z=m.contextType;return typeof z=="object"&&z!==null?z=Xr(z):(B=xn(m)?Gt:rn.current,C=m.contextTypes,z=(C=C!=null)?Rt(p,B):At),m=new m(E,z),p.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=bh,p.stateNode=m,m._reactInternals=p,C&&(p=p.stateNode,p.__reactInternalMemoizedUnmaskedChildContext=B,p.__reactInternalMemoizedMaskedChildContext=z),m}function N0(p,m,E,C){p=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(E,C),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(E,C),m.state!==p&&bh.enqueueReplaceState(m,m.state,null)}function Gp(p,m,E,C){var B=p.stateNode;B.props=E,B.state=p.memoizedState,B.refs=L0,fc(p);var z=m.contextType;typeof z=="object"&&z!==null?B.context=Xr(z):(z=xn(m)?Gt:rn.current,B.context=Rt(p,z)),B.state=p.memoizedState,z=m.getDerivedStateFromProps,typeof z=="function"&&(Hp(p,m,z,E),B.state=p.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof B.getSnapshotBeforeUpdate=="function"||typeof B.UNSAFE_componentWillMount!="function"&&typeof B.componentWillMount!="function"||(m=B.state,typeof B.componentWillMount=="function"&&B.componentWillMount(),typeof B.UNSAFE_componentWillMount=="function"&&B.UNSAFE_componentWillMount(),m!==B.state&&bh.enqueueReplaceState(B,B.state,null),Ah(p,E,B,C),B.state=p.memoizedState),typeof B.componentDidMount=="function"&&(p.flags|=4194308)}var pc=[],Ra=0,Mh=null,Ch=0,Os=[],us=0,ul=null,Go=1,jo="";function dl(p,m){pc[Ra++]=Ch,pc[Ra++]=Mh,Mh=p,Ch=m}function F0(p,m,E){Os[us++]=Go,Os[us++]=jo,Os[us++]=ul,ul=p;var C=Go;p=jo;var B=32-qt(C)-1;C&=~(1<<B),E+=1;var z=32-qt(m)+B;if(30<z){var ee=B-B%5;z=(C&(1<<ee)-1).toString(32),C>>=ee,B-=ee,Go=1<<32-qt(m)+B|E<<B|C,jo=z+p}else Go=1<<z|E<<B|C,jo=p}function jp(p){p.return!==null&&(dl(p,1),F0(p,1,0))}function Wp(p){for(;p===Mh;)Mh=pc[--Ra],pc[Ra]=null,Ch=pc[--Ra],pc[Ra]=null;for(;p===ul;)ul=Os[--us],Os[us]=null,jo=Os[--us],Os[us]=null,Go=Os[--us],Os[us]=null}var Or=null,hr=null,hi=!1,mc=!1,Ns=null;function $p(p,m){var E=vs(5,null,null,0);E.elementType="DELETED",E.stateNode=m,E.return=p,m=p.deletions,m===null?(p.deletions=[E],p.flags|=16):m.push(E)}function Xp(p,m){switch(p.tag){case 5:return m=Si(m,p.type,p.pendingProps),m!==null?(p.stateNode=m,Or=p,hr=dn(m),!0):!1;case 6:return m=ba(m,p.pendingProps),m!==null?(p.stateNode=m,Or=p,hr=null,!0):!1;case 13:if(m=fo(m),m!==null){var E=ul!==null?{id:Go,overflow:jo}:null;return p.memoizedState={dehydrated:m,treeContext:E,retryLane:1073741824},E=vs(18,null,null,0),E.stateNode=m,E.return=p,p.child=E,Or=p,hr=null,!0}return!1;default:return!1}}function Th(p){return(p.mode&1)!==0&&(p.flags&128)===0}function Pa(p){if(hi){var m=hr;if(m){var E=m;if(!Xp(p,m)){if(Th(p))throw Error(o(418));m=dr(E);var C=Or;m&&Xp(p,m)?$p(C,E):(p.flags=p.flags&-4097|2,hi=!1,Or=p)}}else{if(Th(p))throw Error(o(418));p.flags=p.flags&-4097|2,hi=!1,Or=p}}}function k0(p){for(p=p.return;p!==null&&p.tag!==5&&p.tag!==3&&p.tag!==13;)p=p.return;Or=p}function Pu(p){if(!xt||p!==Or)return!1;if(!hi)return k0(p),hi=!0,!1;if(p.tag!==3&&(p.tag!==5||G(p.type)&&!Ne(p.type,p.memoizedProps))){var m=hr;if(m){if(Th(p)){for(p=hr;p;)p=dr(p);throw Error(o(418))}for(;m;)$p(p,m),m=dr(m)}}if(k0(p),p.tag===13){if(!xt)throw Error(o(316));if(p=p.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(o(317));hr=Pe(p)}else hr=Or?dr(p.stateNode):null;return!0}function gc(){xt&&(hr=Or=null,mc=hi=!1)}function Rh(p){Ns===null?Ns=[p]:Ns.push(p)}function vc(p,m,E){if(p=E.ref,p!==null&&typeof p!="function"&&typeof p!="object"){if(E._owner){if(E=E._owner,E){if(E.tag!==1)throw Error(o(309));var C=E.stateNode}if(!C)throw Error(o(147,p));var B=C,z=""+p;return m!==null&&m.ref!==null&&typeof m.ref=="function"&&m.ref._stringRef===z?m.ref:(m=function(ee){var _e=B.refs;_e===L0&&(_e=B.refs={}),ee===null?delete _e[z]:_e[z]=ee},m._stringRef=z,m)}if(typeof p!="string")throw Error(o(284));if(!E._owner)throw Error(o(290,p))}return p}function Ia(p,m){throw p=Object.prototype.toString.call(m),Error(o(31,p==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":p))}function yc(p){var m=p._init;return m(p._payload)}function U0(p){function m(Te,Ee){if(p){var Fe=Te.deletions;Fe===null?(Te.deletions=[Ee],Te.flags|=16):Fe.push(Ee)}}function E(Te,Ee){if(!p)return null;for(;Ee!==null;)m(Te,Ee),Ee=Ee.sibling;return null}function C(Te,Ee){for(Te=new Map;Ee!==null;)Ee.key!==null?Te.set(Ee.key,Ee):Te.set(Ee.index,Ee),Ee=Ee.sibling;return Te}function B(Te,Ee){return Te=ra(Te,Ee),Te.index=0,Te.sibling=null,Te}function z(Te,Ee,Fe){return Te.index=Fe,p?(Fe=Te.alternate,Fe!==null?(Fe=Fe.index,Fe<Ee?(Te.flags|=2,Ee):Fe):(Te.flags|=2,Ee)):(Te.flags|=1048576,Ee)}function ee(Te){return p&&Te.alternate===null&&(Te.flags|=2),Te}function _e(Te,Ee,Fe,Ct){return Ee===null||Ee.tag!==6?(Ee=nf(Fe,Te.mode,Ct),Ee.return=Te,Ee):(Ee=B(Ee,Fe),Ee.return=Te,Ee)}function je(Te,Ee,Fe,Ct){var jt=Fe.type;return jt===h?Ot(Te,Ee,Fe.props.children,Ct,Fe.key):Ee!==null&&(Ee.elementType===jt||typeof jt=="object"&&jt!==null&&jt.$$typeof===M&&yc(jt)===Ee.type)?(Ct=B(Ee,Fe.props),Ct.ref=vc(Te,Ee,Fe),Ct.return=Te,Ct):(Ct=tf(Fe.type,Fe.key,Fe.props,null,Te.mode,Ct),Ct.ref=vc(Te,Ee,Fe),Ct.return=Te,Ct)}function ut(Te,Ee,Fe,Ct){return Ee===null||Ee.tag!==4||Ee.stateNode.containerInfo!==Fe.containerInfo||Ee.stateNode.implementation!==Fe.implementation?(Ee=rf(Fe,Te.mode,Ct),Ee.return=Te,Ee):(Ee=B(Ee,Fe.children||[]),Ee.return=Te,Ee)}function Ot(Te,Ee,Fe,Ct,jt){return Ee===null||Ee.tag!==7?(Ee=Bl(Fe,Te.mode,Ct,jt),Ee.return=Te,Ee):(Ee=B(Ee,Fe),Ee.return=Te,Ee)}function hn(Te,Ee,Fe){if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number")return Ee=nf(""+Ee,Te.mode,Fe),Ee.return=Te,Ee;if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case l:return Fe=tf(Ee.type,Ee.key,Ee.props,null,Te.mode,Fe),Fe.ref=vc(Te,null,Ee),Fe.return=Te,Fe;case u:return Ee=rf(Ee,Te.mode,Fe),Ee.return=Te,Ee;case M:var Ct=Ee._init;return hn(Te,Ct(Ee._payload),Fe)}if(me(Ee)||D(Ee))return Ee=Bl(Ee,Te.mode,Fe,null),Ee.return=Te,Ee;Ia(Te,Ee)}return null}function Kt(Te,Ee,Fe,Ct){var jt=Ee!==null?Ee.key:null;if(typeof Fe=="string"&&Fe!==""||typeof Fe=="number")return jt!==null?null:_e(Te,Ee,""+Fe,Ct);if(typeof Fe=="object"&&Fe!==null){switch(Fe.$$typeof){case l:return Fe.key===jt?je(Te,Ee,Fe,Ct):null;case u:return Fe.key===jt?ut(Te,Ee,Fe,Ct):null;case M:return jt=Fe._init,Kt(Te,Ee,jt(Fe._payload),Ct)}if(me(Fe)||D(Fe))return jt!==null?null:Ot(Te,Ee,Fe,Ct,null);Ia(Te,Fe)}return null}function En(Te,Ee,Fe,Ct,jt){if(typeof Ct=="string"&&Ct!==""||typeof Ct=="number")return Te=Te.get(Fe)||null,_e(Ee,Te,""+Ct,jt);if(typeof Ct=="object"&&Ct!==null){switch(Ct.$$typeof){case l:return Te=Te.get(Ct.key===null?Fe:Ct.key)||null,je(Ee,Te,Ct,jt);case u:return Te=Te.get(Ct.key===null?Fe:Ct.key)||null,ut(Ee,Te,Ct,jt);case M:var gn=Ct._init;return En(Te,Ee,Fe,gn(Ct._payload),jt)}if(me(Ct)||D(Ct))return Te=Te.get(Fe)||null,Ot(Ee,Te,Ct,jt,null);Ia(Ee,Ct)}return null}function Pt(Te,Ee,Fe,Ct){for(var jt=null,gn=null,fn=Ee,Ln=Ee=0,zi=null;fn!==null&&Ln<Fe.length;Ln++){fn.index>Ln?(zi=fn,fn=null):zi=fn.sibling;var Dn=Kt(Te,fn,Fe[Ln],Ct);if(Dn===null){fn===null&&(fn=zi);break}p&&fn&&Dn.alternate===null&&m(Te,fn),Ee=z(Dn,Ee,Ln),gn===null?jt=Dn:gn.sibling=Dn,gn=Dn,fn=zi}if(Ln===Fe.length)return E(Te,fn),hi&&dl(Te,Ln),jt;if(fn===null){for(;Ln<Fe.length;Ln++)fn=hn(Te,Fe[Ln],Ct),fn!==null&&(Ee=z(fn,Ee,Ln),gn===null?jt=fn:gn.sibling=fn,gn=fn);return hi&&dl(Te,Ln),jt}for(fn=C(Te,fn);Ln<Fe.length;Ln++)zi=En(fn,Te,Ln,Fe[Ln],Ct),zi!==null&&(p&&zi.alternate!==null&&fn.delete(zi.key===null?Ln:zi.key),Ee=z(zi,Ee,Ln),gn===null?jt=zi:gn.sibling=zi,gn=zi);return p&&fn.forEach(function(sa){return m(Te,sa)}),hi&&dl(Te,Ln),jt}function vr(Te,Ee,Fe,Ct){var jt=D(Fe);if(typeof jt!="function")throw Error(o(150));if(Fe=jt.call(Fe),Fe==null)throw Error(o(151));for(var gn=jt=null,fn=Ee,Ln=Ee=0,zi=null,Dn=Fe.next();fn!==null&&!Dn.done;Ln++,Dn=Fe.next()){fn.index>Ln?(zi=fn,fn=null):zi=fn.sibling;var sa=Kt(Te,fn,Dn.value,Ct);if(sa===null){fn===null&&(fn=zi);break}p&&fn&&sa.alternate===null&&m(Te,fn),Ee=z(sa,Ee,Ln),gn===null?jt=sa:gn.sibling=sa,gn=sa,fn=zi}if(Dn.done)return E(Te,fn),hi&&dl(Te,Ln),jt;if(fn===null){for(;!Dn.done;Ln++,Dn=Fe.next())Dn=hn(Te,Dn.value,Ct),Dn!==null&&(Ee=z(Dn,Ee,Ln),gn===null?jt=Dn:gn.sibling=Dn,gn=Dn);return hi&&dl(Te,Ln),jt}for(fn=C(Te,fn);!Dn.done;Ln++,Dn=Fe.next())Dn=En(fn,Te,Ln,Dn.value,Ct),Dn!==null&&(p&&Dn.alternate!==null&&fn.delete(Dn.key===null?Ln:Dn.key),Ee=z(Dn,Ee,Ln),gn===null?jt=Dn:gn.sibling=Dn,gn=Dn);return p&&fn.forEach(function(Am){return m(Te,Am)}),hi&&dl(Te,Ln),jt}function ys(Te,Ee,Fe,Ct){if(typeof Fe=="object"&&Fe!==null&&Fe.type===h&&Fe.key===null&&(Fe=Fe.props.children),typeof Fe=="object"&&Fe!==null){switch(Fe.$$typeof){case l:e:{for(var jt=Fe.key,gn=Ee;gn!==null;){if(gn.key===jt){if(jt=Fe.type,jt===h){if(gn.tag===7){E(Te,gn.sibling),Ee=B(gn,Fe.props.children),Ee.return=Te,Te=Ee;break e}}else if(gn.elementType===jt||typeof jt=="object"&&jt!==null&&jt.$$typeof===M&&yc(jt)===gn.type){E(Te,gn.sibling),Ee=B(gn,Fe.props),Ee.ref=vc(Te,gn,Fe),Ee.return=Te,Te=Ee;break e}E(Te,gn);break}else m(Te,gn);gn=gn.sibling}Fe.type===h?(Ee=Bl(Fe.props.children,Te.mode,Ct,Fe.key),Ee.return=Te,Te=Ee):(Ct=tf(Fe.type,Fe.key,Fe.props,null,Te.mode,Ct),Ct.ref=vc(Te,Ee,Fe),Ct.return=Te,Te=Ct)}return ee(Te);case u:e:{for(gn=Fe.key;Ee!==null;){if(Ee.key===gn)if(Ee.tag===4&&Ee.stateNode.containerInfo===Fe.containerInfo&&Ee.stateNode.implementation===Fe.implementation){E(Te,Ee.sibling),Ee=B(Ee,Fe.children||[]),Ee.return=Te,Te=Ee;break e}else{E(Te,Ee);break}else m(Te,Ee);Ee=Ee.sibling}Ee=rf(Fe,Te.mode,Ct),Ee.return=Te,Te=Ee}return ee(Te);case M:return gn=Fe._init,ys(Te,Ee,gn(Fe._payload),Ct)}if(me(Fe))return Pt(Te,Ee,Fe,Ct);if(D(Fe))return vr(Te,Ee,Fe,Ct);Ia(Te,Fe)}return typeof Fe=="string"&&Fe!==""||typeof Fe=="number"?(Fe=""+Fe,Ee!==null&&Ee.tag===6?(E(Te,Ee.sibling),Ee=B(Ee,Fe),Ee.return=Te,Te=Ee):(E(Te,Ee),Ee=nf(Fe,Te.mode,Ct),Ee.return=Te,Te=Ee),ee(Te)):E(Te,Ee)}return ys}var Wo=U0(!0),z0=U0(!1),xc={},Yr=ht(xc),hl=ht(xc),fl=ht(xc);function Zs(p){if(p===xc)throw Error(o(174));return p}function Ph(p,m){Et(fl,m),Et(hl,p),Et(Yr,xc),p=xe(m),Ze(Yr),Et(Yr,p)}function _c(){Ze(Yr),Ze(hl),Ze(fl)}function H0(p){var m=Zs(fl.current),E=Zs(Yr.current);m=X(E,p.type,m),E!==m&&(Et(hl,p),Et(Yr,m))}function Yp(p){hl.current===p&&(Ze(Yr),Ze(hl))}var yi=ht(0);function Ih(p){for(var m=p;m!==null;){if(m.tag===13){var E=m.memoizedState;if(E!==null&&(E=E.dehydrated,E===null||Dr(E)||ls(E)))return m}else if(m.tag===19&&m.memoizedProps.revealOrder!==void 0){if((m.flags&128)!==0)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===p)break;for(;m.sibling===null;){if(m.return===null||m.return===p)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}var ds=[];function pl(){for(var p=0;p<ds.length;p++){var m=ds[p];yt?m._workInProgressVersionPrimary=null:m._workInProgressVersionSecondary=null}ds.length=0}var Iu=a.ReactCurrentDispatcher,hs=a.ReactCurrentBatchConfig,ml=0,xi=null,er=null,tr=null,Dh=!1,go=!1,gl=0,Du=0;function nr(){throw Error(o(321))}function Bh(p,m){if(m===null)return!1;for(var E=0;E<m.length&&E<p.length;E++)if(!Br(p[E],m[E]))return!1;return!0}function wc(p,m,E,C,B,z){if(ml=z,xi=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,Iu.current=p===null||p.memoizedState===null?em:tm,p=E(C,B),go){z=0;do{if(go=!1,gl=0,25<=z)throw Error(o(301));z+=1,tr=er=null,m.updateQueue=null,Iu.current=nm,p=E(C,B)}while(go)}if(Iu.current=bc,m=er!==null&&er.next!==null,ml=0,tr=er=xi=null,Dh=!1,m)throw Error(o(300));return p}function Da(){var p=gl!==0;return gl=0,p}function Qs(){var p={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tr===null?xi.memoizedState=tr=p:tr=tr.next=p,tr}function eo(){if(er===null){var p=xi.alternate;p=p!==null?p.memoizedState:null}else p=er.next;var m=tr===null?xi.memoizedState:tr.next;if(m!==null)tr=m,er=p;else{if(p===null)throw Error(o(310));er=p,p={memoizedState:er.memoizedState,baseState:er.baseState,baseQueue:er.baseQueue,queue:er.queue,next:null},tr===null?xi.memoizedState=tr=p:tr=tr.next=p}return tr}function vo(p,m){return typeof m=="function"?m(p):m}function Bu(p){var m=eo(),E=m.queue;if(E===null)throw Error(o(311));E.lastRenderedReducer=p;var C=er,B=C.baseQueue,z=E.pending;if(z!==null){if(B!==null){var ee=B.next;B.next=z.next,z.next=ee}C.baseQueue=B=z,E.pending=null}if(B!==null){z=B.next,C=C.baseState;var _e=ee=null,je=null,ut=z;do{var Ot=ut.lane;if((ml&Ot)===Ot)je!==null&&(je=je.next={lane:0,action:ut.action,hasEagerState:ut.hasEagerState,eagerState:ut.eagerState,next:null}),C=ut.hasEagerState?ut.eagerState:p(C,ut.action);else{var hn={lane:Ot,action:ut.action,hasEagerState:ut.hasEagerState,eagerState:ut.eagerState,next:null};je===null?(_e=je=hn,ee=C):je=je.next=hn,xi.lanes|=Ot,xo|=Ot}ut=ut.next}while(ut!==null&&ut!==z);je===null?ee=C:je.next=_e,Br(C,m.memoizedState)||(ir=!0),m.memoizedState=C,m.baseState=ee,m.baseQueue=je,E.lastRenderedState=C}if(p=E.interleaved,p!==null){B=p;do z=B.lane,xi.lanes|=z,xo|=z,B=B.next;while(B!==p)}else B===null&&(E.lanes=0);return[m.memoizedState,E.dispatch]}function Lu(p){var m=eo(),E=m.queue;if(E===null)throw Error(o(311));E.lastRenderedReducer=p;var C=E.dispatch,B=E.pending,z=m.memoizedState;if(B!==null){E.pending=null;var ee=B=B.next;do z=p(z,ee.action),ee=ee.next;while(ee!==B);Br(z,m.memoizedState)||(ir=!0),m.memoizedState=z,m.baseQueue===null&&(m.baseState=z),E.lastRenderedState=z}return[z,C]}function Kp(){}function Jp(p,m){var E=xi,C=eo(),B=m(),z=!Br(C.memoizedState,B);if(z&&(C.memoizedState=B,ir=!0),C=C.queue,Sc($o.bind(null,E,C,p),[p]),C.getSnapshot!==m||z||tr!==null&&tr.memoizedState.tag&1){if(E.flags|=2048,Nu(9,Zp.bind(null,E,C,B,m),void 0,null),Di===null)throw Error(o(349));(ml&30)!==0||qp(E,m,B)}return B}function qp(p,m,E){p.flags|=16384,p={getSnapshot:m,value:E},m=xi.updateQueue,m===null?(m={lastEffect:null,stores:null},xi.updateQueue=m,m.stores=[p]):(E=m.stores,E===null?m.stores=[p]:E.push(p))}function Zp(p,m,E,C){m.value=E,m.getSnapshot=C,Lh(m)&&Mr(p,1,-1)}function $o(p,m,E){return E(function(){Lh(m)&&Mr(p,1,-1)})}function Lh(p){var m=p.getSnapshot;p=p.value;try{var E=m();return!Br(p,E)}catch{return!0}}function Ou(p){var m=Qs();return typeof p=="function"&&(p=p()),m.memoizedState=m.baseState=p,p={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vo,lastRenderedState:p},m.queue=p,p=p.dispatch=p1.bind(null,xi,p),[m.memoizedState,p]}function Nu(p,m,E,C){return p={tag:p,create:m,destroy:E,deps:C,next:null},m=xi.updateQueue,m===null?(m={lastEffect:null,stores:null},xi.updateQueue=m,m.lastEffect=p.next=p):(E=m.lastEffect,E===null?m.lastEffect=p.next=p:(C=E.next,E.next=p,p.next=C,m.lastEffect=p)),p}function V0(){return eo().memoizedState}function Ba(p,m,E,C){var B=Qs();xi.flags|=p,B.memoizedState=Nu(1|m,E,void 0,C===void 0?null:C)}function Oh(p,m,E,C){var B=eo();C=C===void 0?null:C;var z=void 0;if(er!==null){var ee=er.memoizedState;if(z=ee.destroy,C!==null&&Bh(C,ee.deps)){B.memoizedState=Nu(m,E,z,C);return}}xi.flags|=p,B.memoizedState=Nu(1|m,E,z,C)}function Nh(p,m){return Ba(8390656,8,p,m)}function Sc(p,m){return Oh(2048,8,p,m)}function ni(p,m){return Oh(4,2,p,m)}function Fh(p,m){return Oh(4,4,p,m)}function Fu(p,m){if(typeof m=="function")return p=p(),m(p),function(){m(null)};if(m!=null)return p=p(),m.current=p,function(){m.current=null}}function Ec(p,m,E){return E=E!=null?E.concat([p]):null,Oh(4,4,Fu.bind(null,m,p),E)}function kh(){}function Uh(p,m){var E=eo();m=m===void 0?null:m;var C=E.memoizedState;return C!==null&&m!==null&&Bh(m,C[1])?C[0]:(E.memoizedState=[p,m],p)}function Ac(p,m){var E=eo();m=m===void 0?null:m;var C=E.memoizedState;return C!==null&&m!==null&&Bh(m,C[1])?C[0]:(p=p(),E.memoizedState=[p,m],p)}function zh(p,m){var E=bn;bn=E!==0&&4>E?E:4,p(!0);var C=hs.transition;hs.transition={};try{p(!1),m()}finally{bn=E,hs.transition=C}}function vl(){return eo().memoizedState}function G0(p,m,E){var C=ro(p);E={lane:C,action:E,hasEagerState:!1,eagerState:null,next:null},j0(p)?Qp(m,E):(ku(p,m,E),E=Nn(),p=Mr(p,C,E),p!==null&&Uu(p,m,C))}function p1(p,m,E){var C=ro(p),B={lane:C,action:E,hasEagerState:!1,eagerState:null,next:null};if(j0(p))Qp(m,B);else{ku(p,m,B);var z=p.alternate;if(p.lanes===0&&(z===null||z.lanes===0)&&(z=m.lastRenderedReducer,z!==null))try{var ee=m.lastRenderedState,_e=z(ee,E);if(B.hasEagerState=!0,B.eagerState=_e,Br(_e,ee))return}catch{}finally{}E=Nn(),p=Mr(p,C,E),p!==null&&Uu(p,m,C)}}function j0(p){var m=p.alternate;return p===xi||m!==null&&m===xi}function Qp(p,m){go=Dh=!0;var E=p.pending;E===null?m.next=m:(m.next=E.next,E.next=m),p.pending=m}function ku(p,m,E){Di!==null&&(p.mode&1)!==0&&(_n&2)===0?(p=m.interleaved,p===null?(E.next=E,Bs===null?Bs=[m]:Bs.push(m)):(E.next=p.next,p.next=E),m.interleaved=E):(p=m.pending,p===null?E.next=E:(E.next=p.next,p.next=E),m.pending=E)}function Uu(p,m,E){if((E&4194240)!==0){var C=m.lanes;C&=p.pendingLanes,E|=C,m.lanes=E,po(p,E)}}var bc={readContext:Xr,useCallback:nr,useContext:nr,useEffect:nr,useImperativeHandle:nr,useInsertionEffect:nr,useLayoutEffect:nr,useMemo:nr,useReducer:nr,useRef:nr,useState:nr,useDebugValue:nr,useDeferredValue:nr,useTransition:nr,useMutableSource:nr,useSyncExternalStore:nr,useId:nr,unstable_isNewReconciler:!1},em={readContext:Xr,useCallback:function(p,m){return Qs().memoizedState=[p,m===void 0?null:m],p},useContext:Xr,useEffect:Nh,useImperativeHandle:function(p,m,E){return E=E!=null?E.concat([p]):null,Ba(4194308,4,Fu.bind(null,m,p),E)},useLayoutEffect:function(p,m){return Ba(4194308,4,p,m)},useInsertionEffect:function(p,m){return Ba(4,2,p,m)},useMemo:function(p,m){var E=Qs();return m=m===void 0?null:m,p=p(),E.memoizedState=[p,m],p},useReducer:function(p,m,E){var C=Qs();return m=E!==void 0?E(m):m,C.memoizedState=C.baseState=m,p={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:p,lastRenderedState:m},C.queue=p,p=p.dispatch=G0.bind(null,xi,p),[C.memoizedState,p]},useRef:function(p){var m=Qs();return p={current:p},m.memoizedState=p},useState:Ou,useDebugValue:kh,useDeferredValue:function(p){var m=Ou(p),E=m[0],C=m[1];return Nh(function(){var B=hs.transition;hs.transition={};try{C(p)}finally{hs.transition=B}},[p]),E},useTransition:function(){var p=Ou(!1),m=p[0];return p=zh.bind(null,p[1]),Qs().memoizedState=p,[m,p]},useMutableSource:function(){},useSyncExternalStore:function(p,m,E){var C=xi,B=Qs();if(hi){if(E===void 0)throw Error(o(407));E=E()}else{if(E=m(),Di===null)throw Error(o(349));(ml&30)!==0||qp(C,m,E)}B.memoizedState=E;var z={value:E,getSnapshot:m};return B.queue=z,Nh($o.bind(null,C,z,p),[p]),C.flags|=2048,Nu(9,Zp.bind(null,C,z,E,m),void 0,null),E},useId:function(){var p=Qs(),m=Di.identifierPrefix;if(hi){var E=jo,C=Go;E=(C&~(1<<32-qt(C)-1)).toString(32)+E,m=":"+m+"R"+E,E=gl++,0<E&&(m+="H"+E.toString(32)),m+=":"}else E=Du++,m=":"+m+"r"+E.toString(32)+":";return p.memoizedState=m},unstable_isNewReconciler:!1},tm={readContext:Xr,useCallback:Uh,useContext:Xr,useEffect:Sc,useImperativeHandle:Ec,useInsertionEffect:ni,useLayoutEffect:Fh,useMemo:Ac,useReducer:Bu,useRef:V0,useState:function(){return Bu(vo)},useDebugValue:kh,useDeferredValue:function(p){var m=Bu(vo),E=m[0],C=m[1];return Sc(function(){var B=hs.transition;hs.transition={};try{C(p)}finally{hs.transition=B}},[p]),E},useTransition:function(){var p=Bu(vo)[0],m=eo().memoizedState;return[p,m]},useMutableSource:Kp,useSyncExternalStore:Jp,useId:vl,unstable_isNewReconciler:!1},nm={readContext:Xr,useCallback:Uh,useContext:Xr,useEffect:Sc,useImperativeHandle:Ec,useInsertionEffect:ni,useLayoutEffect:Fh,useMemo:Ac,useReducer:Lu,useRef:V0,useState:function(){return Lu(vo)},useDebugValue:kh,useDeferredValue:function(p){var m=Lu(vo),E=m[0],C=m[1];return Sc(function(){var B=hs.transition;hs.transition={};try{C(p)}finally{hs.transition=B}},[p]),E},useTransition:function(){var p=Lu(vo)[0],m=eo().memoizedState;return[p,m]},useMutableSource:Kp,useSyncExternalStore:Jp,useId:vl,unstable_isNewReconciler:!1};function im(p,m){try{var E="",C=m;do E+=Up(C),C=C.return;while(C);var B=E}catch(z){B=`
Error generating stack: `+z.message+`
`+z.stack}return{value:p,source:m,stack:B}}function Hh(p,m){try{console.error(m.value)}catch(E){setTimeout(function(){throw E})}}var m1=typeof WeakMap=="function"?WeakMap:Map;function W0(p,m,E){E=Vo(-1,E),E.tag=3,E.payload={element:null};var C=m.value;return E.callback=function(){Ic||(Ic=!0,ci=C),Hh(p,m)},E}function Vh(p,m,E){E=Vo(-1,E),E.tag=3;var C=p.type.getDerivedStateFromError;if(typeof C=="function"){var B=m.value;E.payload=function(){return C(B)},E.callback=function(){Hh(p,m)}}var z=p.stateNode;return z!==null&&typeof z.componentDidCatch=="function"&&(E.callback=function(){Hh(p,m),typeof C!="function"&&(io===null?io=new Set([this]):io.add(this));var ee=m.stack;this.componentDidCatch(m.value,{componentStack:ee!==null?ee:""})}),E}function Xo(p,m,E){var C=p.pingCache;if(C===null){C=p.pingCache=new m1;var B=new Set;C.set(m,B)}else B=C.get(m),B===void 0&&(B=new Set,C.set(m,B));B.has(E)||(B.add(E),p=wm.bind(null,p,m,E),m.then(p,p))}function rm(p){do{var m;if((m=p.tag===13)&&(m=p.memoizedState,m=m!==null?m.dehydrated!==null:!0),m)return p;p=p.return}while(p!==null);return null}function yl(p,m,E,C,B){return(p.mode&1)===0?(p===m?p.flags|=65536:(p.flags|=128,E.flags|=131072,E.flags&=-52805,E.tag===1&&(E.alternate===null?E.tag=17:(m=Vo(-1,1),m.tag=2,Ta(E,m))),E.lanes|=1),p):(p.flags|=65536,p.lanes=B,p)}function Yi(p){p.flags|=4}function Mc(p,m){if(p!==null&&p.child===m.child)return!0;if((m.flags&16)!==0)return!1;for(p=m.child;p!==null;){if((p.flags&12854)!==0||(p.subtreeFlags&12854)!==0)return!1;p=p.sibling}return!0}var fs,xl,Gh,jh;if(nn)fs=function(p,m){for(var E=m.child;E!==null;){if(E.tag===5||E.tag===6)ge(p,E.stateNode);else if(E.tag!==4&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===m)break;for(;E.sibling===null;){if(E.return===null||E.return===m)return;E=E.return}E.sibling.return=E.return,E=E.sibling}},xl=function(){},Gh=function(p,m,E,C,B){if(p=p.memoizedProps,p!==C){var z=m.stateNode,ee=Zs(Yr.current);E=we(z,E,p,C,B,ee),(m.updateQueue=E)&&Yi(m)}},jh=function(p,m,E,C){E!==C&&Yi(m)};else if(Xt){fs=function(p,m,E,C){for(var B=m.child;B!==null;){if(B.tag===5){var z=B.stateNode;E&&C&&(z=mn(z,B.type,B.memoizedProps,B)),ge(p,z)}else if(B.tag===6)z=B.stateNode,E&&C&&(z=vi(z,B.memoizedProps,B)),ge(p,z);else if(B.tag!==4){if(B.tag===22&&B.memoizedState!==null)z=B.child,z!==null&&(z.return=B),fs(p,B,!0,!0);else if(B.child!==null){B.child.return=B,B=B.child;continue}}if(B===m)break;for(;B.sibling===null;){if(B.return===null||B.return===m)return;B=B.return}B.sibling.return=B.return,B=B.sibling}};var La=function(p,m,E,C){for(var B=m.child;B!==null;){if(B.tag===5){var z=B.stateNode;E&&C&&(z=mn(z,B.type,B.memoizedProps,B)),$t(p,z)}else if(B.tag===6)z=B.stateNode,E&&C&&(z=vi(z,B.memoizedProps,B)),$t(p,z);else if(B.tag!==4){if(B.tag===22&&B.memoizedState!==null)z=B.child,z!==null&&(z.return=B),La(p,B,!0,!0);else if(B.child!==null){B.child.return=B,B=B.child;continue}}if(B===m)break;for(;B.sibling===null;){if(B.return===null||B.return===m)return;B=B.return}B.sibling.return=B.return,B=B.sibling}};xl=function(p,m){var E=m.stateNode;if(!Mc(p,m)){p=E.containerInfo;var C=vt(p);La(C,m,!1,!1),E.pendingChildren=C,Yi(m),Tn(p,C)}},Gh=function(p,m,E,C,B){var z=p.stateNode,ee=p.memoizedProps;if((p=Mc(p,m))&&ee===C)m.stateNode=z;else{var _e=m.stateNode,je=Zs(Yr.current),ut=null;ee!==C&&(ut=we(_e,E,ee,C,B,je)),p&&ut===null?m.stateNode=z:(z=Mt(z,ut,E,ee,C,m,p,_e),Ve(z,E,C,B,je)&&Yi(m),m.stateNode=z,p?Yi(m):fs(z,m,!1,!1))}},jh=function(p,m,E,C){E!==C?(p=Zs(fl.current),E=Zs(Yr.current),m.stateNode=Le(C,p,E,m),Yi(m)):m.stateNode=p.stateNode}}else xl=function(){},Gh=function(){},jh=function(){};function Yo(p,m){if(!hi)switch(p.tailMode){case"hidden":m=p.tail;for(var E=null;m!==null;)m.alternate!==null&&(E=m),m=m.sibling;E===null?p.tail=null:E.sibling=null;break;case"collapsed":E=p.tail;for(var C=null;E!==null;)E.alternate!==null&&(C=E),E=E.sibling;C===null?m||p.tail===null?p.tail=null:p.tail.sibling=null:C.sibling=null}}function Ii(p){var m=p.alternate!==null&&p.alternate.child===p.child,E=0,C=0;if(m)for(var B=p.child;B!==null;)E|=B.lanes|B.childLanes,C|=B.subtreeFlags&14680064,C|=B.flags&14680064,B.return=p,B=B.sibling;else for(B=p.child;B!==null;)E|=B.lanes|B.childLanes,C|=B.subtreeFlags,C|=B.flags,B.return=p,B=B.sibling;return p.subtreeFlags|=C,p.childLanes=E,m}function Wh(p,m,E){var C=m.pendingProps;switch(Wp(m),m.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ii(m),null;case 1:return xn(m.type)&&Yt(),Ii(m),null;case 3:return C=m.stateNode,_c(),Ze(kt),Ze(rn),pl(),C.pendingContext&&(C.context=C.pendingContext,C.pendingContext=null),(p===null||p.child===null)&&(Pu(m)?Yi(m):p===null||p.memoizedState.isDehydrated&&(m.flags&256)===0||(m.flags|=1024,Ns!==null&&(Zu(Ns),Ns=null))),xl(p,m),Ii(m),null;case 5:Yp(m),E=Zs(fl.current);var B=m.type;if(p!==null&&m.stateNode!=null)Gh(p,m,B,C,E),p.ref!==m.ref&&(m.flags|=512,m.flags|=2097152);else{if(!C){if(m.stateNode===null)throw Error(o(166));return Ii(m),null}if(p=Zs(Yr.current),Pu(m)){if(!xt)throw Error(o(175));p=H(m.stateNode,m.type,m.memoizedProps,E,p,m,!mc),m.updateQueue=p,p!==null&&Yi(m)}else{var z=Y(B,C,E,p,m);fs(z,m,!1,!1),m.stateNode=z,Ve(z,B,C,E,p)&&Yi(m)}m.ref!==null&&(m.flags|=512,m.flags|=2097152)}return Ii(m),null;case 6:if(p&&m.stateNode!=null)jh(p,m,p.memoizedProps,C);else{if(typeof C!="string"&&m.stateNode===null)throw Error(o(166));if(p=Zs(fl.current),E=Zs(Yr.current),Pu(m)){if(!xt)throw Error(o(176));if(p=m.stateNode,C=m.memoizedProps,(E=$(p,C,m,!mc))&&(B=Or,B!==null))switch(z=(B.mode&1)!==0,B.tag){case 3:te(B.stateNode.containerInfo,p,C,z);break;case 5:ae(B.type,B.memoizedProps,B.stateNode,p,C,z)}E&&Yi(m)}else m.stateNode=Le(C,p,E,m)}return Ii(m),null;case 13:if(Ze(yi),C=m.memoizedState,hi&&hr!==null&&(m.mode&1)!==0&&(m.flags&128)===0){for(p=hr;p;)p=dr(p);return gc(),m.flags|=98560,m}if(C!==null&&C.dehydrated!==null){if(C=Pu(m),p===null){if(!C)throw Error(o(318));if(!xt)throw Error(o(344));if(p=m.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(o(317));he(p,m)}else gc(),(m.flags&128)===0&&(m.memoizedState=null),m.flags|=4;return Ii(m),null}return Ns!==null&&(Zu(Ns),Ns=null),(m.flags&128)!==0?(m.lanes=E,m):(C=C!==null,E=!1,p===null?Pu(m):E=p.memoizedState!==null,C&&!E&&(m.child.flags|=8192,(m.mode&1)!==0&&(p===null||(yi.current&1)!==0?Ai===0&&(Ai=3):Zh())),m.updateQueue!==null&&(m.flags|=4),Ii(m),null);case 4:return _c(),xl(p,m),p===null&&at(m.stateNode.containerInfo),Ii(m),null;case 10:return Ru(m.type._context),Ii(m),null;case 17:return xn(m.type)&&Yt(),Ii(m),null;case 19:if(Ze(yi),B=m.memoizedState,B===null)return Ii(m),null;if(C=(m.flags&128)!==0,z=B.rendering,z===null)if(C)Yo(B,!1);else{if(Ai!==0||p!==null&&(p.flags&128)!==0)for(p=m.child;p!==null;){if(z=Ih(p),z!==null){for(m.flags|=128,Yo(B,!1),p=z.updateQueue,p!==null&&(m.updateQueue=p,m.flags|=4),m.subtreeFlags=0,p=E,C=m.child;C!==null;)E=C,B=p,E.flags&=14680066,z=E.alternate,z===null?(E.childLanes=0,E.lanes=B,E.child=null,E.subtreeFlags=0,E.memoizedProps=null,E.memoizedState=null,E.updateQueue=null,E.dependencies=null,E.stateNode=null):(E.childLanes=z.childLanes,E.lanes=z.lanes,E.child=z.child,E.subtreeFlags=0,E.deletions=null,E.memoizedProps=z.memoizedProps,E.memoizedState=z.memoizedState,E.updateQueue=z.updateQueue,E.type=z.type,B=z.dependencies,E.dependencies=B===null?null:{lanes:B.lanes,firstContext:B.firstContext}),C=C.sibling;return Et(yi,yi.current&1|2),m.child}p=p.sibling}B.tail!==null&&Xi()>Fa&&(m.flags|=128,C=!0,Yo(B,!1),m.lanes=4194304)}else{if(!C)if(p=Ih(z),p!==null){if(m.flags|=128,C=!0,p=p.updateQueue,p!==null&&(m.updateQueue=p,m.flags|=4),Yo(B,!0),B.tail===null&&B.tailMode==="hidden"&&!z.alternate&&!hi)return Ii(m),null}else 2*Xi()-B.renderingStartTime>Fa&&E!==1073741824&&(m.flags|=128,C=!0,Yo(B,!1),m.lanes=4194304);B.isBackwards?(z.sibling=m.child,m.child=z):(p=B.last,p!==null?p.sibling=z:m.child=z,B.last=z)}return B.tail!==null?(m=B.tail,B.rendering=m,B.tail=m.sibling,B.renderingStartTime=Xi(),m.sibling=null,p=yi.current,Et(yi,C?p&1|2:p&1),m):(Ii(m),null);case 22:case 23:return Qu(),C=m.memoizedState!==null,p!==null&&p.memoizedState!==null!==C&&(m.flags|=8192),C&&(m.mode&1)!==0?(br&1073741824)!==0&&(Ii(m),nn&&m.subtreeFlags&6&&(m.flags|=8192)):Ii(m),null;case 24:return null;case 25:return null}throw Error(o(156,m.tag))}var sm=a.ReactCurrentOwner,ir=!1;function Ei(p,m,E,C){m.child=p===null?z0(m,null,E,C):Wo(m,p.child,E,C)}function ii(p,m,E,C,B){E=E.render;var z=m.ref;return hc(m,B),C=wc(p,m,E,C,z,B),E=Da(),p!==null&&!ir?(m.updateQueue=p.updateQueue,m.flags&=-2053,p.lanes&=~B,Kr(p,m,B)):(hi&&E&&jp(m),m.flags|=1,Ei(p,m,C,B),m.child)}function Zn(p,m,E,C,B){if(p===null){var z=E.type;return typeof z=="function"&&!ef(z)&&z.defaultProps===void 0&&E.compare===null&&E.defaultProps===void 0?(m.tag=15,m.type=z,Ko(p,m,z,C,B)):(p=tf(E.type,null,C,m,m.mode,B),p.ref=m.ref,p.return=m,m.child=p)}if(z=p.child,(p.lanes&B)===0){var ee=z.memoizedProps;if(E=E.compare,E=E!==null?E:qs,E(ee,C)&&p.ref===m.ref)return Kr(p,m,B)}return m.flags|=1,p=ra(z,C),p.ref=m.ref,p.return=m,m.child=p}function Ko(p,m,E,C,B){if(p!==null&&qs(p.memoizedProps,C)&&p.ref===m.ref)if(ir=!1,(p.lanes&B)!==0)(p.flags&131072)!==0&&(ir=!0);else return m.lanes=p.lanes,Kr(p,m,B);return Jo(p,m,E,C,B)}function fr(p,m,E){var C=m.pendingProps,B=C.children,z=p!==null?p.memoizedState:null;if(C.mode==="hidden")if((m.mode&1)===0)m.memoizedState={baseLanes:0,cachePool:null},Et(Tl,br),br|=E;else if((E&1073741824)!==0)m.memoizedState={baseLanes:0,cachePool:null},C=z!==null?z.baseLanes:E,Et(Tl,br),br|=C;else return p=z!==null?z.baseLanes|E:E,m.lanes=m.childLanes=1073741824,m.memoizedState={baseLanes:p,cachePool:null},m.updateQueue=null,Et(Tl,br),br|=p,null;else z!==null?(C=z.baseLanes|E,m.memoizedState=null):C=E,Et(Tl,br),br|=C;return Ei(p,m,B,E),m.child}function Nr(p,m){var E=m.ref;(p===null&&E!==null||p!==null&&p.ref!==E)&&(m.flags|=512,m.flags|=2097152)}function Jo(p,m,E,C,B){var z=xn(E)?Gt:rn.current;return z=Rt(m,z),hc(m,B),E=wc(p,m,E,C,z,B),C=Da(),p!==null&&!ir?(m.updateQueue=p.updateQueue,m.flags&=-2053,p.lanes&=~B,Kr(p,m,B)):(hi&&C&&jp(m),m.flags|=1,Ei(p,m,E,B),m.child)}function _l(p,m,E,C,B){if(xn(E)){var z=!0;pn(m)}else z=!1;if(hc(m,B),m.stateNode===null)p!==null&&(p.alternate=null,m.alternate=null,m.flags|=2),O0(m,E,C),Gp(m,E,C,B),C=!0;else if(p===null){var ee=m.stateNode,_e=m.memoizedProps;ee.props=_e;var je=ee.context,ut=E.contextType;typeof ut=="object"&&ut!==null?ut=Xr(ut):(ut=xn(E)?Gt:rn.current,ut=Rt(m,ut));var Ot=E.getDerivedStateFromProps,hn=typeof Ot=="function"||typeof ee.getSnapshotBeforeUpdate=="function";hn||typeof ee.UNSAFE_componentWillReceiveProps!="function"&&typeof ee.componentWillReceiveProps!="function"||(_e!==C||je!==ut)&&N0(m,ee,C,ut),Ls=!1;var Kt=m.memoizedState;ee.state=Kt,Ah(m,C,ee,B),je=m.memoizedState,_e!==C||Kt!==je||kt.current||Ls?(typeof Ot=="function"&&(Hp(m,E,Ot,C),je=m.memoizedState),(_e=Ls||Vp(m,E,_e,C,Kt,je,ut))?(hn||typeof ee.UNSAFE_componentWillMount!="function"&&typeof ee.componentWillMount!="function"||(typeof ee.componentWillMount=="function"&&ee.componentWillMount(),typeof ee.UNSAFE_componentWillMount=="function"&&ee.UNSAFE_componentWillMount()),typeof ee.componentDidMount=="function"&&(m.flags|=4194308)):(typeof ee.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=C,m.memoizedState=je),ee.props=C,ee.state=je,ee.context=ut,C=_e):(typeof ee.componentDidMount=="function"&&(m.flags|=4194308),C=!1)}else{ee=m.stateNode,zp(p,m),_e=m.memoizedProps,ut=m.type===m.elementType?_e:$r(m.type,_e),ee.props=ut,hn=m.pendingProps,Kt=ee.context,je=E.contextType,typeof je=="object"&&je!==null?je=Xr(je):(je=xn(E)?Gt:rn.current,je=Rt(m,je));var En=E.getDerivedStateFromProps;(Ot=typeof En=="function"||typeof ee.getSnapshotBeforeUpdate=="function")||typeof ee.UNSAFE_componentWillReceiveProps!="function"&&typeof ee.componentWillReceiveProps!="function"||(_e!==hn||Kt!==je)&&N0(m,ee,C,je),Ls=!1,Kt=m.memoizedState,ee.state=Kt,Ah(m,C,ee,B);var Pt=m.memoizedState;_e!==hn||Kt!==Pt||kt.current||Ls?(typeof En=="function"&&(Hp(m,E,En,C),Pt=m.memoizedState),(ut=Ls||Vp(m,E,ut,C,Kt,Pt,je)||!1)?(Ot||typeof ee.UNSAFE_componentWillUpdate!="function"&&typeof ee.componentWillUpdate!="function"||(typeof ee.componentWillUpdate=="function"&&ee.componentWillUpdate(C,Pt,je),typeof ee.UNSAFE_componentWillUpdate=="function"&&ee.UNSAFE_componentWillUpdate(C,Pt,je)),typeof ee.componentDidUpdate=="function"&&(m.flags|=4),typeof ee.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof ee.componentDidUpdate!="function"||_e===p.memoizedProps&&Kt===p.memoizedState||(m.flags|=4),typeof ee.getSnapshotBeforeUpdate!="function"||_e===p.memoizedProps&&Kt===p.memoizedState||(m.flags|=1024),m.memoizedProps=C,m.memoizedState=Pt),ee.props=C,ee.state=Pt,ee.context=je,C=ut):(typeof ee.componentDidUpdate!="function"||_e===p.memoizedProps&&Kt===p.memoizedState||(m.flags|=4),typeof ee.getSnapshotBeforeUpdate!="function"||_e===p.memoizedProps&&Kt===p.memoizedState||(m.flags|=1024),C=!1)}return Ar(p,m,E,C,z,B)}function Ar(p,m,E,C,B,z){Nr(p,m);var ee=(m.flags&128)!==0;if(!C&&!ee)return B&&Sn(m,E,!1),Kr(p,m,z);C=m.stateNode,sm.current=m;var _e=ee&&typeof E.getDerivedStateFromError!="function"?null:C.render();return m.flags|=1,p!==null&&ee?(m.child=Wo(m,p.child,null,z),m.child=Wo(m,null,_e,z)):Ei(p,m,_e,z),m.memoizedState=C.state,B&&Sn(m,E,!0),m.child}function zu(p){var m=p.stateNode;m.pendingContext?ln(p,m.pendingContext,m.pendingContext!==m.context):m.context&&ln(p,m.context,!1),Ph(p,m.containerInfo)}function om(p,m,E,C,B){return gc(),Rh(B),m.flags|=256,Ei(p,m,E,C),m.child}var Hu={dehydrated:null,treeContext:null,retryLane:0};function wl(p){return{baseLanes:p,cachePool:null}}function am(p,m,E){var C=m.pendingProps,B=yi.current,z=!1,ee=(m.flags&128)!==0,_e;if((_e=ee)||(_e=p!==null&&p.memoizedState===null?!1:(B&2)!==0),_e?(z=!0,m.flags&=-129):(p===null||p.memoizedState!==null)&&(B|=1),Et(yi,B&1),p===null)return Pa(m),p=m.memoizedState,p!==null&&(p=p.dehydrated,p!==null)?((m.mode&1)===0?m.lanes=1:ls(p)?m.lanes=8:m.lanes=1073741824,null):(B=C.children,p=C.fallback,z?(C=m.mode,z=m.child,B={mode:"hidden",children:B},(C&1)===0&&z!==null?(z.childLanes=0,z.pendingProps=B):z=nd(B,C,0,null),p=Bl(p,C,E,null),z.return=m,p.return=m,z.sibling=p,m.child=z,m.child.memoizedState=wl(E),m.memoizedState=Hu,p):to(m,B));if(B=p.memoizedState,B!==null){if(_e=B.dehydrated,_e!==null){if(ee)return m.flags&256?(m.flags&=-257,Gu(p,m,E,Error(o(422)))):m.memoizedState!==null?(m.child=p.child,m.flags|=128,null):(z=C.fallback,B=m.mode,C=nd({mode:"visible",children:C.children},B,0,null),z=Bl(z,B,E,null),z.flags|=2,C.return=m,z.return=m,C.sibling=z,m.child=C,(m.mode&1)!==0&&Wo(m,p.child,null,E),m.child.memoizedState=wl(E),m.memoizedState=Hu,z);if((m.mode&1)===0)m=Gu(p,m,E,null);else if(ls(_e))m=Gu(p,m,E,Error(o(419)));else if(C=(E&p.childLanes)!==0,ir||C){if(C=Di,C!==null){switch(E&-E){case 4:z=2;break;case 16:z=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:z=32;break;case 536870912:z=268435456;break;default:z=0}C=(z&(C.suspendedLanes|E))!==0?0:z,C!==0&&C!==B.retryLane&&(B.retryLane=C,Mr(p,C,-1))}Zh(),m=Gu(p,m,E,Error(o(421)))}else Dr(_e)?(m.flags|=128,m.child=p.child,m=J0.bind(null,p),cs(_e,m),m=null):(E=B.treeContext,xt&&(hr=Ma(_e),Or=m,hi=!0,Ns=null,mc=!1,E!==null&&(Os[us++]=Go,Os[us++]=jo,Os[us++]=ul,Go=E.id,jo=E.overflow,ul=m)),m=to(m,m.pendingProps.children),m.flags|=4096);return m}return z?(C=$h(p,m,C.children,C.fallback,E),z=m.child,B=p.child.memoizedState,z.memoizedState=B===null?wl(E):{baseLanes:B.baseLanes|E,cachePool:null},z.childLanes=p.childLanes&~E,m.memoizedState=Hu,C):(E=Vu(p,m,C.children,E),m.memoizedState=null,E)}return z?(C=$h(p,m,C.children,C.fallback,E),z=m.child,B=p.child.memoizedState,z.memoizedState=B===null?wl(E):{baseLanes:B.baseLanes|E,cachePool:null},z.childLanes=p.childLanes&~E,m.memoizedState=Hu,C):(E=Vu(p,m,C.children,E),m.memoizedState=null,E)}function to(p,m){return m=nd({mode:"visible",children:m},p.mode,0,null),m.return=p,p.child=m}function Vu(p,m,E,C){var B=p.child;return p=B.sibling,E=ra(B,{mode:"visible",children:E}),(m.mode&1)===0&&(E.lanes=C),E.return=m,E.sibling=null,p!==null&&(C=m.deletions,C===null?(m.deletions=[p],m.flags|=16):C.push(p)),m.child=E}function $h(p,m,E,C,B){var z=m.mode;p=p.child;var ee=p.sibling,_e={mode:"hidden",children:E};return(z&1)===0&&m.child!==p?(E=m.child,E.childLanes=0,E.pendingProps=_e,m.deletions=null):(E=ra(p,_e),E.subtreeFlags=p.subtreeFlags&14680064),ee!==null?C=ra(ee,C):(C=Bl(C,z,B,null),C.flags|=2),C.return=m,E.return=m,E.sibling=C,m.child=E,C}function Gu(p,m,E,C){return C!==null&&Rh(C),Wo(m,p.child,null,E),p=to(m,m.pendingProps.children),p.flags|=2,m.memoizedState=null,p}function $0(p,m,E){p.lanes|=m;var C=p.alternate;C!==null&&(C.lanes|=m),cl(p.return,m,E)}function yo(p,m,E,C,B){var z=p.memoizedState;z===null?p.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:C,tail:E,tailMode:B}:(z.isBackwards=m,z.rendering=null,z.renderingStartTime=0,z.last=C,z.tail=E,z.tailMode=B)}function Sl(p,m,E){var C=m.pendingProps,B=C.revealOrder,z=C.tail;if(Ei(p,m,C.children,E),C=yi.current,(C&2)!==0)C=C&1|2,m.flags|=128;else{if(p!==null&&(p.flags&128)!==0)e:for(p=m.child;p!==null;){if(p.tag===13)p.memoizedState!==null&&$0(p,E,m);else if(p.tag===19)$0(p,E,m);else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===m)break e;for(;p.sibling===null;){if(p.return===null||p.return===m)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}C&=1}if(Et(yi,C),(m.mode&1)===0)m.memoizedState=null;else switch(B){case"forwards":for(E=m.child,B=null;E!==null;)p=E.alternate,p!==null&&Ih(p)===null&&(B=E),E=E.sibling;E=B,E===null?(B=m.child,m.child=null):(B=E.sibling,E.sibling=null),yo(m,!1,B,E,z);break;case"backwards":for(E=null,B=m.child,m.child=null;B!==null;){if(p=B.alternate,p!==null&&Ih(p)===null){m.child=B;break}p=B.sibling,B.sibling=E,E=B,B=p}yo(m,!0,E,null,z);break;case"together":yo(m,!1,null,null,void 0);break;default:m.memoizedState=null}return m.child}function Kr(p,m,E){if(p!==null&&(m.dependencies=p.dependencies),xo|=m.lanes,(E&m.childLanes)===0)return null;if(p!==null&&m.child!==p.child)throw Error(o(153));if(m.child!==null){for(p=m.child,E=ra(p,p.pendingProps),m.child=E,E.return=m;p.sibling!==null;)p=p.sibling,E=E.sibling=ra(p,p.pendingProps),E.return=m;E.sibling=null}return m.child}function Xh(p,m,E){switch(m.tag){case 3:zu(m),gc();break;case 5:H0(m);break;case 1:xn(m.type)&&pn(m);break;case 4:Ph(m,m.stateNode.containerInfo);break;case 10:ll(m,m.type._context,m.memoizedProps.value);break;case 13:var C=m.memoizedState;if(C!==null)return C.dehydrated!==null?(Et(yi,yi.current&1),m.flags|=128,null):(E&m.child.childLanes)!==0?am(p,m,E):(Et(yi,yi.current&1),p=Kr(p,m,E),p!==null?p.sibling:null);Et(yi,yi.current&1);break;case 19:if(C=(E&m.childLanes)!==0,(p.flags&128)!==0){if(C)return Sl(p,m,E);m.flags|=128}var B=m.memoizedState;if(B!==null&&(B.rendering=null,B.tail=null,B.lastEffect=null),Et(yi,yi.current),C)break;return null;case 22:case 23:return m.lanes=0,fr(p,m,E)}return Kr(p,m,E)}function Yh(p,m){switch(Wp(m),m.tag){case 1:return xn(m.type)&&Yt(),p=m.flags,p&65536?(m.flags=p&-65537|128,m):null;case 3:return _c(),Ze(kt),Ze(rn),pl(),p=m.flags,(p&65536)!==0&&(p&128)===0?(m.flags=p&-65537|128,m):null;case 5:return Yp(m),null;case 13:if(Ze(yi),p=m.memoizedState,p!==null&&p.dehydrated!==null){if(m.alternate===null)throw Error(o(340));gc()}return p=m.flags,p&65536?(m.flags=p&-65537|128,m):null;case 19:return Ze(yi),null;case 4:return _c(),null;case 10:return Ru(m.type._context),null;case 22:case 23:return Qu(),null;case 24:return null;default:return null}}var Fr=!1,rr=!1,El=typeof WeakSet=="function"?WeakSet:Set,pt=null;function Fs(p,m){var E=p.ref;if(E!==null)if(typeof E=="function")try{E(null)}catch(C){Ur(p,m,C)}else E.current=null}function qo(p,m,E){try{E()}catch(C){Ur(p,m,C)}}var lm=!1;function cm(p,m){for(de(p.containerInfo),pt=m;pt!==null;)if(p=pt,m=p.child,(p.subtreeFlags&1028)!==0&&m!==null)m.return=p,pt=m;else for(;pt!==null;){p=pt;try{var E=p.alternate;if((p.flags&1024)!==0)switch(p.tag){case 0:case 11:case 15:break;case 1:if(E!==null){var C=E.memoizedProps,B=E.memoizedState,z=p.stateNode,ee=z.getSnapshotBeforeUpdate(p.elementType===p.type?C:$r(p.type,C),B);z.__reactInternalSnapshotBeforeUpdate=ee}break;case 3:nn&&We(p.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(_e){Ur(p,p.return,_e)}if(m=p.sibling,m!==null){m.return=p.return,pt=m;break}pt=p.return}return E=lm,lm=!1,E}function Zo(p,m,E){var C=m.updateQueue;if(C=C!==null?C.lastEffect:null,C!==null){var B=C=C.next;do{if((B.tag&p)===p){var z=B.destroy;B.destroy=void 0,z!==void 0&&qo(m,E,z)}B=B.next}while(B!==C)}}function pr(p,m){if(m=m.updateQueue,m=m!==null?m.lastEffect:null,m!==null){var E=m=m.next;do{if((E.tag&p)===p){var C=E.create;E.destroy=C()}E=E.next}while(E!==m)}}function kr(p){var m=p.ref;if(m!==null){var E=p.stateNode;switch(p.tag){case 5:p=fe(E);break;default:p=E}typeof m=="function"?m(p):m.current=p}}function li(p,m,E){if(mo&&typeof mo.onCommitFiberUnmount=="function")try{mo.onCommitFiberUnmount(bu,m)}catch{}switch(m.tag){case 0:case 11:case 14:case 15:if(p=m.updateQueue,p!==null&&(p=p.lastEffect,p!==null)){var C=p=p.next;do{var B=C,z=B.destroy;B=B.tag,z!==void 0&&((B&2)!==0||(B&4)!==0)&&qo(m,E,z),C=C.next}while(C!==p)}break;case 1:if(Fs(m,E),p=m.stateNode,typeof p.componentWillUnmount=="function")try{p.props=m.memoizedProps,p.state=m.memoizedState,p.componentWillUnmount()}catch(ee){Ur(m,E,ee)}break;case 5:Fs(m,E);break;case 4:nn?hm(p,m,E):Xt&&Xt&&(m=m.stateNode.containerInfo,E=vt(m),Xn(m,E))}}function ks(p,m,E){for(var C=m;;)if(li(p,C,E),C.child===null||nn&&C.tag===4){if(C===m)break;for(;C.sibling===null;){if(C.return===null||C.return===m)return;C=C.return}C.sibling.return=C.return,C=C.sibling}else C.child.return=C,C=C.child}function um(p){var m=p.alternate;m!==null&&(p.alternate=null,um(m)),p.child=null,p.deletions=null,p.sibling=null,p.tag===5&&(m=p.stateNode,m!==null&&tt(m)),p.stateNode=null,p.return=null,p.dependencies=null,p.memoizedProps=null,p.memoizedState=null,p.pendingProps=null,p.stateNode=null,p.updateQueue=null}function dm(p){return p.tag===5||p.tag===3||p.tag===4}function Kh(p){e:for(;;){for(;p.sibling===null;){if(p.return===null||dm(p.return))return null;p=p.return}for(p.sibling.return=p.return,p=p.sibling;p.tag!==5&&p.tag!==6&&p.tag!==18;){if(p.flags&2||p.child===null||p.tag===4)continue e;p.child.return=p,p=p.child}if(!(p.flags&2))return p.stateNode}}function Jh(p){if(nn){e:{for(var m=p.return;m!==null;){if(dm(m))break e;m=m.return}throw Error(o(160))}var E=m;switch(E.tag){case 5:m=E.stateNode,E.flags&32&&(Oe(m),E.flags&=-33),E=Kh(p),Cc(p,E,m);break;case 3:case 4:m=E.stateNode.containerInfo,E=Kh(p),qh(p,E,m);break;default:throw Error(o(161))}}}function qh(p,m,E){var C=p.tag;if(C===5||C===6)p=p.stateNode,m?It(E,p,m):Dt(E,p);else if(C!==4&&(p=p.child,p!==null))for(qh(p,m,E),p=p.sibling;p!==null;)qh(p,m,E),p=p.sibling}function Cc(p,m,E){var C=p.tag;if(C===5||C===6)p=p.stateNode,m?Lt(E,p,m):lt(E,p);else if(C!==4&&(p=p.child,p!==null))for(Cc(p,m,E),p=p.sibling;p!==null;)Cc(p,m,E),p=p.sibling}function hm(p,m,E){for(var C=m,B=!1,z,ee;;){if(!B){B=C.return;e:for(;;){if(B===null)throw Error(o(160));switch(z=B.stateNode,B.tag){case 5:ee=!1;break e;case 3:z=z.containerInfo,ee=!0;break e;case 4:z=z.containerInfo,ee=!0;break e}B=B.return}B=!0}if(C.tag===5||C.tag===6)ks(p,C,E),ee?ue(z,C.stateNode):St(z,C.stateNode);else if(C.tag===18)ee?it(z,C.stateNode):ct(z,C.stateNode);else if(C.tag===4){if(C.child!==null){z=C.stateNode.containerInfo,ee=!0,C.child.return=C,C=C.child;continue}}else if(li(p,C,E),C.child!==null){C.child.return=C,C=C.child;continue}if(C===m)break;for(;C.sibling===null;){if(C.return===null||C.return===m)return;C=C.return,C.tag===4&&(B=!1)}C.sibling.return=C.return,C=C.sibling}}function Oa(p,m){if(nn){switch(m.tag){case 0:case 11:case 14:case 15:Zo(3,m,m.return),pr(3,m),Zo(5,m,m.return);return;case 1:return;case 5:var E=m.stateNode;if(E!=null){var C=m.memoizedProps;p=p!==null?p.memoizedProps:C;var B=m.type,z=m.updateQueue;m.updateQueue=null,z!==null&&wt(E,z,B,p,C,m)}return;case 6:if(m.stateNode===null)throw Error(o(162));E=m.memoizedProps,Ft(m.stateNode,p!==null?p.memoizedProps:E,E);return;case 3:xt&&p!==null&&p.memoizedState.isDehydrated&&ke(m.stateNode.containerInfo);return;case 12:return;case 13:Tc(m);return;case 19:Tc(m);return;case 17:return}throw Error(o(163))}switch(m.tag){case 0:case 11:case 14:case 15:Zo(3,m,m.return),pr(3,m),Zo(5,m,m.return);return;case 12:return;case 13:Tc(m);return;case 19:Tc(m);return;case 3:xt&&p!==null&&p.memoizedState.isDehydrated&&ke(m.stateNode.containerInfo);break;case 22:case 23:return}e:if(Xt){switch(m.tag){case 1:case 5:case 6:break e;case 3:case 4:m=m.stateNode,Xn(m.containerInfo,m.pendingChildren);break e}throw Error(o(163))}}function Tc(p){var m=p.updateQueue;if(m!==null){p.updateQueue=null;var E=p.stateNode;E===null&&(E=p.stateNode=new El),m.forEach(function(C){var B=q0.bind(null,p,C);E.has(C)||(E.add(C),C.then(B,B))})}}function g1(p,m){for(pt=m;pt!==null;){m=pt;var E=m.deletions;if(E!==null)for(var C=0;C<E.length;C++){var B=E[C];try{var z=p;nn?hm(z,B,m):ks(z,B,m);var ee=B.alternate;ee!==null&&(ee.return=null),B.return=null}catch(jt){Ur(B,m,jt)}}if(E=m.child,(m.subtreeFlags&12854)!==0&&E!==null)E.return=m,pt=E;else for(;pt!==null;){m=pt;try{var _e=m.flags;if(_e&32&&nn&&Oe(m.stateNode),_e&512){var je=m.alternate;if(je!==null){var ut=je.ref;ut!==null&&(typeof ut=="function"?ut(null):ut.current=null)}}if(_e&8192)switch(m.tag){case 13:if(m.memoizedState!==null){var Ot=m.alternate;(Ot===null||Ot.memoizedState===null)&&(Ju=Xi())}break;case 22:var hn=m.memoizedState!==null,Kt=m.alternate,En=Kt!==null&&Kt.memoizedState!==null;if(E=m,nn){e:if(C=E,B=hn,z=null,nn)for(var Pt=C;;){if(Pt.tag===5){if(z===null){z=Pt;var vr=Pt.stateNode;B?st(vr):be(Pt.stateNode,Pt.memoizedProps)}}else if(Pt.tag===6){if(z===null){var ys=Pt.stateNode;B?ce(ys):Ie(ys,Pt.memoizedProps)}}else if((Pt.tag!==22&&Pt.tag!==23||Pt.memoizedState===null||Pt===C)&&Pt.child!==null){Pt.child.return=Pt,Pt=Pt.child;continue}if(Pt===C)break;for(;Pt.sibling===null;){if(Pt.return===null||Pt.return===C)break e;z===Pt&&(z=null),Pt=Pt.return}z===Pt&&(z=null),Pt.sibling.return=Pt.return,Pt=Pt.sibling}}if(hn&&!En&&(E.mode&1)!==0){pt=E;for(var Te=E.child;Te!==null;){for(E=pt=Te;pt!==null;){C=pt;var Ee=C.child;switch(C.tag){case 0:case 11:case 14:case 15:Zo(4,C,C.return);break;case 1:Fs(C,C.return);var Fe=C.stateNode;if(typeof Fe.componentWillUnmount=="function"){var Ct=C.return;try{Fe.props=C.memoizedProps,Fe.state=C.memoizedState,Fe.componentWillUnmount()}catch(jt){Ur(C,Ct,jt)}}break;case 5:Fs(C,C.return);break;case 22:if(C.memoizedState!==null){pm(E);continue}}Ee!==null?(Ee.return=C,pt=Ee):pm(E)}Te=Te.sibling}}}switch(_e&4102){case 2:Jh(m),m.flags&=-3;break;case 6:Jh(m),m.flags&=-3,Oa(m.alternate,m);break;case 4096:m.flags&=-4097;break;case 4100:m.flags&=-4097,Oa(m.alternate,m);break;case 4:Oa(m.alternate,m)}}catch(jt){Ur(m,m.return,jt)}if(E=m.sibling,E!==null){E.return=m.return,pt=E;break}pt=m.return}}}function ju(p,m,E){pt=p,Wu(p)}function Wu(p,m,E){for(var C=(p.mode&1)!==0;pt!==null;){var B=pt,z=B.child;if(B.tag===22&&C){var ee=B.memoizedState!==null||Fr;if(!ee){var _e=B.alternate,je=_e!==null&&_e.memoizedState!==null||rr;_e=Fr;var ut=rr;if(Fr=ee,(rr=je)&&!ut)for(pt=B;pt!==null;)ee=pt,je=ee.child,ee.tag===22&&ee.memoizedState!==null?Al(B):je!==null?(je.return=ee,pt=je):Al(B);for(;z!==null;)pt=z,Wu(z),z=z.sibling;pt=B,Fr=_e,rr=ut}fm(p)}else(B.subtreeFlags&8772)!==0&&z!==null?(z.return=B,pt=z):fm(p)}}function fm(p){for(;pt!==null;){var m=pt;if((m.flags&8772)!==0){var E=m.alternate;try{if((m.flags&8772)!==0)switch(m.tag){case 0:case 11:case 15:rr||pr(5,m);break;case 1:var C=m.stateNode;if(m.flags&4&&!rr)if(E===null)C.componentDidMount();else{var B=m.elementType===m.type?E.memoizedProps:$r(m.type,E.memoizedProps);C.componentDidUpdate(B,E.memoizedState,C.__reactInternalSnapshotBeforeUpdate)}var z=m.updateQueue;z!==null&&B0(m,z,C);break;case 3:var ee=m.updateQueue;if(ee!==null){if(E=null,m.child!==null)switch(m.child.tag){case 5:E=fe(m.child.stateNode);break;case 1:E=m.child.stateNode}B0(m,ee,E)}break;case 5:var _e=m.stateNode;E===null&&m.flags&4&&qe(_e,m.type,m.memoizedProps,m);break;case 6:break;case 4:break;case 12:break;case 13:if(xt&&m.memoizedState===null){var je=m.alternate;if(je!==null){var ut=je.memoizedState;if(ut!==null){var Ot=ut.dehydrated;Ot!==null&&Ue(Ot)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}rr||m.flags&512&&kr(m)}catch(hn){Ur(m,m.return,hn)}}if(m===p){pt=null;break}if(E=m.sibling,E!==null){E.return=m.return,pt=E;break}pt=m.return}}function pm(p){for(;pt!==null;){var m=pt;if(m===p){pt=null;break}var E=m.sibling;if(E!==null){E.return=m.return,pt=E;break}pt=m.return}}function Al(p){for(;pt!==null;){var m=pt;try{switch(m.tag){case 0:case 11:case 15:var E=m.return;try{pr(4,m)}catch(je){Ur(m,E,je)}break;case 1:var C=m.stateNode;if(typeof C.componentDidMount=="function"){var B=m.return;try{C.componentDidMount()}catch(je){Ur(m,B,je)}}var z=m.return;try{kr(m)}catch(je){Ur(m,z,je)}break;case 5:var ee=m.return;try{kr(m)}catch(je){Ur(m,ee,je)}}}catch(je){Ur(m,m.return,je)}if(m===p){pt=null;break}var _e=m.sibling;if(_e!==null){_e.return=m.return,pt=_e;break}pt=m.return}}var $u=0,bl=1,Ml=2,Qo=3,Rc=4;if(typeof Symbol=="function"&&Symbol.for){var Cl=Symbol.for;$u=Cl("selector.component"),bl=Cl("selector.has_pseudo_class"),Ml=Cl("selector.role"),Qo=Cl("selector.test_id"),Rc=Cl("selector.text")}function Xu(p){var m=q(p);if(m!=null){if(typeof m.memoizedProps["data-testname"]!="string")throw Error(o(364));return m}if(p=K(p),p===null)throw Error(o(362));return p.stateNode.current}function Yu(p,m){switch(m.$$typeof){case $u:if(p.type===m.value)return!0;break;case bl:e:{m=m.value,p=[p,0];for(var E=0;E<p.length;){var C=p[E++],B=p[E++],z=m[B];if(C.tag!==5||!Se(C)){for(;z!=null&&Yu(C,z);)B++,z=m[B];if(B===m.length){m=!0;break e}else for(C=C.child;C!==null;)p.push(C,B),C=C.sibling}}m=!1}return m;case Ml:if(p.tag===5&&ze(p.stateNode,m.value))return!0;break;case Rc:if((p.tag===5||p.tag===6)&&(p=ne(p),p!==null&&0<=p.indexOf(m.value)))return!0;break;case Qo:if(p.tag===5&&(p=p.memoizedProps["data-testname"],typeof p=="string"&&p.toLowerCase()===m.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function Na(p){switch(p.$$typeof){case $u:return"<"+(U(p.value)||"Unknown")+">";case bl:return":has("+(Na(p)||"")+")";case Ml:return'[role="'+p.value+'"]';case Rc:return'"'+p.value+'"';case Qo:return'[data-testname="'+p.value+'"]';default:throw Error(o(365))}}function ps(p,m){var E=[];p=[p,0];for(var C=0;C<p.length;){var B=p[C++],z=p[C++],ee=m[z];if(B.tag!==5||!Se(B)){for(;ee!=null&&Yu(B,ee);)z++,ee=m[z];if(z===m.length)E.push(B);else for(B=B.child;B!==null;)p.push(B,z),B=B.sibling}}return E}function ea(p,m){if(!Ye)throw Error(o(363));p=Xu(p),p=ps(p,m),m=[],p=Array.from(p);for(var E=0;E<p.length;){var C=p[E++];if(C.tag===5)Se(C)||m.push(C.stateNode);else for(C=C.child;C!==null;)p.push(C),C=C.sibling}return m}var mm=Math.ceil,Ku=a.ReactCurrentDispatcher,no=a.ReactCurrentOwner,Yn=a.ReactCurrentBatchConfig,_n=0,Di=null,Kn=null,fi=0,br=0,Tl=ht(0),Ai=0,Pc=null,xo=0,ms=0,Rl=0,ta=null,Ui=null,Ju=0,Fa=1/0;function Pl(){Fa=Xi()+500}var Ic=!1,ci=null,io=null,Dc=!1,_o=null,Il=0,Dl=0,na=null,ri=-1,bi=0;function Nn(){return(_n&6)!==0?Xi():ri!==-1?ri:ri=Xi()}function ro(p){return(p.mode&1)===0?1:(_n&2)!==0&&fi!==0?fi&-fi:D0.transition!==null?(bi===0&&(p=Pi,Pi<<=1,(Pi&4194240)===0&&(Pi=64),bi=p),bi):(p=bn,p!==0?p:Je())}function Mr(p,m,E){if(50<Dl)throw Dl=0,na=null,Error(o(185));var C=ka(p,m);return C===null?null:(rl(C,m,E),((_n&2)===0||C!==Di)&&(C===Di&&((_n&2)===0&&(ms|=m),Ai===4&&gr(C,fi)),Jr(C,E),m===1&&_n===0&&(p.mode&1)===0&&(Pl(),yh&&Ds())),C)}function ka(p,m){p.lanes|=m;var E=p.alternate;for(E!==null&&(E.lanes|=m),E=p,p=p.return;p!==null;)p.childLanes|=m,E=p.alternate,E!==null&&(E.childLanes|=m),E=p,p=p.return;return E.tag===3?E.stateNode:null}function Jr(p,m){var E=p.callbackNode;I0(p,m);var C=Au(p,p===Di?fi:0);if(C===0)E!==null&&dc(E),p.callbackNode=null,p.callbackPriority=0;else if(m=C&-C,p.callbackPriority!==m){if(E!=null&&dc(E),m===1)p.tag===0?_h(gs.bind(null,p)):xh(gs.bind(null,p)),$e?_t(function(){_n===0&&Ds()}):sl(ol,Ds),E=null;else{switch(zo(C)){case 1:E=ol;break;case 4:E=f1;break;case 16:E=gh;break;case 536870912:E=vh;break;default:E=gh}E=Qh(E,mr.bind(null,p))}p.callbackPriority=m,p.callbackNode=E}}function mr(p,m){if(ri=-1,bi=0,(_n&6)!==0)throw Error(o(327));var E=p.callbackNode;if(wo()&&p.callbackNode!==E)return null;var C=Au(p,p===Di?fi:0);if(C===0)return null;if((C&30)!==0||(C&p.expiredLanes)!==0||m)m=ed(p,C);else{m=C;var B=_n;_n|=2;var z=ym();(Di!==p||fi!==m)&&(Pl(),ia(p,m));do try{Y0();break}catch(_e){vm(p,_e)}while(!0);Lr(),Ku.current=z,_n=B,Kn!==null?m=0:(Di=null,fi=0,m=Ai)}if(m!==0){if(m===2&&(B=fh(p),B!==0&&(C=B,m=qu(p,B))),m===1)throw E=Pc,ia(p,0),gr(p,C),Jr(p,Xi()),E;if(m===6)gr(p,C);else{if(B=p.current.alternate,(C&30)===0&&!gm(B)&&(m=ed(p,C),m===2&&(z=fh(p),z!==0&&(C=z,m=qu(p,z))),m===1))throw E=Pc,ia(p,0),gr(p,C),Jr(p,Xi()),E;switch(p.finishedWork=B,p.finishedLanes=C,m){case 0:case 1:throw Error(o(345));case 2:so(p,Ui);break;case 3:if(gr(p,C),(C&130023424)===C&&(m=Ju+500-Xi(),10<m)){if(Au(p,0)!==0)break;if(B=p.suspendedLanes,(B&C)!==C){Nn(),p.pingedLanes|=p.suspendedLanes&B;break}p.timeoutHandle=Ge(so.bind(null,p,Ui),m);break}so(p,Ui);break;case 4:if(gr(p,C),(C&4194240)===C)break;for(m=p.eventTimes,B=-1;0<C;){var ee=31-qt(C);z=1<<ee,ee=m[ee],ee>B&&(B=ee),C&=~z}if(C=B,C=Xi()-C,C=(120>C?120:480>C?480:1080>C?1080:1920>C?1920:3e3>C?3e3:4320>C?4320:1960*mm(C/1960))-C,10<C){p.timeoutHandle=Ge(so.bind(null,p,Ui),C);break}so(p,Ui);break;case 5:so(p,Ui);break;default:throw Error(o(329))}}}return Jr(p,Xi()),p.callbackNode===E?mr.bind(null,p):null}function qu(p,m){var E=ta;return p.current.memoizedState.isDehydrated&&(ia(p,m).flags|=256),p=ed(p,m),p!==2&&(m=Ui,Ui=E,m!==null&&Zu(m)),p}function Zu(p){Ui===null?Ui=p:Ui.push.apply(Ui,p)}function gm(p){for(var m=p;;){if(m.flags&16384){var E=m.updateQueue;if(E!==null&&(E=E.stores,E!==null))for(var C=0;C<E.length;C++){var B=E[C],z=B.getSnapshot;B=B.value;try{if(!Br(z(),B))return!1}catch{return!1}}}if(E=m.child,m.subtreeFlags&16384&&E!==null)E.return=m,m=E;else{if(m===p)break;for(;m.sibling===null;){if(m.return===null||m.return===p)return!0;m=m.return}m.sibling.return=m.return,m=m.sibling}}return!0}function gr(p,m){for(m&=~Rl,m&=~ms,p.suspendedLanes|=m,p.pingedLanes&=~m,p=p.expirationTimes;0<m;){var E=31-qt(m),C=1<<E;p[E]=-1,m&=~C}}function gs(p){if((_n&6)!==0)throw Error(o(327));wo();var m=Au(p,0);if((m&1)===0)return Jr(p,Xi()),null;var E=ed(p,m);if(p.tag!==0&&E===2){var C=fh(p);C!==0&&(m=C,E=qu(p,C))}if(E===1)throw E=Pc,ia(p,0),gr(p,m),Jr(p,Xi()),E;if(E===6)throw Error(o(345));return p.finishedWork=p.current.alternate,p.finishedLanes=m,so(p,Ui),Jr(p,Xi()),null}function Bc(p){_o!==null&&_o.tag===0&&(_n&6)===0&&wo();var m=_n;_n|=1;var E=Yn.transition,C=bn;try{if(Yn.transition=null,bn=1,p)return p()}finally{bn=C,Yn.transition=E,_n=m,(_n&6)===0&&Ds()}}function Qu(){br=Tl.current,Ze(Tl)}function ia(p,m){p.finishedWork=null,p.finishedLanes=0;var E=p.timeoutHandle;if(E!==ft&&(p.timeoutHandle=ft,et(E)),Kn!==null)for(E=Kn.return;E!==null;){var C=E;switch(Wp(C),C.tag){case 1:C=C.type.childContextTypes,C!=null&&Yt();break;case 3:_c(),Ze(kt),Ze(rn),pl();break;case 5:Yp(C);break;case 4:_c();break;case 13:Ze(yi);break;case 19:Ze(yi);break;case 10:Ru(C.type._context);break;case 22:case 23:Qu()}E=E.return}if(Di=p,Kn=p=ra(p.current,null),fi=br=m,Ai=0,Pc=null,Rl=ms=xo=0,Ui=ta=null,Bs!==null){for(m=0;m<Bs.length;m++)if(E=Bs[m],C=E.interleaved,C!==null){E.interleaved=null;var B=C.next,z=E.pending;if(z!==null){var ee=z.next;z.next=B,C.next=ee}E.pending=C}Bs=null}return p}function vm(p,m){do{var E=Kn;try{if(Lr(),Iu.current=bc,Dh){for(var C=xi.memoizedState;C!==null;){var B=C.queue;B!==null&&(B.pending=null),C=C.next}Dh=!1}if(ml=0,tr=er=xi=null,go=!1,gl=0,no.current=null,E===null||E.return===null){Ai=1,Pc=m,Kn=null;break}e:{var z=p,ee=E.return,_e=E,je=m;if(m=fi,_e.flags|=32768,je!==null&&typeof je=="object"&&typeof je.then=="function"){var ut=je,Ot=_e,hn=Ot.tag;if((Ot.mode&1)===0&&(hn===0||hn===11||hn===15)){var Kt=Ot.alternate;Kt?(Ot.updateQueue=Kt.updateQueue,Ot.memoizedState=Kt.memoizedState,Ot.lanes=Kt.lanes):(Ot.updateQueue=null,Ot.memoizedState=null)}var En=rm(ee);if(En!==null){En.flags&=-257,yl(En,ee,_e,z,m),En.mode&1&&Xo(z,ut,m),m=En,je=ut;var Pt=m.updateQueue;if(Pt===null){var vr=new Set;vr.add(je),m.updateQueue=vr}else Pt.add(je);break e}else{if((m&1)===0){Xo(z,ut,m),Zh();break e}je=Error(o(426))}}else if(hi&&_e.mode&1){var ys=rm(ee);if(ys!==null){(ys.flags&65536)===0&&(ys.flags|=256),yl(ys,ee,_e,z,m),Rh(je);break e}}z=je,Ai!==4&&(Ai=2),ta===null?ta=[z]:ta.push(z),je=im(je,_e),_e=ee;do{switch(_e.tag){case 3:_e.flags|=65536,m&=-m,_e.lanes|=m;var Te=W0(_e,je,m);Eh(_e,Te);break e;case 1:z=je;var Ee=_e.type,Fe=_e.stateNode;if((_e.flags&128)===0&&(typeof Ee.getDerivedStateFromError=="function"||Fe!==null&&typeof Fe.componentDidCatch=="function"&&(io===null||!io.has(Fe)))){_e.flags|=65536,m&=-m,_e.lanes|=m;var Ct=Vh(_e,z,m);Eh(_e,Ct);break e}}_e=_e.return}while(_e!==null)}_m(E)}catch(jt){m=jt,Kn===E&&E!==null&&(Kn=E=E.return);continue}break}while(!0)}function ym(){var p=Ku.current;return Ku.current=bc,p===null?bc:p}function Zh(){(Ai===0||Ai===3||Ai===2)&&(Ai=4),Di===null||(xo&268435455)===0&&(ms&268435455)===0||gr(Di,fi)}function ed(p,m){var E=_n;_n|=2;var C=ym();Di===p&&fi===m||ia(p,m);do try{X0();break}catch(B){vm(p,B)}while(!0);if(Lr(),_n=E,Ku.current=C,Kn!==null)throw Error(o(261));return Di=null,fi=0,Ai}function X0(){for(;Kn!==null;)xm(Kn)}function Y0(){for(;Kn!==null&&!Ca();)xm(Kn)}function xm(p){var m=Em(p.alternate,p,br);p.memoizedProps=p.pendingProps,m===null?_m(p):Kn=m,no.current=null}function _m(p){var m=p;do{var E=m.alternate;if(p=m.return,(m.flags&32768)===0){if(E=Wh(E,m,br),E!==null){Kn=E;return}}else{if(E=Yh(E,m),E!==null){E.flags&=32767,Kn=E;return}if(p!==null)p.flags|=32768,p.subtreeFlags=0,p.deletions=null;else{Ai=6,Kn=null;return}}if(m=m.sibling,m!==null){Kn=m;return}Kn=m=p}while(m!==null);Ai===0&&(Ai=5)}function so(p,m){var E=bn,C=Yn.transition;try{Yn.transition=null,bn=1,K0(p,m,E)}finally{Yn.transition=C,bn=E}return null}function K0(p,m,E){do wo();while(_o!==null);if((_n&6)!==0)throw Error(o(327));var C=p.finishedWork,B=p.finishedLanes;if(C===null)return null;if(p.finishedWork=null,p.finishedLanes=0,C===p.current)throw Error(o(177));p.callbackNode=null,p.callbackPriority=0;var z=C.lanes|C.childLanes;if(mh(p,z),p===Di&&(Kn=Di=null,fi=0),(C.subtreeFlags&2064)===0&&(C.flags&2064)===0||Dc||(Dc=!0,Qh(gh,function(){return wo(),null})),z=(C.flags&15990)!==0,(C.subtreeFlags&15990)!==0||z){z=Yn.transition,Yn.transition=null;var ee=bn;bn=1;var _e=_n;_n|=4,no.current=null,cm(p,C),g1(p,C),se(p.containerInfo),p.current=C,ju(C),h1(),_n=_e,bn=ee,Yn.transition=z}else p.current=C;if(Dc&&(Dc=!1,_o=p,Il=B),z=p.pendingLanes,z===0&&(io=null),Mu(C.stateNode),Jr(p,Xi()),m!==null)for(E=p.onRecoverableError,C=0;C<m.length;C++)E(m[C]);if(Ic)throw Ic=!1,p=ci,ci=null,p;return(Il&1)!==0&&p.tag!==0&&wo(),z=p.pendingLanes,(z&1)!==0?p===na?Dl++:(Dl=0,na=p):Dl=0,Ds(),null}function wo(){if(_o!==null){var p=zo(Il),m=Yn.transition,E=bn;try{if(Yn.transition=null,bn=16>p?16:p,_o===null)var C=!1;else{if(p=_o,_o=null,Il=0,(_n&6)!==0)throw Error(o(331));var B=_n;for(_n|=4,pt=p.current;pt!==null;){var z=pt,ee=z.child;if((pt.flags&16)!==0){var _e=z.deletions;if(_e!==null){for(var je=0;je<_e.length;je++){var ut=_e[je];for(pt=ut;pt!==null;){var Ot=pt;switch(Ot.tag){case 0:case 11:case 15:Zo(8,Ot,z)}var hn=Ot.child;if(hn!==null)hn.return=Ot,pt=hn;else for(;pt!==null;){Ot=pt;var Kt=Ot.sibling,En=Ot.return;if(um(Ot),Ot===ut){pt=null;break}if(Kt!==null){Kt.return=En,pt=Kt;break}pt=En}}}var Pt=z.alternate;if(Pt!==null){var vr=Pt.child;if(vr!==null){Pt.child=null;do{var ys=vr.sibling;vr.sibling=null,vr=ys}while(vr!==null)}}pt=z}}if((z.subtreeFlags&2064)!==0&&ee!==null)ee.return=z,pt=ee;else e:for(;pt!==null;){if(z=pt,(z.flags&2048)!==0)switch(z.tag){case 0:case 11:case 15:Zo(9,z,z.return)}var Te=z.sibling;if(Te!==null){Te.return=z.return,pt=Te;break e}pt=z.return}}var Ee=p.current;for(pt=Ee;pt!==null;){ee=pt;var Fe=ee.child;if((ee.subtreeFlags&2064)!==0&&Fe!==null)Fe.return=ee,pt=Fe;else e:for(ee=Ee;pt!==null;){if(_e=pt,(_e.flags&2048)!==0)try{switch(_e.tag){case 0:case 11:case 15:pr(9,_e)}}catch(jt){Ur(_e,_e.return,jt)}if(_e===ee){pt=null;break e}var Ct=_e.sibling;if(Ct!==null){Ct.return=_e.return,pt=Ct;break e}pt=_e.return}}if(_n=B,Ds(),mo&&typeof mo.onPostCommitFiberRoot=="function")try{mo.onPostCommitFiberRoot(bu,p)}catch{}C=!0}return C}finally{bn=E,Yn.transition=m}}return!1}function td(p,m,E){m=im(E,m),m=W0(p,m,1),Ta(p,m),m=Nn(),p=ka(p,1),p!==null&&(rl(p,1,m),Jr(p,m))}function Ur(p,m,E){if(p.tag===3)td(p,p,E);else for(;m!==null;){if(m.tag===3){td(m,p,E);break}else if(m.tag===1){var C=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof C.componentDidCatch=="function"&&(io===null||!io.has(C))){p=im(E,p),p=Vh(m,p,1),Ta(m,p),p=Nn(),m=ka(m,1),m!==null&&(rl(m,1,p),Jr(m,p));break}}m=m.return}}function wm(p,m,E){var C=p.pingCache;C!==null&&C.delete(m),m=Nn(),p.pingedLanes|=p.suspendedLanes&E,Di===p&&(fi&E)===E&&(Ai===4||Ai===3&&(fi&130023424)===fi&&500>Xi()-Ju?ia(p,0):Rl|=E),Jr(p,m)}function Sm(p,m){m===0&&((p.mode&1)===0?m=1:(m=Rn,Rn<<=1,(Rn&130023424)===0&&(Rn=4194304)));var E=Nn();p=ka(p,m),p!==null&&(rl(p,m,E),Jr(p,E))}function J0(p){var m=p.memoizedState,E=0;m!==null&&(E=m.retryLane),Sm(p,E)}function q0(p,m){var E=0;switch(p.tag){case 13:var C=p.stateNode,B=p.memoizedState;B!==null&&(E=B.retryLane);break;case 19:C=p.stateNode;break;default:throw Error(o(314))}C!==null&&C.delete(m),Sm(p,E)}var Em;Em=function(p,m,E){if(p!==null)if(p.memoizedProps!==m.pendingProps||kt.current)ir=!0;else{if((p.lanes&E)===0&&(m.flags&128)===0)return ir=!1,Xh(p,m,E);ir=(p.flags&131072)!==0}else ir=!1,hi&&(m.flags&1048576)!==0&&F0(m,Ch,m.index);switch(m.lanes=0,m.tag){case 2:var C=m.type;p!==null&&(p.alternate=null,m.alternate=null,m.flags|=2),p=m.pendingProps;var B=Rt(m,rn.current);hc(m,E),B=wc(null,m,C,p,B,E);var z=Da();return m.flags|=1,typeof B=="object"&&B!==null&&typeof B.render=="function"&&B.$$typeof===void 0?(m.tag=1,m.memoizedState=null,m.updateQueue=null,xn(C)?(z=!0,pn(m)):z=!1,m.memoizedState=B.state!==null&&B.state!==void 0?B.state:null,fc(m),B.updater=bh,m.stateNode=B,B._reactInternals=m,Gp(m,C,p,E),m=Ar(null,m,C,!0,z,E)):(m.tag=0,hi&&z&&jp(m),Ei(null,m,B,E),m=m.child),m;case 16:C=m.elementType;e:{switch(p!==null&&(p.alternate=null,m.alternate=null,m.flags|=2),p=m.pendingProps,B=C._init,C=B(C._payload),m.type=C,B=m.tag=v1(C),p=$r(C,p),B){case 0:m=Jo(null,m,C,p,E);break e;case 1:m=_l(null,m,C,p,E);break e;case 11:m=ii(null,m,C,p,E);break e;case 14:m=Zn(null,m,C,$r(C.type,p),E);break e}throw Error(o(306,C,""))}return m;case 0:return C=m.type,B=m.pendingProps,B=m.elementType===C?B:$r(C,B),Jo(p,m,C,B,E);case 1:return C=m.type,B=m.pendingProps,B=m.elementType===C?B:$r(C,B),_l(p,m,C,B,E);case 3:e:{if(zu(m),p===null)throw Error(o(387));C=m.pendingProps,z=m.memoizedState,B=z.element,zp(p,m),Ah(m,C,null,E);var ee=m.memoizedState;if(C=ee.element,xt&&z.isDehydrated)if(z={element:C,isDehydrated:!1,cache:ee.cache,transitions:ee.transitions},m.updateQueue.baseState=z,m.memoizedState=z,m.flags&256){B=Error(o(423)),m=om(p,m,C,E,B);break e}else if(C!==B){B=Error(o(424)),m=om(p,m,C,E,B);break e}else for(xt&&(hr=il(m.stateNode.containerInfo),Or=m,hi=!0,Ns=null,mc=!1),E=z0(m,null,C,E),m.child=E;E;)E.flags=E.flags&-3|4096,E=E.sibling;else{if(gc(),C===B){m=Kr(p,m,E);break e}Ei(p,m,C,E)}m=m.child}return m;case 5:return H0(m),p===null&&Pa(m),C=m.type,B=m.pendingProps,z=p!==null?p.memoizedProps:null,ee=B.children,Ne(C,B)?ee=null:z!==null&&Ne(C,z)&&(m.flags|=32),Nr(p,m),Ei(p,m,ee,E),m.child;case 6:return p===null&&Pa(m),null;case 13:return am(p,m,E);case 4:return Ph(m,m.stateNode.containerInfo),C=m.pendingProps,p===null?m.child=Wo(m,null,C,E):Ei(p,m,C,E),m.child;case 11:return C=m.type,B=m.pendingProps,B=m.elementType===C?B:$r(C,B),ii(p,m,C,B,E);case 7:return Ei(p,m,m.pendingProps,E),m.child;case 8:return Ei(p,m,m.pendingProps.children,E),m.child;case 12:return Ei(p,m,m.pendingProps.children,E),m.child;case 10:e:{if(C=m.type._context,B=m.pendingProps,z=m.memoizedProps,ee=B.value,ll(m,C,ee),z!==null)if(Br(z.value,ee)){if(z.children===B.children&&!kt.current){m=Kr(p,m,E);break e}}else for(z=m.child,z!==null&&(z.return=m);z!==null;){var _e=z.dependencies;if(_e!==null){ee=z.child;for(var je=_e.firstContext;je!==null;){if(je.context===C){if(z.tag===1){je=Vo(-1,E&-E),je.tag=2;var ut=z.updateQueue;if(ut!==null){ut=ut.shared;var Ot=ut.pending;Ot===null?je.next=je:(je.next=Ot.next,Ot.next=je),ut.pending=je}}z.lanes|=E,je=z.alternate,je!==null&&(je.lanes|=E),cl(z.return,E,m),_e.lanes|=E;break}je=je.next}}else if(z.tag===10)ee=z.type===m.type?null:z.child;else if(z.tag===18){if(ee=z.return,ee===null)throw Error(o(341));ee.lanes|=E,_e=ee.alternate,_e!==null&&(_e.lanes|=E),cl(ee,E,m),ee=z.sibling}else ee=z.child;if(ee!==null)ee.return=z;else for(ee=z;ee!==null;){if(ee===m){ee=null;break}if(z=ee.sibling,z!==null){z.return=ee.return,ee=z;break}ee=ee.return}z=ee}Ei(p,m,B.children,E),m=m.child}return m;case 9:return B=m.type,C=m.pendingProps.children,hc(m,E),B=Xr(B),C=C(B),m.flags|=1,Ei(p,m,C,E),m.child;case 14:return C=m.type,B=$r(C,m.pendingProps),B=$r(C.type,B),Zn(p,m,C,B,E);case 15:return Ko(p,m,m.type,m.pendingProps,E);case 17:return C=m.type,B=m.pendingProps,B=m.elementType===C?B:$r(C,B),p!==null&&(p.alternate=null,m.alternate=null,m.flags|=2),m.tag=1,xn(C)?(p=!0,pn(m)):p=!1,hc(m,E),O0(m,C,B),Gp(m,C,B,E),Ar(null,m,C,!0,p,E);case 19:return Sl(p,m,E);case 22:return fr(p,m,E)}throw Error(o(156,m.tag))};function Qh(p,m){return sl(p,m)}function Z0(p,m,E,C){this.tag=p,this.key=E,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=C,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vs(p,m,E,C){return new Z0(p,m,E,C)}function ef(p){return p=p.prototype,!(!p||!p.isReactComponent)}function v1(p){if(typeof p=="function")return ef(p)?1:0;if(p!=null){if(p=p.$$typeof,p===S)return 11;if(p===b)return 14}return 2}function ra(p,m){var E=p.alternate;return E===null?(E=vs(p.tag,m,p.key,p.mode),E.elementType=p.elementType,E.type=p.type,E.stateNode=p.stateNode,E.alternate=p,p.alternate=E):(E.pendingProps=m,E.type=p.type,E.flags=0,E.subtreeFlags=0,E.deletions=null),E.flags=p.flags&14680064,E.childLanes=p.childLanes,E.lanes=p.lanes,E.child=p.child,E.memoizedProps=p.memoizedProps,E.memoizedState=p.memoizedState,E.updateQueue=p.updateQueue,m=p.dependencies,E.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},E.sibling=p.sibling,E.index=p.index,E.ref=p.ref,E}function tf(p,m,E,C,B,z){var ee=2;if(C=p,typeof p=="function")ef(p)&&(ee=1);else if(typeof p=="string")ee=5;else e:switch(p){case h:return Bl(E.children,B,z,m);case f:ee=8,B|=8;break;case g:return p=vs(12,E,m,B|2),p.elementType=g,p.lanes=z,p;case w:return p=vs(13,E,m,B),p.elementType=w,p.lanes=z,p;case _:return p=vs(19,E,m,B),p.elementType=_,p.lanes=z,p;case T:return nd(E,B,z,m);default:if(typeof p=="object"&&p!==null)switch(p.$$typeof){case v:ee=10;break e;case x:ee=9;break e;case S:ee=11;break e;case b:ee=14;break e;case M:ee=16,C=null;break e}throw Error(o(130,p==null?p:typeof p,""))}return m=vs(ee,E,m,B),m.elementType=p,m.type=C,m.lanes=z,m}function Bl(p,m,E,C){return p=vs(7,p,C,m),p.lanes=E,p}function nd(p,m,E,C){return p=vs(22,p,C,m),p.elementType=T,p.lanes=E,p.stateNode={},p}function nf(p,m,E){return p=vs(6,p,null,m),p.lanes=E,p}function rf(p,m,E){return m=vs(4,p.children!==null?p.children:[],p.key,m),m.lanes=E,m.stateNode={containerInfo:p.containerInfo,pendingChildren:null,implementation:p.implementation},m}function sf(p,m,E,C,B){this.tag=m,this.containerInfo=p,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=ft,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ph(0),this.expirationTimes=ph(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ph(0),this.identifierPrefix=C,this.onRecoverableError=B,xt&&(this.mutableSourceEagerHydrationData=null)}function Q0(p,m,E,C,B,z,ee,_e,je){return p=new sf(p,m,E,_e,je),m===1?(m=1,z===!0&&(m|=8)):m=0,z=vs(3,null,null,m),p.current=z,z.stateNode=p,z.memoizedState={element:C,isDehydrated:E,cache:null,transitions:null},fc(z),p}function ev(p){if(!p)return At;p=p._reactInternals;e:{if(k(p)!==p||p.tag!==1)throw Error(o(170));var m=p;do{switch(m.tag){case 3:m=m.stateNode.context;break e;case 1:if(xn(m.type)){m=m.stateNode.__reactInternalMemoizedMergedChildContext;break e}}m=m.return}while(m!==null);throw Error(o(171))}if(p.tag===1){var E=p.type;if(xn(E))return ei(p,E,m)}return m}function tv(p){var m=p._reactInternals;if(m===void 0)throw typeof p.render=="function"?Error(o(188)):(p=Object.keys(p).join(","),Error(o(268,p)));return p=Z(m),p===null?null:p.stateNode}function Us(p,m){if(p=p.memoizedState,p!==null&&p.dehydrated!==null){var E=p.retryLane;p.retryLane=E!==0&&E<m?E:m}}function id(p,m){Us(p,m),(p=p.alternate)&&Us(p,m)}function of(p){return p=Z(p),p===null?null:p.stateNode}function nv(){return null}return t.attemptContinuousHydration=function(p){if(p.tag===13){var m=Nn();Mr(p,134217728,m),id(p,134217728)}},t.attemptHydrationAtCurrentPriority=function(p){if(p.tag===13){var m=Nn(),E=ro(p);Mr(p,E,m),id(p,E)}},t.attemptSynchronousHydration=function(p){switch(p.tag){case 3:var m=p.stateNode;if(m.current.memoizedState.isDehydrated){var E=Wr(m.pendingLanes);E!==0&&(po(m,E|1),Jr(m,Xi()),(_n&6)===0&&(Pl(),Ds()))}break;case 13:var C=Nn();Bc(function(){return Mr(p,1,C)}),id(p,1)}},t.batchedUpdates=function(p,m){var E=_n;_n|=1;try{return p(m)}finally{_n=E,_n===0&&(Pl(),yh&&Ds())}},t.createComponentSelector=function(p){return{$$typeof:$u,value:p}},t.createContainer=function(p,m,E,C,B,z,ee){return Q0(p,m,!1,null,E,C,B,z,ee)},t.createHasPseudoClassSelector=function(p){return{$$typeof:bl,value:p}},t.createHydrationContainer=function(p,m,E,C,B,z,ee,_e,je){return p=Q0(E,C,!0,p,B,z,ee,_e,je),p.context=ev(null),E=p.current,C=Nn(),B=ro(E),z=Vo(C,B),z.callback=m??null,Ta(E,z),p.current.lanes=B,rl(p,B,C),Jr(p,C),p},t.createPortal=function(p,m,E){var C=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:C==null?null:""+C,children:p,containerInfo:m,implementation:E}},t.createRoleSelector=function(p){return{$$typeof:Ml,value:p}},t.createTestNameSelector=function(p){return{$$typeof:Qo,value:p}},t.createTextSelector=function(p){return{$$typeof:Rc,value:p}},t.deferredUpdates=function(p){var m=bn,E=Yn.transition;try{return Yn.transition=null,bn=16,p()}finally{bn=m,Yn.transition=E}},t.discreteUpdates=function(p,m,E,C,B){var z=bn,ee=Yn.transition;try{return Yn.transition=null,bn=1,p(m,E,C,B)}finally{bn=z,Yn.transition=ee,_n===0&&Pl()}},t.findAllNodes=ea,t.findBoundingRects=function(p,m){if(!Ye)throw Error(o(363));m=ea(p,m),p=[];for(var E=0;E<m.length;E++)p.push(j(m[E]));for(m=p.length-1;0<m;m--){E=p[m];for(var C=E.x,B=C+E.width,z=E.y,ee=z+E.height,_e=m-1;0<=_e;_e--)if(m!==_e){var je=p[_e],ut=je.x,Ot=ut+je.width,hn=je.y,Kt=hn+je.height;if(C>=ut&&z>=hn&&B<=Ot&&ee<=Kt){p.splice(m,1);break}else if(C!==ut||E.width!==je.width||Kt<z||hn>ee){if(!(z!==hn||E.height!==je.height||Ot<C||ut>B)){ut>C&&(je.width+=ut-C,je.x=C),Ot<B&&(je.width=B-ut),p.splice(m,1);break}}else{hn>z&&(je.height+=hn-z,je.y=z),Kt<ee&&(je.height=ee-hn),p.splice(m,1);break}}}return p},t.findHostInstance=tv,t.findHostInstanceWithNoPortals=function(p){return p=V(p),p=p!==null?le(p):null,p===null?null:p.stateNode},t.findHostInstanceWithWarning=function(p){return tv(p)},t.flushControlled=function(p){var m=_n;_n|=1;var E=Yn.transition,C=bn;try{Yn.transition=null,bn=1,p()}finally{bn=C,Yn.transition=E,_n=m,_n===0&&(Pl(),Ds())}},t.flushPassiveEffects=wo,t.flushSync=Bc,t.focusWithin=function(p,m){if(!Ye)throw Error(o(363));for(p=Xu(p),m=ps(p,m),m=Array.from(m),p=0;p<m.length;){var E=m[p++];if(!Se(E)){if(E.tag===5&&Re(E.stateNode))return!0;for(E=E.child;E!==null;)m.push(E),E=E.sibling}}return!1},t.getCurrentUpdatePriority=function(){return bn},t.getFindAllNodesFailureDescription=function(p,m){if(!Ye)throw Error(o(363));var E=0,C=[];p=[Xu(p),0];for(var B=0;B<p.length;){var z=p[B++],ee=p[B++],_e=m[ee];if((z.tag!==5||!Se(z))&&(Yu(z,_e)&&(C.push(Na(_e)),ee++,ee>E&&(E=ee)),ee<m.length))for(z=z.child;z!==null;)p.push(z,ee),z=z.sibling}if(E<m.length){for(p=[];E<m.length;E++)p.push(Na(m[E]));return`findAllNodes was able to match part of the selector:
  `+(C.join(" > ")+`

No matching component was found for:
  `)+p.join(" > ")}return null},t.getPublicRootInstance=function(p){if(p=p.current,!p.child)return null;switch(p.child.tag){case 5:return fe(p.child.stateNode);default:return p.child.stateNode}},t.injectIntoDevTools=function(p){if(p={bundleType:p.bundleType,version:p.version,rendererPackageName:p.rendererPackageName,rendererConfig:p.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:of,findFiberByHostInstance:p.findFiberByHostInstance||nv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")p=!1;else{var m=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(m.isDisabled||!m.supportsFiber)p=!0;else{try{bu=m.inject(p),mo=m}catch{}p=!!m.checkDCE}}return p},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(p,m,E,C){if(!Ye)throw Error(o(363));p=ea(p,m);var B=mt(p,E,C).disconnect;return{disconnect:function(){B()}}},t.registerMutableSourceForHydration=function(p,m){var E=m._getVersion;E=E(m._source),p.mutableSourceEagerHydrationData==null?p.mutableSourceEagerHydrationData=[m,E]:p.mutableSourceEagerHydrationData.push(m,E)},t.runWithPriority=function(p,m){var E=bn;try{return bn=p,m()}finally{bn=E}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(p,m,E,C){var B=m.current,z=Nn(),ee=ro(B);return E=ev(E),m.context===null?m.context=E:m.pendingContext=E,m=Vo(z,ee),m.payload={element:p},C=C===void 0?null:C,C!==null&&(m.callback=C),Ta(B,m),p=Mr(B,ee,z),p!==null&&Sh(p,B,ee),ee},t}),iS}var BR;function iY(){return BR||(BR=1,eS.exports=nY()),eS.exports}var rY=iY();const sY=lc(rY);var LR=QL();const Qb={},n1=n=>void Object.assign(Qb,n);function oY(n,e){function t(h,{args:f=[],attach:g,...v},x){let S=`${h[0].toUpperCase()}${h.slice(1)}`,w;if(h==="primitive"){if(v.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const _=v.object;w=Ff(_,{type:h,root:x,attach:g,primitive:!0})}else{const _=Qb[S];if(!_)throw new Error(`R3F: ${S} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(f))throw new Error("R3F: The args prop must be an array!");w=Ff(new _(...f),{type:h,root:x,attach:g,memoizedProps:{args:f}})}return w.__r3f.attach===void 0&&(w.isBufferGeometry?w.__r3f.attach="geometry":w.isMaterial&&(w.__r3f.attach="material")),S!=="inject"&&oS(w,v),w}function i(h,f){let g=!1;if(f){var v,x;(v=f.__r3f)!=null&&v.attach?sS(h,f,f.__r3f.attach):f.isObject3D&&h.isObject3D&&(h.add(f),g=!0),g||(x=h.__r3f)==null||x.objects.push(f),f.__r3f||Ff(f,{}),f.__r3f.parent=h,VE(f),kf(f)}}function r(h,f,g){let v=!1;if(f){var x,S;if((x=f.__r3f)!=null&&x.attach)sS(h,f,f.__r3f.attach);else if(f.isObject3D&&h.isObject3D){f.parent=h,f.dispatchEvent({type:"added"}),h.dispatchEvent({type:"childadded",child:f});const w=h.children.filter(b=>b!==f),_=w.indexOf(g);h.children=[...w.slice(0,_),f,...w.slice(_)],v=!0}v||(S=h.__r3f)==null||S.objects.push(f),f.__r3f||Ff(f,{}),f.__r3f.parent=h,VE(f),kf(f)}}function s(h,f,g=!1){h&&[...h].forEach(v=>o(f,v,g))}function o(h,f,g){if(f){var v,x,S;if(f.__r3f&&(f.__r3f.parent=null),(v=h.__r3f)!=null&&v.objects&&(h.__r3f.objects=h.__r3f.objects.filter(T=>T!==f)),(x=f.__r3f)!=null&&x.attach)UR(h,f,f.__r3f.attach);else if(f.isObject3D&&h.isObject3D){var w;h.remove(f),(w=f.__r3f)!=null&&w.root&&fY(Xy(f),f)}const b=(S=f.__r3f)==null?void 0:S.primitive,M=!b&&(g===void 0?f.dispose!==null:g);if(!b){var _;s((_=f.__r3f)==null?void 0:_.objects,f,M),s(f.children,f,M)}if(delete f.__r3f,M&&f.dispose&&f.type!=="Scene"){const T=()=>{try{f.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?LR.unstable_scheduleCallback(LR.unstable_IdlePriority,T):T()}kf(h)}}function a(h,f,g,v){var x;const S=(x=h.__r3f)==null?void 0:x.parent;if(!S)return;const w=t(f,g,h.__r3f.root);if(h.children){for(const _ of h.children)_.__r3f&&i(w,_);h.children=h.children.filter(_=>!_.__r3f)}h.__r3f.objects.forEach(_=>i(w,_)),h.__r3f.objects=[],h.__r3f.autoRemovedBeforeAppend||o(S,h),w.parent&&(w.__r3f.autoRemovedBeforeAppend=!0),i(S,w),w.raycast&&w.__r3f.eventCount&&Xy(w).getState().internal.interaction.push(w),[v,v.alternate].forEach(_=>{_!==null&&(_.stateNode=w,_.ref&&(typeof _.ref=="function"?_.ref(w):_.ref.current=w))})}const l=()=>{};return{reconciler:sY({createInstance:t,removeChild:o,appendChild:i,appendInitialChild:i,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(h,f)=>{if(!f)return;const g=h.getState().scene;g.__r3f&&(g.__r3f.root=h,i(g,f))},removeChildFromContainer:(h,f)=>{f&&o(h.getState().scene,f)},insertInContainerBefore:(h,f,g)=>{if(!f||!g)return;const v=h.getState().scene;v.__r3f&&r(v,f,g)},getRootHostContext:()=>null,getChildHostContext:h=>h,finalizeInitialChildren(h){var f;return!!((f=h?.__r3f)!=null?f:{}).handlers},prepareUpdate(h,f,g,v){var x;if(((x=h?.__r3f)!=null?x:{}).primitive&&v.object&&v.object!==h)return[!0];{const{args:w=[],children:_,...b}=v,{args:M=[],children:T,...L}=g;if(!Array.isArray(w))throw new Error("R3F: the args prop must be an array!");if(w.some((U,F)=>U!==M[F]))return[!0];const D=oO(h,b,L,!0);return D.changes.length?[!1,D]:null}},commitUpdate(h,[f,g],v,x,S,w){f?a(h,v,S,w):oS(h,g)},commitMount(h,f,g,v){var x;const S=(x=h.__r3f)!=null?x:{};h.raycast&&S.handlers&&S.eventCount&&Xy(h).getState().internal.interaction.push(h)},getPublicInstance:h=>h,prepareForCommit:()=>null,preparePortalMount:h=>Ff(h.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(h){var f;const{attach:g,parent:v}=(f=h.__r3f)!=null?f:{};g&&v&&UR(v,h,g),h.isObject3D&&(h.visible=!1),kf(h)},unhideInstance(h,f){var g;const{attach:v,parent:x}=(g=h.__r3f)!=null?g:{};v&&x&&sS(x,h,v),(h.isObject3D&&f.visible==null||f.visible)&&(h.visible=!0),kf(h)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():Xf.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&gi.fun(performance.now)?performance.now:gi.fun(Date.now)?Date.now:()=>0,scheduleTimeout:gi.fun(setTimeout)?setTimeout:void 0,cancelTimeout:gi.fun(clearTimeout)?clearTimeout:void 0}),applyProps:oS}}var OR,NR;const rS=n=>"colorSpace"in n||"outputColorSpace"in n,eO=()=>{var n;return(n=Qb.ColorManagement)!=null?n:null},tO=n=>n&&n.isOrthographicCamera,aY=n=>n&&n.hasOwnProperty("current"),w0=typeof window<"u"&&((OR=window.document)!=null&&OR.createElement||((NR=window.navigator)==null?void 0:NR.product)==="ReactNative")?I.useLayoutEffect:I.useEffect;function nO(n){const e=I.useRef(n);return w0(()=>void(e.current=n),[n]),e}function lY({set:n}){return w0(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class iO extends I.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}iO.getDerivedStateFromError=()=>({error:!0});const rO="__default",FR=new Map,cY=n=>n&&!!n.memoized&&!!n.changes;function sO(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const Wm=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()};function Xy(n){let e=n.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const gi={obj:n=>n===Object(n)&&!gi.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:r=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(gi.str(n)||gi.num(n)||gi.boo(n))return n===e;const s=gi.obj(n);if(s&&i==="reference")return n===e;const o=gi.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;if(s&&t==="shallow"&&i==="shallow"){for(a in r?e:n)if(!gi.equ(n[a],e[a],{strict:r,objects:"reference"}))return!1}else for(a in r?e:n)if(n[a]!==e[a])return!1;if(gi.und(a)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function uY(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function dY(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function Ff(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function HE(n,e){let t=n;if(e.includes("-")){const i=e.split("-"),r=i.pop();return t=i.reduce((s,o)=>s[o],n),{target:t,key:r}}else return{target:t,key:e}}const kR=/-\d+$/;function sS(n,e,t){if(gi.str(t)){if(kR.test(t)){const s=t.replace(kR,""),{target:o,key:a}=HE(n,s);Array.isArray(o[a])||(o[a]=[])}const{target:i,key:r}=HE(n,t);e.__r3f.previousAttach=i[r],i[r]=e}else e.__r3f.previousAttach=t(n,e)}function UR(n,e,t){var i,r;if(gi.str(t)){const{target:s,key:o}=HE(n,t),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(n,e);(r=e.__r3f)==null||delete r.previousAttach}function oO(n,{children:e,key:t,ref:i,...r},{children:s,key:o,ref:a,...l}={},u=!1){const h=n.__r3f,f=Object.entries(r),g=[];if(u){const x=Object.keys(l);for(let S=0;S<x.length;S++)r.hasOwnProperty(x[S])||f.unshift([x[S],rO+"remove"])}f.forEach(([x,S])=>{var w;if((w=n.__r3f)!=null&&w.primitive&&x==="object"||gi.equ(S,l[x]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(x))return g.push([x,S,!0,[]]);let _=[];x.includes("-")&&(_=x.split("-")),g.push([x,S,!1,_]);for(const b in r){const M=r[b];b.startsWith(`${x}-`)&&g.push([b,M,!1,b.split("-")])}});const v={...r};return h!=null&&h.memoizedProps&&h!=null&&h.memoizedProps.args&&(v.args=h.memoizedProps.args),h!=null&&h.memoizedProps&&h!=null&&h.memoizedProps.attach&&(v.attach=h.memoizedProps.attach),{memoized:v,changes:g}}function oS(n,e){var t;const i=n.__r3f,r=i?.root,s=r==null||r.getState==null?void 0:r.getState(),{memoized:o,changes:a}=cY(e)?e:oO(n,e),l=i?.eventCount;n.__r3f&&(n.__r3f.memoizedProps=o);for(let g=0;g<a.length;g++){let[v,x,S,w]=a[g];if(rS(n)){const T="srgb",L="srgb-linear";v==="encoding"?(v="colorSpace",x=x===3001?T:L):v==="outputEncoding"&&(v="outputColorSpace",x=x===3001?T:L)}let _=n,b=_[v];if(w.length&&(b=w.reduce((M,T)=>M[T],n),!(b&&b.set))){const[M,...T]=w.reverse();_=T.reverse().reduce((L,D)=>L[D],n),v=M}if(x===rO+"remove")if(_.constructor){let M=FR.get(_.constructor);M||(M=new _.constructor,FR.set(_.constructor,M)),x=M[v]}else x=0;if(S&&i)x?i.handlers[v]=x:delete i.handlers[v],i.eventCount=Object.keys(i.handlers).length;else if(b&&b.set&&(b.copy||b instanceof Yd)){if(Array.isArray(x))b.fromArray?b.fromArray(x):b.set(...x);else if(b.copy&&x&&x.constructor&&b.constructor===x.constructor)b.copy(x);else if(x!==void 0){var u;const M=(u=b)==null?void 0:u.isColor;!M&&b.setScalar?b.setScalar(x):b instanceof Yd&&x instanceof Yd?b.mask=x.mask:b.set(x),!eO()&&s&&!s.linear&&M&&b.convertSRGBToLinear()}}else{var h;if(_[v]=x,(h=_[v])!=null&&h.isTexture&&_[v].format===Qi&&_[v].type===Ts&&s){const M=_[v];rS(M)&&rS(s.gl)?M.colorSpace=s.gl.outputColorSpace:M.encoding=s.gl.outputEncoding}}kf(n)}if(i&&i.parent&&n.raycast&&l!==i.eventCount){const g=Xy(n).getState().internal,v=g.interaction.indexOf(n);v>-1&&g.interaction.splice(v,1),i.eventCount&&g.interaction.push(n)}return!(a.length===1&&a[0][0]==="onUpdate")&&a.length&&(t=n.__r3f)!=null&&t.parent&&VE(n),n}function kf(n){var e,t;const i=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();i&&i.internal.frames===0&&i.invalidate()}function VE(n){n.onUpdate==null||n.onUpdate(n)}function aO(n,e){n.manual||(tO(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function wy(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function hY(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return Xf.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Xf.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Xf.ContinuousEventPriority;default:return Xf.DefaultEventPriority}}function lO(n,e,t,i){const r=t.get(e);r&&(t.delete(e),t.size===0&&(n.delete(i),r.target.releasePointerCapture(i)))}function fY(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((i,r)=>{lO(t.capturedMap,e,i,r)})}function pY(n){function e(l){const{internal:u}=n.getState(),h=l.offsetX-u.initialClick[0],f=l.offsetY-u.initialClick[1];return Math.round(Math.sqrt(h*h+f*f))}function t(l){return l.filter(u=>["Move","Over","Enter","Out","Leave"].some(h=>{var f;return(f=u.__r3f)==null?void 0:f.handlers["onPointer"+h]}))}function i(l,u){const h=n.getState(),f=new Set,g=[],v=u?u(h.internal.interaction):h.internal.interaction;for(let _=0;_<v.length;_++){const b=Wm(v[_]);b&&(b.raycaster.camera=void 0)}h.previousRoot||h.events.compute==null||h.events.compute(l,h);function x(_){const b=Wm(_);if(!b||!b.events.enabled||b.raycaster.camera===null)return[];if(b.raycaster.camera===void 0){var M;b.events.compute==null||b.events.compute(l,b,(M=b.previousRoot)==null?void 0:M.getState()),b.raycaster.camera===void 0&&(b.raycaster.camera=null)}return b.raycaster.camera?b.raycaster.intersectObject(_,!0):[]}let S=v.flatMap(x).sort((_,b)=>{const M=Wm(_.object),T=Wm(b.object);return!M||!T?_.distance-b.distance:T.events.priority-M.events.priority||_.distance-b.distance}).filter(_=>{const b=wy(_);return f.has(b)?!1:(f.add(b),!0)});h.events.filter&&(S=h.events.filter(S,h));for(const _ of S){let b=_.object;for(;b;){var w;(w=b.__r3f)!=null&&w.eventCount&&g.push({..._,eventObject:b}),b=b.parent}}if("pointerId"in l&&h.internal.capturedMap.has(l.pointerId))for(let _ of h.internal.capturedMap.get(l.pointerId).values())f.has(wy(_.intersection))||g.push(_.intersection);return g}function r(l,u,h,f){const g=n.getState();if(l.length){const v={stopped:!1};for(const x of l){const S=Wm(x.object)||g,{raycaster:w,pointer:_,camera:b,internal:M}=S,T=new J(_.x,_.y,0).unproject(b),L=N=>{var V,Z;return(V=(Z=M.capturedMap.get(N))==null?void 0:Z.has(x.eventObject))!=null?V:!1},D=N=>{const V={intersection:x,target:u.target};M.capturedMap.has(N)?M.capturedMap.get(N).set(x.eventObject,V):M.capturedMap.set(N,new Map([[x.eventObject,V]])),u.target.setPointerCapture(N)},U=N=>{const V=M.capturedMap.get(N);V&&lO(M.capturedMap,x.eventObject,V,N)};let F={};for(let N in u){let V=u[N];typeof V!="function"&&(F[N]=V)}let k={...x,...F,pointer:_,intersections:l,stopped:v.stopped,delta:h,unprojectedPoint:T,ray:w.ray,camera:b,stopPropagation(){const N="pointerId"in u&&M.capturedMap.get(u.pointerId);if((!N||N.has(x.eventObject))&&(k.stopped=v.stopped=!0,M.hovered.size&&Array.from(M.hovered.values()).find(V=>V.eventObject===x.eventObject))){const V=l.slice(0,l.indexOf(x));s([...V,x])}},target:{hasPointerCapture:L,setPointerCapture:D,releasePointerCapture:U},currentTarget:{hasPointerCapture:L,setPointerCapture:D,releasePointerCapture:U},nativeEvent:u};if(f(k),v.stopped===!0)break}}return l}function s(l){const{internal:u}=n.getState();for(const h of u.hovered.values())if(!l.length||!l.find(f=>f.object===h.object&&f.index===h.index&&f.instanceId===h.instanceId)){const g=h.eventObject.__r3f,v=g?.handlers;if(u.hovered.delete(wy(h)),g!=null&&g.eventCount){const x={...h,intersections:l};v.onPointerOut==null||v.onPointerOut(x),v.onPointerLeave==null||v.onPointerLeave(x)}}}function o(l,u){for(let h=0;h<u.length;h++){const f=u[h].__r3f;f==null||f.handlers.onPointerMissed==null||f.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return u=>{const{internal:h}=n.getState();"pointerId"in u&&h.capturedMap.has(u.pointerId)&&requestAnimationFrame(()=>{h.capturedMap.has(u.pointerId)&&(h.capturedMap.delete(u.pointerId),s([]))})}}return function(h){const{onPointerMissed:f,internal:g}=n.getState();g.lastEvent.current=h;const v=l==="onPointerMove",x=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",w=i(h,v?t:void 0),_=x?e(h):0;l==="onPointerDown"&&(g.initialClick=[h.offsetX,h.offsetY],g.initialHits=w.map(M=>M.eventObject)),x&&!w.length&&_<=2&&(o(h,g.interaction),f&&f(h)),v&&s(w);function b(M){const T=M.eventObject,L=T.__r3f,D=L?.handlers;if(L!=null&&L.eventCount)if(v){if(D.onPointerOver||D.onPointerEnter||D.onPointerOut||D.onPointerLeave){const U=wy(M),F=g.hovered.get(U);F?F.stopped&&M.stopPropagation():(g.hovered.set(U,M),D.onPointerOver==null||D.onPointerOver(M),D.onPointerEnter==null||D.onPointerEnter(M))}D.onPointerMove==null||D.onPointerMove(M)}else{const U=D[l];U?(!x||g.initialHits.includes(T))&&(o(h,g.interaction.filter(F=>!g.initialHits.includes(F))),U(M)):x&&g.initialHits.includes(T)&&o(h,g.interaction.filter(F=>!g.initialHits.includes(F)))}}r(w,h,_,b)}}return{handlePointer:a}}const mY=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],cO=n=>!!(n!=null&&n.render),eM=I.createContext(null),gY=(n,e)=>{const t=JL((a,l)=>{const u=new J,h=new J,f=new J;function g(_=l().camera,b=h,M=l().size){const{width:T,height:L,top:D,left:U}=M,F=T/L;b.isVector3?f.copy(b):f.set(...b);const k=_.getWorldPosition(u).distanceTo(f);if(tO(_))return{width:T/_.zoom,height:L/_.zoom,top:D,left:U,factor:1,distance:k,aspect:F};{const N=_.fov*Math.PI/180,V=2*Math.tan(N/2)*k,Z=V*(T/L);return{width:Z,height:V,top:D,left:U,factor:T/Z,distance:k,aspect:F}}}let v;const x=_=>a(b=>({performance:{...b.performance,current:_}})),S=new Xe;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(_=1)=>n(l(),_),advance:(_,b)=>e(_,b,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new $b,pointer:S,mouse:S,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const _=l();v&&clearTimeout(v),_.performance.current!==_.performance.min&&x(_.performance.min),v=setTimeout(()=>x(l().performance.max),_.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:g},setEvents:_=>a(b=>({...b,events:{...b.events,..._}})),setSize:(_,b,M,T,L)=>{const D=l().camera,U={width:_,height:b,top:T||0,left:L||0,updateStyle:M};a(F=>({size:U,viewport:{...F.viewport,...g(D,h,U)}}))},setDpr:_=>a(b=>{const M=sO(_);return{viewport:{...b.viewport,dpr:M,initialDpr:b.viewport.initialDpr||M}}}),setFrameloop:(_="always")=>{const b=l().clock;b.stop(),b.elapsedTime=0,_!=="never"&&(b.start(),b.elapsedTime=0),a(()=>({frameloop:_}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:I.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(_,b,M)=>{const T=l().internal;return T.priority=T.priority+(b>0?1:0),T.subscribers.push({ref:_,priority:b,store:M}),T.subscribers=T.subscribers.sort((L,D)=>L.priority-D.priority),()=>{const L=l().internal;L!=null&&L.subscribers&&(L.priority=L.priority-(b>0?1:0),L.subscribers=L.subscribers.filter(D=>D.ref!==_))}}}}}),i=t.getState();let r=i.size,s=i.viewport.dpr,o=i.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:u,gl:h,set:f}=t.getState();if(l.width!==r.width||l.height!==r.height||u.dpr!==s){var g;r=l,s=u.dpr,aO(a,l),h.setPixelRatio(u.dpr);const v=(g=l.updateStyle)!=null?g:typeof HTMLCanvasElement<"u"&&h.domElement instanceof HTMLCanvasElement;h.setSize(l.width,l.height,v)}a!==o&&(o=a,f(v=>({viewport:{...v.viewport,...v.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};let Sy,vY=new Set,yY=new Set,xY=new Set;function aS(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function $m(n,e){switch(n){case"before":return aS(vY,e);case"after":return aS(yY,e);case"tail":return aS(xY,e)}}let lS,cS;function uS(n,e,t){let i=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),lS=e.internal.subscribers,Sy=0;Sy<lS.length;Sy++)cS=lS[Sy],cS.ref.current(cS.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function _Y(n){let e=!1,t=!1,i,r,s;function o(u){r=requestAnimationFrame(o),e=!0,i=0,$m("before",u),t=!0;for(const f of n.values()){var h;s=f.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((h=s.gl.xr)!=null&&h.isPresenting)&&(i+=uS(u,s))}if(t=!1,$m("after",u),i===0)return $m("tail",u),e=!1,cancelAnimationFrame(r)}function a(u,h=1){var f;if(!u)return n.forEach(g=>a(g.store.getState(),h));(f=u.gl.xr)!=null&&f.isPresenting||!u.internal.active||u.frameloop==="never"||(h>1?u.internal.frames=Math.min(60,u.internal.frames+h):t?u.internal.frames=2:u.internal.frames=1,e||(e=!0,requestAnimationFrame(o)))}function l(u,h=!0,f,g){if(h&&$m("before",u),f)uS(u,f,g);else for(const v of n.values())uS(u,v.store.getState());h&&$m("after",u)}return{loop:o,invalidate:a,advance:l}}function tM(){const n=I.useContext(eM);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function Vn(n=t=>t,e){return tM()(n,e)}function Rp(n,e=0){const t=tM(),i=t.getState().internal.subscribe,r=nO(n);return w0(()=>i(r,e,t),[e,i,t]),null}const zR=new WeakMap;function uO(n,e){return function(t,...i){let r=zR.get(t);return r||(r=new t,zR.set(t,r)),n&&n(r),Promise.all(i.map(s=>new Promise((o,a)=>r.load(s,l=>{l.scene&&Object.assign(l,uY(l.scene)),o(l)},e,l=>a(new Error(`Could not load ${s}: ${l?.message}`))))))}}function oc(n,e,t,i){const r=Array.isArray(e)?e:[e],s=ZX(uO(t,i),[n,...r],{equal:gi.equ});return Array.isArray(e)?s:s[0]}oc.preload=function(n,e,t){const i=Array.isArray(e)?e:[e];return QX(uO(t),[n,...i])};oc.clear=function(n,e){const t=Array.isArray(e)?e:[e];return eY([n,...t])};const gp=new Map,{invalidate:HR,advance:VR}=_Y(gp),{reconciler:Xg,applyProps:Wl}=oY(gp,hY),Rf={objects:"shallow",strict:!1},wY=(n,e)=>{const t=typeof n=="function"?n(e):n;return cO(t)?t:new Zb({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function SY(n,e){const t=typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement;if(e){const{width:i,height:r,top:s,left:o,updateStyle:a=t}=e;return{width:i,height:r,top:s,left:o,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:i,height:r,top:s,left:o}=n.parentElement.getBoundingClientRect();return{width:i,height:r,top:s,left:o,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function EY(n){const e=gp.get(n),t=e?.fiber,i=e?.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=i||gY(HR,VR),o=t||Xg.createContainer(s,Xf.ConcurrentRoot,null,!1,null,"",r,null);e||gp.set(n,{fiber:o,store:s});let a,l=!1,u;return{configure(h={}){let{gl:f,size:g,scene:v,events:x,onCreated:S,shadows:w=!1,linear:_=!1,flat:b=!1,legacy:M=!1,orthographic:T=!1,frameloop:L="always",dpr:D=[1,2],performance:U,raycaster:F,camera:k,onPointerMissed:N}=h,V=s.getState(),Z=V.gl;V.gl||V.set({gl:Z=wY(f,n)});let Q=V.raycaster;Q||V.set({raycaster:Q=new e1});const{params:le,...me}=F||{};if(gi.equ(me,Q,Rf)||Wl(Q,{...me}),gi.equ(le,Q.params,Rf)||Wl(Q,{params:{...Q.params,...le}}),!V.camera||V.camera===u&&!gi.equ(u,k,Rf)){u=k;const se=k instanceof u0,Y=se?k:T?new Ka(0,0,0,0,.1,1e3):new ji(75,0,.1,1e3);se||(Y.position.z=5,k&&(Wl(Y,k),("aspect"in k||"left"in k||"right"in k||"bottom"in k||"top"in k)&&(Y.manual=!0,Y.updateProjectionMatrix())),!V.camera&&!(k!=null&&k.rotation)&&Y.lookAt(0,0,0)),V.set({camera:Y}),Q.camera=Y}if(!V.scene){let se;v!=null&&v.isScene?se=v:(se=new bp,v&&Wl(se,v)),V.set({scene:Ff(se)})}if(!V.xr){var fe;const se=(Ve,we)=>{const Ne=s.getState();Ne.frameloop!=="never"&&VR(Ve,!0,Ne,we)},Y=()=>{const Ve=s.getState();Ve.gl.xr.enabled=Ve.gl.xr.isPresenting,Ve.gl.xr.setAnimationLoop(Ve.gl.xr.isPresenting?se:null),Ve.gl.xr.isPresenting||HR(Ve)},ge={connect(){const Ve=s.getState().gl;Ve.xr.addEventListener("sessionstart",Y),Ve.xr.addEventListener("sessionend",Y)},disconnect(){const Ve=s.getState().gl;Ve.xr.removeEventListener("sessionstart",Y),Ve.xr.removeEventListener("sessionend",Y)}};typeof((fe=Z.xr)==null?void 0:fe.addEventListener)=="function"&&ge.connect(),V.set({xr:ge})}if(Z.shadowMap){const se=Z.shadowMap.enabled,Y=Z.shadowMap.type;if(Z.shadowMap.enabled=!!w,gi.boo(w))Z.shadowMap.type=mg;else if(gi.str(w)){var xe;const ge={basic:oB,percentage:E_,soft:mg,variance:ga};Z.shadowMap.type=(xe=ge[w])!=null?xe:mg}else gi.obj(w)&&Object.assign(Z.shadowMap,w);(se!==Z.shadowMap.enabled||Y!==Z.shadowMap.type)&&(Z.shadowMap.needsUpdate=!0)}const X=eO();X&&("enabled"in X?X.enabled=!M:"legacyMode"in X&&(X.legacyMode=M)),l||Wl(Z,{outputEncoding:_?3e3:3001,toneMapping:b?Ya:cb}),V.legacy!==M&&V.set(()=>({legacy:M})),V.linear!==_&&V.set(()=>({linear:_})),V.flat!==b&&V.set(()=>({flat:b})),f&&!gi.fun(f)&&!cO(f)&&!gi.equ(f,Z,Rf)&&Wl(Z,f),x&&!V.events.handlers&&V.set({events:x(s)});const de=SY(n,g);return gi.equ(de,V.size,Rf)||V.setSize(de.width,de.height,de.updateStyle,de.top,de.left),D&&V.viewport.dpr!==sO(D)&&V.setDpr(D),V.frameloop!==L&&V.setFrameloop(L),V.onPointerMissed||V.set({onPointerMissed:N}),U&&!gi.equ(U,V.performance,Rf)&&V.set(se=>({performance:{...se.performance,...U}})),a=S,l=!0,this},render(h){return l||this.configure(),Xg.updateContainer(P.jsx(AY,{store:s,children:h,onCreated:a,rootElement:n}),o,null,()=>{}),s},unmount(){dO(n)}}}function AY({store:n,children:e,onCreated:t,rootElement:i}){return w0(()=>{const r=n.getState();r.set(s=>({internal:{...s.internal,active:!0}})),t&&t(r),n.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),P.jsx(eM.Provider,{value:n,children:e})}function dO(n,e){const t=gp.get(n),i=t?.fiber;if(i){const r=t?.store.getState();r&&(r.internal.active=!1),Xg.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var s,o,a,l;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=r.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=r.gl)!=null&&l.xr&&r.xr.disconnect(),dY(r),gp.delete(n)}catch{}},500)})}}function hO(n,e,t){return P.jsx(bY,{children:n,container:e,state:t},e.uuid)}function bY({state:n={},children:e,container:t}){const{events:i,size:r,...s}=n,o=tM(),[a]=I.useState(()=>new e1),[l]=I.useState(()=>new Xe),u=I.useCallback((f,g)=>{const v={...f};Object.keys(f).forEach(S=>{(mY.includes(S)||f[S]!==g[S]&&g[S])&&delete v[S]});let x;if(g&&r){const S=g.camera;x=f.viewport.getCurrentViewport(S,new J,r),S!==f.camera&&aO(S,r)}return{...v,scene:t,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...f.events,...g?.events,...i},size:{...f.size,...r},viewport:{...f.viewport,...x},...s}},[n]),[h]=I.useState(()=>{const f=o.getState();return JL((v,x)=>({...f,scene:t,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...f.events,...i},size:{...f.size,...r},...s,set:v,get:x,setEvents:S=>v(w=>({...w,events:{...w.events,...S}}))}))});return I.useEffect(()=>{const f=o.subscribe(g=>h.setState(v=>u(g,v)));return()=>{f()}},[u]),I.useEffect(()=>{h.setState(f=>u(o.getState(),f))},[u]),I.useEffect(()=>()=>{h.destroy()},[]),P.jsx(P.Fragment,{children:Xg.createPortal(P.jsx(eM.Provider,{value:h,children:e}),h,null)})}Xg.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:I.version});const dS={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function MY(n){const{handlePointer:e}=pY(n);return{priority:1,enabled:!0,compute(t,i,r){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(dS).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:r}=n.getState();(t=r.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{var i;const{set:r,events:s}=n.getState();s.disconnect==null||s.disconnect(),r(o=>({events:{...o.events,connected:t}})),Object.entries((i=s.handlers)!=null?i:[]).forEach(([o,a])=>{const[l,u]=dS[o];t.addEventListener(l,a,{passive:u})})},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){var r;Object.entries((r=i.handlers)!=null?r:[]).forEach(([s,o])=>{if(i&&i.connected instanceof HTMLElement){const[a]=dS[s];i.connected.removeEventListener(a,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}function GR(n,e){let t;return(...i)=>{window.clearTimeout(t),t=window.setTimeout(()=>n(...i),e)}}function CY({debounce:n,scroll:e,polyfill:t,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1}){const r=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!r)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,o]=I.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),a=I.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),l=n?typeof n=="number"?n:n.scroll:null,u=n?typeof n=="number"?n:n.resize:null,h=I.useRef(!1);I.useEffect(()=>(h.current=!0,()=>void(h.current=!1)));const[f,g,v]=I.useMemo(()=>{const _=()=>{if(!a.current.element)return;const{left:b,top:M,width:T,height:L,bottom:D,right:U,x:F,y:k}=a.current.element.getBoundingClientRect(),N={left:b,top:M,width:T,height:L,bottom:D,right:U,x:F,y:k};a.current.element instanceof HTMLElement&&i&&(N.height=a.current.element.offsetHeight,N.width=a.current.element.offsetWidth),Object.freeze(N),h.current&&!IY(a.current.lastBounds,N)&&o(a.current.lastBounds=N)};return[_,u?GR(_,u):_,l?GR(_,l):_]},[o,i,l,u]);function x(){a.current.scrollContainers&&(a.current.scrollContainers.forEach(_=>_.removeEventListener("scroll",v,!0)),a.current.scrollContainers=null),a.current.resizeObserver&&(a.current.resizeObserver.disconnect(),a.current.resizeObserver=null),a.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",a.current.orientationHandler))}function S(){a.current.element&&(a.current.resizeObserver=new r(v),a.current.resizeObserver.observe(a.current.element),e&&a.current.scrollContainers&&a.current.scrollContainers.forEach(_=>_.addEventListener("scroll",v,{capture:!0,passive:!0})),a.current.orientationHandler=()=>{v()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",a.current.orientationHandler))}const w=_=>{!_||_===a.current.element||(x(),a.current.element=_,a.current.scrollContainers=fO(_),S())};return RY(v,!!e),TY(g),I.useEffect(()=>{x(),S()},[e,v,g]),I.useEffect(()=>x,[]),[w,s,f]}function TY(n){I.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function RY(n,e){I.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function fO(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:r}=window.getComputedStyle(n);return[t,i,r].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...fO(n.parentElement)]}const PY=["x","y","top","bottom","left","right","width","height"],IY=(n,e)=>PY.every(t=>n[t]===e[t]);var DY=Object.defineProperty,BY=Object.defineProperties,LY=Object.getOwnPropertyDescriptors,jR=Object.getOwnPropertySymbols,OY=Object.prototype.hasOwnProperty,NY=Object.prototype.propertyIsEnumerable,WR=(n,e,t)=>e in n?DY(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,$R=(n,e)=>{for(var t in e||(e={}))OY.call(e,t)&&WR(n,t,e[t]);if(jR)for(var t of jR(e))NY.call(e,t)&&WR(n,t,e[t]);return n},FY=(n,e)=>BY(n,LY(e)),XR,YR;typeof window<"u"&&((XR=window.document)!=null&&XR.createElement||((YR=window.navigator)==null?void 0:YR.product)==="ReactNative")?I.useLayoutEffect:I.useEffect;function pO(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=n.child;for(;i;){const r=pO(i,e,t);if(r)return r;i=i.sibling}}function mO(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const KR=console.error;console.error=function(){const n=[...arguments].join("");if(n?.startsWith("Warning:")&&n.includes("useContext")){console.error=KR;return}return KR.apply(this,arguments)};const nM=mO(I.createContext(null));class gO extends I.Component{render(){return I.createElement(nM.Provider,{value:this._reactInternals},this.props.children)}}function kY(){const n=I.useContext(nM);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=I.useId();return I.useMemo(()=>{for(const i of[n,n?.alternate]){if(!i)continue;const r=pO(i,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(r)return r}},[n,e])}function UY(){const n=kY(),[e]=I.useState(()=>new Map);e.clear();let t=n;for(;t;){if(t.type&&typeof t.type=="object"){const r=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;r&&r!==nM&&!e.has(r)&&e.set(r,I.useContext(mO(r)))}t=t.return}return e}function zY(){const n=UY();return I.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>i=>I.createElement(e,null,I.createElement(t.Provider,FY($R({},i),{value:n.get(t)}))),e=>I.createElement(gO,$R({},e))),[n])}const HY=I.forwardRef(function({children:e,fallback:t,resize:i,style:r,gl:s,events:o=MY,eventSource:a,eventPrefix:l,shadows:u,linear:h,flat:f,legacy:g,orthographic:v,frameloop:x,dpr:S,performance:w,raycaster:_,camera:b,scene:M,onPointerMissed:T,onCreated:L,...D},U){I.useMemo(()=>n1($X),[]);const F=zY(),[k,N]=CY({scroll:!0,debounce:{scroll:50,resize:0},...i}),V=I.useRef(null),Z=I.useRef(null);I.useImperativeHandle(U,()=>V.current);const Q=nO(T),[le,me]=I.useState(!1),[fe,xe]=I.useState(!1);if(le)throw le;if(fe)throw fe;const X=I.useRef(null);w0(()=>{const se=V.current;N.width>0&&N.height>0&&se&&(X.current||(X.current=EY(se)),X.current.configure({gl:s,events:o,shadows:u,linear:h,flat:f,legacy:g,orthographic:v,frameloop:x,dpr:S,performance:w,raycaster:_,camera:b,scene:M,size:N,onPointerMissed:(...Y)=>Q.current==null?void 0:Q.current(...Y),onCreated:Y=>{Y.events.connect==null||Y.events.connect(a?aY(a)?a.current:a:Z.current),l&&Y.setEvents({compute:(ge,Ve)=>{const we=ge[l+"X"],Ne=ge[l+"Y"];Ve.pointer.set(we/Ve.size.width*2-1,-(Ne/Ve.size.height)*2+1),Ve.raycaster.setFromCamera(Ve.pointer,Ve.camera)}}),L?.(Y)}}),X.current.render(P.jsx(F,{children:P.jsx(iO,{set:xe,children:P.jsx(I.Suspense,{fallback:P.jsx(lY,{set:me}),children:e??null})})})))}),I.useEffect(()=>{const se=V.current;if(se)return()=>dO(se)},[]);const de=a?"none":"auto";return P.jsx("div",{ref:Z,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:de,...r},...D,children:P.jsx("div",{ref:k,style:{width:"100%",height:"100%"},children:P.jsx("canvas",{ref:V,style:{display:"block"},children:t})})})}),VY=I.forwardRef(function(e,t){return P.jsx(gO,{children:P.jsx(HY,{...e,ref:t})})});function ui(){return ui=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},ui.apply(null,arguments)}function GY(n,e){typeof n=="function"?n(e):n!=null&&(n.current=e)}function vO(...n){return e=>n.forEach(t=>GY(t,e))}function Pp(...n){return I.useCallback(vO(...n),n)}const yO=I.forwardRef((n,e)=>{const{children:t,...i}=n,r=I.Children.toArray(t),s=r.find(jY);if(s){const o=s.props.children,a=r.map(l=>l===s?I.Children.count(o)>1?I.Children.only(null):I.isValidElement(o)?o.props.children:null:l);return I.createElement(GE,ui({},i,{ref:e}),I.isValidElement(o)?I.cloneElement(o,void 0,a):null)}return I.createElement(GE,ui({},i,{ref:e}),t)});yO.displayName="Slot";const GE=I.forwardRef((n,e)=>{const{children:t,...i}=n;return I.isValidElement(t)?I.cloneElement(t,{...WY(i,t.props),ref:vO(e,t.ref)}):I.Children.count(t)>1?I.Children.only(null):null});GE.displayName="SlotClone";const xO=({children:n})=>I.createElement(I.Fragment,null,n);function jY(n){return I.isValidElement(n)&&n.type===xO}function WY(n,e){const t={...e};for(const i in e){const r=n[i],s=e[i];/^on[A-Z]/.test(i)?r&&s?t[i]=(...a)=>{s(...a),r(...a)}:r&&(t[i]=r):i==="style"?t[i]={...r,...s}:i==="className"&&(t[i]=[r,s].filter(Boolean).join(" "))}return{...n,...t}}const $Y=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],pu=$Y.reduce((n,e)=>{const t=I.forwardRef((i,r)=>{const{asChild:s,...o}=i,a=s?yO:e;return I.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),I.createElement(a,ui({},o,{ref:r}))});return t.displayName=`Primitive.${e}`,{...n,[e]:t}},{});function XY(n,e){n&&m_.flushSync(()=>n.dispatchEvent(e))}const YY=I.forwardRef((n,e)=>{var t;const{container:i=globalThis==null||(t=globalThis.document)===null||t===void 0?void 0:t.body,...r}=n;return i?fk.createPortal(I.createElement(pu.div,ui({},r,{ref:e})),i):null}),KY=YY;var JR=Object.prototype.hasOwnProperty;function Yg(n,e){var t,i;if(n===e)return!0;if(n&&e&&(t=n.constructor)===e.constructor){if(t===Date)return n.getTime()===e.getTime();if(t===RegExp)return n.toString()===e.toString();if(t===Array){if((i=n.length)===e.length)for(;i--&&Yg(n[i],e[i]););return i===-1}if(!t||typeof n=="object"){i=0;for(t in n)if(JR.call(n,t)&&++i&&!JR.call(e,t)||!(t in e)||!Yg(n[t],e[t]))return!1;return Object.keys(e).length===i}}return n!==n&&e!==e}function i1(n,e){if(Object.is(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;const t=Object.keys(n);if(t.length!==Object.keys(e).length)return!1;for(let i=0;i<t.length;i++)if(!Object.prototype.hasOwnProperty.call(e,t[i])||!Object.is(n[t[i]],e[t[i]]))return!1;return!0}var r1=function(e,t,i,r){this.name=e,this.fn=t,this.args=i,this.modifiers=r};r1.prototype._test=function(e){var t=this.fn;try{Zf(this.modifiers.slice(),t,this)(e)}catch{t=function(){return!1}}try{return Zf(this.modifiers.slice(),t,this)(e)}catch{return!1}};r1.prototype._check=function(e){try{Zf(this.modifiers.slice(),this.fn,this)(e)}catch{if(Zf(this.modifiers.slice(),function(i){return i},this)(!1))return}if(!Zf(this.modifiers.slice(),this.fn,this)(e))throw null};r1.prototype._testAsync=function(e){var t=this;return new Promise(function(i,r){wO(t.modifiers.slice(),t.fn,t)(e).then(function(s){s?i(e):r(null)}).catch(function(s){return r(s)})})};function _O(n,e){return e===void 0&&(e="simple"),typeof n=="object"?n[e]:n}function Zf(n,e,t){if(n.length){var i=n.shift(),r=Zf(n,e,t);return i.perform(r,t)}else return _O(e)}function wO(n,e,t){if(n.length){var i=n.shift(),r=wO(n,e,t);return i.performAsync(r,t)}else return function(s){return Promise.resolve(_O(e,"async")(s))}}var JY=function(e,t,i){this.name=e,this.perform=t,this.performAsync=i},iM=(function(n){function e(t,i,r,s){for(var o=[],a=arguments.length-4;a-- >0;)o[a]=arguments[a+4];n.call(this,o),n.captureStackTrace&&n.captureStackTrace(this,e),this.rule=t,this.value=i,this.cause=r,this.target=s}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e})(Error),el=function(e,t){e===void 0&&(e=[]),t===void 0&&(t=[]),this.chain=e,this.nextRuleModifiers=t};el.prototype._applyRule=function(e,t){var i=this;return function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];return i.chain.push(new r1(t,e.apply(i,r),r,i.nextRuleModifiers)),i.nextRuleModifiers=[],i}};el.prototype._applyModifier=function(e,t){return this.nextRuleModifiers.push(new JY(t,e.simple,e.async)),this};el.prototype._clone=function(){return new el(this.chain.slice(),this.nextRuleModifiers.slice())};el.prototype.test=function(e){return this.chain.every(function(t){return t._test(e)})};el.prototype.testAll=function(e){var t=[];return this.chain.forEach(function(i){try{i._check(e)}catch(r){t.push(new iM(i,e,r))}}),t};el.prototype.check=function(e){this.chain.forEach(function(t){try{t._check(e)}catch(i){throw new iM(t,e,i)}})};el.prototype.testAsync=function(e){var t=this;return new Promise(function(i,r){SO(e,t.chain.slice(),i,r)})};function SO(n,e,t,i){if(e.length){var r=e.shift();r._testAsync(n).then(function(){SO(n,e,t,i)},function(s){i(new iM(r,n,s))})}else t(n)}var qR=function(n,e){return e&&typeof n=="string"&&n.trim().length===0?!0:n==null};function qY(n,e){return e===void 0&&(e=!1),{simple:function(t){return qR(t,e)||n.check(t)===void 0},async:function(t){return qR(t,e)||n.testAsync(t)}}}function Js(){return typeof Proxy<"u"?EO(new el):jE(new el)}var Kg={};Js.extend=function(n){Object.assign(Kg,n)};Js.clearCustomRules=function(){Kg={}};function EO(n){return new Proxy(n,{get:function(t,i){if(i in t)return t[i];var r=EO(n._clone());if(i in Xx)return r._applyModifier(Xx[i],i);if(i in Kg)return r._applyRule(Kg[i],i);if(i in WE)return r._applyRule(WE[i],i)}})}function jE(n){var e=function(r,s){return Object.keys(r).forEach(function(o){s[o]=function(){for(var a=[],l=arguments.length;l--;)a[l]=arguments[l];var u=jE(s._clone()),h=u._applyRule(r[o],o).apply(void 0,a);return h}}),s},t=e(WE,n),i=e(Kg,t);return Object.keys(Xx).forEach(function(r){Object.defineProperty(i,r,{get:function(){var s=jE(i._clone());return s._applyModifier(Xx[r],r)}})}),i}var Xx={not:{simple:function(n){return function(e){return!n(e)}},async:function(n){return function(e){return Promise.resolve(n(e)).then(function(t){return!t}).catch(function(){return!0})}}},some:{simple:function(n){return function(e){return Ey(e).some(function(t){try{return n(t)}catch{return!1}})}},async:function(n){return function(e){return Promise.all(Ey(e).map(function(t){try{return n(t).catch(function(){return!1})}catch{return!1}})).then(function(t){return t.some(Boolean)})}}},every:{simple:function(n){return function(e){return e!==!1&&Ey(e).every(n)}},async:function(n){return function(e){return Promise.all(Ey(e).map(n)).then(function(t){return t.every(Boolean)})}}},strict:{simple:function(n,e){return function(t){return ZR(e)&&t&&typeof t=="object"?Object.keys(e.args[0]).length===Object.keys(t).length&&n(t):n(t)}},async:function(n,e){return function(t){return Promise.resolve(n(t)).then(function(i){return ZR(e)&&t&&typeof t=="object"?Object.keys(e.args[0]).length===Object.keys(t).length&&i:i}).catch(function(){return!1})}}}};function ZR(n){return n&&n.name==="schema"&&n.args.length>0&&typeof n.args[0]=="object"}function Ey(n){return typeof n=="string"?n.split(""):n}var WE={equal:function(n){return function(e){return e==n}},exact:function(n){return function(e){return e===n}},number:function(n){return n===void 0&&(n=!0),function(e){return typeof e=="number"&&(n||isFinite(e))}},integer:function(){return function(n){var e=Number.isInteger||ZY;return e(n)}},numeric:function(){return function(n){return!isNaN(parseFloat(n))&&isFinite(n)}},string:function(){return Pf("string")},boolean:function(){return Pf("boolean")},undefined:function(){return Pf("undefined")},null:function(){return Pf("null")},array:function(){return Pf("array")},object:function(){return Pf("object")},instanceOf:function(n){return function(e){return e instanceof n}},pattern:function(n){return function(e){return n.test(e)}},lowercase:function(){return function(n){return typeof n=="boolean"||n===n.toLowerCase()&&n.trim()!==""}},uppercase:function(){return function(n){return n===n.toUpperCase()&&n.trim()!==""}},vowel:function(){return function(n){return/^[aeiou]+$/i.test(n)}},consonant:function(){return function(n){return/^(?=[^aeiou])([a-z]+)$/i.test(n)}},first:function(n){return function(e){return e[0]==n}},last:function(n){return function(e){return e[e.length-1]==n}},empty:function(){return function(n){return n.length===0}},length:function(n,e){return function(t){return t.length>=n&&t.length<=(e||n)}},minLength:function(n){return function(e){return e.length>=n}},maxLength:function(n){return function(e){return e.length<=n}},negative:function(){return function(n){return n<0}},positive:function(){return function(n){return n>=0}},between:function(n,e){return function(t){return t>=n&&t<=e}},range:function(n,e){return function(t){return t>=n&&t<=e}},lessThan:function(n){return function(e){return e<n}},lessThanOrEqual:function(n){return function(e){return e<=n}},greaterThan:function(n){return function(e){return e>n}},greaterThanOrEqual:function(n){return function(e){return e>=n}},even:function(){return function(n){return n%2===0}},odd:function(){return function(n){return n%2!==0}},includes:function(n){return function(e){return~e.indexOf(n)}},schema:function(n){return QY(n)},passesAnyOf:function(){for(var n=[],e=arguments.length;e--;)n[e]=arguments[e];return function(t){return n.some(function(i){return i.test(t)})}},optional:qY};function Pf(n){return function(e){return Array.isArray(e)&&n==="array"||e===null&&n==="null"||typeof e===n}}function ZY(n){return typeof n=="number"&&isFinite(n)&&Math.floor(n)===n}function QY(n){return{simple:function(e){var t=[];if(Object.keys(n).forEach(function(i){var r=n[i];try{r.check((e||{})[i])}catch(s){s.target=i,t.push(s)}}),t.length>0)throw t;return!0},async:function(e){var t=[],i=Object.keys(n).map(function(r){var s=n[r];return s.testAsync((e||{})[r]).catch(function(o){o.target=r,t.push(o)})});return Promise.all(i).then(function(){if(t.length>0)throw t;return!0})}}}var si="colors",ws="sizes",Ut="space",eK={gap:Ut,gridGap:Ut,columnGap:Ut,gridColumnGap:Ut,rowGap:Ut,gridRowGap:Ut,inset:Ut,insetBlock:Ut,insetBlockEnd:Ut,insetBlockStart:Ut,insetInline:Ut,insetInlineEnd:Ut,insetInlineStart:Ut,margin:Ut,marginTop:Ut,marginRight:Ut,marginBottom:Ut,marginLeft:Ut,marginBlock:Ut,marginBlockEnd:Ut,marginBlockStart:Ut,marginInline:Ut,marginInlineEnd:Ut,marginInlineStart:Ut,padding:Ut,paddingTop:Ut,paddingRight:Ut,paddingBottom:Ut,paddingLeft:Ut,paddingBlock:Ut,paddingBlockEnd:Ut,paddingBlockStart:Ut,paddingInline:Ut,paddingInlineEnd:Ut,paddingInlineStart:Ut,top:Ut,right:Ut,bottom:Ut,left:Ut,scrollMargin:Ut,scrollMarginTop:Ut,scrollMarginRight:Ut,scrollMarginBottom:Ut,scrollMarginLeft:Ut,scrollMarginX:Ut,scrollMarginY:Ut,scrollMarginBlock:Ut,scrollMarginBlockEnd:Ut,scrollMarginBlockStart:Ut,scrollMarginInline:Ut,scrollMarginInlineEnd:Ut,scrollMarginInlineStart:Ut,scrollPadding:Ut,scrollPaddingTop:Ut,scrollPaddingRight:Ut,scrollPaddingBottom:Ut,scrollPaddingLeft:Ut,scrollPaddingX:Ut,scrollPaddingY:Ut,scrollPaddingBlock:Ut,scrollPaddingBlockEnd:Ut,scrollPaddingBlockStart:Ut,scrollPaddingInline:Ut,scrollPaddingInlineEnd:Ut,scrollPaddingInlineStart:Ut,fontSize:"fontSizes",background:si,backgroundColor:si,backgroundImage:si,borderImage:si,border:si,borderBlock:si,borderBlockEnd:si,borderBlockStart:si,borderBottom:si,borderBottomColor:si,borderColor:si,borderInline:si,borderInlineEnd:si,borderInlineStart:si,borderLeft:si,borderLeftColor:si,borderRight:si,borderRightColor:si,borderTop:si,borderTopColor:si,caretColor:si,color:si,columnRuleColor:si,fill:si,outline:si,outlineColor:si,stroke:si,textDecorationColor:si,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:ws,minBlockSize:ws,maxBlockSize:ws,inlineSize:ws,minInlineSize:ws,maxInlineSize:ws,width:ws,minWidth:ws,maxWidth:ws,height:ws,minHeight:ws,maxHeight:ws,flexBasis:ws,gridTemplateColumns:ws,gridTemplateRows:ws,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},tK=(n,e)=>typeof e=="function"?{"()":Function.prototype.toString.call(e)}:e,Ip=()=>{const n=Object.create(null);return(e,t,...i)=>{const r=(s=>JSON.stringify(s,tK))(e);return r in n?n[r]:n[r]=t(e,...i)}},Jd=Symbol.for("sxs.internal"),rM=(n,e)=>Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)),QR=n=>{for(const e in n)return!0;return!1},{hasOwnProperty:nK}=Object.prototype,$E=n=>n.includes("-")?n:n.replace(/[A-Z]/g,(e=>"-"+e.toLowerCase())),iK=/\s+(?![^()]*\))/,If=n=>e=>n(...typeof e=="string"?String(e).split(iK):[e]),eP={appearance:n=>({WebkitAppearance:n,appearance:n}),backfaceVisibility:n=>({WebkitBackfaceVisibility:n,backfaceVisibility:n}),backdropFilter:n=>({WebkitBackdropFilter:n,backdropFilter:n}),backgroundClip:n=>({WebkitBackgroundClip:n,backgroundClip:n}),boxDecorationBreak:n=>({WebkitBoxDecorationBreak:n,boxDecorationBreak:n}),clipPath:n=>({WebkitClipPath:n,clipPath:n}),content:n=>({content:n.includes('"')||n.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(n)?n:`"${n}"`}),hyphens:n=>({WebkitHyphens:n,hyphens:n}),maskImage:n=>({WebkitMaskImage:n,maskImage:n}),maskSize:n=>({WebkitMaskSize:n,maskSize:n}),tabSize:n=>({MozTabSize:n,tabSize:n}),textSizeAdjust:n=>({WebkitTextSizeAdjust:n,textSizeAdjust:n}),userSelect:n=>({WebkitUserSelect:n,userSelect:n}),marginBlock:If(((n,e)=>({marginBlockStart:n,marginBlockEnd:e||n}))),marginInline:If(((n,e)=>({marginInlineStart:n,marginInlineEnd:e||n}))),maxSize:If(((n,e)=>({maxBlockSize:n,maxInlineSize:e||n}))),minSize:If(((n,e)=>({minBlockSize:n,minInlineSize:e||n}))),paddingBlock:If(((n,e)=>({paddingBlockStart:n,paddingBlockEnd:e||n}))),paddingInline:If(((n,e)=>({paddingInlineStart:n,paddingInlineEnd:e||n})))},hS=/([\d.]+)([^]*)/,rK=(n,e)=>n.length?n.reduce(((t,i)=>(t.push(...e.map((r=>r.includes("&")?r.replace(/&/g,/[ +>|~]/.test(i)&&/&.*&/.test(r)?`:is(${i})`:i):i+" "+r))),t)),[]):e,sK=(n,e)=>n in oK&&typeof e=="string"?e.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,((t,i,r,s)=>i+(r==="stretch"?`-moz-available${s};${$E(n)}:${i}-webkit-fill-available`:`-moz-fit-content${s};${$E(n)}:${i}fit-content`)+s)):String(e),oK={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},ac=n=>n?n+"-":"",AO=(n,e,t)=>n.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,((i,r,s,o,a)=>o=="$"==!!s?i:(r||o=="--"?"calc(":"")+"var(--"+(o==="$"?ac(e)+(a.includes("$")?"":ac(t))+a.replace(/\$/g,"-"):a)+")"+(r||o=="--"?"*"+(r||"")+(s||"1")+")":""))),aK=/\s*,\s*(?![^()]*\))/,lK=Object.prototype.toString,Yf=(n,e,t,i,r)=>{let s,o,a;const l=(u,h,f)=>{let g,v;const x=S=>{for(g in S){const b=g.charCodeAt(0)===64,M=b&&Array.isArray(S[g])?S[g]:[S[g]];for(v of M){const T=/[A-Z]/.test(_=g)?_:_.replace(/-[^]/g,(D=>D[1].toUpperCase())),L=typeof v=="object"&&v&&v.toString===lK&&(!i.utils[T]||!h.length);if(T in i.utils&&!L){const D=i.utils[T];if(D!==o){o=D,x(D(v)),o=null;continue}}else if(T in eP){const D=eP[T];if(D!==a){a=D,x(D(v)),a=null;continue}}if(b&&(w=g.slice(1)in i.media?"@media "+i.media[g.slice(1)]:g,g=w.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,((D,U,F,k,N,V)=>{const Z=hS.test(U),Q=.0625*(Z?-1:1),[le,me]=Z?[k,U]:[U,k];return"("+(F[0]==="="?"":F[0]===">"===Z?"max-":"min-")+le+":"+(F[0]!=="="&&F.length===1?me.replace(hS,((fe,xe,X)=>Number(xe)+Q*(F===">"?1:-1)+X)):me)+(N?") and ("+(N[0]===">"?"min-":"max-")+le+":"+(N.length===1?V.replace(hS,((fe,xe,X)=>Number(xe)+Q*(N===">"?-1:1)+X)):V):"")+")"}))),L){const D=b?f.concat(g):[...f],U=b?[...h]:rK(h,g.split(aK));s!==void 0&&r(tP(...s)),s=void 0,l(v,U,D)}else s===void 0&&(s=[[],h,f]),g=b||g.charCodeAt(0)!==36?g:`--${ac(i.prefix)}${g.slice(1).replace(/\$/g,"-")}`,v=L?v:typeof v=="number"?v&&T in cK?String(v)+"px":String(v):AO(sK(T,v??""),i.prefix,i.themeMap[T]),s[0].push(`${b?`${g} `:`${$E(g)}:`}${v}`)}}var w,_};x(u),s!==void 0&&r(tP(...s)),s=void 0};l(n,e,t)},tP=(n,e,t)=>`${t.map((i=>`${i}{`)).join("")}${e.length?`${e.join(",")}{`:""}${n.join(";")}${e.length?"}":""}${Array(t.length?t.length+1:0).join("}")}`,cK={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},nP=n=>String.fromCharCode(n+(n>25?39:97)),qd=n=>(e=>{let t,i="";for(t=Math.abs(e);t>52;t=t/52|0)i=nP(t%52)+i;return nP(t%52)+i})(((e,t)=>{let i=t.length;for(;i;)e=33*e^t.charCodeAt(--i);return e})(5381,JSON.stringify(n))>>>0),cg=["themed","global","styled","onevar","resonevar","allvar","inline"],uK=n=>{if(n.href&&!n.href.startsWith(location.origin))return!1;try{return!!n.cssRules}catch{return!1}},dK=n=>{let e;const t=()=>{const{cssRules:r}=e.sheet;return[].map.call(r,((s,o)=>{const{cssText:a}=s;let l="";if(a.startsWith("--sxs"))return"";if(r[o-1]&&(l=r[o-1].cssText).startsWith("--sxs")){if(!s.cssRules.length)return"";for(const u in e.rules)if(e.rules[u].group===s)return`--sxs{--sxs:${[...e.rules[u].cache].join(" ")}}${a}`;return s.cssRules.length?`${l}${a}`:""}return a})).join("")},i=()=>{if(e){const{rules:a,sheet:l}=e;if(!l.deleteRule){for(;Object(Object(l.cssRules)[0]).type===3;)l.cssRules.splice(0,1);l.cssRules=[]}for(const u in a)delete a[u]}const r=Object(n).styleSheets||[];for(const a of r)if(uK(a)){for(let l=0,u=a.cssRules;u[l];++l){const h=Object(u[l]);if(h.type!==1)continue;const f=Object(u[l+1]);if(f.type!==4)continue;++l;const{cssText:g}=h;if(!g.startsWith("--sxs"))continue;const v=g.slice(14,-3).trim().split(/\s+/),x=cg[v[0]];x&&(e||(e={sheet:a,reset:i,rules:{},toString:t}),e.rules[x]={group:f,index:l,cache:new Set(v)})}if(e)break}if(!e){const a=(l,u)=>({type:u,cssRules:[],insertRule(h,f){this.cssRules.splice(f,0,a(h,{import:3,undefined:1}[(h.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return l==="@media{}"?`@media{${[].map.call(this.cssRules,(h=>h.cssText)).join("")}}`:l}});e={sheet:n?(n.head||n).appendChild(document.createElement("style")).sheet:a("","text/css"),rules:{},reset:i,toString:t}}const{sheet:s,rules:o}=e;for(let a=cg.length-1;a>=0;--a){const l=cg[a];if(!o[l]){const u=cg[a+1],h=o[u]?o[u].index:s.cssRules.length;s.insertRule("@media{}",h),s.insertRule(`--sxs{--sxs:${a}}`,h),o[l]={group:s.cssRules[h+1],index:h,cache:new Set([a])}}hK(o[l])}};return i(),e},hK=n=>{const e=n.group;let t=e.cssRules.length;n.apply=i=>{try{e.insertRule(i,t),++t}catch{}}},Xm=Symbol(),fK=Ip(),iP=(n,e)=>fK(n,(()=>(...t)=>{let i={type:null,composers:new Set};for(const r of t)if(r!=null)if(r[Jd]){i.type==null&&(i.type=r[Jd].type);for(const s of r[Jd].composers)i.composers.add(s)}else r.constructor!==Object||r.$$typeof?i.type==null&&(i.type=r):i.composers.add(pK(r,n));return i.type==null&&(i.type="span"),i.composers.size||i.composers.add(["PJLV",{},[],[],{},[]]),mK(n,i,e)})),pK=({variants:n,compoundVariants:e,defaultVariants:t,...i},r)=>{const s=`${ac(r.prefix)}c-${qd(i)}`,o=[],a=[],l=Object.create(null),u=[];for(const g in t)l[g]=String(t[g]);if(typeof n=="object"&&n)for(const g in n){h=l,f=g,nK.call(h,f)||(l[g]="undefined");const v=n[g];for(const x in v){const S={[g]:String(x)};String(x)==="undefined"&&u.push(g);const w=v[x],_=[S,w,!QR(w)];o.push(_)}}var h,f;if(typeof e=="object"&&e)for(const g of e){let{css:v,...x}=g;v=typeof v=="object"&&v||{};for(const w in x)x[w]=String(x[w]);const S=[x,v,!QR(v)];a.push(S)}return[s,i,o,a,l,u]},mK=(n,e,t)=>{const[i,r,s,o]=gK(e.composers),a=typeof e.type=="function"||e.type.$$typeof?(f=>{function g(){for(let v=0;v<g[Xm].length;v++){const[x,S]=g[Xm][v];f.rules[x].apply(S)}return g[Xm]=[],null}return g[Xm]=[],g.rules={},cg.forEach((v=>g.rules[v]={apply:x=>g[Xm].push([v,x])})),g})(t):null,l=(a||t).rules,u=`.${i}${r.length>1?`:where(.${r.slice(1).join(".")})`:""}`,h=f=>{f=typeof f=="object"&&f||vK;const{css:g,...v}=f,x={};for(const _ in s)if(delete v[_],_ in f){let b=f[_];typeof b=="object"&&b?x[_]={"@initial":s[_],...b}:(b=String(b),x[_]=b!=="undefined"||o.has(_)?b:s[_])}else x[_]=s[_];const S=new Set([...r]);for(const[_,b,M,T]of e.composers){t.rules.styled.cache.has(_)||(t.rules.styled.cache.add(_),Yf(b,[`.${_}`],[],n,(U=>{l.styled.apply(U)})));const L=rP(M,x,n.media),D=rP(T,x,n.media,!0);for(const U of L)if(U!==void 0)for(const[F,k,N]of U){const V=`${_}-${qd(k)}-${F}`;S.add(V);const Z=(N?t.rules.resonevar:t.rules.onevar).cache,Q=N?l.resonevar:l.onevar;Z.has(V)||(Z.add(V),Yf(k,[`.${V}`],[],n,(le=>{Q.apply(le)})))}for(const U of D)if(U!==void 0)for(const[F,k]of U){const N=`${_}-${qd(k)}-${F}`;S.add(N),t.rules.allvar.cache.has(N)||(t.rules.allvar.cache.add(N),Yf(k,[`.${N}`],[],n,(V=>{l.allvar.apply(V)})))}}if(typeof g=="object"&&g){const _=`${i}-i${qd(g)}-css`;S.add(_),t.rules.inline.cache.has(_)||(t.rules.inline.cache.add(_),Yf(g,[`.${_}`],[],n,(b=>{l.inline.apply(b)})))}for(const _ of String(f.className||"").trim().split(/\s+/))_&&S.add(_);const w=v.className=[...S].join(" ");return{type:e.type,className:w,selector:u,props:v,toString:()=>w,deferredInjector:a}};return rM(h,{className:i,selector:u,[Jd]:e,toString:()=>(t.rules.styled.cache.has(i)||h(),i)})},gK=n=>{let e="";const t=[],i={},r=[];for(const[s,,,,o,a]of n){e===""&&(e=s),t.push(s),r.push(...a);for(const l in o){const u=o[l];(i[l]===void 0||u!=="undefined"||a.includes(u))&&(i[l]=u)}}return[e,t,i,new Set(r)]},rP=(n,e,t,i)=>{const r=[];e:for(let[s,o,a]of n){if(a)continue;let l,u=0,h=!1;for(l in s){const f=s[l];let g=e[l];if(g!==f){if(typeof g!="object"||!g)continue e;{let v,x,S=0;for(const w in g){if(f===String(g[w])){if(w!=="@initial"){const _=w.slice(1);(x=x||[]).push(_ in t?t[_]:w.replace(/^@media ?/,"")),h=!0}u+=S,v=!0}++S}if(x&&x.length&&(o={["@media "+x.join(", ")]:o}),!v)continue e}}}(r[u]=r[u]||[]).push([i?"cv":`${l}-${s[l]}`,o,h])}return r},vK={},yK=Ip(),xK=(n,e)=>yK(n,(()=>(...t)=>{const i=()=>{for(let r of t){r=typeof r=="object"&&r||{};let s=qd(r);if(!e.rules.global.cache.has(s)){if(e.rules.global.cache.add(s),"@import"in r){let o=[].indexOf.call(e.sheet.cssRules,e.rules.themed.group)-1;for(let a of[].concat(r["@import"]))a=a.includes('"')||a.includes("'")?a:`"${a}"`,e.sheet.insertRule(`@import ${a};`,o++);delete r["@import"]}Yf(r,[],[],n,(o=>{e.rules.global.apply(o)}))}}return""};return rM(i,{toString:i})})),_K=Ip(),wK=(n,e)=>_K(n,(()=>t=>{const i=`${ac(n.prefix)}k-${qd(t)}`,r=()=>{if(!e.rules.global.cache.has(i)){e.rules.global.cache.add(i);const s=[];Yf(t,[],[],n,(a=>s.push(a)));const o=`@keyframes ${i}{${s.join("")}}`;e.rules.global.apply(o)}return i};return rM(r,{get name(){return r()},toString:r})})),SK=class{constructor(n,e,t,i){this.token=n==null?"":String(n),this.value=e==null?"":String(e),this.scale=t==null?"":String(t),this.prefix=i==null?"":String(i)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+ac(this.prefix)+ac(this.scale)+this.token}toString(){return this.computedValue}},EK=Ip(),AK=(n,e)=>EK(n,(()=>(t,i)=>{i=typeof t=="object"&&t||Object(i);const r=`.${t=(t=typeof t=="string"?t:"")||`${ac(n.prefix)}t-${qd(i)}`}`,s={},o=[];for(const l in i){s[l]={};for(const u in i[l]){const h=`--${ac(n.prefix)}${l}-${u}`,f=AO(String(i[l][u]),n.prefix,l);s[l][u]=new SK(u,f,l,n.prefix),o.push(`${h}:${f}`)}}const a=()=>{if(o.length&&!e.rules.themed.cache.has(t)){e.rules.themed.cache.add(t);const l=`${i===n.theme?":root,":""}.${t}{${o.join(";")}}`;e.rules.themed.apply(l)}return t};return{...s,get className(){return a()},selector:r,toString:a}})),bK=Ip(),MK=Ip(),CK=n=>{const e=(t=>{let i=!1;const r=bK(t,(s=>{i=!0;const o="prefix"in(s=typeof s=="object"&&s||{})?String(s.prefix):"",a=typeof s.media=="object"&&s.media||{},l=typeof s.root=="object"?s.root||null:globalThis.document||null,u=typeof s.theme=="object"&&s.theme||{},h={prefix:o,media:a,theme:u,themeMap:typeof s.themeMap=="object"&&s.themeMap||{...eK},utils:typeof s.utils=="object"&&s.utils||{}},f=dK(l),g={css:iP(h,f),globalCss:xK(h,f),keyframes:wK(h,f),createTheme:AK(h,f),reset(){f.reset(),g.theme.toString()},theme:{},sheet:f,config:h,prefix:o,getCssText:f.toString,toString:f.toString};return String(g.theme=g.createTheme(u)),g}));return i||r.reset(),r})(n);return e.styled=(({config:t,sheet:i})=>MK(t,(()=>{const r=iP(t,i);return(...s)=>{const o=r(...s),a=o[Jd].type,l=oe.forwardRef(((u,h)=>{const f=u&&u.as||a,{props:g,deferredInjector:v}=o(u);return delete g.as,g.ref=h,v?oe.createElement(oe.Fragment,null,oe.createElement(f,g),oe.createElement(v,null)):oe.createElement(f,g)}));return l.className=o.className,l.displayName=`Styled.${a.displayName||a.name||a}`,l.selector=o.selector,l.toString=()=>o.selector,l[Jd]=o[Jd],l}})))(e),e};function TK(n,e,t){return Math.max(e,Math.min(n,t))}const is={toVector(n,e){return n===void 0&&(n=e),Array.isArray(n)?n:[n,n]},add(n,e){return[n[0]+e[0],n[1]+e[1]]},sub(n,e){return[n[0]-e[0],n[1]-e[1]]},addTo(n,e){n[0]+=e[0],n[1]+=e[1]},subTo(n,e){n[0]-=e[0],n[1]-=e[1]}};function sP(n,e,t){return e===0||Math.abs(e)===1/0?Math.pow(n,t*5):n*e*t/(e+t*n)}function oP(n,e,t,i=.15){return i===0?TK(n,e,t):n<e?-sP(e-n,t-e,i)+e:n>t?+sP(n-t,t-e,i)+t:n}function RK(n,[e,t],[i,r]){const[[s,o],[a,l]]=n;return[oP(e,s,o,i),oP(t,a,l,r)]}function PK(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function IK(n){var e=PK(n,"string");return typeof e=="symbol"?e:String(e)}function $s(n,e,t){return e=IK(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function aP(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function ki(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?aP(Object(t),!0).forEach(function(i){$s(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):aP(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}const bO={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function lP(n){return n?n[0].toUpperCase()+n.slice(1):""}const DK=["enter","leave"];function BK(n=!1,e){return n&&!DK.includes(e)}function LK(n,e="",t=!1){const i=bO[n],r=i&&i[e]||e;return"on"+lP(n)+lP(r)+(BK(t,r)?"Capture":"")}const OK=["gotpointercapture","lostpointercapture"];function NK(n){let e=n.substring(2).toLowerCase();const t=!!~e.indexOf("passive");t&&(e=e.replace("passive",""));const i=OK.includes(e)?"capturecapture":"capture",r=!!~e.indexOf(i);return r&&(e=e.replace("capture","")),{device:e,capture:r,passive:t}}function FK(n,e=""){const t=bO[n],i=t&&t[e]||e;return n+i}function s1(n){return"touches"in n}function MO(n){return s1(n)?"touch":"pointerType"in n?n.pointerType:"mouse"}function kK(n){return Array.from(n.touches).filter(e=>{var t,i;return e.target===n.currentTarget||((t=n.currentTarget)===null||t===void 0||(i=t.contains)===null||i===void 0?void 0:i.call(t,e.target))})}function UK(n){return n.type==="touchend"||n.type==="touchcancel"?n.changedTouches:n.targetTouches}function CO(n){return s1(n)?UK(n)[0]:n}function zK(n){return kK(n).map(e=>e.identifier)}function fS(n){const e=CO(n);return s1(n)?e.identifier:e.pointerId}function cP(n){const e=CO(n);return[e.clientX,e.clientY]}function HK(n){const e={};if("buttons"in n&&(e.buttons=n.buttons),"shiftKey"in n){const{shiftKey:t,altKey:i,metaKey:r,ctrlKey:s}=n;Object.assign(e,{shiftKey:t,altKey:i,metaKey:r,ctrlKey:s})}return e}function Yx(n,...e){return typeof n=="function"?n(...e):n}function VK(){}function GK(...n){return n.length===0?VK:n.length===1?n[0]:function(){let e;for(const t of n)e=t.apply(this,arguments)||e;return e}}function uP(n,e){return Object.assign({},e,n||{})}const jK=32;class WK{constructor(e,t,i){this.ctrl=e,this.args=t,this.key=i,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:t,ingKey:i,args:r}=this;t[i]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=r,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const t=this.state,i=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=i.from?Yx(i.from,t):t.offset,t.offset=t.lastOffset,t.startTime=t.timeStamp=e.timeStamp)}computeValues(e){const t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:t,config:i,shared:r}=this;t.args=this.args;let s=0;if(e&&(t.event=e,i.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,r.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,r.locked=!!document.pointerLockElement,Object.assign(r,HK(e)),r.down=r.pressed=r.buttons%2===1||r.touches>0,s=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){const D=t._delta.map(Math.abs);is.addTo(t._distance,D)}this.axisIntent&&this.axisIntent(e);const[o,a]=t._movement,[l,u]=i.threshold,{_step:h,values:f}=t;if(i.hasCustomTransform?(h[0]===!1&&(h[0]=Math.abs(o)>=l&&f[0]),h[1]===!1&&(h[1]=Math.abs(a)>=u&&f[1])):(h[0]===!1&&(h[0]=Math.abs(o)>=l&&Math.sign(o)*l),h[1]===!1&&(h[1]=Math.abs(a)>=u&&Math.sign(a)*u)),t.intentional=h[0]!==!1||h[1]!==!1,!t.intentional)return;const g=[0,0];if(i.hasCustomTransform){const[D,U]=f;g[0]=h[0]!==!1?D-h[0]:0,g[1]=h[1]!==!1?U-h[1]:0}else g[0]=h[0]!==!1?o-h[0]:0,g[1]=h[1]!==!1?a-h[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(g);const v=t.offset,x=t._active&&!t._blocked||t.active;x&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=r[this.ingKey]=t._active,e&&(t.first&&("bounds"in i&&(t._bounds=Yx(i.bounds,t)),this.setup&&this.setup()),t.movement=g,this.computeOffset()));const[S,w]=t.offset,[[_,b],[M,T]]=t._bounds;t.overflow=[S<_?-1:S>b?1:0,w<M?-1:w>T?1:0],t._movementBound[0]=t.overflow[0]?t._movementBound[0]===!1?t._movement[0]:t._movementBound[0]:!1,t._movementBound[1]=t.overflow[1]?t._movementBound[1]===!1?t._movement[1]:t._movementBound[1]:!1;const L=t._active?i.rubberband||[0,0]:[0,0];if(t.offset=RK(t._bounds,t.offset,L),t.delta=is.sub(t.offset,v),this.computeMovement(),x&&(!t.last||s>jK)){t.delta=is.sub(t.offset,v);const D=t.delta.map(Math.abs);is.addTo(t.distance,D),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&s>0&&(t.velocity=[D[0]/s,D[1]/s],t.timeDelta=s)}}emit(){const e=this.state,t=this.shared,i=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!i.triggerAllEvents)return;const r=this.handler(ki(ki(ki({},t),e),{},{[this.aliasKey]:e.values}));r!==void 0&&(e.memo=r)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function $K([n,e],t){const i=Math.abs(n),r=Math.abs(e);if(i>r&&i>t)return"x";if(r>i&&r>t)return"y"}class XK extends WK{constructor(...e){super(...e),$s(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=is.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=is.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const t=this.state,i=this.config;if(!t.axis&&e){const r=typeof i.axisThreshold=="object"?i.axisThreshold[MO(e)]:i.axisThreshold;t.axis=$K(t._movement,r)}t._blocked=(i.lockDirection||!!i.axis)&&!t.axis||!!i.axis&&i.axis!==t.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const YK=n=>n,dP=.15,TO={enabled(n=!0){return n},eventOptions(n,e,t){return ki(ki({},t.shared.eventOptions),n)},preventDefault(n=!1){return n},triggerAllEvents(n=!1){return n},rubberband(n=0){switch(n){case!0:return[dP,dP];case!1:return[0,0];default:return is.toVector(n)}},from(n){if(typeof n=="function")return n;if(n!=null)return is.toVector(n)},transform(n,e,t){const i=n||t.shared.transform;return this.hasCustomTransform=!!i,i||YK},threshold(n){return is.toVector(n,0)}},KK=0,S0=ki(ki({},TO),{},{axis(n,e,{axis:t}){if(this.lockDirection=t==="lock",!this.lockDirection)return t},axisThreshold(n=KK){return n},bounds(n={}){if(typeof n=="function")return s=>S0.bounds(n(s));if("current"in n)return()=>n.current;if(typeof HTMLElement=="function"&&n instanceof HTMLElement)return n;const{left:e=-1/0,right:t=1/0,top:i=-1/0,bottom:r=1/0}=n;return[[e,t],[i,r]]}}),hP={ArrowRight:(n,e=1)=>[n*e,0],ArrowLeft:(n,e=1)=>[-1*n*e,0],ArrowUp:(n,e=1)=>[0,-1*n*e],ArrowDown:(n,e=1)=>[0,n*e]};class JK extends XK{constructor(...e){super(...e),$s(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const t=e._bounds.getBoundingClientRect(),i=e.currentTarget.getBoundingClientRect(),r={left:t.left-i.left+e.offset[0],right:t.right-i.right+e.offset[0],top:t.top-i.top+e.offset[1],bottom:t.bottom-i.bottom+e.offset[1]};e._bounds=S0.bounds(r)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const t=this.config,i=this.state;if(e.buttons!=null&&(Array.isArray(t.pointerButtons)?!t.pointerButtons.includes(e.buttons):t.pointerButtons!==-1&&t.pointerButtons!==e.buttons))return;const r=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(r&&r.size>1&&i._pointerActive)&&(this.start(e),this.setupPointer(e),i._pointerId=fS(e),i._pointerActive=!0,this.computeValues(cP(e)),this.computeInitial(),t.preventScrollAxis&&MO(e)!=="mouse"?(i._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const t=this.state,i=this.config;if(!t._pointerActive)return;const r=fS(e);if(t._pointerId!==void 0&&r!==t._pointerId)return;const s=cP(e);if(document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=is.sub(s,t._values),this.computeValues(s)),is.addTo(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional){this.timeoutStore.remove("dragDelay"),t.active=!1,this.startPointerDrag(e);return}if(i.preventScrollAxis&&!t._preventScroll)if(t.axis)if(t.axis===i.preventScrollAxis||i.preventScrollAxis==="xy"){t._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const t=this.state,i=this.config;if(!t._active||!t._pointerActive)return;const r=fS(e);if(t._pointerId!==void 0&&r!==t._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[s,o]=t._distance;if(t.tap=s<=i.tapsThreshold&&o<=i.tapsThreshold,t.tap&&i.filterTaps)t._force=!0;else{const[a,l]=t._delta,[u,h]=t._movement,[f,g]=i.swipe.velocity,[v,x]=i.swipe.distance,S=i.swipe.duration;if(t.elapsedTime<S){const w=Math.abs(a/t.timeDelta),_=Math.abs(l/t.timeDelta);w>f&&Math.abs(u)>v&&(t.swipe[0]=Math.sign(a)),_>g&&Math.abs(h)>x&&(t.swipe[1]=Math.sign(l))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const t=this.config,i=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,i,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,qK(e);const t=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",t),this.eventStore.add(this.sharedConfig.window,"touch","cancel",t),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const t=hP[e.key];if(t){const i=this.state,r=e.shiftKey?10:e.altKey?.1:1;this.start(e),i._delta=t(this.config.keyboardDisplacement,r),i._keyboardActive=!0,is.addTo(i._movement,i._delta),this.compute(e),this.emit()}}keyUp(e){e.key in hP&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function qK(n){"persist"in n&&typeof n.persist=="function"&&n.persist()}const E0=typeof window<"u"&&window.document&&window.document.createElement;function RO(){return E0&&"ontouchstart"in window}function ZK(){return RO()||E0&&window.navigator.maxTouchPoints>1}function QK(){return E0&&"onpointerdown"in window}function eJ(){return E0&&"exitPointerLock"in window.document}function tJ(){try{return"constructor"in GestureEvent}catch{return!1}}const Po={isBrowser:E0,gesture:tJ(),touch:RO(),touchscreen:ZK(),pointer:QK(),pointerLock:eJ()},nJ=250,iJ=180,rJ=.5,sJ=50,oJ=250,aJ=10,fP={mouse:0,touch:0,pen:8},lJ=ki(ki({},S0),{},{device(n,e,{pointer:{touch:t=!1,lock:i=!1,mouse:r=!1}={}}){return this.pointerLock=i&&Po.pointerLock,Po.touch&&t?"touch":this.pointerLock?"mouse":Po.pointer&&!r?"pointer":Po.touch?"touch":"mouse"},preventScrollAxis(n,e,{preventScroll:t}){if(this.preventScrollDelay=typeof t=="number"?t:t||t===void 0&&n?nJ:void 0,!(!Po.touchscreen||t===!1))return n||(t!==void 0?"y":void 0)},pointerCapture(n,e,{pointer:{capture:t=!0,buttons:i=1,keys:r=!0}={}}){return this.pointerButtons=i,this.keys=r,!this.pointerLock&&this.device==="pointer"&&t},threshold(n,e,{filterTaps:t=!1,tapsThreshold:i=3,axis:r=void 0}){const s=is.toVector(n,t?i:r?1:0);return this.filterTaps=t,this.tapsThreshold=i,s},swipe({velocity:n=rJ,distance:e=sJ,duration:t=oJ}={}){return{velocity:this.transform(is.toVector(n)),distance:this.transform(is.toVector(e)),duration:t}},delay(n=0){switch(n){case!0:return iJ;case!1:return 0;default:return n}},axisThreshold(n){return n?ki(ki({},fP),n):fP},keyboardDisplacement(n=aJ){return n}});ki(ki({},TO),{},{device(n,e,{shared:t,pointer:{touch:i=!1}={}}){if(t.target&&!Po.touch&&Po.gesture)return"gesture";if(Po.touch&&i)return"touch";if(Po.touchscreen){if(Po.pointer)return"pointer";if(Po.touch)return"touch"}},bounds(n,e,{scaleBounds:t={},angleBounds:i={}}){const r=o=>{const a=uP(Yx(t,o),{min:-1/0,max:1/0});return[a.min,a.max]},s=o=>{const a=uP(Yx(i,o),{min:-1/0,max:1/0});return[a.min,a.max]};return typeof t!="function"&&typeof i!="function"?[r(),s()]:o=>[r(o),s(o)]},threshold(n,e,t){return this.lockDirection=t.axis==="lock",is.toVector(n,this.lockDirection?[.1,3]:0)},modifierKey(n){return n===void 0?"ctrlKey":n},pinchOnWheel(n=!0){return n}});ki(ki({},S0),{},{mouseOnly:(n=!0)=>n});ki(ki({},S0),{},{mouseOnly:(n=!0)=>n});const PO=new Map,XE=new Map;function cJ(n){PO.set(n.key,n.engine),XE.set(n.key,n.resolver)}const uJ={key:"drag",engine:JK,resolver:lJ};function dJ(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function hJ(n,e){if(n==null)return{};var t=dJ(n,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}const fJ={target(n){if(n)return()=>"current"in n?n.current:n},enabled(n=!0){return n},window(n=Po.isBrowser?window:void 0){return n},eventOptions({passive:n=!0,capture:e=!1}={}){return{passive:n,capture:e}},transform(n){return n}},pJ=["target","eventOptions","window","enabled","transform"];function Yy(n={},e){const t={};for(const[i,r]of Object.entries(e))switch(typeof r){case"function":t[i]=r.call(t,n[i],i,n);break;case"object":t[i]=Yy(n[i],r);break;case"boolean":r&&(t[i]=n[i]);break}return t}function mJ(n,e,t={}){const i=n,{target:r,eventOptions:s,window:o,enabled:a,transform:l}=i,u=hJ(i,pJ);if(t.shared=Yy({target:r,eventOptions:s,window:o,enabled:a,transform:l},fJ),e){const h=XE.get(e);t[e]=Yy(ki({shared:t.shared},u),h)}else for(const h in u){const f=XE.get(h);f&&(t[h]=Yy(ki({shared:t.shared},u[h]),f))}return t}class IO{constructor(e,t){$s(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=t}add(e,t,i,r,s){const o=this._listeners,a=FK(t,i),l=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},u=ki(ki({},l),s);e.addEventListener(a,r,u);const h=()=>{e.removeEventListener(a,r,u),o.delete(h)};return o.add(h),h}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class gJ{constructor(){$s(this,"_timeouts",new Map)}add(e,t,i=140,...r){this.remove(e),this._timeouts.set(e,window.setTimeout(t,i,...r))}remove(e){const t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}class vJ{constructor(e){$s(this,"gestures",new Set),$s(this,"_targetEventStore",new IO(this)),$s(this,"gestureEventStores",{}),$s(this,"gestureTimeoutStores",{}),$s(this,"handlers",{}),$s(this,"config",{}),$s(this,"pointerIds",new Set),$s(this,"touchIds",new Set),$s(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),yJ(this,e)}setEventIds(e){if(s1(e))return this.touchIds=new Set(zK(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=mJ(e,t,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const t=this.config.shared,i={};let r;if(!(t.target&&(r=t.target(),!r))){if(t.enabled){for(const o of this.gestures){const a=this.config[o],l=pP(i,a.eventOptions,!!r);if(a.enabled){const u=PO.get(o);new u(this,e,o).bind(l)}}const s=pP(i,t.eventOptions,!!r);for(const o in this.nativeHandlers)s(o,"",a=>this.nativeHandlers[o](ki(ki({},this.state.shared),{},{event:a,args:e})),void 0,!0)}for(const s in i)i[s]=GK(...i[s]);if(!r)return i;for(const s in i){const{device:o,capture:a,passive:l}=NK(s);this._targetEventStore.add(r,o,"",i[s],{capture:a,passive:l})}}}}function Df(n,e){n.gestures.add(e),n.gestureEventStores[e]=new IO(n,e),n.gestureTimeoutStores[e]=new gJ}function yJ(n,e){e.drag&&Df(n,"drag"),e.wheel&&Df(n,"wheel"),e.scroll&&Df(n,"scroll"),e.move&&Df(n,"move"),e.pinch&&Df(n,"pinch"),e.hover&&Df(n,"hover")}const pP=(n,e,t)=>(i,r,s,o={},a=!1)=>{var l,u;const h=(l=o.capture)!==null&&l!==void 0?l:e.capture,f=(u=o.passive)!==null&&u!==void 0?u:e.passive;let g=a?i:LK(i,r,h);t&&f&&(g+="Passive"),n[g]=n[g]||[],n[g].push(s)};function xJ(n,e={},t,i){const r=oe.useMemo(()=>new vJ(n),[]);if(r.applyHandlers(n,i),r.applyConfig(e,t),oe.useEffect(r.effect.bind(r)),oe.useEffect(()=>r.clean.bind(r),[]),e.target===void 0)return r.bind.bind(r)}function _J(n,e){return cJ(uJ),xJ({drag:n},e||{},"drag")}function $l(n,e,{checkForDefaultPrevented:t=!0}={}){return function(r){if(n?.(r),t===!1||!r.defaultPrevented)return e?.(r)}}function DO(n,e=[]){let t=[];function i(s,o){const a=I.createContext(o),l=t.length;t=[...t,o];function u(f){const{scope:g,children:v,...x}=f,S=g?.[n][l]||a,w=I.useMemo(()=>x,Object.values(x));return I.createElement(S.Provider,{value:w},v)}function h(f,g){const v=g?.[n][l]||a,x=I.useContext(v);if(x)return x;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${s}\``)}return u.displayName=s+"Provider",[u,h]}const r=()=>{const s=t.map(o=>I.createContext(o));return function(a){const l=a?.[n]||s;return I.useMemo(()=>({[`__scope${n}`]:{...a,[n]:l}}),[a,l])}};return r.scopeName=n,[i,wJ(r,...e)]}function wJ(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const i=n.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(s){const o=i.reduce((a,{useScope:l,scopeName:u})=>{const f=l(s)[`__scope${u}`];return{...a,...f}},{});return I.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}function Dp(n){const e=I.useRef(n);return I.useEffect(()=>{e.current=n}),I.useMemo(()=>(...t)=>{var i;return(i=e.current)===null||i===void 0?void 0:i.call(e,...t)},[])}function SJ(n,e=globalThis?.document){const t=Dp(n);I.useEffect(()=>{const i=r=>{r.key==="Escape"&&t(r)};return e.addEventListener("keydown",i),()=>e.removeEventListener("keydown",i)},[t,e])}const YE="dismissableLayer.update",EJ="dismissableLayer.pointerDownOutside",AJ="dismissableLayer.focusOutside";let mP;const bJ=I.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),MJ=I.forwardRef((n,e)=>{var t;const{disableOutsidePointerEvents:i=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:a,onDismiss:l,...u}=n,h=I.useContext(bJ),[f,g]=I.useState(null),v=(t=f?.ownerDocument)!==null&&t!==void 0?t:globalThis?.document,[,x]=I.useState({}),S=Pp(e,F=>g(F)),w=Array.from(h.layers),[_]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),b=w.indexOf(_),M=f?w.indexOf(f):-1,T=h.layersWithOutsidePointerEventsDisabled.size>0,L=M>=b,D=CJ(F=>{const k=F.target,N=[...h.branches].some(V=>V.contains(k));!L||N||(s?.(F),a?.(F),F.defaultPrevented||l?.())},v),U=TJ(F=>{const k=F.target;[...h.branches].some(V=>V.contains(k))||(o?.(F),a?.(F),F.defaultPrevented||l?.())},v);return SJ(F=>{M===h.layers.size-1&&(r?.(F),!F.defaultPrevented&&l&&(F.preventDefault(),l()))},v),I.useEffect(()=>{if(f)return i&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(mP=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(f)),h.layers.add(f),gP(),()=>{i&&h.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=mP)}},[f,v,i,h]),I.useEffect(()=>()=>{f&&(h.layers.delete(f),h.layersWithOutsidePointerEventsDisabled.delete(f),gP())},[f,h]),I.useEffect(()=>{const F=()=>x({});return document.addEventListener(YE,F),()=>document.removeEventListener(YE,F)},[]),I.createElement(pu.div,ui({},u,{ref:S,style:{pointerEvents:T?L?"auto":"none":void 0,...n.style},onFocusCapture:$l(n.onFocusCapture,U.onFocusCapture),onBlurCapture:$l(n.onBlurCapture,U.onBlurCapture),onPointerDownCapture:$l(n.onPointerDownCapture,D.onPointerDownCapture)}))});function CJ(n,e=globalThis?.document){const t=Dp(n),i=I.useRef(!1),r=I.useRef(()=>{});return I.useEffect(()=>{const s=a=>{if(a.target&&!i.current){let h=function(){BO(EJ,t,u,{discrete:!0})};var l=h;const u={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=h,e.addEventListener("click",r.current,{once:!0})):h()}i.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",r.current)}},[e,t]),{onPointerDownCapture:()=>i.current=!0}}function TJ(n,e=globalThis?.document){const t=Dp(n),i=I.useRef(!1);return I.useEffect(()=>{const r=s=>{s.target&&!i.current&&BO(AJ,t,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,t]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function gP(){const n=new CustomEvent(YE);document.dispatchEvent(n)}function BO(n,e,t,{discrete:i}){const r=t.originalEvent.target,s=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&r.addEventListener(n,e,{once:!0}),i?XY(r,s):r.dispatchEvent(s)}const iu=globalThis?.document?I.useLayoutEffect:()=>{},RJ=JI.useId||(()=>{});let PJ=0;function IJ(n){const[e,t]=I.useState(RJ());return iu(()=>{t(i=>i??String(PJ++))},[n]),e?`radix-${e}`:""}function dh(n){return n.split("-")[0]}function A0(n){return n.split("-")[1]}function Bp(n){return["top","bottom"].includes(dh(n))?"x":"y"}function sM(n){return n==="y"?"height":"width"}function vP(n,e,t){let{reference:i,floating:r}=n;const s=i.x+i.width/2-r.width/2,o=i.y+i.height/2-r.height/2,a=Bp(e),l=sM(a),u=i[l]/2-r[l]/2,h=a==="x";let f;switch(dh(e)){case"top":f={x:s,y:i.y-r.height};break;case"bottom":f={x:s,y:i.y+i.height};break;case"right":f={x:i.x+i.width,y:o};break;case"left":f={x:i.x-r.width,y:o};break;default:f={x:i.x,y:i.y}}switch(A0(e)){case"start":f[a]-=u*(t&&h?-1:1);break;case"end":f[a]+=u*(t&&h?-1:1)}return f}const DJ=async(n,e,t)=>{const{placement:i="bottom",strategy:r="absolute",middleware:s=[],platform:o}=t,a=await(o.isRTL==null?void 0:o.isRTL(e));let l=await o.getElementRects({reference:n,floating:e,strategy:r}),{x:u,y:h}=vP(l,i,a),f=i,g={},v=0;for(let x=0;x<s.length;x++){const{name:S,fn:w}=s[x],{x:_,y:b,data:M,reset:T}=await w({x:u,y:h,initialPlacement:i,placement:f,strategy:r,middlewareData:g,rects:l,platform:o,elements:{reference:n,floating:e}});u=_??u,h=b??h,g={...g,[S]:{...g[S],...M}},T&&v<=50&&(v++,typeof T=="object"&&(T.placement&&(f=T.placement),T.rects&&(l=T.rects===!0?await o.getElementRects({reference:n,floating:e,strategy:r}):T.rects),{x:u,y:h}=vP(l,f,a)),x=-1)}return{x:u,y:h,placement:f,strategy:r,middlewareData:g}};function LO(n){return typeof n!="number"?(function(e){return{top:0,right:0,bottom:0,left:0,...e}})(n):{top:n,right:n,bottom:n,left:n}}function Kx(n){return{...n,top:n.y,left:n.x,right:n.x+n.width,bottom:n.y+n.height}}async function Jg(n,e){var t;e===void 0&&(e={});const{x:i,y:r,platform:s,rects:o,elements:a,strategy:l}=n,{boundary:u="clippingAncestors",rootBoundary:h="viewport",elementContext:f="floating",altBoundary:g=!1,padding:v=0}=e,x=LO(v),S=a[g?f==="floating"?"reference":"floating":f],w=Kx(await s.getClippingRect({element:(t=await(s.isElement==null?void 0:s.isElement(S)))==null||t?S:S.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:u,rootBoundary:h,strategy:l})),_=Kx(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:f==="floating"?{...o.floating,x:i,y:r}:o.reference,offsetParent:await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),strategy:l}):o[f]);return{top:w.top-_.top+x.top,bottom:_.bottom-w.bottom+x.bottom,left:w.left-_.left+x.left,right:_.right-w.right+x.right}}const BJ=Math.min,Id=Math.max;function KE(n,e,t){return Id(n,BJ(e,t))}const yP=n=>({name:"arrow",options:n,async fn(e){const{element:t,padding:i=0}=n??{},{x:r,y:s,placement:o,rects:a,platform:l}=e;if(t==null)return{};const u=LO(i),h={x:r,y:s},f=Bp(o),g=A0(o),v=sM(f),x=await l.getDimensions(t),S=f==="y"?"top":"left",w=f==="y"?"bottom":"right",_=a.reference[v]+a.reference[f]-h[f]-a.floating[v],b=h[f]-a.reference[f],M=await(l.getOffsetParent==null?void 0:l.getOffsetParent(t));let T=M?f==="y"?M.clientHeight||0:M.clientWidth||0:0;T===0&&(T=a.floating[v]);const L=_/2-b/2,D=u[S],U=T-x[v]-u[w],F=T/2-x[v]/2+L,k=KE(D,F,U),N=(g==="start"?u[S]:u[w])>0&&F!==k&&a.reference[v]<=a.floating[v];return{[f]:h[f]-(N?F<D?D-F:U-F:0),data:{[f]:k,centerOffset:F-k}}}}),LJ={left:"right",right:"left",bottom:"top",top:"bottom"};function Jx(n){return n.replace(/left|right|bottom|top/g,(e=>LJ[e]))}function OJ(n,e,t){t===void 0&&(t=!1);const i=A0(n),r=Bp(n),s=sM(r);let o=r==="x"?i===(t?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=Jx(o)),{main:o,cross:Jx(o)}}const NJ={start:"end",end:"start"};function xP(n){return n.replace(/start|end/g,(e=>NJ[e]))}const OO=["top","right","bottom","left"];OO.reduce(((n,e)=>n.concat(e,e+"-start",e+"-end")),[]);const FJ=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t;const{placement:i,middlewareData:r,rects:s,initialPlacement:o,platform:a,elements:l}=e,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:g="bestFit",flipAlignment:v=!0,...x}=n,S=dh(i),w=f||(S===o||!v?[Jx(o)]:(function(F){const k=Jx(F);return[xP(F),k,xP(k)]})(o)),_=[o,...w],b=await Jg(e,x),M=[];let T=((t=r.flip)==null?void 0:t.overflows)||[];if(u&&M.push(b[S]),h){const{main:F,cross:k}=OJ(i,s,await(a.isRTL==null?void 0:a.isRTL(l.floating)));M.push(b[F],b[k])}if(T=[...T,{placement:i,overflows:M}],!M.every((F=>F<=0))){var L,D;const F=((L=(D=r.flip)==null?void 0:D.index)!=null?L:0)+1,k=_[F];if(k)return{data:{index:F,overflows:T},reset:{placement:k}};let N="bottom";switch(g){case"bestFit":{var U;const V=(U=T.map((Z=>[Z,Z.overflows.filter((Q=>Q>0)).reduce(((Q,le)=>Q+le),0)])).sort(((Z,Q)=>Z[1]-Q[1]))[0])==null?void 0:U[0].placement;V&&(N=V);break}case"initialPlacement":N=o}if(i!==N)return{reset:{placement:N}}}return{}}}};function _P(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function wP(n){return OO.some((e=>n[e]>=0))}const kJ=function(n){let{strategy:e="referenceHidden",...t}=n===void 0?{}:n;return{name:"hide",async fn(i){const{rects:r}=i;switch(e){case"referenceHidden":{const s=_P(await Jg(i,{...t,elementContext:"reference"}),r.reference);return{data:{referenceHiddenOffsets:s,referenceHidden:wP(s)}}}case"escaped":{const s=_P(await Jg(i,{...t,altBoundary:!0}),r.floating);return{data:{escapedOffsets:s,escaped:wP(s)}}}default:return{}}}}},UJ=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){const{x:t,y:i}=e,r=await(async function(s,o){const{placement:a,platform:l,elements:u}=s,h=await(l.isRTL==null?void 0:l.isRTL(u.floating)),f=dh(a),g=A0(a),v=Bp(a)==="x",x=["left","top"].includes(f)?-1:1,S=h&&v?-1:1,w=typeof o=="function"?o(s):o;let{mainAxis:_,crossAxis:b,alignmentAxis:M}=typeof w=="number"?{mainAxis:w,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...w};return g&&typeof M=="number"&&(b=g==="end"?-1*M:M),v?{x:b*S,y:_*x}:{x:_*x,y:b*S}})(e,n);return{x:t+r.x,y:i+r.y,data:r}}}};function NO(n){return n==="x"?"y":"x"}const zJ=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:i,placement:r}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:w=>{let{x:_,y:b}=w;return{x:_,y:b}}},...l}=n,u={x:t,y:i},h=await Jg(e,l),f=Bp(dh(r)),g=NO(f);let v=u[f],x=u[g];if(s){const w=f==="y"?"bottom":"right";v=KE(v+h[f==="y"?"top":"left"],v,v-h[w])}if(o){const w=g==="y"?"bottom":"right";x=KE(x+h[g==="y"?"top":"left"],x,x-h[w])}const S=a.fn({...e,[f]:v,[g]:x});return{...S,data:{x:S.x-t,y:S.y-i}}}}},HJ=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:i,placement:r,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:u=!0}=n,h={x:t,y:i},f=Bp(r),g=NO(f);let v=h[f],x=h[g];const S=typeof a=="function"?a({...s,placement:r}):a,w=typeof S=="number"?{mainAxis:S,crossAxis:0}:{mainAxis:0,crossAxis:0,...S};if(l){const L=f==="y"?"height":"width",D=s.reference[f]-s.floating[L]+w.mainAxis,U=s.reference[f]+s.reference[L]-w.mainAxis;v<D?v=D:v>U&&(v=U)}if(u){var _,b,M,T;const L=f==="y"?"width":"height",D=["top","left"].includes(dh(r)),U=s.reference[g]-s.floating[L]+(D&&(_=(b=o.offset)==null?void 0:b[g])!=null?_:0)+(D?0:w.crossAxis),F=s.reference[g]+s.reference[L]+(D?0:(M=(T=o.offset)==null?void 0:T[g])!=null?M:0)-(D?w.crossAxis:0);x<U?x=U:x>F&&(x=F)}return{[f]:v,[g]:x}}}},VJ=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){const{placement:t,rects:i,platform:r,elements:s}=e,{apply:o,...a}=n,l=await Jg(e,a),u=dh(t),h=A0(t);let f,g;u==="top"||u==="bottom"?(f=u,g=h===(await(r.isRTL==null?void 0:r.isRTL(s.floating))?"start":"end")?"left":"right"):(g=u,f=h==="end"?"top":"bottom");const v=Id(l.left,0),x=Id(l.right,0),S=Id(l.top,0),w=Id(l.bottom,0),_={availableHeight:i.floating.height-(["left","right"].includes(t)?2*(S!==0||w!==0?S+w:Id(l.top,l.bottom)):l[f]),availableWidth:i.floating.width-(["top","bottom"].includes(t)?2*(v!==0||x!==0?v+x:Id(l.left,l.right)):l[g])},b=await r.getDimensions(s.floating);o?.({...e,..._});const M=await r.getDimensions(s.floating);return b.width!==M.width||b.height!==M.height?{reset:{rects:!0}}:{}}}};function FO(n){return n&&n.document&&n.location&&n.alert&&n.setInterval}function cc(n){if(n==null)return window;if(!FO(n)){const e=n.ownerDocument;return e&&e.defaultView||window}return n}function b0(n){return cc(n).getComputedStyle(n)}function Ql(n){return FO(n)?"":n?(n.nodeName||"").toLowerCase():""}function kO(){const n=navigator.userAgentData;return n!=null&&n.brands?n.brands.map((e=>e.brand+"/"+e.version)).join(" "):navigator.userAgent}function tl(n){return n instanceof cc(n).HTMLElement}function mu(n){return n instanceof cc(n).Element}function oM(n){return typeof ShadowRoot>"u"?!1:n instanceof cc(n).ShadowRoot||n instanceof ShadowRoot}function o1(n){const{overflow:e,overflowX:t,overflowY:i}=b0(n);return/auto|scroll|overlay|hidden/.test(e+i+t)}function GJ(n){return["table","td","th"].includes(Ql(n))}function SP(n){const e=/firefox/i.test(kO()),t=b0(n);return t.transform!=="none"||t.perspective!=="none"||t.contain==="paint"||["transform","perspective"].includes(t.willChange)||e&&t.willChange==="filter"||e&&!!t.filter&&t.filter!=="none"}function UO(){return!/^((?!chrome|android).)*safari/i.test(kO())}const EP=Math.min,Ag=Math.max,qx=Math.round;function ec(n,e,t){var i,r,s,o;e===void 0&&(e=!1),t===void 0&&(t=!1);const a=n.getBoundingClientRect();let l=1,u=1;e&&tl(n)&&(l=n.offsetWidth>0&&qx(a.width)/n.offsetWidth||1,u=n.offsetHeight>0&&qx(a.height)/n.offsetHeight||1);const h=mu(n)?cc(n):window,f=!UO()&&t,g=(a.left+(f&&(i=(r=h.visualViewport)==null?void 0:r.offsetLeft)!=null?i:0))/l,v=(a.top+(f&&(s=(o=h.visualViewport)==null?void 0:o.offsetTop)!=null?s:0))/u,x=a.width/l,S=a.height/u;return{width:x,height:S,top:v,right:g+x,bottom:v+S,left:g,x:g,y:v}}function au(n){return(e=n,(e instanceof cc(e).Node?n.ownerDocument:n.document)||window.document).documentElement;var e}function a1(n){return mu(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.pageXOffset,scrollTop:n.pageYOffset}}function zO(n){return ec(au(n)).left+a1(n).scrollLeft}function jJ(n,e,t){const i=tl(e),r=au(e),s=ec(n,i&&(function(l){const u=ec(l);return qx(u.width)!==l.offsetWidth||qx(u.height)!==l.offsetHeight})(e),t==="fixed");let o={scrollLeft:0,scrollTop:0};const a={x:0,y:0};if(i||!i&&t!=="fixed")if((Ql(e)!=="body"||o1(r))&&(o=a1(e)),tl(e)){const l=ec(e,!0);a.x=l.x+e.clientLeft,a.y=l.y+e.clientTop}else r&&(a.x=zO(r));return{x:s.left+o.scrollLeft-a.x,y:s.top+o.scrollTop-a.y,width:s.width,height:s.height}}function HO(n){return Ql(n)==="html"?n:n.assignedSlot||n.parentNode||(oM(n)?n.host:null)||au(n)}function AP(n){return tl(n)&&getComputedStyle(n).position!=="fixed"?n.offsetParent:null}function JE(n){const e=cc(n);let t=AP(n);for(;t&&GJ(t)&&getComputedStyle(t).position==="static";)t=AP(t);return t&&(Ql(t)==="html"||Ql(t)==="body"&&getComputedStyle(t).position==="static"&&!SP(t))?e:t||(function(i){let r=HO(i);for(oM(r)&&(r=r.host);tl(r)&&!["html","body"].includes(Ql(r));){if(SP(r))return r;r=r.parentNode}return null})(n)||e}function bP(n){if(tl(n))return{width:n.offsetWidth,height:n.offsetHeight};const e=ec(n);return{width:e.width,height:e.height}}function VO(n){const e=HO(n);return["html","body","#document"].includes(Ql(e))?n.ownerDocument.body:tl(e)&&o1(e)?e:VO(e)}function Zx(n,e){var t;e===void 0&&(e=[]);const i=VO(n),r=i===((t=n.ownerDocument)==null?void 0:t.body),s=cc(i),o=r?[s].concat(s.visualViewport||[],o1(i)?i:[]):i,a=e.concat(o);return r?a:a.concat(Zx(o))}function MP(n,e,t){return e==="viewport"?Kx((function(i,r){const s=cc(i),o=au(i),a=s.visualViewport;let l=o.clientWidth,u=o.clientHeight,h=0,f=0;if(a){l=a.width,u=a.height;const g=UO();(g||!g&&r==="fixed")&&(h=a.offsetLeft,f=a.offsetTop)}return{width:l,height:u,x:h,y:f}})(n,t)):mu(e)?(function(i,r){const s=ec(i,!1,r==="fixed"),o=s.top+i.clientTop,a=s.left+i.clientLeft;return{top:o,left:a,x:a,y:o,right:a+i.clientWidth,bottom:o+i.clientHeight,width:i.clientWidth,height:i.clientHeight}})(e,t):Kx((function(i){var r;const s=au(i),o=a1(i),a=(r=i.ownerDocument)==null?void 0:r.body,l=Ag(s.scrollWidth,s.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),u=Ag(s.scrollHeight,s.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0);let h=-o.scrollLeft+zO(i);const f=-o.scrollTop;return b0(a||s).direction==="rtl"&&(h+=Ag(s.clientWidth,a?a.clientWidth:0)-l),{width:l,height:u,x:h,y:f}})(au(n)))}function WJ(n){const e=Zx(n),t=["absolute","fixed"].includes(b0(n).position)&&tl(n)?JE(n):n;return mu(t)?e.filter((i=>mu(i)&&(function(r,s){const o=s.getRootNode==null?void 0:s.getRootNode();if(r.contains(s))return!0;if(o&&oM(o)){let a=s;do{if(a&&r===a)return!0;a=a.parentNode||a.host}while(a)}return!1})(i,t)&&Ql(i)!=="body")):[]}const $J={getClippingRect:function(n){let{element:e,boundary:t,rootBoundary:i,strategy:r}=n;const s=[...t==="clippingAncestors"?WJ(e):[].concat(t),i],o=s[0],a=s.reduce(((l,u)=>{const h=MP(e,u,r);return l.top=Ag(h.top,l.top),l.right=EP(h.right,l.right),l.bottom=EP(h.bottom,l.bottom),l.left=Ag(h.left,l.left),l}),MP(e,o,r));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(n){let{rect:e,offsetParent:t,strategy:i}=n;const r=tl(t),s=au(t);if(t===s)return e;let o={scrollLeft:0,scrollTop:0};const a={x:0,y:0};if((r||!r&&i!=="fixed")&&((Ql(t)!=="body"||o1(s))&&(o=a1(t)),tl(t))){const l=ec(t,!0);a.x=l.x+t.clientLeft,a.y=l.y+t.clientTop}return{...e,x:e.x-o.scrollLeft+a.x,y:e.y-o.scrollTop+a.y}},isElement:mu,getDimensions:bP,getOffsetParent:JE,getDocumentElement:au,getElementRects:n=>{let{reference:e,floating:t,strategy:i}=n;return{reference:jJ(e,JE(t),i),floating:{...bP(t),x:0,y:0}}},getClientRects:n=>Array.from(n.getClientRects()),isRTL:n=>b0(n).direction==="rtl"};function XJ(n,e,t,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:o=!0,animationFrame:a=!1}=i,l=r&&!a,u=s&&!a,h=l||u?[...mu(n)?Zx(n):[],...Zx(e)]:[];h.forEach((x=>{l&&x.addEventListener("scroll",t,{passive:!0}),u&&x.addEventListener("resize",t)}));let f,g=null;if(o){let x=!0;g=new ResizeObserver((()=>{x||t(),x=!1})),mu(n)&&!a&&g.observe(n),g.observe(e)}let v=a?ec(n):null;return a&&(function x(){const S=ec(n);!v||S.x===v.x&&S.y===v.y&&S.width===v.width&&S.height===v.height||t(),v=S,f=requestAnimationFrame(x)})(),t(),()=>{var x;h.forEach((S=>{l&&S.removeEventListener("scroll",t),u&&S.removeEventListener("resize",t)})),(x=g)==null||x.disconnect(),g=null,a&&cancelAnimationFrame(f)}}const YJ=(n,e,t)=>DJ(n,e,{platform:$J,...t});var qE=typeof document<"u"?I.useLayoutEffect:I.useEffect;function ZE(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,i,r;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!=e.length)return!1;for(i=t;i--!==0;)if(!ZE(n[i],e[i]))return!1;return!0}if(r=Object.keys(n),t=r.length,t!==Object.keys(e).length)return!1;for(i=t;i--!==0;)if(!Object.prototype.hasOwnProperty.call(e,r[i]))return!1;for(i=t;i--!==0;){const s=r[i];if(!(s==="_owner"&&n.$$typeof)&&!ZE(n[s],e[s]))return!1}return!0}return n!==n&&e!==e}function KJ(n){const e=I.useRef(n);return qE(()=>{e.current=n}),e}function JJ(n){let{middleware:e,placement:t="bottom",strategy:i="absolute",whileElementsMounted:r}=n===void 0?{}:n;const s=I.useRef(null),o=I.useRef(null),a=KJ(r),l=I.useRef(null),[u,h]=I.useState({x:null,y:null,strategy:i,placement:t,middlewareData:{}}),[f,g]=I.useState(e);ZE(f?.map(M=>{let{options:T}=M;return T}),e?.map(M=>{let{options:T}=M;return T}))||g(e);const v=I.useCallback(()=>{!s.current||!o.current||YJ(s.current,o.current,{middleware:f,placement:t,strategy:i}).then(M=>{x.current&&m_.flushSync(()=>{h(M)})})},[f,t,i]);qE(()=>{x.current&&v()},[v]);const x=I.useRef(!1);qE(()=>(x.current=!0,()=>{x.current=!1}),[]);const S=I.useCallback(()=>{if(typeof l.current=="function"&&(l.current(),l.current=null),s.current&&o.current)if(a.current){const M=a.current(s.current,o.current,v);l.current=M}else v()},[v,a]),w=I.useCallback(M=>{s.current=M,S()},[S]),_=I.useCallback(M=>{o.current=M,S()},[S]),b=I.useMemo(()=>({reference:s,floating:o}),[]);return I.useMemo(()=>({...u,update:v,refs:b,reference:w,floating:_}),[u,v,b,w,_])}const qJ=n=>{const{element:e,padding:t}=n;function i(r){return Object.prototype.hasOwnProperty.call(r,"current")}return{name:"arrow",options:n,fn(r){return i(e)?e.current!=null?yP({element:e.current,padding:t}).fn(r):{}:e?yP({element:e,padding:t}).fn(r):{}}}},ZJ=I.forwardRef((n,e)=>{const{children:t,width:i=10,height:r=5,...s}=n;return I.createElement(pu.svg,ui({},s,{ref:e,width:i,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),n.asChild?t:I.createElement("polygon",{points:"0,0 30,0 15,10"}))}),QJ=ZJ;function eq(n){const[e,t]=I.useState(void 0);return iu(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const i=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const s=r[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,u=Array.isArray(l)?l[0]:l;o=u.inlineSize,a=u.blockSize}else o=n.offsetWidth,a=n.offsetHeight;t({width:o,height:a})});return i.observe(n,{box:"border-box"}),()=>i.unobserve(n)}else t(void 0)},[n]),e}const GO="Popper",[aM,jO]=DO(GO),[tq,WO]=aM(GO),nq=n=>{const{__scopePopper:e,children:t}=n,[i,r]=I.useState(null);return I.createElement(tq,{scope:e,anchor:i,onAnchorChange:r},t)},iq="PopperAnchor",rq=I.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:i,...r}=n,s=WO(iq,t),o=I.useRef(null),a=Pp(e,o);return I.useEffect(()=>{s.onAnchorChange(i?.current||o.current)}),i?null:I.createElement(pu.div,ui({},r,{ref:a}))}),Qx="PopperContent",[sq,oq]=aM(Qx),[aq,lq]=aM(Qx,{hasParent:!1,positionUpdateFns:new Set}),cq=I.forwardRef((n,e)=>{var t,i,r,s,o,a,l,u;const{__scopePopper:h,side:f="bottom",sideOffset:g=0,align:v="center",alignOffset:x=0,arrowPadding:S=0,collisionBoundary:w=[],collisionPadding:_=0,sticky:b="partial",hideWhenDetached:M=!1,avoidCollisions:T=!0,onPlaced:L,...D}=n,U=WO(Qx,h),[F,k]=I.useState(null),N=Pp(e,j=>k(j)),[V,Z]=I.useState(null),Q=eq(V),le=(t=Q?.width)!==null&&t!==void 0?t:0,me=(i=Q?.height)!==null&&i!==void 0?i:0,fe=f+(v!=="center"?"-"+v:""),xe=typeof _=="number"?_:{top:0,right:0,bottom:0,left:0,..._},X=Array.isArray(w)?w:[w],de=X.length>0,se={padding:xe,boundary:X.filter(pq),altBoundary:de},{reference:Y,floating:ge,strategy:Ve,x:we,y:Ne,placement:Le,middlewareData:Ge,update:et}=JJ({strategy:"fixed",placement:fe,whileElementsMounted:XJ,middleware:[mq(),UJ({mainAxis:g+me,alignmentAxis:x}),T?zJ({mainAxis:!0,crossAxis:!1,limiter:b==="partial"?HJ():void 0,...se}):void 0,V?qJ({element:V,padding:S}):void 0,T?FJ({...se}):void 0,VJ({...se,apply:({elements:j,availableWidth:ne,availableHeight:Se})=>{j.floating.style.setProperty("--radix-popper-available-width",`${ne}px`),j.floating.style.setProperty("--radix-popper-available-height",`${Se}px`)}}),gq({arrowWidth:le,arrowHeight:me}),M?kJ({strategy:"referenceHidden"}):void 0].filter(fq)});iu(()=>{Y(U.anchor)},[Y,U.anchor]);const ft=we!==null&&Ne!==null,[yt,nn]=$O(Le),Xt=Dp(L);iu(()=>{ft&&Xt?.()},[ft,Xt]);const xt=(r=Ge.arrow)===null||r===void 0?void 0:r.x,q=(s=Ge.arrow)===null||s===void 0?void 0:s.y,at=((o=Ge.arrow)===null||o===void 0?void 0:o.centerOffset)!==0,[Je,tt]=I.useState();iu(()=>{F&&tt(window.getComputedStyle(F).zIndex)},[F]);const{hasParent:$e,positionUpdateFns:_t}=lq(Qx,h),Ye=!$e;I.useLayoutEffect(()=>{if(!Ye)return _t.add(et),()=>{_t.delete(et)}},[Ye,_t,et]),iu(()=>{Ye&&ft&&Array.from(_t).reverse().forEach(j=>requestAnimationFrame(j))},[Ye,ft,_t]);const K={"data-side":yt,"data-align":nn,...D,ref:N,style:{...D.style,animation:ft?void 0:"none",opacity:(a=Ge.hide)!==null&&a!==void 0&&a.referenceHidden?0:void 0}};return I.createElement("div",{ref:ge,"data-radix-popper-content-wrapper":"",style:{position:Ve,left:0,top:0,transform:ft?`translate3d(${Math.round(we)}px, ${Math.round(Ne)}px, 0)`:"translate3d(0, -200%, 0)",minWidth:"max-content",zIndex:Je,"--radix-popper-transform-origin":[(l=Ge.transformOrigin)===null||l===void 0?void 0:l.x,(u=Ge.transformOrigin)===null||u===void 0?void 0:u.y].join(" ")},dir:n.dir},I.createElement(sq,{scope:h,placedSide:yt,onArrowChange:Z,arrowX:xt,arrowY:q,shouldHideArrow:at},Ye?I.createElement(aq,{scope:h,hasParent:!0,positionUpdateFns:_t},I.createElement(pu.div,K)):I.createElement(pu.div,K)))}),uq="PopperArrow",dq={top:"bottom",right:"left",bottom:"top",left:"right"},hq=I.forwardRef(function(e,t){const{__scopePopper:i,...r}=e,s=oq(uq,i),o=dq[s.placedSide];return I.createElement("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0}},I.createElement(QJ,ui({},r,{ref:t,style:{...r.style,display:"block"}})))});function fq(n){return n!==void 0}function pq(n){return n!==null}const mq=()=>({name:"anchorCssProperties",fn(n){const{rects:e,elements:t}=n,{width:i,height:r}=e.reference;return t.floating.style.setProperty("--radix-popper-anchor-width",`${i}px`),t.floating.style.setProperty("--radix-popper-anchor-height",`${r}px`),{}}}),gq=n=>({name:"transformOrigin",options:n,fn(e){var t,i,r,s,o;const{placement:a,rects:l,middlewareData:u}=e,f=((t=u.arrow)===null||t===void 0?void 0:t.centerOffset)!==0,g=f?0:n.arrowWidth,v=f?0:n.arrowHeight,[x,S]=$O(a),w={start:"0%",center:"50%",end:"100%"}[S],_=((i=(r=u.arrow)===null||r===void 0?void 0:r.x)!==null&&i!==void 0?i:0)+g/2,b=((s=(o=u.arrow)===null||o===void 0?void 0:o.y)!==null&&s!==void 0?s:0)+v/2;let M="",T="";return x==="bottom"?(M=f?w:`${_}px`,T=`${-v}px`):x==="top"?(M=f?w:`${_}px`,T=`${l.floating.height+v}px`):x==="right"?(M=`${-v}px`,T=f?w:`${b}px`):x==="left"&&(M=`${l.floating.width+v}px`,T=f?w:`${b}px`),{data:{x:M,y:T}}}});function $O(n){const[e,t="center"]=n.split("-");return[e,t]}const vq=nq,yq=rq,xq=cq,_q=hq;function wq(n,e){return I.useReducer((t,i)=>{const r=e[t][i];return r??t},n)}const XO=n=>{const{present:e,children:t}=n,i=Sq(e),r=typeof t=="function"?t({present:i.isPresent}):I.Children.only(t),s=Pp(i.ref,r.ref);return typeof t=="function"||i.isPresent?I.cloneElement(r,{ref:s}):null};XO.displayName="Presence";function Sq(n){const[e,t]=I.useState(),i=I.useRef({}),r=I.useRef(n),s=I.useRef("none"),o=n?"mounted":"unmounted",[a,l]=wq(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return I.useEffect(()=>{const u=Ay(i.current);s.current=a==="mounted"?u:"none"},[a]),iu(()=>{const u=i.current,h=r.current;if(h!==n){const g=s.current,v=Ay(u);n?l("MOUNT"):v==="none"||u?.display==="none"?l("UNMOUNT"):l(h&&g!==v?"ANIMATION_OUT":"UNMOUNT"),r.current=n}},[n,l]),iu(()=>{if(e){const u=f=>{const v=Ay(i.current).includes(f.animationName);f.target===e&&v&&m_.flushSync(()=>l("ANIMATION_END"))},h=f=>{f.target===e&&(s.current=Ay(i.current))};return e.addEventListener("animationstart",h),e.addEventListener("animationcancel",u),e.addEventListener("animationend",u),()=>{e.removeEventListener("animationstart",h),e.removeEventListener("animationcancel",u),e.removeEventListener("animationend",u)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:I.useCallback(u=>{u&&(i.current=getComputedStyle(u)),t(u)},[])}}function Ay(n){return n?.animationName||"none"}function Eq({prop:n,defaultProp:e,onChange:t=()=>{}}){const[i,r]=Aq({defaultProp:e,onChange:t}),s=n!==void 0,o=s?n:i,a=Dp(t),l=I.useCallback(u=>{if(s){const f=typeof u=="function"?u(n):u;f!==n&&a(f)}else r(u)},[s,n,r,a]);return[o,l]}function Aq({defaultProp:n,onChange:e}){const t=I.useState(n),[i]=t,r=I.useRef(i),s=Dp(e);return I.useEffect(()=>{r.current!==i&&(s(i),r.current=i)},[i,r,s]),t}const bq=I.forwardRef((n,e)=>I.createElement(pu.span,ui({},n,{ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...n.style}}))),Mq=bq,[l1]=DO("Tooltip",[jO]),c1=jO(),Cq="TooltipProvider",QE="tooltip.open",[Rse,lM]=l1(Cq),cM="Tooltip",[Tq,u1]=l1(cM),Rq=n=>{const{__scopeTooltip:e,children:t,open:i,defaultOpen:r=!1,onOpenChange:s,disableHoverableContent:o,delayDuration:a}=n,l=lM(cM,n.__scopeTooltip),u=c1(e),[h,f]=I.useState(null),g=IJ(),v=I.useRef(0),x=o??l.disableHoverableContent,S=a??l.delayDuration,w=I.useRef(!1),[_=!1,b]=Eq({prop:i,defaultProp:r,onChange:U=>{U?(l.onOpen(),document.dispatchEvent(new CustomEvent(QE))):l.onClose(),s?.(U)}}),M=I.useMemo(()=>_?w.current?"delayed-open":"instant-open":"closed",[_]),T=I.useCallback(()=>{window.clearTimeout(v.current),w.current=!1,b(!0)},[b]),L=I.useCallback(()=>{window.clearTimeout(v.current),b(!1)},[b]),D=I.useCallback(()=>{window.clearTimeout(v.current),v.current=window.setTimeout(()=>{w.current=!0,b(!0)},S)},[S,b]);return I.useEffect(()=>()=>window.clearTimeout(v.current),[]),I.createElement(vq,u,I.createElement(Tq,{scope:e,contentId:g,open:_,stateAttribute:M,trigger:h,onTriggerChange:f,onTriggerEnter:I.useCallback(()=>{l.isOpenDelayed?D():T()},[l.isOpenDelayed,D,T]),onTriggerLeave:I.useCallback(()=>{x?L():window.clearTimeout(v.current)},[L,x]),onOpen:T,onClose:L,disableHoverableContent:x},t))},CP="TooltipTrigger",Pq=I.forwardRef((n,e)=>{const{__scopeTooltip:t,...i}=n,r=u1(CP,t),s=lM(CP,t),o=c1(t),a=I.useRef(null),l=Pp(e,a,r.onTriggerChange),u=I.useRef(!1),h=I.useRef(!1),f=I.useCallback(()=>u.current=!1,[]);return I.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),I.createElement(yq,ui({asChild:!0},o),I.createElement(pu.button,ui({"aria-describedby":r.open?r.contentId:void 0,"data-state":r.stateAttribute},i,{ref:l,onPointerMove:$l(n.onPointerMove,g=>{g.pointerType!=="touch"&&!h.current&&!s.isPointerInTransitRef.current&&(r.onTriggerEnter(),h.current=!0)}),onPointerLeave:$l(n.onPointerLeave,()=>{r.onTriggerLeave(),h.current=!1}),onPointerDown:$l(n.onPointerDown,()=>{u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:$l(n.onFocus,()=>{u.current||r.onOpen()}),onBlur:$l(n.onBlur,r.onClose),onClick:$l(n.onClick,r.onClose)})))}),Iq="TooltipPortal",[Pse,Dq]=l1(Iq,{forceMount:void 0}),qg="TooltipContent",Bq=I.forwardRef((n,e)=>{const t=Dq(qg,n.__scopeTooltip),{forceMount:i=t.forceMount,side:r="top",...s}=n,o=u1(qg,n.__scopeTooltip);return I.createElement(XO,{present:i||o.open},o.disableHoverableContent?I.createElement(YO,ui({side:r},s,{ref:e})):I.createElement(Lq,ui({side:r},s,{ref:e})))}),Lq=I.forwardRef((n,e)=>{const t=u1(qg,n.__scopeTooltip),i=lM(qg,n.__scopeTooltip),r=I.useRef(null),s=Pp(e,r),[o,a]=I.useState(null),{trigger:l,onClose:u}=t,h=r.current,{onPointerInTransitChange:f}=i,g=I.useCallback(()=>{a(null),f(!1)},[f]),v=I.useCallback((x,S)=>{const w=x.currentTarget,_={x:x.clientX,y:x.clientY},b=Uq(_,w.getBoundingClientRect()),M=b==="right"||b==="bottom"?-5:5,L=b==="right"||b==="left"?{x:x.clientX+M,y:x.clientY}:{x:x.clientX,y:x.clientY+M},D=zq(S.getBoundingClientRect()),U=Vq([L,...D]);a(U),f(!0)},[f]);return I.useEffect(()=>()=>g(),[g]),I.useEffect(()=>{if(l&&h){const x=w=>v(w,h),S=w=>v(w,l);return l.addEventListener("pointerleave",x),h.addEventListener("pointerleave",S),()=>{l.removeEventListener("pointerleave",x),h.removeEventListener("pointerleave",S)}}},[l,h,v,g]),I.useEffect(()=>{if(o){const x=S=>{const w=S.target,_={x:S.clientX,y:S.clientY},b=l?.contains(w)||h?.contains(w),M=!Hq(_,o);b?g():M&&(g(),u())};return document.addEventListener("pointermove",x),()=>document.removeEventListener("pointermove",x)}},[l,h,o,u,g]),I.createElement(YO,ui({},n,{ref:s}))}),[Oq,Nq]=l1(cM,{isInside:!1}),YO=I.forwardRef((n,e)=>{const{__scopeTooltip:t,children:i,"aria-label":r,onEscapeKeyDown:s,onPointerDownOutside:o,...a}=n,l=u1(qg,t),u=c1(t),{onClose:h}=l;return I.useEffect(()=>(document.addEventListener(QE,h),()=>document.removeEventListener(QE,h)),[h]),I.useEffect(()=>{if(l.trigger){const f=g=>{const v=g.target;v!=null&&v.contains(l.trigger)&&h()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[l.trigger,h]),I.createElement(MJ,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:h},I.createElement(xq,ui({"data-state":l.stateAttribute},u,a,{ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"}}),I.createElement(xO,null,i),I.createElement(Oq,{scope:t,isInside:!0},I.createElement(Mq,{id:l.contentId,role:"tooltip"},r||i))))}),Fq="TooltipArrow",kq=I.forwardRef((n,e)=>{const{__scopeTooltip:t,...i}=n,r=c1(t);return Nq(Fq,t).isInside?null:I.createElement(_q,ui({},r,i,{ref:e}))});function Uq(n,e){const t=Math.abs(e.top-n.y),i=Math.abs(e.bottom-n.y),r=Math.abs(e.right-n.x),s=Math.abs(e.left-n.x);switch(Math.min(t,i,r,s)){case s:return"left";case r:return"right";case t:return"top";case i:return"bottom";default:return null}}function zq(n){const{top:e,right:t,bottom:i,left:r}=n;return[{x:r,y:e},{x:t,y:e},{x:t,y:i},{x:r,y:i}]}function Hq(n,e){const{x:t,y:i}=n;let r=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s].x,l=e[s].y,u=e[o].x,h=e[o].y;l>i!=h>i&&t<(u-a)*(i-l)/(h-l)+a&&(r=!r)}return r}function Vq(n){const e=n.slice();return e.sort((t,i)=>t.x<i.x?-1:t.x>i.x?1:t.y<i.y?-1:t.y>i.y?1:0),Gq(e)}function Gq(n){if(n.length<=1)return n.slice();const e=[];for(let i=0;i<n.length;i++){const r=n[i];for(;e.length>=2;){const s=e[e.length-1],o=e[e.length-2];if((s.x-o.x)*(r.y-o.y)>=(s.y-o.y)*(r.x-o.x))e.pop();else break}e.push(r)}e.pop();const t=[];for(let i=n.length-1;i>=0;i--){const r=n[i];for(;t.length>=2;){const s=t[t.length-1],o=t[t.length-2];if((s.x-o.x)*(r.y-o.y)>=(s.y-o.y)*(r.x-o.x))t.pop();else break}t.push(r)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}const jq=Rq,Wq=Pq,$q=Bq,Xq=kq;function Yq(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function oi(n,e){if(n==null)return{};var t=Yq(n,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}let Oi;(function(n){n[n.UNSUPPORTED_INPUT=0]="UNSUPPORTED_INPUT",n[n.NO_COMPONENT_FOR_TYPE=1]="NO_COMPONENT_FOR_TYPE",n[n.UNKNOWN_INPUT=2]="UNKNOWN_INPUT",n[n.DUPLICATE_KEYS=3]="DUPLICATE_KEYS",n[n.ALREADY_REGISTERED_TYPE=4]="ALREADY_REGISTERED_TYPE",n[n.CLIPBOARD_ERROR=5]="CLIPBOARD_ERROR",n[n.THEME_ERROR=6]="THEME_ERROR",n[n.PATH_DOESNT_EXIST=7]="PATH_DOESNT_EXIST",n[n.INPUT_TYPE_OVERRIDE=8]="INPUT_TYPE_OVERRIDE",n[n.EMPTY_KEY=9]="EMPTY_KEY"})(Oi||(Oi={}));const Kq={[Oi.UNSUPPORTED_INPUT]:(n,e)=>[`An input with type \`${n}\` input was found at path \`${e}\` but it's not supported yet.`],[Oi.NO_COMPONENT_FOR_TYPE]:(n,e)=>[`Type \`${n}\` found at path \`${e}\` can't be displayed in panel because no component supports it yet.`],[Oi.UNKNOWN_INPUT]:(n,e)=>[`input at path \`${n}\` is not recognized.`,e],[Oi.DUPLICATE_KEYS]:(n,e,t)=>[`Key \`${n}\` of path \`${e}\` already exists at path \`${t}\`. Even nested keys need to be unique. Rename one of the keys.`],[Oi.ALREADY_REGISTERED_TYPE]:n=>[`Type ${n} has already been registered. You can't register a component with the same type.`],[Oi.CLIPBOARD_ERROR]:n=>["Error copying the value",n],[Oi.THEME_ERROR]:(n,e)=>[`Error accessing the theme \`${n}.${e}\` value.`],[Oi.PATH_DOESNT_EXIST]:n=>[`Error getting the value at path \`${n}\`. There is probably an error in your \`render\` function.`],[Oi.PATH_DOESNT_EXIST]:n=>[`Error accessing the value at path \`${n}\``],[Oi.INPUT_TYPE_OVERRIDE]:(n,e,t)=>[`Input at path \`${n}\` already exists with type: \`${e}\`. Its type cannot be overridden with type \`${t}\`.`],[Oi.EMPTY_KEY]:()=>["Keys can not be empty, if you want to hide a label use whitespace."]};function KO(n,e,...t){const[i,...r]=Kq[e](...t);console[n]("LEVA: "+i,...r)}const Kl=KO.bind(null,"warn"),Jq=KO.bind(null,"log"),qq=["value"],Zq=["schema"],Qq=["value"],JO=[],rh={};function TP(n){let{value:e}=n,t=oi(n,qq);for(let i of JO){const r=i(e,t);if(r)return r}}function uc(n,e){let{schema:t}=e,i=oi(e,Zq);if(n in rh){Kl(Oi.ALREADY_REGISTERED_TYPE,n);return}JO.push((r,s)=>t(r,s)&&n),rh[n]=i}function pS(n,e,t,i){const{normalize:r}=rh[n];if(r)return r(e,t,i);if(typeof e!="object"||!("value"in e))return{value:e};const{value:s}=e,o=oi(e,Qq);return{value:s,settings:o}}function eZ(n,e,t,i,r,s){const{sanitize:o}=rh[n];return o?o(e,t,i,r,s):e}function RP(n,e,t){const{format:i}=rh[n];return i?i(e,t):e}function tZ(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function PP(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function sn(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?PP(Object(t),!0).forEach(function(i){tZ(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):PP(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}const gu=(n,e,t)=>n>t?t:n<e?e:n,nZ=n=>{if(n===""||typeof n=="number")return n;try{const e=Zc(n);if(!isNaN(e))return e}catch{}return parseFloat(n)},iZ=Math.log(10);function IP(n){let e=Math.abs(+String(n).replace(".",""));if(e===0)return .01;for(;e!==0&&e%10===0;)e/=10;const t=Math.floor(Math.log(e)/iZ)+1,i=Math.floor(Math.log10(Math.abs(n))),r=Math.pow(10,i-t);return Math.max(r,.001)}const e_=(n,e,t)=>t===e?0:(gu(n,e,t)-e)/(t-e),t_=(n,e,t)=>n*(t-e)+e,rZ=()=>"_"+Math.random().toString(36).substr(2,9),DP=/\(([0-9+\-*/^ .]+)\)/,BP=/(\d+(?:\.\d+)?) ?\^ ?(\d+(?:\.\d+)?)/,LP=/(\d+(?:\.\d+)?) ?\* ?(\d+(?:\.\d+)?)/,OP=/(\d+(?:\.\d+)?) ?\/ ?(\d+(?:\.\d+)?)/,NP=/(\d+(?:\.\d+)?) ?\+ ?(\d+(?:\.\d+)?)/,FP=/(\d+(?:\.\d+)?) ?- ?(\d+(?:\.\d+)?)/;function Zc(n){if(isNaN(Number(n)))if(DP.test(n)){const e=n.replace(DP,(t,i)=>String(Zc(i)));return Zc(e)}else if(BP.test(n)){const e=n.replace(BP,(t,i,r)=>String(Math.pow(Number(i),Number(r))));return Zc(e)}else if(LP.test(n)){const e=n.replace(LP,(t,i,r)=>String(Number(i)*Number(r)));return Zc(e)}else if(OP.test(n)){const e=n.replace(OP,(t,i,r)=>{if(r!=0)return String(Number(i)/Number(r));throw new Error("Division by zero")});return Zc(e)}else if(NP.test(n)){const e=n.replace(NP,(t,i,r)=>String(Number(i)+Number(r)));return Zc(e)}else if(FP.test(n)){const e=n.replace(FP,(t,i,r)=>String(Number(i)-Number(r)));return Zc(e)}else return Number(n);return Number(n)}function sZ(n,e){return e.reduce((t,i)=>(n&&n.hasOwnProperty(i)&&(t[i]=n[i]),t),{})}function oZ(n,e){const t=sn({},n);return e.forEach(i=>i in n&&delete t[i]),t}function aZ(n,e){return n.reduce((t,i,r)=>Object.assign(t,{[e[r]]:i}),{})}function qO(n){return Object.prototype.toString.call(n)==="[object Object]"}const lZ=n=>qO(n)&&Object.keys(n).length===0;let _a;(function(n){n.BUTTON="BUTTON",n.BUTTON_GROUP="BUTTON_GROUP",n.MONITOR="MONITOR",n.FOLDER="FOLDER"})(_a||(_a={}));let wa;(function(n){n.SELECT="SELECT",n.IMAGE="IMAGE",n.NUMBER="NUMBER",n.COLOR="COLOR",n.STRING="STRING",n.BOOLEAN="BOOLEAN",n.INTERVAL="INTERVAL",n.VECTOR3D="VECTOR3D",n.VECTOR2D="VECTOR2D"})(wa||(wa={}));const cZ=["type","__customInput"],uZ=["render","label","optional","order","disabled","hint","onChange","onEditStart","onEditEnd","transient"],dZ=["type"];function ZO(n,e,t={},i){var r,s;if(typeof n!="object"||Array.isArray(n))return{type:i,input:n,options:sn({key:e,label:e,optional:!1,disabled:!1,order:0},t)};if("__customInput"in n){const{type:L,__customInput:D}=n,U=oi(n,cZ);return ZO(D,e,U,L)}const{render:o,label:a,optional:l,order:u=0,disabled:h,hint:f,onChange:g,onEditStart:v,onEditEnd:x,transient:S}=n,w=oi(n,uZ),_=sn({render:o,key:e,label:a??e,hint:f,transient:S??!!g,onEditStart:v,onEditEnd:x,disabled:h,optional:l,order:u},t);let{type:b}=w,M=oi(w,dZ);if(b=i??b,b in _a)return{type:b,input:M,options:_};let T;return i&&qO(M)&&"value"in M?T=M.value:T=lZ(M)?void 0:M,{type:b,input:T,options:sn(sn({},_),{},{onChange:g,optional:(r=_.optional)!==null&&r!==void 0?r:!1,disabled:(s=_.disabled)!==null&&s!==void 0?s:!1})}}function hZ(n,e,t,i){const r=ZO(n,e),{type:s,input:o,options:a}=r;if(s)return s in _a?r:{type:s,input:pS(s,o,t,i),options:a};let l=TP(o);return l?{type:l,input:pS(l,o,t,i),options:a}:(l=TP({value:o}),l?{type:l,input:pS(l,{value:o},t,i),options:a}:!1)}function kP(n,e,t,i,r){const{value:s,type:o,settings:a}=n;n.value=QO({type:o,value:s,settings:a},e,t,i),n.fromPanel=r}const fZ=function(e,t,i){this.type="LEVA_ERROR",this.message="LEVA: "+e,this.previousValue=t,this.error=i};function QO({type:n,value:e,settings:t},i,r,s){const o=n!=="SELECT"&&typeof i=="function"?i(e):i;let a;try{a=eZ(n,o,t,e,r,s)}catch(l){throw new fZ(`The value \`${i}\` did not result in a correct value.`,e,l)}return Yg(a,e)?e:a}const eN=(n,e,t=!1)=>{let i=0;return function(){const r=arguments,s=t&&!i,o=()=>n.apply(this,r);window.clearTimeout(i),i=window.setTimeout(o,e),s&&o()}},tN=n=>n.shiftKey?5:n.altKey?1/5:1,pZ=["value"],mZ=["min","max"],gZ=n=>{if(typeof n=="number")return!0;if(typeof n=="string"){const e=parseFloat(n);return isNaN(e)?!1:n.substring((""+e).length).trim().length<4}return!1},nN=(n,{min:e=-1/0,max:t=1/0,suffix:i})=>{const r=parseFloat(n);if(n===""||isNaN(r))throw Error("Invalid number");const s=gu(r,e,t);return i?s+i:s},vZ=(n,{pad:e=0,suffix:t})=>{const i=parseFloat(n).toFixed(e);return t?i+t:i},iN=n=>{let{value:e}=n,t=oi(n,pZ);const{min:i=-1/0,max:r=1/0}=t,s=oi(t,mZ);let o=parseFloat(e);const a=typeof e=="string"?e.substring((""+o).length):void 0;o=gu(o,i,r);let l=t.step;l||(Number.isFinite(i)?Number.isFinite(r)?l=+(Math.abs(r-i)/100).toPrecision(1):l=+(Math.abs(o-i)/100).toPrecision(1):Number.isFinite(r)&&(l=+(Math.abs(r-o)/100).toPrecision(1)));const u=l?IP(l)*10:IP(o);l=l||u/10;const h=Math.round(gu(Math.log10(1/u),0,2));return{value:a?o+a:o,settings:sn({initialValue:o,step:l,pad:h,min:i,max:r,suffix:a},s)}},rN=(n,{step:e,initialValue:t})=>{const i=Math.round((n-t)/e);return t+i*e};var sN=Object.freeze({__proto__:null,schema:gZ,sanitize:nN,format:vZ,normalize:iN,sanitizeStep:rN});function $i(){return $i=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},$i.apply(this,arguments)}const oN=I.createContext({});function as(){return I.useContext(oN)}const uM=I.createContext(null),aN=I.createContext(null),lN=I.createContext(null);function M0(){return I.useContext(aN)}function yZ(){return I.useContext(lN)}const cN=()=>({colors:{elevation1:"#292d39",elevation2:"#181c20",elevation3:"#373c4b",accent1:"#0066dc",accent2:"#007bff",accent3:"#3c93ff",highlight1:"#535760",highlight2:"#8c92a4",highlight3:"#fefefe",vivid1:"#ffcc00",folderWidgetColor:"$highlight2",folderTextColor:"$highlight3",toolTipBackground:"$highlight3",toolTipText:"$elevation2"},radii:{xs:"2px",sm:"3px",lg:"10px"},space:{xs:"3px",sm:"6px",md:"10px",rowGap:"7px",colGap:"7px"},fonts:{mono:"ui-monospace, SFMono-Regular, Menlo, 'Roboto Mono', monospace",sans:"system-ui, sans-serif"},fontSizes:{root:"11px",toolTip:"$root"},sizes:{rootWidth:"280px",controlWidth:"160px",numberInputMinWidth:"38px",scrubberWidth:"8px",scrubberHeight:"16px",rowHeight:"24px",folderTitleHeight:"20px",checkboxSize:"16px",joystickWidth:"100px",joystickHeight:"100px",colorPickerWidth:"$controlWidth",colorPickerHeight:"100px",imagePreviewWidth:"$controlWidth",imagePreviewHeight:"100px",monitorHeight:"60px",titleBarHeight:"39px"},shadows:{level1:"0 0 9px 0 #00000088",level2:"0 4px 14px #00000033"},borderWidths:{root:"0px",input:"1px",focus:"1px",hover:"1px",active:"1px",folder:"1px"},fontWeights:{label:"normal",folder:"normal",button:"normal"}});function by(n,e){const[t,i]=n.split(" "),r={};return t!=="none"&&(r.boxShadow=`${e.inset?"inset ":""}0 0 0 $borderWidths${[e.key]} $colors${t!=="default"&&t||e.borderColor}`),i&&(r.backgroundColor=i),r}const Ym={$inputStyle:()=>n=>by(n,{key:"$input",borderColor:"$highlight1",inset:!0}),$focusStyle:()=>n=>by(n,{key:"$focus",borderColor:"$accent2"}),$hoverStyle:()=>n=>by(n,{key:"$hover",borderColor:"$accent1",inset:!0}),$activeStyle:()=>n=>by(n,{key:"$active",borderColor:"$accent1",inset:!0})},{styled:tn,css:Ise,createTheme:xZ,globalCss:_Z,keyframes:Dse}=CK({prefix:"leva",theme:cN(),utils:sn(sn({},Ym),{},{$flex:()=>({display:"flex",alignItems:"center"}),$flexCenter:()=>({display:"flex",alignItems:"center",justifyContent:"center"}),$reset:()=>({outline:"none",fontSize:"inherit",fontWeight:"inherit",color:"inherit",fontFamily:"inherit",border:"none",backgroundColor:"transparent",appearance:"none"}),$draggable:()=>({touchAction:"none",WebkitUserDrag:"none",userSelect:"none"}),$focus:n=>({"&:focus":Ym.$focusStyle()(n)}),$focusWithin:n=>({"&:focus-within":Ym.$focusStyle()(n)}),$hover:n=>({"&:hover":Ym.$hoverStyle()(n)}),$active:n=>({"&:active":Ym.$activeStyle()(n)})})}),wZ=_Z({".leva__panel__dragged":{WebkitUserDrag:"none",userSelect:"none",input:{userSelect:"none"},"*":{cursor:"ew-resize !important"}}});function SZ(n){const e=cN();if(!n)return{theme:e,className:""};Object.keys(n).forEach(i=>{Object.assign(e[i],n[i])});const t=xZ(e);return{theme:e,className:t.className}}function tc(n,e){const{theme:t}=I.useContext(uM);if(!(n in t)||!(e in t[n]))return Kl(Oi.THEME_ERROR,n,e),"";let i=e;for(;;){let r=t[n][i];if(typeof r=="string"&&r.charAt(0)==="$")i=r.substr(1);else return r}}const uN=tn("input",{$reset:"",padding:"0 $sm",width:0,minWidth:0,flex:1,height:"100%",variants:{levaType:{number:{textAlign:"right"}},as:{textarea:{padding:"$sm"}}}}),dN=tn("div",{$draggable:"",height:"100%",$flexCenter:"",position:"relative",padding:"0 $xs",fontSize:"0.8em",opacity:.8,cursor:"default",touchAction:"none",[`& + ${uN}`]:{paddingLeft:0}}),EZ=tn(dN,{cursor:"ew-resize",marginRight:"-$xs",textTransform:"uppercase",opacity:.3,"&:hover":{opacity:1},variants:{dragging:{true:{backgroundColor:"$accent2",opacity:1}}}}),AZ=tn("div",{$flex:"",position:"relative",borderRadius:"$sm",overflow:"hidden",color:"inherit",height:"$rowHeight",backgroundColor:"$elevation3",$inputStyle:"$elevation1",$hover:"",$focusWithin:"",variants:{textArea:{true:{height:"auto"}}}}),bZ=["innerLabel","value","onUpdate","onChange","onKeyDown","type","id","inputType","rows"],MZ=["onUpdate"];function dM(n){let{innerLabel:e,value:t,onUpdate:i,onChange:r,onKeyDown:s,type:o,id:a,inputType:l="text",rows:u=0}=n,h=oi(n,bZ);const{id:f,emitOnEditStart:g,emitOnEditEnd:v,disabled:x}=as(),S=a||f,w=I.useRef(null),_=u>0,b=_?"textarea":"input",M=I.useCallback(D=>U=>{const F=U.currentTarget.value;D(F)},[]);oe.useEffect(()=>{const D=w.current,U=M(F=>{i(F),v()});return D?.addEventListener("blur",U),()=>D?.removeEventListener("blur",U)},[M,i,v]);const T=I.useCallback(D=>{D.key==="Enter"&&M(i)(D)},[M,i]),L=Object.assign({as:b},_?{rows:u}:{},h);return oe.createElement(AZ,{textArea:_},e&&typeof e=="string"?oe.createElement(dN,null,e):e,oe.createElement(uN,$i({levaType:o,ref:w,id:S,type:l,autoComplete:"off",spellCheck:"false",value:t,onChange:M(r),onFocus:()=>g(),onKeyPress:T,onKeyDown:s,disabled:x},L)))}function CZ(n){let{onUpdate:e}=n,t=oi(n,MZ);const i=I.useCallback(s=>e(nZ(s)),[e]),r=I.useCallback(s=>{const o=s.key==="ArrowUp"?1:s.key==="ArrowDown"?-1:0;if(o){s.preventDefault();const a=s.altKey?.1:s.shiftKey?10:1;e(l=>parseFloat(l)+o*a)}},[e]);return oe.createElement(dM,$i({},t,{onUpdate:i,onKeyDown:r,type:"number"}))}const n_=tn("div",{}),eA=tn("div",{position:"relative",background:"$elevation2",transition:"height 300ms ease",variants:{fill:{true:{},false:{}},flat:{false:{},true:{}},isRoot:{true:{},false:{paddingLeft:"$md","&::after":{content:'""',position:"absolute",left:0,top:0,width:"$borderWidths$folder",height:"100%",backgroundColor:"$folderWidgetColor",opacity:.4,transform:"translateX(-50%)"}}}},compoundVariants:[{isRoot:!0,fill:!1,css:{overflowY:"auto",maxHeight:"calc(100vh - 20px - $$titleBarHeight)"}},{isRoot:!0,flat:!1,css:{borderRadius:"$lg"}}]}),TZ=tn("div",{$flex:"",color:"$folderTextColor",userSelect:"none",cursor:"pointer",height:"$folderTitleHeight",fontWeight:"$folder","> svg":{marginLeft:-4,marginRight:4,cursor:"pointer",fill:"$folderWidgetColor",opacity:.6},"&:hover > svg":{fill:"$folderWidgetColor"},[`&:hover + ${eA}::after`]:{opacity:.6},[`${n_}:hover > & + ${eA}::after`]:{opacity:.6},[`${n_}:hover > & > svg`]:{opacity:1}}),hN=tn("div",{position:"relative",display:"grid",gridTemplateColumns:"100%",rowGap:"$rowGap",transition:"opacity 250ms ease",variants:{toggled:{true:{opacity:1,transitionDelay:"250ms"},false:{opacity:0,transitionDelay:"0ms",pointerEvents:"none"}},isRoot:{true:{"& > div":{paddingLeft:"$md",paddingRight:"$md"},"& > div:first-of-type":{paddingTop:"$sm"},"& > div:last-of-type":{paddingBottom:"$sm"},[`> ${n_}:not(:first-of-type)`]:{paddingTop:"$sm",marginTop:"$md",borderTop:"$borderWidths$folder solid $colors$elevation1"}}}}}),fN=tn("div",{position:"relative",zIndex:100,display:"grid",rowGap:"$rowGap",gridTemplateRows:"minmax($sizes$rowHeight, max-content)",alignItems:"center",color:"$highlight2",[`${hN} > &`]:{"&:first-of-type":{marginTop:"$rowGap"},"&:last-of-type":{marginBottom:"$rowGap"}},variants:{disabled:{true:{pointerEvents:"none"},false:{"&:hover,&:focus-within":{color:"$highlight3"}}}}}),pN=tn(fN,{gridTemplateColumns:"auto $sizes$controlWidth",columnGap:"$colGap"}),RZ=tn("div",{$flex:"",height:"100%",position:"relative",overflow:"hidden","& > div":{marginLeft:"$colGap",padding:"0 $xs",opacity:.4},"& > div:hover":{opacity:.8},"& > div > svg":{display:"none",cursor:"pointer",width:13,minWidth:13,height:13,backgroundColor:"$elevation2"},"&:hover > div > svg":{display:"block"},variants:{align:{top:{height:"100%",alignItems:"flex-start",paddingTop:"$sm"}}}}),PZ=tn("input",{$reset:"",height:0,width:0,opacity:0,margin:0,"& + label":{position:"relative",$flexCenter:"",height:"100%",userSelect:"none",cursor:"pointer",paddingLeft:2,paddingRight:"$sm",pointerEvents:"auto"},"& + label:after":{content:'""',width:6,height:6,backgroundColor:"$elevation3",borderRadius:"50%",$activeStyle:""},"&:focus + label:after":{$focusStyle:""},"& + label:active:after":{backgroundColor:"$accent1",$focusStyle:""},"&:checked + label:after":{backgroundColor:"$accent1"}}),tA=tn("label",{fontWeight:"$label",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","& > svg":{display:"block"}}),IZ=tn("div",{opacity:1,variants:{disabled:{true:{opacity:.6,pointerEvents:"none",[`& ${tA}`]:{pointerEvents:"auto"}}}}}),mN=tn("div",{position:"fixed",top:0,bottom:0,right:0,left:0,zIndex:1e3,userSelect:"none"}),DZ=tn("div",{background:"$toolTipBackground",fontFamily:"$sans",fontSize:"$toolTip",padding:"$xs $sm",color:"$toolTipText",borderRadius:"$xs",boxShadow:"$level2",maxWidth:260}),BZ=tn(Xq,{fill:"$toolTipBackground"});function hM({children:n}){const{className:e}=I.useContext(uM);return oe.createElement(KY,{className:e},n)}const LZ=["align"];function OZ(){const{id:n,disable:e,disabled:t}=as();return oe.createElement(oe.Fragment,null,oe.createElement(PZ,{id:n+"__disable",type:"checkbox",checked:!t,onChange:()=>e(!t)}),oe.createElement("label",{htmlFor:n+"__disable"}))}function NZ(n){const{id:e,optional:t,hint:i}=as(),r=n.htmlFor||(e?{htmlFor:e}:null),s=!i&&typeof n.children=="string"?{title:n.children}:null;return oe.createElement(oe.Fragment,null,t&&oe.createElement(OZ,null),i!==void 0?oe.createElement(jq,null,oe.createElement(Wq,{asChild:!0},oe.createElement(tA,$i({},r,n))),oe.createElement($q,{side:"top",sideOffset:2},oe.createElement(DZ,null,i,oe.createElement(BZ,null)))):oe.createElement(tA,$i({},r,s,n)))}function Aa(n){let{align:e}=n,t=oi(n,LZ);const{value:i,label:r,key:s,disabled:o}=as(),{hideCopyButton:a}=yZ(),l=!a&&s!==void 0,[u,h]=I.useState(!1),f=async()=>{try{await navigator.clipboard.writeText(JSON.stringify({[s]:i??""})),h(!0)}catch{Kl(Oi.CLIPBOARD_ERROR,{[s]:i})}};return oe.createElement(RZ,{align:e,onPointerLeave:()=>h(!1)},oe.createElement(NZ,t),l&&!o&&oe.createElement("div",{title:`Click to copy ${typeof r=="string"?r:s} value`},u?oe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},oe.createElement("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),oe.createElement("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm9.707 5.707a1 1 0 00-1.414-1.414L9 12.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})):oe.createElement("svg",{onClick:f,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},oe.createElement("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),oe.createElement("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"}))))}const FZ=["toggled"],kZ=tn("svg",{fill:"currentColor",transition:"transform 350ms ease, fill 250ms ease"});function fM(n){let{toggled:e}=n,t=oi(n,FZ);return oe.createElement(kZ,$i({width:"9",height:"5",viewBox:"0 0 9 5",xmlns:"http://www.w3.org/2000/svg",style:{transform:`rotate(${e?0:-90}deg)`}},t),oe.createElement("path",{d:"M3.8 4.4c.4.3 1 .3 1.4 0L8 1.7A1 1 0 007.4 0H1.6a1 1 0 00-.7 1.7l3 2.7z"}))}const UZ=["input"];function Uo(n){let{input:e}=n,t=oi(n,UZ);return e?oe.createElement(pN,t):oe.createElement(fN,t)}function gN({value:n,type:e,settings:t,setValue:i}){const[r,s]=I.useState(RP(e,n,t)),o=I.useRef(n),a=I.useRef(t);a.current=t;const l=I.useCallback(h=>s(RP(e,h,a.current)),[e]),u=I.useCallback(h=>{try{i(h)}catch(f){const{type:g,previousValue:v}=f;if(g!=="LEVA_ERROR")throw f;l(v)}},[l,i]);return I.useEffect(()=>{Yg(n,o.current)||l(n),o.current=n},[n,l]),{displayValue:r,onChange:s,onUpdate:u}}function C0(n,e){const{emitOnEditStart:t,emitOnEditEnd:i}=as();return _J(r=>{r.first&&(document.body.classList.add("leva__panel__dragged"),t?.());const s=n(r);return r.last&&(document.body.classList.remove("leva__panel__dragged"),i?.()),s},e)}function zZ(n){const e=I.useRef(null),t=I.useRef(null),i=I.useRef(!1);return I.useEffect(()=>{const r=eN(()=>{e.current.width=e.current.offsetWidth*window.devicePixelRatio,e.current.height=e.current.offsetHeight*window.devicePixelRatio,n(e.current,t.current)},250);return window.addEventListener("resize",r),i.current||(r(),i.current=!0),()=>window.removeEventListener("resize",r)},[n]),I.useEffect(()=>{t.current=e.current.getContext("2d")},[]),[e,t]}function vN(){const n=I.useRef(null),e=I.useRef({x:0,y:0}),t=I.useCallback(i=>{Object.assign(e.current,i),n.current&&(n.current.style.transform=`translate3d(${e.current.x}px, ${e.current.y}px, 0)`)},[]);return[n,t]}const HZ=["__refCount"],mS=(n,e)=>{if(!n[e])return null;const t=n[e];return oi(t,HZ)};function VZ(n){const e=M0(),[t,i]=I.useState(mS(e.getData(),n)),r=I.useCallback(u=>e.setValueAtPath(n,u,!0),[n,e]),s=I.useCallback(u=>e.setSettingsAtPath(n,u),[n,e]),o=I.useCallback(u=>e.disableInputAtPath(n,u),[n,e]),a=I.useCallback(()=>e.emitOnEditStart(n),[n,e]),l=I.useCallback(()=>e.emitOnEditEnd(n),[n,e]);return I.useEffect(()=>{i(mS(e.getData(),n));const u=e.useStore.subscribe(h=>mS(h.data,n),i,{equalityFn:i1});return()=>u()},[e,n]),[t,{set:r,setSettings:s,disable:o,storeId:e.storeId,emitOnEditStart:a,emitOnEditEnd:l}]}const GZ=tn("div",{variants:{hasRange:{true:{position:"relative",display:"grid",gridTemplateColumns:"auto $sizes$numberInputMinWidth",columnGap:"$colGap",alignItems:"center"}}}}),yN=tn("div",{position:"relative",width:"100%",height:2,borderRadius:"$xs",backgroundColor:"$elevation1"}),nA=tn("div",{position:"absolute",width:"$scrubberWidth",height:"$scrubberHeight",borderRadius:"$xs",boxShadow:"0 0 0 2px $colors$elevation2",backgroundColor:"$accent2",cursor:"pointer",$active:"none $accent1",$hover:"none $accent3",variants:{position:{left:{borderTopRightRadius:0,borderBottomRightRadius:0,transform:"translateX(calc(-0.5 * ($sizes$scrubberWidth + 4px)))"},right:{borderTopLeftRadius:0,borderBottomLeftRadius:0,transform:"translateX(calc(0.5 * ($sizes$scrubberWidth + 4px)))"}}}}),xN=tn("div",{position:"relative",$flex:"",height:"100%",cursor:"pointer",touchAction:"none"}),_N=tn("div",{position:"absolute",height:"100%",backgroundColor:"$accent2"});function jZ({value:n,min:e,max:t,onDrag:i,step:r,initialValue:s}){const o=I.useRef(null),a=I.useRef(null),l=I.useRef(0),u=tc("sizes","scrubberWidth"),h=C0(({event:g,first:v,xy:[x],movement:[S],memo:w})=>{if(v){const{width:b,left:M}=o.current.getBoundingClientRect();l.current=b-parseFloat(u),w=g?.target===a.current?n:t_((x-M)/b,e,t)}const _=w+t_(S/l.current,0,t-e);return i(rN(_,{step:r,initialValue:s})),w}),f=e_(n,e,t);return oe.createElement(xN,$i({ref:o},h()),oe.createElement(yN,null,oe.createElement(_N,{style:{left:0,right:`${(1-f)*100}%`}})),oe.createElement(nA,{ref:a,style:{left:`calc(${f} * (100% - ${u}))`}}))}const WZ=oe.memo(({label:n,onUpdate:e,step:t,innerLabelTrim:i})=>{const[r,s]=I.useState(!1),o=C0(({active:a,delta:[l],event:u,memo:h=0,first:f,last:g,target:v})=>(f&&v.requestPointerLock(),g&&document.exitPointerLock(),s(a),h+=l/2,Math.abs(h)>=1&&(e(x=>parseFloat(x)+Math.floor(h)*t*tN(u)),h=0),h));return oe.createElement(EZ,$i({dragging:r,title:n.length>1?n:""},o()),n.slice(0,i))});function wN({label:n,id:e,displayValue:t,onUpdate:i,onChange:r,settings:s,innerLabelTrim:o=1}){const a=o>0&&oe.createElement(WZ,{label:n,step:s.step,onUpdate:i,innerLabelTrim:o});return oe.createElement(CZ,{id:e,value:String(t),onUpdate:i,onChange:r,innerLabel:a})}function $Z(){const n=as(),{label:e,value:t,onUpdate:i,settings:r,id:s}=n,{min:o,max:a}=r,l=a!==1/0&&o!==-1/0;return oe.createElement(Uo,{input:!0},oe.createElement(Aa,null,e),oe.createElement(GZ,{hasRange:l},l&&oe.createElement(jZ,$i({value:parseFloat(t),onDrag:i},r)),oe.createElement(wN,$i({},n,{id:s,label:"value",innerLabelTrim:l?0:1}))))}const{sanitizeStep:XZ}=sN,YZ=oi(sN,["sanitizeStep"]);var KZ=sn({component:$Z},YZ);const JZ=(n,e)=>Js().schema({options:Js().passesAnyOf(Js().object(),Js().array())}).test(e),qZ=(n,{values:e})=>{if(e.indexOf(n)<0)throw Error("Selected value doesn't match Select options");return n},ZZ=(n,{values:e})=>e.indexOf(n),QZ=n=>{let{value:e,options:t}=n,i,r;return Array.isArray(t)?(r=t,i=t.map(s=>String(s))):(r=Object.values(t),i=Object.keys(t)),"value"in n?r.includes(e)||(i.unshift(String(e)),r.unshift(e)):e=r[0],Object.values(t).includes(e)||(t[String(e)]=e),{value:e,settings:{keys:i,values:r}}};var eQ=Object.freeze({__proto__:null,schema:JZ,sanitize:qZ,format:ZZ,normalize:QZ});const tQ=tn("div",{$flexCenter:"",position:"relative","> svg":{pointerEvents:"none",position:"absolute",right:"$md"}}),iA=tn("select",{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0}),nQ=tn("div",{display:"flex",alignItems:"center",width:"100%",height:"$rowHeight",backgroundColor:"$elevation3",borderRadius:"$sm",padding:"0 $sm",cursor:"pointer",[`${iA}:focus + &`]:{$focusStyle:""},[`${iA}:hover + &`]:{$hoverStyle:""}});function iQ({displayValue:n,value:e,onUpdate:t,id:i,settings:r,disabled:s}){const{keys:o,values:a}=r,l=I.useRef();return e===a[n]&&(l.current=o[n]),oe.createElement(tQ,null,oe.createElement(iA,{id:i,value:n,onChange:u=>t(a[Number(u.currentTarget.value)]),disabled:s},o.map((u,h)=>oe.createElement("option",{key:u,value:h},u))),oe.createElement(nQ,null,l.current),oe.createElement(fM,{toggled:!0}))}function rQ(){const{label:n,value:e,displayValue:t,onUpdate:i,id:r,disabled:s,settings:o}=as();return oe.createElement(Uo,{input:!0},oe.createElement(Aa,null,n),oe.createElement(iQ,{id:r,value:e,displayValue:t,onUpdate:i,settings:o,disabled:s}))}var sQ=sn({component:rQ},eQ);const oQ=n=>Js().string().test(n),aQ=n=>{if(typeof n!="string")throw Error("Invalid string");return n},lQ=({value:n,editable:e=!0,rows:t=!1})=>({value:n,settings:{editable:e,rows:typeof t=="number"?t:t?5:0}});var cQ=Object.freeze({__proto__:null,schema:oQ,sanitize:aQ,normalize:lQ});const uQ=["displayValue","onUpdate","onChange","editable"],dQ=tn("div",{whiteSpace:"pre-wrap"});function hQ(n){let{displayValue:e,onUpdate:t,onChange:i,editable:r=!0}=n,s=oi(n,uQ);return r?oe.createElement(dM,$i({value:e,onUpdate:t,onChange:i},s)):oe.createElement(dQ,null,e)}function fQ(){const{label:n,settings:e,displayValue:t,onUpdate:i,onChange:r}=as();return oe.createElement(Uo,{input:!0},oe.createElement(Aa,null,n),oe.createElement(hQ,$i({displayValue:t,onUpdate:i,onChange:r},e)))}var pQ=sn({component:fQ},cQ);const mQ=n=>Js().boolean().test(n),gQ=n=>{if(typeof n!="boolean")throw Error("Invalid boolean");return n};var vQ=Object.freeze({__proto__:null,schema:mQ,sanitize:gQ});const yQ=tn("div",{position:"relative",$flex:"",height:"$rowHeight",input:{$reset:"",height:0,width:0,opacity:0,margin:0},label:{position:"relative",$flexCenter:"",userSelect:"none",cursor:"pointer",height:"$checkboxSize",width:"$checkboxSize",backgroundColor:"$elevation3",borderRadius:"$sm",$hover:""},"input:focus + label":{$focusStyle:""},"input:focus:checked + label, input:checked + label:hover":{$hoverStyle:"$accent3"},"input + label:active":{backgroundColor:"$accent1"},"input:checked + label:active":{backgroundColor:"$accent1"},"label > svg":{display:"none",width:"90%",height:"90%",stroke:"$highlight3"},"input:checked + label":{backgroundColor:"$accent2"},"input:checked + label > svg":{display:"block"}});function xQ({value:n,onUpdate:e,id:t,disabled:i}){return oe.createElement(yQ,null,oe.createElement("input",{id:t,type:"checkbox",checked:n,onChange:r=>e(r.currentTarget.checked),disabled:i}),oe.createElement("label",{htmlFor:t},oe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},oe.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}))))}function _Q(){const{label:n,value:e,onUpdate:t,disabled:i,id:r}=as();return oe.createElement(Uo,{input:!0},oe.createElement(Aa,null,n),oe.createElement(xQ,{value:e,onUpdate:t,id:r,disabled:i}))}var wQ=sn({component:_Q},vQ);const SQ=["locked"];function EQ({value:n,id:e,valueKey:t,settings:i,onUpdate:r,innerLabelTrim:s}){const o=I.useRef(n[t]);o.current=n[t];const a=I.useCallback(u=>r({[t]:QO({type:"NUMBER",value:o.current,settings:i},u)}),[r,i,t]),l=gN({type:"NUMBER",value:n[t],settings:i,setValue:a});return oe.createElement(wN,{id:e,label:t,value:n[t],displayValue:l.displayValue,onUpdate:l.onUpdate,onChange:l.onChange,settings:i,innerLabelTrim:s})}const AQ=tn("div",{display:"grid",columnGap:"$colGap",gridAutoFlow:"column dense",alignItems:"center",variants:{withLock:{true:{gridTemplateColumns:"10px auto","> svg":{cursor:"pointer"}}}}});function bQ(n){let{locked:e}=n,t=oi(n,SQ);return oe.createElement("svg",$i({width:"10",height:"10",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),e?oe.createElement("path",{d:"M5 4.63601C5 3.76031 5.24219 3.1054 5.64323 2.67357C6.03934 2.24705 6.64582 1.9783 7.5014 1.9783C8.35745 1.9783 8.96306 2.24652 9.35823 2.67208C9.75838 3.10299 10 3.75708 10 4.63325V5.99999H5V4.63601ZM4 5.99999V4.63601C4 3.58148 4.29339 2.65754 4.91049 1.99307C5.53252 1.32329 6.42675 0.978302 7.5014 0.978302C8.57583 0.978302 9.46952 1.32233 10.091 1.99162C10.7076 2.65557 11 3.57896 11 4.63325V5.99999H12C12.5523 5.99999 13 6.44771 13 6.99999V13C13 13.5523 12.5523 14 12 14H3C2.44772 14 2 13.5523 2 13V6.99999C2 6.44771 2.44772 5.99999 3 5.99999H4ZM3 6.99999H12V13H3V6.99999Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}):oe.createElement("path",{d:"M9 3.63601C9 2.76044 9.24207 2.11211 9.64154 1.68623C10.0366 1.26502 10.6432 1 11.5014 1C12.4485 1 13.0839 1.30552 13.4722 1.80636C13.8031 2.23312 14 2.84313 14 3.63325H15C15 2.68242 14.7626 1.83856 14.2625 1.19361C13.6389 0.38943 12.6743 0 11.5014 0C10.4294 0 9.53523 0.337871 8.91218 1.0021C8.29351 1.66167 8 2.58135 8 3.63601V6H1C0.447715 6 0 6.44772 0 7V13C0 13.5523 0.447715 14 1 14H10C10.5523 14 11 13.5523 11 13V7C11 6.44772 10.5523 6 10 6H9V3.63601ZM1 7H10V13H1V7Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function pM({value:n,onUpdate:e,settings:t,innerLabelTrim:i}){const{id:r,setSettings:s}=as(),{lock:o,locked:a}=t;return oe.createElement(AQ,{withLock:o},o&&oe.createElement(bQ,{locked:a,onClick:()=>s({locked:!a})}),Object.keys(n).map((l,u)=>oe.createElement(EQ,{id:u===0?r:`${r}.${l}`,key:l,valueKey:l,value:n,settings:t[l],onUpdate:e,innerLabelTrim:i})))}const SN=(n,e)=>{const t={};let i=0,r=1/0;Object.entries(n).forEach(([s,o])=>{t[s]=iN(sn({value:o},e[s])).settings,i=Math.max(i,t[s].step),r=Math.min(r,t[s].pad)});for(let s in t){const{step:o,min:a,max:l}=e[s]||{};!isFinite(o)&&(!isFinite(a)||!isFinite(l))&&(t[s].step=i,t[s].pad=r)}return t},MQ=["lock"],CQ=["value"];function TQ(n){const e=Js().array().length(n).every.number(),t=i=>{if(!i||typeof i!="object")return!1;const r=Object.values(i);return r.length===n&&r.every(s=>isFinite(s))};return i=>e.test(i)||t(i)}function RQ(n){return Array.isArray(n)?"array":"object"}function bg(n,e,t){return RQ(n)===e?n:e==="array"?Object.values(n):aZ(n,t)}const PQ=(n,e,t)=>{const i=bg(n,"object",e.keys);for(let o in i)i[o]=nN(i[o],e[o]);const r=Object.keys(i);let s={};if(r.length===e.keys.length)s=i;else{const o=bg(t,"object",e.keys);if(r.length===1&&e.locked){const a=r[0],l=i[a],u=o[a],h=u!==0?l/u:1;for(let f in o)f===a?s[a]=l:s[f]=o[f]*h}else s=sn(sn({},o),i)}return bg(s,e.format,e.keys)},IQ=(n,e)=>bg(n,"object",e.keys),DQ=n=>!!n&&("step"in n||"min"in n||"max"in n);function BQ(n,e,t=[]){const{lock:i=!1}=e,r=oi(e,MQ),s=Array.isArray(n)?"array":"object",o=s==="object"?Object.keys(n):t,a=bg(n,"object",o),l=DQ(r)?o.reduce((h,f)=>Object.assign(h,{[f]:r}),{}):r,u=SN(a,l);return{value:s==="array"?n:a,settings:sn(sn({},u),{},{format:s,keys:o,lock:i,locked:!1})}}function EN(n){return{schema:TQ(n.length),normalize:e=>{let{value:t}=e,i=oi(e,CQ);return BQ(t,i,n)},format:(e,t)=>IQ(e,t),sanitize:(e,t,i)=>PQ(e,t,i)}}var LQ={grad:.9,turn:360,rad:360/(2*Math.PI)},Vl=function(n){return typeof n=="string"?n.length>0:typeof n=="number"},Pr=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t+0},Oo=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n>e?n:e},AN=function(n){return(n=isFinite(n)?n%360:0)>0?n:n+360},UP=function(n){return{r:Oo(n.r,0,255),g:Oo(n.g,0,255),b:Oo(n.b,0,255),a:Oo(n.a)}},gS=function(n){return{r:Pr(n.r),g:Pr(n.g),b:Pr(n.b),a:Pr(n.a,3)}},OQ=/^#([0-9a-f]{3,8})$/i,My=function(n){var e=n.toString(16);return e.length<2?"0"+e:e},bN=function(n){var e=n.r,t=n.g,i=n.b,r=n.a,s=Math.max(e,t,i),o=s-Math.min(e,t,i),a=o?s===e?(t-i)/o:s===t?2+(i-e)/o:4+(e-t)/o:0;return{h:60*(a<0?a+6:a),s:s?o/s*100:0,v:s/255*100,a:r}},MN=function(n){var e=n.h,t=n.s,i=n.v,r=n.a;e=e/360*6,t/=100,i/=100;var s=Math.floor(e),o=i*(1-t),a=i*(1-(e-s)*t),l=i*(1-(1-e+s)*t),u=s%6;return{r:255*[i,a,o,o,l,i][u],g:255*[l,i,i,a,o,o][u],b:255*[o,o,l,i,i,a][u],a:r}},zP=function(n){return{h:AN(n.h),s:Oo(n.s,0,100),l:Oo(n.l,0,100),a:Oo(n.a)}},HP=function(n){return{h:Pr(n.h),s:Pr(n.s),l:Pr(n.l),a:Pr(n.a,3)}},VP=function(n){return MN((t=(e=n).s,{h:e.h,s:(t*=((i=e.l)<50?i:100-i)/100)>0?2*t/(i+t)*100:0,v:i+t,a:e.a}));var e,t,i},Mg=function(n){return{h:(e=bN(n)).h,s:(r=(200-(t=e.s))*(i=e.v)/100)>0&&r<200?t*i/100/(r<=100?r:200-r)*100:0,l:r/2,a:e.a};var e,t,i,r},NQ=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,FQ=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,kQ=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,UQ=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,rA={string:[[function(n){var e=OQ.exec(n);return e?(n=e[1]).length<=4?{r:parseInt(n[0]+n[0],16),g:parseInt(n[1]+n[1],16),b:parseInt(n[2]+n[2],16),a:n.length===4?Pr(parseInt(n[3]+n[3],16)/255,2):1}:n.length===6||n.length===8?{r:parseInt(n.substr(0,2),16),g:parseInt(n.substr(2,2),16),b:parseInt(n.substr(4,2),16),a:n.length===8?Pr(parseInt(n.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(n){var e=kQ.exec(n)||UQ.exec(n);return e?e[2]!==e[4]||e[4]!==e[6]?null:UP({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(n){var e=NQ.exec(n)||FQ.exec(n);if(!e)return null;var t,i,r=zP({h:(t=e[1],i=e[2],i===void 0&&(i="deg"),Number(t)*(LQ[i]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return VP(r)},"hsl"]],object:[[function(n){var e=n.r,t=n.g,i=n.b,r=n.a,s=r===void 0?1:r;return Vl(e)&&Vl(t)&&Vl(i)?UP({r:Number(e),g:Number(t),b:Number(i),a:Number(s)}):null},"rgb"],[function(n){var e=n.h,t=n.s,i=n.l,r=n.a,s=r===void 0?1:r;if(!Vl(e)||!Vl(t)||!Vl(i))return null;var o=zP({h:Number(e),s:Number(t),l:Number(i),a:Number(s)});return VP(o)},"hsl"],[function(n){var e=n.h,t=n.s,i=n.v,r=n.a,s=r===void 0?1:r;if(!Vl(e)||!Vl(t)||!Vl(i))return null;var o=(function(a){return{h:AN(a.h),s:Oo(a.s,0,100),v:Oo(a.v,0,100),a:Oo(a.a)}})({h:Number(e),s:Number(t),v:Number(i),a:Number(s)});return MN(o)},"hsv"]]},GP=function(n,e){for(var t=0;t<e.length;t++){var i=e[t][0](n);if(i)return[i,e[t][1]]}return[null,void 0]},CN=function(n){return typeof n=="string"?GP(n.trim(),rA.string):typeof n=="object"&&n!==null?GP(n,rA.object):[null,void 0]},zQ=function(n){return CN(n)[1]},vS=function(n,e){var t=Mg(n);return{h:t.h,s:Oo(t.s+100*e,0,100),l:t.l,a:t.a}},yS=function(n){return(299*n.r+587*n.g+114*n.b)/1e3/255},jP=function(n,e){var t=Mg(n);return{h:t.h,s:t.s,l:Oo(t.l+100*e,0,100),a:t.a}},sA=(function(){function n(e){this.parsed=CN(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return n.prototype.isValid=function(){return this.parsed!==null},n.prototype.brightness=function(){return Pr(yS(this.rgba),2)},n.prototype.isDark=function(){return yS(this.rgba)<.5},n.prototype.isLight=function(){return yS(this.rgba)>=.5},n.prototype.toHex=function(){return e=gS(this.rgba),t=e.r,i=e.g,r=e.b,o=(s=e.a)<1?My(Pr(255*s)):"","#"+My(t)+My(i)+My(r)+o;var e,t,i,r,s,o},n.prototype.toRgb=function(){return gS(this.rgba)},n.prototype.toRgbString=function(){return e=gS(this.rgba),t=e.r,i=e.g,r=e.b,(s=e.a)<1?"rgba("+t+", "+i+", "+r+", "+s+")":"rgb("+t+", "+i+", "+r+")";var e,t,i,r,s},n.prototype.toHsl=function(){return HP(Mg(this.rgba))},n.prototype.toHslString=function(){return e=HP(Mg(this.rgba)),t=e.h,i=e.s,r=e.l,(s=e.a)<1?"hsla("+t+", "+i+"%, "+r+"%, "+s+")":"hsl("+t+", "+i+"%, "+r+"%)";var e,t,i,r,s},n.prototype.toHsv=function(){return e=bN(this.rgba),{h:Pr(e.h),s:Pr(e.s),v:Pr(e.v),a:Pr(e.a,3)};var e},n.prototype.invert=function(){return Es({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},n.prototype.saturate=function(e){return e===void 0&&(e=.1),Es(vS(this.rgba,e))},n.prototype.desaturate=function(e){return e===void 0&&(e=.1),Es(vS(this.rgba,-e))},n.prototype.grayscale=function(){return Es(vS(this.rgba,-1))},n.prototype.lighten=function(e){return e===void 0&&(e=.1),Es(jP(this.rgba,e))},n.prototype.darken=function(e){return e===void 0&&(e=.1),Es(jP(this.rgba,-e))},n.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},n.prototype.alpha=function(e){return typeof e=="number"?Es({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):Pr(this.rgba.a,3);var t},n.prototype.hue=function(e){var t=Mg(this.rgba);return typeof e=="number"?Es({h:e,s:t.s,l:t.l,a:t.a}):Pr(t.h)},n.prototype.isEqual=function(e){return this.toHex()===Es(e).toHex()},n})(),Es=function(n){return n instanceof sA?n:new sA(n)},WP=[],HQ=function(n){n.forEach(function(e){WP.indexOf(e)<0&&(e(sA,rA),WP.push(e))})};function VQ(n,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},i={};for(var r in t)i[t[r]]=r;var s={};n.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,l,u=i[this.toHex()];if(u)return u;if(o?.closest){var h=this.toRgb(),f=1/0,g="black";if(!s.length)for(var v in t)s[v]=new n(t[v]).toRgb();for(var x in t){var S=(a=h,l=s[x],Math.pow(a.r-l.r,2)+Math.pow(a.g-l.g,2)+Math.pow(a.b-l.b,2));S<f&&(f=S,g=x)}return g}},e.string.push([function(o){var a=o.toLowerCase(),l=a==="transparent"?"#0000":t[a];return l?new n(l).toRgb():null},"name"])}function Lp(){return(Lp=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n}).apply(this,arguments)}function mM(n,e){if(n==null)return{};var t,i,r={},s=Object.keys(n);for(i=0;i<s.length;i++)e.indexOf(t=s[i])>=0||(r[t]=n[t]);return r}function oA(n){var e=I.useRef(n),t=I.useRef(function(i){e.current&&e.current(i)});return e.current=n,t.current}var vp=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n<e?e:n},Cg=function(n){return"touches"in n},aA=function(n){return n&&n.ownerDocument.defaultView||self},$P=function(n,e,t){var i=n.getBoundingClientRect(),r=Cg(e)?(function(s,o){for(var a=0;a<s.length;a++)if(s[a].identifier===o)return s[a];return s[0]})(e.touches,t):e;return{left:vp((r.pageX-(i.left+aA(n).pageXOffset))/i.width),top:vp((r.pageY-(i.top+aA(n).pageYOffset))/i.height)}},XP=function(n){!Cg(n)&&n.preventDefault()},gM=oe.memo(function(n){var e=n.onMove,t=n.onKey,i=mM(n,["onMove","onKey"]),r=I.useRef(null),s=oA(e),o=oA(t),a=I.useRef(null),l=I.useRef(!1),u=I.useMemo(function(){var v=function(w){XP(w),(Cg(w)?w.touches.length>0:w.buttons>0)&&r.current?s($P(r.current,w,a.current)):S(!1)},x=function(){return S(!1)};function S(w){var _=l.current,b=aA(r.current),M=w?b.addEventListener:b.removeEventListener;M(_?"touchmove":"mousemove",v),M(_?"touchend":"mouseup",x)}return[function(w){var _=w.nativeEvent,b=r.current;if(b&&(XP(_),!(function(T,L){return L&&!Cg(T)})(_,l.current)&&b)){if(Cg(_)){l.current=!0;var M=_.changedTouches||[];M.length&&(a.current=M[0].identifier)}b.focus(),s($P(b,_,a.current)),S(!0)}},function(w){var _=w.which||w.keyCode;_<37||_>40||(w.preventDefault(),o({left:_===39?.05:_===37?-.05:0,top:_===40?.05:_===38?-.05:0}))},S]},[o,s]),h=u[0],f=u[1],g=u[2];return I.useEffect(function(){return g},[g]),oe.createElement("div",Lp({},i,{onTouchStart:h,onMouseDown:h,className:"react-colorful__interactive",ref:r,onKeyDown:f,tabIndex:0,role:"slider"}))}),T0=function(n){return n.filter(Boolean).join(" ")},vM=function(n){var e=n.color,t=n.left,i=n.top,r=i===void 0?.5:i,s=T0(["react-colorful__pointer",n.className]);return oe.createElement("div",{className:s,style:{top:100*r+"%",left:100*t+"%"}},oe.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:e}}))},Cs=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t},TN=function(n){var e=n.s,t=n.v,i=n.a,r=(200-e)*t/100;return{h:Cs(n.h),s:Cs(r>0&&r<200?e*t/100/(r<=100?r:200-r)*100:0),l:Cs(r/2),a:Cs(i,2)}},lA=function(n){var e=TN(n);return"hsl("+e.h+", "+e.s+"%, "+e.l+"%)"},xS=function(n){var e=TN(n);return"hsla("+e.h+", "+e.s+"%, "+e.l+"%, "+e.a+")"},RN=function(n){var e=n.h,t=n.s,i=n.v,r=n.a;e=e/360*6,t/=100,i/=100;var s=Math.floor(e),o=i*(1-t),a=i*(1-(e-s)*t),l=i*(1-(1-e+s)*t),u=s%6;return{r:Cs(255*[i,a,o,o,l,i][u]),g:Cs(255*[l,i,i,a,o,o][u]),b:Cs(255*[o,o,l,i,i,a][u]),a:Cs(r,2)}},PN=function(n){var e=n.r,t=n.g,i=n.b,r=n.a,s=Math.max(e,t,i),o=s-Math.min(e,t,i),a=o?s===e?(t-i)/o:s===t?2+(i-e)/o:4+(e-t)/o:0;return{h:Cs(60*(a<0?a+6:a)),s:Cs(s?o/s*100:0),v:Cs(s/255*100),a:r}},IN=oe.memo(function(n){var e=n.hue,t=n.onChange,i=T0(["react-colorful__hue",n.className]);return oe.createElement("div",{className:i},oe.createElement(gM,{onMove:function(r){t({h:360*r.left})},onKey:function(r){t({h:vp(e+360*r.left,0,360)})},"aria-label":"Hue","aria-valuenow":Cs(e),"aria-valuemax":"360","aria-valuemin":"0"},oe.createElement(vM,{className:"react-colorful__hue-pointer",left:e/360,color:lA({h:e,s:100,v:100,a:1})})))}),DN=oe.memo(function(n){var e=n.hsva,t=n.onChange,i={backgroundColor:lA({h:e.h,s:100,v:100,a:1})};return oe.createElement("div",{className:"react-colorful__saturation",style:i},oe.createElement(gM,{onMove:function(r){t({s:100*r.left,v:100-100*r.top})},onKey:function(r){t({s:vp(e.s+100*r.left,0,100),v:vp(e.v-100*r.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+Cs(e.s)+"%, Brightness "+Cs(e.v)+"%"},oe.createElement(vM,{className:"react-colorful__saturation-pointer",top:1-e.v/100,left:e.s/100,color:lA(e)})))}),yM=function(n,e){if(n===e)return!0;for(var t in n)if(n[t]!==e[t])return!1;return!0};function BN(n,e,t){var i=oA(t),r=I.useState(function(){return n.toHsva(e)}),s=r[0],o=r[1],a=I.useRef({color:e,hsva:s});I.useEffect(function(){if(!n.equal(e,a.current.color)){var u=n.toHsva(e);a.current={hsva:u,color:e},o(u)}},[e,n]),I.useEffect(function(){var u;yM(s,a.current.hsva)||n.equal(u=n.fromHsva(s),a.current.color)||(a.current={hsva:s,color:u},i(u))},[s,n,i]);var l=I.useCallback(function(u){o(function(h){return Object.assign({},h,u)})},[]);return[s,l]}var GQ=typeof window<"u"?I.useLayoutEffect:I.useEffect,jQ=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},YP=new Map,LN=function(n){GQ(function(){var e=n.current?n.current.ownerDocument:document;if(e!==void 0&&!YP.has(e)){var t=e.createElement("style");t.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,YP.set(e,t);var i=jQ();i&&t.setAttribute("nonce",i),e.head.appendChild(t)}},[])},WQ=function(n){var e=n.className,t=n.colorModel,i=n.color,r=i===void 0?t.defaultColor:i,s=n.onChange,o=mM(n,["className","colorModel","color","onChange"]),a=I.useRef(null);LN(a);var l=BN(t,r,s),u=l[0],h=l[1],f=T0(["react-colorful",e]);return oe.createElement("div",Lp({},o,{ref:a,className:f}),oe.createElement(DN,{hsva:u,onChange:h}),oe.createElement(IN,{hue:u.h,onChange:h,className:"react-colorful__last-control"}))},$Q=function(n){var e=n.className,t=n.hsva,i=n.onChange,r={backgroundImage:"linear-gradient(90deg, "+xS(Object.assign({},t,{a:0}))+", "+xS(Object.assign({},t,{a:1}))+")"},s=T0(["react-colorful__alpha",e]),o=Cs(100*t.a);return oe.createElement("div",{className:s},oe.createElement("div",{className:"react-colorful__alpha-gradient",style:r}),oe.createElement(gM,{onMove:function(a){i({a:a.left})},onKey:function(a){i({a:vp(t.a+a.left)})},"aria-label":"Alpha","aria-valuetext":o+"%","aria-valuenow":o,"aria-valuemin":"0","aria-valuemax":"100"},oe.createElement(vM,{className:"react-colorful__alpha-pointer",left:t.a,color:xS(t)})))},XQ=function(n){var e=n.className,t=n.colorModel,i=n.color,r=i===void 0?t.defaultColor:i,s=n.onChange,o=mM(n,["className","colorModel","color","onChange"]),a=I.useRef(null);LN(a);var l=BN(t,r,s),u=l[0],h=l[1],f=T0(["react-colorful",e]);return oe.createElement("div",Lp({},o,{ref:a,className:f}),oe.createElement(DN,{hsva:u,onChange:h}),oe.createElement(IN,{hue:u.h,onChange:h}),oe.createElement($Q,{hsva:u,onChange:h,className:"react-colorful__last-control"}))},YQ={defaultColor:{r:0,g:0,b:0,a:1},toHsva:PN,fromHsva:RN,equal:yM},KQ=function(n){return oe.createElement(XQ,Lp({},n,{colorModel:YQ}))},JQ={defaultColor:{r:0,g:0,b:0},toHsva:function(n){return PN({r:n.r,g:n.g,b:n.b,a:1})},fromHsva:function(n){return{r:(e=RN(n)).r,g:e.g,b:e.b};var e},equal:yM},qQ=function(n){return oe.createElement(WQ,Lp({},n,{colorModel:JQ}))},_S={exports:{}},wS,KP;function ZQ(){if(KP)return wS;KP=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return wS=n,wS}var SS,JP;function QQ(){if(JP)return SS;JP=1;var n=ZQ();function e(){}function t(){}return t.resetWarningCache=e,SS=function(){function i(o,a,l,u,h,f){if(f!==n){var g=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw g.name="Invariant Violation",g}}i.isRequired=i;function r(){return i}var s={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:r,element:i,elementType:i,instanceOf:r,node:i,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:t,resetWarningCache:e};return s.PropTypes=s,s},SS}var qP;function eee(){return qP||(qP=1,_S.exports=QQ()()),_S.exports}var tee=eee();const pi=lc(tee);function Op(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{u(i.next(h))}catch(f){o(f)}}function l(h){try{u(i.throw(h))}catch(f){o(f)}}function u(h){h.done?s(h.value):r(h.value).then(a,l)}u((i=i.apply(n,e||[])).next())})}function Np(n,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,r,s,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(h){return l([u,h])}}function l(u){if(i)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(t=0)),t;)try{if(i=1,r&&(s=u[0]&2?r.return:u[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,u[1])).done)return s;switch(r=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,r=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){t.label=u[1];break}if(u[0]===6&&t.label<s[1]){t.label=s[1],s=u;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(u);break}s[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(n,t)}catch(h){u=[6,h],r=0}finally{i=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function nee(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var i=t.call(n),r,s=[],o;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(a){o={error:a}}finally{try{r&&!r.done&&(t=i.return)&&t.call(i)}finally{if(o)throw o.error}}return s}function iee(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(nee(arguments[e]));return n}var ree=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function R0(n,e){var t=see(n);if(typeof t.path!="string"){var i=n.webkitRelativePath;Object.defineProperty(t,"path",{value:typeof e=="string"?e:typeof i=="string"&&i.length>0?i:n.name,writable:!1,configurable:!1,enumerable:!0})}return t}function see(n){var e=n.name,t=e&&e.lastIndexOf(".")!==-1;if(t&&!n.type){var i=e.split(".").pop().toLowerCase(),r=ree.get(i);r&&Object.defineProperty(n,"type",{value:r,writable:!1,configurable:!1,enumerable:!0})}return n}var oee=[".DS_Store","Thumbs.db"];function aee(n){return Op(this,void 0,void 0,function(){return Np(this,function(e){return i_(n)&&lee(n)?[2,hee(n.dataTransfer,n.type)]:cee(n)?[2,uee(n)]:Array.isArray(n)&&n.every(function(t){return"getFile"in t&&typeof t.getFile=="function"})?[2,dee(n)]:[2,[]]})})}function lee(n){return i_(n.dataTransfer)}function cee(n){return i_(n)&&i_(n.target)}function i_(n){return typeof n=="object"&&n!==null}function uee(n){return cA(n.target.files).map(function(e){return R0(e)})}function dee(n){return Op(this,void 0,void 0,function(){var e;return Np(this,function(t){switch(t.label){case 0:return[4,Promise.all(n.map(function(i){return i.getFile()}))];case 1:return e=t.sent(),[2,e.map(function(i){return R0(i)})]}})})}function hee(n,e){return Op(this,void 0,void 0,function(){var t,i;return Np(this,function(r){switch(r.label){case 0:return n===null?[2,[]]:n.items?(t=cA(n.items).filter(function(s){return s.kind==="file"}),e!=="drop"?[2,t]:[4,Promise.all(t.map(fee))]):[3,2];case 1:return i=r.sent(),[2,ZP(ON(i))];case 2:return[2,ZP(cA(n.files).map(function(s){return R0(s)}))]}})})}function ZP(n){return n.filter(function(e){return oee.indexOf(e.name)===-1})}function cA(n){if(n===null)return[];for(var e=[],t=0;t<n.length;t++){var i=n[t];e.push(i)}return e}function fee(n){if(typeof n.webkitGetAsEntry!="function")return QP(n);var e=n.webkitGetAsEntry();return e&&e.isDirectory?NN(e):QP(n)}function ON(n){return n.reduce(function(e,t){return iee(e,Array.isArray(t)?ON(t):[t])},[])}function QP(n){var e=n.getAsFile();if(!e)return Promise.reject(n+" is not a File");var t=R0(e);return Promise.resolve(t)}function pee(n){return Op(this,void 0,void 0,function(){return Np(this,function(e){return[2,n.isDirectory?NN(n):mee(n)]})})}function NN(n){var e=n.createReader();return new Promise(function(t,i){var r=[];function s(){var o=this;e.readEntries(function(a){return Op(o,void 0,void 0,function(){var l,u,h;return Np(this,function(f){switch(f.label){case 0:if(a.length)return[3,5];f.label=1;case 1:return f.trys.push([1,3,,4]),[4,Promise.all(r)];case 2:return l=f.sent(),t(l),[3,4];case 3:return u=f.sent(),i(u),[3,4];case 4:return[3,6];case 5:h=Promise.all(a.map(pee)),r.push(h),s(),f.label=6;case 6:return[2]}})})},function(a){i(a)})}s()})}function mee(n){return Op(this,void 0,void 0,function(){return Np(this,function(e){return[2,new Promise(function(t,i){n.file(function(r){var s=R0(r,n.fullPath);t(s)},function(r){i(r)})})]})})}var Cy={},eI;function gee(){return eI||(eI=1,Cy.__esModule=!0,Cy.default=function(n,e){if(n&&e){var t=Array.isArray(e)?e:e.split(",");if(t.length===0)return!0;var i=n.name||"",r=(n.type||"").toLowerCase(),s=r.replace(/\/.*$/,"");return t.some(function(o){var a=o.trim().toLowerCase();return a.charAt(0)==="."?i.toLowerCase().endsWith(a):a.endsWith("/*")?s===a.replace(/\/.*$/,""):r===a})}return!0}),Cy}var vee=gee();const yee=lc(vee);function tI(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function nI(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?tI(Object(t),!0).forEach(function(i){FN(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):tI(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function FN(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function iI(n,e){return See(n)||wee(n,e)||_ee(n,e)||xee()}function xee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _ee(n,e){if(n){if(typeof n=="string")return rI(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return rI(n,e)}}function rI(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function wee(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i=[],r=!0,s=!1,o,a;try{for(t=t.call(n);!(r=(o=t.next()).done)&&(i.push(o.value),!(e&&i.length===e));r=!0);}catch(l){s=!0,a=l}finally{try{!r&&t.return!=null&&t.return()}finally{if(s)throw a}}return i}}function See(n){if(Array.isArray(n))return n}var Eee="file-invalid-type",Aee="file-too-large",bee="file-too-small",Mee="too-many-files",Cee=function(e){e=Array.isArray(e)&&e.length===1?e[0]:e;var t=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:Eee,message:"File type must be ".concat(t)}},sI=function(e){return{code:Aee,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},oI=function(e){return{code:bee,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},Tee={code:Mee,message:"Too many files"};function kN(n,e){var t=n.type==="application/x-moz-file"||yee(n,e);return[t,t?null:Cee(e)]}function UN(n,e,t){if(Km(n.size))if(Km(e)&&Km(t)){if(n.size>t)return[!1,sI(t)];if(n.size<e)return[!1,oI(e)]}else{if(Km(e)&&n.size<e)return[!1,oI(e)];if(Km(t)&&n.size>t)return[!1,sI(t)]}return[!0,null]}function Km(n){return n!=null}function Ree(n){var e=n.files,t=n.accept,i=n.minSize,r=n.maxSize,s=n.multiple,o=n.maxFiles;return!s&&e.length>1||s&&o>=1&&e.length>o?!1:e.every(function(a){var l=kN(a,t),u=iI(l,1),h=u[0],f=UN(a,i,r),g=iI(f,1),v=g[0];return h&&v})}function r_(n){return typeof n.isPropagationStopped=="function"?n.isPropagationStopped():typeof n.cancelBubble<"u"?n.cancelBubble:!1}function Ty(n){return n.dataTransfer?Array.prototype.some.call(n.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!n.target&&!!n.target.files}function aI(n){n.preventDefault()}function Pee(n){return n.indexOf("MSIE")!==-1||n.indexOf("Trident/")!==-1}function Iee(n){return n.indexOf("Edge/")!==-1}function Dee(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return Pee(n)||Iee(n)}function Va(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(i){for(var r=arguments.length,s=new Array(r>1?r-1:0),o=1;o<r;o++)s[o-1]=arguments[o];return e.some(function(a){return!r_(i)&&a&&a.apply(void 0,[i].concat(s)),r_(i)})}}function Bee(){return"showOpenFilePicker"in window}function Lee(n){return n=typeof n=="string"?n.split(","):n,[{description:"everything",accept:Array.isArray(n)?n.filter(function(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}).reduce(function(e,t){return nI(nI({},e),{},FN({},t,[]))},{}):{}}]}function Oee(n){return n instanceof DOMException&&(n.name==="AbortError"||n.code===n.ABORT_ERR)}function Nee(n){return n instanceof DOMException&&(n.name==="SecurityError"||n.code===n.SECURITY_ERR)}var Fee=["children"],kee=["open"],Uee=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],zee=["refKey","onChange","onClick"];function Hee(n){return jee(n)||Gee(n)||zN(n)||Vee()}function Vee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gee(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function jee(n){if(Array.isArray(n))return uA(n)}function ES(n,e){return Xee(n)||$ee(n,e)||zN(n,e)||Wee()}function Wee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zN(n,e){if(n){if(typeof n=="string")return uA(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return uA(n,e)}}function uA(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function $ee(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i=[],r=!0,s=!1,o,a;try{for(t=t.call(n);!(r=(o=t.next()).done)&&(i.push(o.value),!(e&&i.length===e));r=!0);}catch(l){s=!0,a=l}finally{try{!r&&t.return!=null&&t.return()}finally{if(s)throw a}}return i}}function Xee(n){if(Array.isArray(n))return n}function lI(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Li(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?lI(Object(t),!0).forEach(function(i){dA(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):lI(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function dA(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function s_(n,e){if(n==null)return{};var t=Yee(n,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function Yee(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}var xM=I.forwardRef(function(n,e){var t=n.children,i=s_(n,Fee),r=VN(i),s=r.open,o=s_(r,kee);return I.useImperativeHandle(e,function(){return{open:s}},[s]),oe.createElement(I.Fragment,null,t(Li(Li({},o),{},{open:s})))});xM.displayName="Dropzone";var HN={disabled:!1,getFilesFromEvent:aee,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0};xM.defaultProps=HN;xM.propTypes={children:pi.func,accept:pi.oneOfType([pi.string,pi.arrayOf(pi.string)]),multiple:pi.bool,preventDropOnDocument:pi.bool,noClick:pi.bool,noKeyboard:pi.bool,noDrag:pi.bool,noDragEventsBubbling:pi.bool,minSize:pi.number,maxSize:pi.number,maxFiles:pi.number,disabled:pi.bool,getFilesFromEvent:pi.func,onFileDialogCancel:pi.func,onFileDialogOpen:pi.func,useFsAccessApi:pi.bool,onDragEnter:pi.func,onDragLeave:pi.func,onDragOver:pi.func,onDrop:pi.func,onDropAccepted:pi.func,onDropRejected:pi.func,validator:pi.func};var hA={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]};function VN(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=Li(Li({},HN),n),t=e.accept,i=e.disabled,r=e.getFilesFromEvent,s=e.maxSize,o=e.minSize,a=e.multiple,l=e.maxFiles,u=e.onDragEnter,h=e.onDragLeave,f=e.onDragOver,g=e.onDrop,v=e.onDropAccepted,x=e.onDropRejected,S=e.onFileDialogCancel,w=e.onFileDialogOpen,_=e.useFsAccessApi,b=e.preventDropOnDocument,M=e.noClick,T=e.noKeyboard,L=e.noDrag,D=e.noDragEventsBubbling,U=e.validator,F=I.useMemo(function(){return typeof w=="function"?w:cI},[w]),k=I.useMemo(function(){return typeof S=="function"?S:cI},[S]),N=I.useRef(null),V=I.useRef(null),Z=I.useReducer(Kee,hA),Q=ES(Z,2),le=Q[0],me=Q[1],fe=le.isFocused,xe=le.isFileDialogActive,X=le.draggedFiles,de=I.useRef(typeof window<"u"&&window.isSecureContext&&_&&Bee()),se=function(){!de.current&&xe&&setTimeout(function(){if(V.current){var Se=V.current.files;Se.length||(me({type:"closeDialog"}),k())}},300)};I.useEffect(function(){return window.addEventListener("focus",se,!1),function(){window.removeEventListener("focus",se,!1)}},[V,xe,k,de]);var Y=I.useRef([]),ge=function(Se){N.current&&N.current.contains(Se.target)||(Se.preventDefault(),Y.current=[])};I.useEffect(function(){return b&&(document.addEventListener("dragover",aI,!1),document.addEventListener("drop",ge,!1)),function(){b&&(document.removeEventListener("dragover",aI),document.removeEventListener("drop",ge))}},[N,b]);var Ve=I.useCallback(function(ne){ne.preventDefault(),ne.persist(),Je(ne),Y.current=[].concat(Hee(Y.current),[ne.target]),Ty(ne)&&Promise.resolve(r(ne)).then(function(Se){r_(ne)&&!D||(me({draggedFiles:Se,isDragActive:!0,type:"setDraggedFiles"}),u&&u(ne))})},[r,u,D]),we=I.useCallback(function(ne){ne.preventDefault(),ne.persist(),Je(ne);var Se=Ty(ne);if(Se&&ne.dataTransfer)try{ne.dataTransfer.dropEffect="copy"}catch{}return Se&&f&&f(ne),!1},[f,D]),Ne=I.useCallback(function(ne){ne.preventDefault(),ne.persist(),Je(ne);var Se=Y.current.filter(function(Re){return N.current&&N.current.contains(Re)}),ze=Se.indexOf(ne.target);ze!==-1&&Se.splice(ze,1),Y.current=Se,!(Se.length>0)&&(me({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),Ty(ne)&&h&&h(ne))},[N,h,D]),Le=I.useCallback(function(ne,Se){var ze=[],Re=[];ne.forEach(function(mt){var lt=kN(mt,t),Dt=ES(lt,2),Ft=Dt[0],qe=Dt[1],wt=UN(mt,o,s),Lt=ES(wt,2),It=Lt[0],St=Lt[1],ue=U?U(mt):null;if(Ft&&It&&!ue)ze.push(mt);else{var Oe=[qe,St];ue&&(Oe=Oe.concat(ue)),Re.push({file:mt,errors:Oe.filter(function(st){return st})})}}),(!a&&ze.length>1||a&&l>=1&&ze.length>l)&&(ze.forEach(function(mt){Re.push({file:mt,errors:[Tee]})}),ze.splice(0)),me({acceptedFiles:ze,fileRejections:Re,type:"setFiles"}),g&&g(ze,Re,Se),Re.length>0&&x&&x(Re,Se),ze.length>0&&v&&v(ze,Se)},[me,a,t,o,s,l,g,v,x,U]),Ge=I.useCallback(function(ne){ne.preventDefault(),ne.persist(),Je(ne),Y.current=[],Ty(ne)&&Promise.resolve(r(ne)).then(function(Se){r_(ne)&&!D||Le(Se,ne)}),me({type:"reset"})},[r,Le,D]),et=I.useCallback(function(){if(de.current){me({type:"openDialog"}),F();var ne={multiple:a,types:Lee(t)};window.showOpenFilePicker(ne).then(function(Se){return r(Se)}).then(function(Se){Le(Se,null),me({type:"closeDialog"})}).catch(function(Se){Oee(Se)?(k(Se),me({type:"closeDialog"})):Nee(Se)&&(de.current=!1,V.current&&(V.current.value=null,V.current.click()))});return}V.current&&(me({type:"openDialog"}),F(),V.current.value=null,V.current.click())},[me,F,k,_,Le,t,a]),ft=I.useCallback(function(ne){!N.current||!N.current.isEqualNode(ne.target)||(ne.key===" "||ne.key==="Enter"||ne.keyCode===32||ne.keyCode===13)&&(ne.preventDefault(),et())},[N,et]),yt=I.useCallback(function(){me({type:"focus"})},[]),nn=I.useCallback(function(){me({type:"blur"})},[]),Xt=I.useCallback(function(){M||(Dee()?setTimeout(et,0):et())},[M,et]),xt=function(Se){return i?null:Se},q=function(Se){return T?null:xt(Se)},at=function(Se){return L?null:xt(Se)},Je=function(Se){D&&Se.stopPropagation()},tt=I.useMemo(function(){return function(){var ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Se=ne.refKey,ze=Se===void 0?"ref":Se,Re=ne.role,mt=ne.onKeyDown,lt=ne.onFocus,Dt=ne.onBlur,Ft=ne.onClick,qe=ne.onDragEnter,wt=ne.onDragOver,Lt=ne.onDragLeave,It=ne.onDrop,St=s_(ne,Uee);return Li(Li(dA({onKeyDown:q(Va(mt,ft)),onFocus:q(Va(lt,yt)),onBlur:q(Va(Dt,nn)),onClick:xt(Va(Ft,Xt)),onDragEnter:at(Va(qe,Ve)),onDragOver:at(Va(wt,we)),onDragLeave:at(Va(Lt,Ne)),onDrop:at(Va(It,Ge)),role:typeof Re=="string"&&Re!==""?Re:"button"},ze,N),!i&&!T?{tabIndex:0}:{}),St)}},[N,ft,yt,nn,Xt,Ve,we,Ne,Ge,T,L,i]),$e=I.useCallback(function(ne){ne.stopPropagation()},[]),_t=I.useMemo(function(){return function(){var ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Se=ne.refKey,ze=Se===void 0?"ref":Se,Re=ne.onChange,mt=ne.onClick,lt=s_(ne,zee),Dt=dA({accept:t,multiple:a,type:"file",style:{display:"none"},onChange:xt(Va(Re,Ge)),onClick:xt(Va(mt,$e)),tabIndex:-1},ze,V);return Li(Li({},Dt),lt)}},[V,t,a,Ge,i]),Ye=X.length,K=Ye>0&&Ree({files:X,accept:t,minSize:o,maxSize:s,multiple:a,maxFiles:l}),j=Ye>0&&!K;return Li(Li({},le),{},{isDragAccept:K,isDragReject:j,isFocused:fe&&!i,getRootProps:tt,getInputProps:_t,rootRef:N,inputRef:V,open:xt(et)})}function Kee(n,e){switch(e.type){case"focus":return Li(Li({},n),{},{isFocused:!0});case"blur":return Li(Li({},n),{},{isFocused:!1});case"openDialog":return Li(Li({},hA),{},{isFileDialogActive:!0});case"closeDialog":return Li(Li({},n),{},{isFileDialogActive:!1});case"setDraggedFiles":var t=e.isDragActive,i=e.draggedFiles;return Li(Li({},n),{},{draggedFiles:i,isDragActive:t});case"setFiles":return Li(Li({},n),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections});case"reset":return Li({},hA);default:return n}}function cI(){}function Jee(n){let e;const t=new Set,i=(u,h)=>{const f=typeof u=="function"?u(e):u;if(f!==e){const g=e;e=h?f:Object.assign({},e,f),t.forEach(v=>v(e,g))}},r=()=>e,s=(u,h=r,f=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let g=h(e);function v(){const x=h(e);if(!f(g,x)){const S=g;u(g=x,S)}}return t.add(v),()=>t.delete(v)},l={setState:i,getState:r,subscribe:(u,h,f)=>h||f?s(u,h,f):(t.add(u),()=>t.delete(u)),destroy:()=>t.clear()};return e=n(i,r,l),l}const qee=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),uI=qee?I.useEffect:I.useLayoutEffect;function Zee(n){const e=typeof n=="function"?Jee(n):n,t=(i=e.getState,r=Object.is)=>{const[,s]=I.useReducer(w=>w+1,0),o=e.getState(),a=I.useRef(o),l=I.useRef(i),u=I.useRef(r),h=I.useRef(!1),f=I.useRef();f.current===void 0&&(f.current=i(o));let g,v=!1;(a.current!==o||l.current!==i||u.current!==r||h.current)&&(g=i(o),v=!r(f.current,g)),uI(()=>{v&&(f.current=g),a.current=o,l.current=i,u.current=r,h.current=!1});const x=I.useRef(o);uI(()=>{const w=()=>{try{const b=e.getState(),M=l.current(b);u.current(f.current,M)||(a.current=b,f.current=M,s())}catch{h.current=!0,s()}},_=e.subscribe(w);return e.getState()!==x.current&&w(),_},[]);const S=v?g:f.current;return I.useDebugValue(S),S};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[t,e];return{next(){const r=i.length<=0;return{value:i.shift(),done:r}}}},t}const Qee=n=>(e,t,i)=>{const r=i.subscribe;return i.subscribe=(o,a,l)=>{let u=o;if(a){const h=l?.equalityFn||Object.is;let f=o(i.getState());u=g=>{const v=o(g);if(!h(f,v)){const x=f;a(f=v,x)}},l?.fireImmediately&&a(f,f)}return r(u)},n(e,t,i)};/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var AS,dI;function ete(){return dI||(dI=1,AS=function(e){return e!=null&&typeof e=="object"&&Array.isArray(e)===!1}),AS}/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var bS,hI;function GN(){if(hI)return bS;hI=1;var n=ete();function e(t){return n(t)===!0&&Object.prototype.toString.call(t)==="[object Object]"}return bS=function(i){var r,s;return!(e(i)===!1||(r=i.constructor,typeof r!="function")||(s=r.prototype,e(s)===!1)||s.hasOwnProperty("isPrototypeOf")===!1)},bS}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var MS,fI;function _M(){if(fI)return MS;fI=1;var n=GN();return MS=function(t){return n(t)||typeof t=="function"||Array.isArray(t)},MS}/*!
 * for-in <https://github.com/jonschlinkert/for-in>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var CS,pI;function tte(){return pI||(pI=1,CS=function(e,t,i){for(var r in e)if(t.call(i,e[r],r,e)===!1)break}),CS}var TS,mI;function nte(){if(mI)return TS;mI=1;var n=_M(),e=tte();function t(o,a){for(var l=arguments.length,u=0;++u<l;){var h=arguments[u];r(h)&&e(h,i,o)}return o}function i(o,a){if(s(a)){var l=this[a];r(o)&&r(l)?t(l,o):this[a]=o}}function r(o){return n(o)&&!Array.isArray(o)}function s(o){return o!=="__proto__"&&o!=="constructor"&&o!=="prototype"}return TS=t,TS}/*!
 * get-value <https://github.com/jonschlinkert/get-value>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var RS,gI;function ite(){if(gI)return RS;gI=1,RS=function(t,i,r,s,o){if(!n(t)||!i)return t;if(i=e(i),r&&(i+="."+e(r)),s&&(i+="."+e(s)),o&&(i+="."+e(o)),i in t)return t[i];for(var a=i.split("."),l=a.length,u=-1;t&&++u<l;){for(var h=a[u];h[h.length-1]==="\\";)h=h.slice(0,-1)+"."+a[++u];t=t[h]}return t};function n(t){return t!==null&&(typeof t=="object"||typeof t=="function")}function e(t){return t?Array.isArray(t)?t.join("."):t:""}return RS}/*!
 * assign-symbols <https://github.com/jonschlinkert/assign-symbols>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var PS,vI;function rte(){return vI||(vI=1,PS=function(n,e){if(n===null||typeof n>"u")throw new TypeError("expected first argument to be an object.");if(typeof e>"u"||typeof Symbol>"u"||typeof Object.getOwnPropertySymbols!="function")return n;for(var t=Object.prototype.propertyIsEnumerable,i=Object(n),r=arguments.length,s=0;++s<r;)for(var o=Object(arguments[s]),a=Object.getOwnPropertySymbols(o),l=0;l<a.length;l++){var u=a[l];t.call(o,u)&&(i[u]=o[u])}return i}),PS}var IS,yI;function ste(){if(yI)return IS;yI=1;var n=_M(),e=rte();IS=Object.assign||function(a){if(a===null||typeof a>"u")throw new TypeError("Cannot convert undefined or null to object");s(a)||(a={});for(var l=1;l<arguments.length;l++){var u=arguments[l];i(u)&&(u=r(u)),s(u)&&(t(a,u),e(a,u))}return a};function t(a,l){for(var u in l)o(l,u)&&(a[u]=l[u])}function i(a){return a&&typeof a=="string"}function r(a){var l={};for(var u in a)l[u]=a[u];return l}function s(a){return a&&typeof a=="object"||n(a)}function o(a,l){return Object.prototype.hasOwnProperty.call(a,l)}return IS}/*!
 * split-string <https://github.com/jonschlinkert/split-string>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var DS,xI;function ote(){if(xI)return DS;xI=1;var n=ste();DS=function(r,s,o){if(typeof r!="string")throw new TypeError("expected a string");typeof s=="function"&&(o=s,s=null),typeof s=="string"&&(s={sep:s});var a=n({sep:"."},s),l=a.quotes||['"',"'","`"],u;a.brackets===!0?u={"<":">","(":")","[":"]","{":"}"}:a.brackets&&(u=a.brackets);var h=[],f=[],g=[""],v=a.sep,x=r.length,S=-1,w;function _(){if(u&&f.length)return u[f[f.length-1]]}for(;++S<x;){var b=r[S],M=r[S+1],T={val:b,idx:S,arr:g,str:r};if(h.push(T),b==="\\"){T.val=i(a,r,S)===!0?b+M:M,T.escaped=!0,typeof o=="function"&&o(T),g[g.length-1]+=T.val,S++;continue}if(u&&u[b]){f.push(b);var L=_(),D=S+1;if(r.indexOf(L,D+1)!==-1)for(;f.length&&D<x;){var U=r[++D];if(U==="\\"){U++;continue}if(l.indexOf(U)!==-1){D=e(r,U,D+1);continue}if(L=_(),f.length&&r.indexOf(L,D+1)===-1)break;if(u[U]){f.push(U);continue}L===U&&f.pop()}if(w=D,w===-1){g[g.length-1]+=b;continue}b=r.slice(S,w+1),T.val=b,T.idx=S=w}if(l.indexOf(b)!==-1){if(w=e(r,b,S+1),w===-1){g[g.length-1]+=b;continue}t(b,a)===!0?b=r.slice(S,w+1):b=r.slice(S+1,w),T.val=b,T.idx=S=w}if(typeof o=="function"&&(o(T,h),b=T.val,S=T.idx),T.val===v&&T.split!==!1){g.push("");continue}g[g.length-1]+=T.val}return g};function e(r,s,o,a){var l=r.indexOf(s,o);return r.charAt(l-1)==="\\"?e(r,s,l+1):l}function t(r,s){return s.keepDoubleQuotes===!0&&r==='"'||s.keepSingleQuotes===!0&&r==="'"?!0:s.keepQuotes}function i(r,s,o){return typeof r.keepEscaping=="function"?r.keepEscaping(s,o):r.keepEscaping===!0||s[o+1]==="\\"}return DS}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var BS,_I;function ate(){return _I||(_I=1,BS=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")}),BS}var LS,wI;function lte(){if(wI)return LS;wI=1;var n=ate();LS=function(r){n(r)||(r={});for(var s=arguments.length,o=1;o<s;o++){var a=arguments[o];n(a)&&e(r,a)}return r};function e(i,r){for(var s in r)t(r,s)&&(i[s]=r[s])}function t(i,r){return Object.prototype.hasOwnProperty.call(i,r)}return LS}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var OS,SI;function cte(){return SI||(SI=1,OS=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")}),OS}/*!
 * set-value <https://github.com/jonschlinkert/set-value>
 *
 * Copyright (c) 2014-2015, 2017, Jon Schlinkert.
 * Released under the MIT License.
 */var NS,EI;function ute(){if(EI)return NS;EI=1;var n=ote(),e=lte(),t=GN(),i=cte();NS=function(s,o,a){if(!i(s)||(Array.isArray(o)&&(o=[].concat.apply([],o).join(".")),typeof o!="string"))return s;for(var l=n(o,{sep:".",brackets:!0}).filter(r),u=l.length,h=-1,f=s;++h<u;){var g=l[h];if(h!==u-1){i(f[g])||(f[g]={}),f=f[g];continue}t(f[g])&&t(a)?f[g]=e({},f[g],a):f[g]=a}return s};function r(s){return s!=="__proto__"&&s!=="constructor"&&s!=="prototype"}return NS}var FS,AI;function dte(){if(AI)return FS;AI=1;var n=_M(),e=nte(),t=ite(),i=ute();return FS=function(s,o,a){if(!n(s))throw new TypeError("expected an object");if(typeof o!="string"||a==null)return e.apply(null,arguments);if(typeof a=="string")return i(s,o,a),s;var l=t(s,o);return n(a)&&n(l)&&(a=e({},l,a)),i(s,o,a),s},FS}var hte=dte();const fte=lc(hte),wM=(...n)=>n.filter(Boolean).join(".");function pte(n){const e=n.split(".");return[e.pop(),e.join(".")||void 0]}function mte(n,e){return Object.entries(sZ(n,e)).reduce((t,[,{value:i,disabled:r,key:s}])=>(t[s]=r?void 0:i,t),{})}function gte(n,e){const t=I.useRef();return Yg(n,t.current)||(t.current=n),t.current}function jN(n,e){return I.useMemo(n,gte(e))}function vte(n){const e=I.useRef(null),t=I.useRef(null),i=I.useRef(!0);return I.useLayoutEffect(()=>{n||(e.current.style.height="0px",e.current.style.overflow="hidden")},[]),I.useEffect(()=>{if(i.current){i.current=!1;return}let r;const s=e.current,o=()=>{n&&(s.style.removeProperty("height"),s.style.removeProperty("overflow"),t.current.scrollIntoView({behavior:"smooth",block:"nearest"}))};s.addEventListener("transitionend",o,{once:!0});const{height:a}=t.current.getBoundingClientRect();return s.style.height=a+"px",n||(s.style.overflow="hidden",r=window.setTimeout(()=>s.style.height="0px",50)),()=>{s.removeEventListener("transitionend",o),clearTimeout(r)}},[n]),{wrapperRef:e,contentRef:t}}const yte=n=>{const[e,t]=I.useState(n.getVisiblePaths());return I.useEffect(()=>{t(n.getVisiblePaths());const i=n.useStore.subscribe(n.getVisiblePaths,t,{equalityFn:i1});return()=>i()},[n]),e};function xte(n,e,t){return n.useStore(r=>{const s=sn(sn({},t),r.data);return mte(s,e)},i1)}function WN(n=3){const e=I.useRef(null),t=I.useRef(null),[i,r]=I.useState(!1),s=I.useCallback(()=>r(!0),[]),o=I.useCallback(()=>r(!1),[]);return I.useLayoutEffect(()=>{if(i){const{bottom:a,top:l,left:u}=e.current.getBoundingClientRect(),{height:h}=t.current.getBoundingClientRect(),f=a+h>window.innerHeight-40?"up":"down";t.current.style.position="fixed",t.current.style.zIndex="10000",t.current.style.left=u+"px",f==="down"?t.current.style.top=a+n+"px":t.current.style.bottom=window.innerHeight-l+n+"px"}},[n,i]),{popinRef:e,wrapperRef:t,shown:i,show:s,hide:o}}HQ([VQ]);const _te={rgb:"toRgb",hsl:"toHsl",hsv:"toHsv",hex:"toHex"};Js.extend({color:()=>n=>Es(n).isValid()});const wte=n=>Js().color().test(n);function $N(n,{format:e,hasAlpha:t,isString:i}){const r=_te[e]+(i&&e!=="hex"?"String":""),s=n[r]();return typeof s=="object"&&!t?oZ(s,["a"]):s}const XN=(n,e)=>{const t=Es(n);if(!t.isValid())throw Error("Invalid color");return $N(t,e)},Ste=(n,e)=>$N(Es(n),sn(sn({},e),{},{isString:!0,format:"hex"})),Ete=({value:n})=>{const e=zQ(n),t=e==="name"?"hex":e,i=typeof n=="object"?"a"in n:e==="hex"&&n.length===8||/^(rgba)|(hsla)|(hsva)/.test(n),r={format:t,hasAlpha:i,isString:typeof n=="string"};return{value:XN(n,r),settings:r}};var Ate=Object.freeze({__proto__:null,schema:wte,sanitize:XN,format:Ste,normalize:Ete});const bte=tn("div",{position:"relative",boxSizing:"border-box",borderRadius:"$sm",overflow:"hidden",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",backgroundColor:"#fff",backgroundImage:`url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')`,$inputStyle:"",$hover:"",zIndex:1,variants:{active:{true:{$inputStyle:"$accent1"}}},"&::before":{content:'""',position:"absolute",top:0,bottom:0,right:0,left:0,backgroundColor:"currentColor",zIndex:1}}),Mte=tn("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto",columnGap:"$colGap",alignItems:"center"}),Cte=tn("div",{width:"$colorPickerWidth",height:"$colorPickerHeight",".react-colorful":{width:"100%",height:"100%",boxShadow:"$level2",cursor:"crosshair"},".react-colorful__saturation":{borderRadius:"$sm $sm 0 0"},".react-colorful__alpha, .react-colorful__hue":{height:10},".react-colorful__last-control":{borderRadius:"0 0 $sm $sm"},".react-colorful__pointer":{height:12,width:12}});function bI(n,e){return e!=="rgb"?Es(n).toRgb():n}function Tte({value:n,displayValue:e,settings:t,onUpdate:i}){const{emitOnEditStart:r,emitOnEditEnd:s}=as(),{format:o,hasAlpha:a}=t,{popinRef:l,wrapperRef:u,shown:h,show:f,hide:g}=WN(),v=I.useRef(0),[x,S]=I.useState(()=>bI(n,o)),w=a?KQ:qQ,_=()=>{S(bI(n,o)),f(),r()},b=()=>{g(),s(),window.clearTimeout(v.current)},M=()=>{v.current=window.setTimeout(b,500)};return I.useEffect(()=>()=>window.clearTimeout(v.current),[]),oe.createElement(oe.Fragment,null,oe.createElement(bte,{ref:l,active:h,onClick:()=>_(),style:{color:e}}),h&&oe.createElement(hM,null,oe.createElement(mN,{onPointerUp:b}),oe.createElement(Cte,{ref:u,onMouseEnter:()=>window.clearTimeout(v.current),onMouseLeave:T=>T.buttons===0&&M()},oe.createElement(w,{color:x,onChange:i}))))}function Rte(){const{value:n,displayValue:e,label:t,onChange:i,onUpdate:r,settings:s}=as();return oe.createElement(Uo,{input:!0},oe.createElement(Aa,null,t),oe.createElement(Mte,null,oe.createElement(Tte,{value:n,displayValue:e,onChange:i,onUpdate:r,settings:s}),oe.createElement(dM,{value:e,onChange:i,onUpdate:r})))}var Pte=sn({component:Rte},Ate);function Ite(){const{label:n,displayValue:e,onUpdate:t,settings:i}=as();return oe.createElement(Uo,{input:!0},oe.createElement(Aa,null,n),oe.createElement(pM,{value:e,settings:i,onUpdate:t}))}var Dte=sn({component:Ite},EN(["x","y","z"]));const Bte=tn("div",{$flexCenter:"",position:"relative",backgroundColor:"$elevation3",borderRadius:"$sm",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",touchAction:"none",$draggable:"",$hover:"","&:active":{cursor:"none"},"&::after":{content:'""',backgroundColor:"$accent2",height:4,width:4,borderRadius:2}}),Lte=tn("div",{$flexCenter:"",width:"$joystickWidth",height:"$joystickHeight",borderRadius:"$sm",boxShadow:"$level2",position:"fixed",zIndex:1e4,overflow:"hidden",$draggable:"",transform:"translate(-50%, -50%)",variants:{isOutOfBounds:{true:{backgroundColor:"$elevation1"},false:{backgroundColor:"$elevation3"}}},"> div":{position:"absolute",$flexCenter:"",borderStyle:"solid",borderWidth:1,borderColor:"$highlight1",backgroundColor:"$elevation3",width:"80%",height:"80%","&::after,&::before":{content:'""',position:"absolute",zindex:10,backgroundColor:"$highlight1"},"&::before":{width:"100%",height:1},"&::after":{height:"100%",width:1}},"> span":{position:"relative",zindex:100,width:10,height:10,backgroundColor:"$accent2",borderRadius:"50%"}});function Ote({value:n,settings:e,onUpdate:t}){const i=I.useRef(),r=I.useRef(0),s=I.useRef(0),o=I.useRef(1),[a,l]=I.useState(!1),[u,h]=I.useState(!1),[f,g]=vN(),v=I.useRef(null),x=I.useRef(null);I.useLayoutEffect(()=>{if(a){const{top:Z,left:Q,width:le,height:me}=v.current.getBoundingClientRect();x.current.style.left=Q+le/2+"px",x.current.style.top=Z+me/2+"px"}},[a]);const{keys:[S,w],joystick:_}=e,b=_==="invertY"?1:-1,{[S]:{step:M},[w]:{step:T}}=e,L=tc("sizes","joystickWidth"),D=tc("sizes","joystickHeight"),U=parseFloat(L)*.8/2,F=parseFloat(D)*.8/2,k=I.useCallback(()=>{i.current||(h(!0),r.current&&g({x:r.current*U}),s.current&&g({y:s.current*-F}),i.current=window.setInterval(()=>{t(Z=>{const Q=M*r.current*o.current,le=b*T*s.current*o.current;return Array.isArray(Z)?{[S]:Z[0]+Q,[w]:Z[1]+le}:{[S]:Z[S]+Q,[w]:Z[w]+le}})},16))},[U,F,t,g,M,T,S,w,b]),N=I.useCallback(()=>{window.clearTimeout(i.current),i.current=void 0,h(!1)},[]);I.useEffect(()=>{function Z(Q){o.current=tN(Q)}return window.addEventListener("keydown",Z),window.addEventListener("keyup",Z),()=>{window.clearTimeout(i.current),window.removeEventListener("keydown",Z),window.removeEventListener("keyup",Z)}},[]);const V=C0(({first:Z,active:Q,delta:[le,me],movement:[fe,xe]})=>{Z&&l(!0);const X=gu(fe,-U,U),de=gu(xe,-F,F);r.current=Math.abs(fe)>Math.abs(X)?Math.sign(fe-X):0,s.current=Math.abs(xe)>Math.abs(de)?Math.sign(de-xe):0;let se=n[S],Y=n[w];Q?(r.current||(se+=le*M*o.current,g({x:X})),s.current||(Y-=b*me*T*o.current,g({y:de})),r.current||s.current?k():N(),t({[S]:se,[w]:Y})):(l(!1),r.current=0,s.current=0,g({x:0,y:0}),N())});return oe.createElement(Bte,$i({ref:v},V()),a&&oe.createElement(hM,null,oe.createElement(Lte,{ref:x,isOutOfBounds:u},oe.createElement("div",null),oe.createElement("span",{ref:f}))))}const Nte=tn("div",{display:"grid",columnGap:"$colGap",variants:{withJoystick:{true:{gridTemplateColumns:"$sizes$rowHeight auto"},false:{gridTemplateColumns:"auto"}}}});function Fte(){const{label:n,displayValue:e,onUpdate:t,settings:i}=as();return oe.createElement(Uo,{input:!0},oe.createElement(Aa,null,n),oe.createElement(Nte,{withJoystick:!!i.joystick},i.joystick&&oe.createElement(Ote,{value:e,settings:i,onUpdate:t}),oe.createElement(pM,{value:e,settings:i,onUpdate:t})))}const kte=["joystick"],YN=EN(["x","y"]),Ute=n=>{let{joystick:e=!0}=n,t=oi(n,kte);const{value:i,settings:r}=YN.normalize(t);return{value:i,settings:sn(sn({},r),{},{joystick:e})}};var zte=sn(sn({component:Fte},YN),{},{normalize:Ute});const Hte=n=>{if(n!==void 0){if(n instanceof File)try{return URL.createObjectURL(n)}catch{return}if(typeof n=="string"&&n.indexOf("blob:")===0)return n;throw Error("Invalid image format [undefined | blob |File].")}},Vte=(n,e)=>typeof e=="object"&&"image"in e,Gte=({image:n})=>({value:n});var jte=Object.freeze({__proto__:null,sanitize:Hte,schema:Vte,normalize:Gte});const Wte=tn("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto 20px",columnGap:"$colGap",alignItems:"center"}),$te=tn("div",{$flexCenter:"",overflow:"hidden",height:"$rowHeight",background:"$elevation3",textAlign:"center",color:"inherit",borderRadius:"$sm",outline:"none",userSelect:"none",cursor:"pointer",$inputStyle:"",$hover:"",$focusWithin:"",$active:"$accent1 $elevation1",variants:{isDragAccept:{true:{$inputStyle:"$accent1",backgroundColor:"$elevation1"}}}}),Xte=tn("div",{boxSizing:"border-box",borderRadius:"$sm",height:"$rowHeight",width:"$rowHeight",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center",variants:{hasImage:{true:{cursor:"pointer",$hover:"",$active:""}}}}),Yte=tn("div",{$flexCenter:"",width:"$imagePreviewWidth",height:"$imagePreviewHeight",borderRadius:"$sm",boxShadow:"$level2",pointerEvents:"none",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center"}),Kte=tn("div",{fontSize:"0.8em",height:"100%",padding:"$rowGap $md"}),Jte=tn("div",{$flexCenter:"",top:"0",right:"0",marginRight:"$sm",height:"100%",cursor:"pointer",variants:{disabled:{true:{color:"$elevation3",cursor:"default"}}},"&::after,&::before":{content:'""',position:"absolute",height:2,width:10,borderRadius:1,backgroundColor:"currentColor"},"&::after":{transform:"rotate(45deg)"},"&::before":{transform:"rotate(-45deg)"}});function qte(){const{label:n,value:e,onUpdate:t,disabled:i}=as(),{popinRef:r,wrapperRef:s,shown:o,show:a,hide:l}=WN(),u=I.useCallback(x=>{x.length&&t(x[0])},[t]),h=I.useCallback(x=>{x.stopPropagation(),t(void 0)},[t]),{getRootProps:f,getInputProps:g,isDragAccept:v}=VN({maxFiles:1,accept:"image/*",onDrop:u,disabled:i});return oe.createElement(Uo,{input:!0},oe.createElement(Aa,null,n),oe.createElement(Wte,null,oe.createElement(Xte,{ref:r,hasImage:!!e,onPointerDown:()=>!!e&&a(),onPointerUp:l,style:{backgroundImage:e?`url(${e})`:"none"}}),o&&!!e&&oe.createElement(hM,null,oe.createElement(mN,{onPointerUp:l,style:{cursor:"pointer"}}),oe.createElement(Yte,{ref:s,style:{backgroundImage:`url(${e})`}})),oe.createElement($te,f({isDragAccept:v}),oe.createElement("input",g()),oe.createElement(Kte,null,v?"drop image":"click or drop")),oe.createElement(Jte,{onClick:h,disabled:!e})))}var Zte=sn({component:qte},jte);const MI=Js().number(),Qte=(n,e)=>Js().array().length(2).every.number().test(n)&&Js().schema({min:MI,max:MI}).test(e),o_=n=>({min:n[0],max:n[1]}),KN=(n,{bounds:[e,t]},i)=>{const r=Array.isArray(n)?o_(n):n,s={min:i[0],max:i[1]},{min:o,max:a}=sn(sn({},s),r);return[gu(Number(o),e,Math.max(e,a)),gu(Number(a),Math.min(t,o),t)]},ene=({value:n,min:e,max:t})=>{const i={min:e,max:t},r=SN(o_(n),{min:i,max:i}),s=[e,t],o=sn(sn({},r),{},{bounds:s});return{value:KN(o_(n),o,n),settings:o}};var tne=Object.freeze({__proto__:null,schema:Qte,format:o_,sanitize:KN,normalize:ene});const nne=["value","bounds","onDrag"],ine=["bounds"],rne=tn("div",{display:"grid",columnGap:"$colGap",gridTemplateColumns:"auto calc($sizes$numberInputMinWidth * 2 + $space$rowGap)"});function sne(n){let{value:e,bounds:[t,i],onDrag:r}=n,s=oi(n,nne);const o=I.useRef(null),a=I.useRef(null),l=I.useRef(null),u=I.useRef(0),h=tc("sizes","scrubberWidth"),f=C0(({event:x,first:S,xy:[w],movement:[_],memo:b={}})=>{if(S){const{width:T,left:L}=o.current.getBoundingClientRect();u.current=T-parseFloat(h);const D=x?.target===a.current||x?.target===l.current;b.pos=t_((w-L)/T,t,i);const U=Math.abs(b.pos-e.min)-Math.abs(b.pos-e.max);b.key=U<0||U===0&&b.pos<=e.min?"min":"max",D&&(b.pos=e[b.key])}const M=b.pos+t_(_/u.current,0,i-t);return r({[b.key]:XZ(M,s[b.key])}),b}),g=`calc(${e_(e.min,t,i)} * (100% - ${h} - 8px) + 4px)`,v=`calc(${1-e_(e.max,t,i)} * (100% - ${h} - 8px) + 4px)`;return oe.createElement(xN,$i({ref:o},f()),oe.createElement(yN,null,oe.createElement(_N,{style:{left:g,right:v}})),oe.createElement(nA,{position:"left",ref:a,style:{left:g}}),oe.createElement(nA,{position:"right",ref:l,style:{right:v}}))}function one(){const{label:n,displayValue:e,onUpdate:t,settings:i}=as(),r=oi(i,ine);return oe.createElement(oe.Fragment,null,oe.createElement(Uo,{input:!0},oe.createElement(Aa,null,n),oe.createElement(rne,null,oe.createElement(sne,$i({value:e},i,{onDrag:t})),oe.createElement(pM,{value:e,settings:r,onUpdate:t,innerLabelTrim:0}))))}var ane=sn({component:one},tne);const lne=()=>{const n=new Map;return{on:(e,t)=>{let i=n.get(e);i===void 0&&(i=new Set,n.set(e,i)),i.add(t)},off:(e,t)=>{const i=n.get(e);i!==void 0&&(i.delete(t),i.size===0&&n.delete(e))},emit:(e,...t)=>{const i=n.get(e);if(i!==void 0)for(const r of i)r(...t)}}},cne=["type","value"],une=["onChange","transient","onEditStart","onEditEnd"],dne=function(){const e=Zee(Qee(()=>({data:{}}))),t=lne();this.storeId=rZ(),this.useStore=e;const i={},r=new Set;this.getVisiblePaths=()=>{const o=this.getData(),a=Object.keys(o),l=[];Object.entries(i).forEach(([h,f])=>{f.render&&a.some(g=>g.indexOf(h)===0)&&!f.render(this.get)&&l.push(h+".")});const u=[];return r.forEach(h=>{h in o&&o[h].__refCount>0&&l.every(f=>h.indexOf(f)===-1)&&(!o[h].render||o[h].render(this.get))&&u.push(h)}),u},this.setOrderedPaths=o=>{o.forEach(a=>r.add(a))},this.orderPaths=o=>(this.setOrderedPaths(o),o),this.disposePaths=o=>{e.setState(a=>{const l=a.data;return o.forEach(u=>{if(u in l){const h=l[u];h.__refCount--,h.__refCount===0&&h.type in _a&&delete l[u]}}),{data:l}})},this.dispose=()=>{e.setState(()=>({data:{}}))},this.getFolderSettings=o=>i[o]||{},this.getData=()=>e.getState().data,this.addData=(o,a)=>{e.setState(l=>{const u=l.data;return Object.entries(o).forEach(([h,f])=>{let g=u[h];if(g){const{type:v,value:x}=f,S=oi(f,cne);v!==g.type?Kl(Oi.INPUT_TYPE_OVERRIDE,v):((g.__refCount===0||a)&&Object.assign(g,S),g.__refCount++)}else u[h]=sn(sn({},f),{},{__refCount:1})}),{data:u}})},this.setValueAtPath=(o,a,l)=>{e.setState(u=>{const h=u.data;return kP(h[o],a,o,this,l),{data:h}})},this.setSettingsAtPath=(o,a)=>{e.setState(l=>{const u=l.data;return u[o].settings=sn(sn({},u[o].settings),a),{data:u}})},this.disableInputAtPath=(o,a)=>{e.setState(l=>{const u=l.data;return u[o].disabled=a,{data:u}})},this.set=(o,a)=>{e.setState(l=>{const u=l.data;return Object.entries(o).forEach(([h,f])=>{try{kP(u[h],f,void 0,void 0,a)}catch{}}),{data:u}})},this.getInput=o=>{try{return this.getData()[o]}catch{Kl(Oi.PATH_DOESNT_EXIST,o)}},this.get=o=>{var a;return(a=this.getInput(o))===null||a===void 0?void 0:a.value},this.emitOnEditStart=o=>{t.emit(`onEditStart:${o}`,this.get(o),o,sn(sn({},this.getInput(o)),{},{get:this.get}))},this.emitOnEditEnd=o=>{t.emit(`onEditEnd:${o}`,this.get(o),o,sn(sn({},this.getInput(o)),{},{get:this.get}))},this.subscribeToEditStart=(o,a)=>{const l=`onEditStart:${o}`;return t.on(l,a),()=>t.off(l,a)},this.subscribeToEditEnd=(o,a)=>{const l=`onEditEnd:${o}`;return t.on(l,a),()=>t.off(l,a)};const s=(o,a,l)=>{const u={};return Object.entries(o).forEach(([h,f])=>{if(h==="")return Kl(Oi.EMPTY_KEY);let g=wM(a,h);if(f.type===_a.FOLDER){const v=s(f.schema,g,l);Object.assign(u,v),g in i||(i[g]=f.settings)}else if(h in l)Kl(Oi.DUPLICATE_KEYS,h,g,l[h].path);else{const v=hZ(f,h,g,u);if(v){const{type:x,options:S,input:w}=v,{onChange:_,transient:b,onEditStart:M,onEditEnd:T}=S,L=oi(S,une);u[g]=sn(sn(sn({type:x},L),w),{},{fromPanel:!0}),l[h]={path:g,onChange:_,transient:b,onEditStart:M,onEditEnd:T}}else Kl(Oi.UNKNOWN_INPUT,g,f)}}),u};this.getDataFromSchema=o=>{const a={};return[s(o,"",a),a]}},JN=new dne,hne={collapsed:!1};function fne(n,e){return{type:_a.FOLDER,schema:n,settings:sn(sn({},hne),e)}}const CI=n=>"__levaInput"in n,pne=(n,e)=>{const t={},i=e?e.toLowerCase():null;return n.forEach(r=>{const[s,o]=pte(r);(!i||s.toLowerCase().indexOf(i)>-1)&&fte(t,o,{[s]:{__levaInput:!0,path:r}})}),t},mne=["type","label","path","valueKey","value","settings","setValue","disabled"];function gne(n){let{type:e,label:t,path:i,valueKey:r,value:s,settings:o,setValue:a,disabled:l}=n,u=oi(n,mne);const{displayValue:h,onChange:f,onUpdate:g}=gN({type:e,value:s,settings:o,setValue:a}),v=rh[e].component;return v?oe.createElement(oN.Provider,{value:sn({key:r,path:i,id:""+i,label:t,displayValue:h,value:s,onChange:f,onUpdate:g,settings:o,setValue:a,disabled:l},u)},oe.createElement(IZ,{disabled:l},oe.createElement(v,null))):(Kl(Oi.NO_COMPONENT_FOR_TYPE,e,i),null)}const vne=tn("button",{display:"block",$reset:"",fontWeight:"$button",height:"$rowHeight",borderStyle:"none",borderRadius:"$sm",backgroundColor:"$elevation1",color:"$highlight1","&:not(:disabled)":{color:"$highlight3",backgroundColor:"$accent2",cursor:"pointer",$hover:"$accent3",$active:"$accent3 $accent1",$focus:""}});function yne({onClick:n,settings:e,label:t}){const i=M0();return oe.createElement(Uo,null,oe.createElement(vne,{disabled:e.disabled,onClick:()=>n(i.get)},t))}const xne=tn("div",{$flex:"",justifyContent:"flex-end",gap:"$colGap"}),_ne=tn("button",{$reset:"",cursor:"pointer",borderRadius:"$xs","&:hover":{backgroundColor:"$elevation3"}}),wne=({label:n,opts:e})=>{let t=typeof n=="string"&&n.trim()===""?null:n,i=e;return typeof e.opts=="object"&&(i.label!==void 0&&(t=e.label),i=e.opts),{label:t,opts:i}};function Sne(n){const{label:e,opts:t}=wne(n),i=M0();return oe.createElement(Uo,{input:!!e},e&&oe.createElement(Aa,null,e),oe.createElement(xne,null,Object.entries(t).map(([r,s])=>oe.createElement(_ne,{key:r,onClick:()=>s(i.get)},r))))}const Ene=tn("canvas",{height:"$monitorHeight",width:"100%",display:"block",borderRadius:"$sm"}),qN=100;function Ane(n,e){n.push(e),n.length>qN&&n.shift()}const bne=I.forwardRef(function({initialValue:n},e){const t=tc("colors","highlight3"),i=tc("colors","elevation2"),r=tc("colors","highlight1"),[s,o]=I.useMemo(()=>[Es(r).alpha(.4).toRgbString(),Es(r).alpha(.1).toRgbString()],[r]),a=I.useRef([n]),l=I.useRef(n),u=I.useRef(n),h=I.useRef(),f=I.useCallback((x,S)=>{if(!x)return;const{width:w,height:_}=x,b=new Path2D,M=w/qN,T=_*.05;for(let U=0;U<a.current.length;U++){const F=e_(a.current[U],l.current,u.current),k=M*U,N=_-F*(_-T*2)-T;b.lineTo(k,N)}S.clearRect(0,0,w,_);const L=new Path2D(b);L.lineTo(M*(a.current.length+1),_),L.lineTo(0,_),L.lineTo(0,0);const D=S.createLinearGradient(0,0,0,_);D.addColorStop(0,s),D.addColorStop(1,o),S.fillStyle=D,S.fill(L),S.strokeStyle=i,S.lineJoin="round",S.lineWidth=14,S.stroke(b),S.strokeStyle=t,S.lineWidth=2,S.stroke(b)},[t,i,s,o]),[g,v]=zZ(f);return I.useImperativeHandle(e,()=>({frame:x=>{(l.current===void 0||x<l.current)&&(l.current=x),(u.current===void 0||x>u.current)&&(u.current=x),Ane(a.current,x),h.current=requestAnimationFrame(()=>f(g.current,v.current))}}),[g,v,f]),I.useEffect(()=>()=>cancelAnimationFrame(h.current),[]),oe.createElement(Ene,{ref:g})}),TI=n=>Number.isFinite(n)?n.toPrecision(2):n.toString(),Mne=I.forwardRef(function({initialValue:n},e){const[t,i]=I.useState(TI(n));return I.useImperativeHandle(e,()=>({frame:r=>i(TI(r))}),[]),oe.createElement("div",null,t)});function RI(n){return typeof n=="function"?n():n.current}function Cne({label:n,objectOrFn:e,settings:t}){const i=I.useRef(),r=I.useRef(RI(e));return I.useEffect(()=>{const s=window.setInterval(()=>{var o;document.hidden||(o=i.current)===null||o===void 0||o.frame(RI(e))},t.interval);return()=>window.clearInterval(s)},[e,t.interval]),oe.createElement(Uo,{input:!0},oe.createElement(Aa,{align:"top"},n),t.graph?oe.createElement(bne,{ref:i,initialValue:r.current}):oe.createElement(Mne,{ref:i,initialValue:r.current}))}const Tne=["type","label","key"],Rne={[_a.BUTTON]:yne,[_a.BUTTON_GROUP]:Sne,[_a.MONITOR]:Cne},Pne=oe.memo(({path:n})=>{const[e,{set:t,setSettings:i,disable:r,storeId:s,emitOnEditStart:o,emitOnEditEnd:a}]=VZ(n);if(!e)return null;const{type:l,label:u,key:h}=e,f=oi(e,Tne);if(l in _a){const g=Rne[l];return oe.createElement(g,$i({label:u,path:n},f))}return l in rh?oe.createElement(gne,$i({key:s+n,type:l,label:u,storeId:s,path:n,valueKey:h,setValue:t,setSettings:i,disable:r,emitOnEditStart:o,emitOnEditEnd:a},f)):(Jq(Oi.UNSUPPORTED_INPUT,l,n),null)});function Ine({toggle:n,toggled:e,name:t}){return oe.createElement(TZ,{onClick:()=>n()},oe.createElement(fM,{toggled:e}),oe.createElement("div",null,t))}const Dne=({name:n,path:e,tree:t})=>{const i=M0(),r=wM(e,n),{collapsed:s,color:o}=i.getFolderSettings(r),[a,l]=I.useState(!s),u=I.useRef(null),h=tc("colors","folderWidgetColor"),f=tc("colors","folderTextColor");return I.useLayoutEffect(()=>{u.current.style.setProperty("--leva-colors-folderWidgetColor",o||h),u.current.style.setProperty("--leva-colors-folderTextColor",o||f)},[o,h,f]),oe.createElement(n_,{ref:u},oe.createElement(Ine,{name:n,toggled:a,toggle:()=>l(g=>!g)}),oe.createElement(ZN,{parent:r,tree:t,toggled:a}))},ZN=oe.memo(({isRoot:n=!1,fill:e=!1,flat:t=!1,parent:i,tree:r,toggled:s})=>{const{wrapperRef:o,contentRef:a}=vte(s),l=M0(),u=([f,g])=>{var v;return(CI(g)?(v=l.getInput(g.path))===null||v===void 0?void 0:v.order:l.getFolderSettings(wM(i,f)).order)||0},h=Object.entries(r).sort((f,g)=>u(f)-u(g));return oe.createElement(eA,{ref:o,isRoot:n,fill:e,flat:t},oe.createElement(hN,{ref:a,isRoot:n,toggled:s},h.map(([f,g])=>CI(g)?oe.createElement(Pne,{key:g.path,valueKey:g.valueKey,path:g.path}):oe.createElement(Dne,{key:f,name:f,path:i,tree:g}))))}),Bne=tn("div",{position:"relative",fontFamily:"$mono",fontSize:"$root",color:"$rootText",backgroundColor:"$elevation1",variants:{fill:{false:{position:"fixed",top:"10px",right:"10px",zIndex:1e3,width:"$rootWidth"},true:{position:"relative",width:"100%"}},flat:{false:{borderRadius:"$lg",boxShadow:"$level1"}},oneLineLabels:{true:{[`${pN}`]:{gridTemplateColumns:"auto",gridAutoColumns:"minmax(max-content, 1fr)",gridAutoRows:"minmax($sizes$rowHeight), auto)",rowGap:0,columnGap:0,marginTop:"$rowGap"}}},hideTitleBar:{true:{$$titleBarHeight:"0px"},false:{$$titleBarHeight:"$sizes$titleBarHeight"}}},"&,*,*:after,*:before":{boxSizing:"border-box"},"*::selection":{backgroundColor:"$accent2"}}),QN=40,a_=tn("i",{$flexCenter:"",width:QN,userSelect:"none",cursor:"pointer","> svg":{fill:"$highlight1",transition:"transform 350ms ease, fill 250ms ease"},"&:hover > svg":{fill:"$highlight3"},variants:{active:{true:{"> svg":{fill:"$highlight2"}}}}}),Lne=tn("div",{display:"flex",alignItems:"stretch",justifyContent:"space-between",height:"$titleBarHeight",variants:{mode:{drag:{cursor:"grab"}}}}),One=tn("div",{$flex:"",position:"relative",width:"100%",overflow:"hidden",transition:"height 250ms ease",color:"$highlight3",paddingLeft:"$md",[`> ${a_}`]:{height:30},variants:{toggled:{true:{height:30},false:{height:0}}}}),Nne=tn("input",{$reset:"",flex:1,position:"relative",height:30,width:"100%",backgroundColor:"transparent",fontSize:"10px",borderRadius:"$root","&:focus":{},"&::placeholder":{color:"$highlight2"}}),Fne=tn("div",{touchAction:"none",$flexCenter:"",flex:1,"> svg":{fill:"$highlight1"},color:"$highlight1",variants:{drag:{true:{$draggable:"","> svg":{transition:"fill 250ms ease"},"&:hover":{color:"$highlight3"},"&:hover > svg":{fill:"$highlight3"}}},filterEnabled:{false:{paddingRight:QN}}}}),kne=oe.forwardRef(({setFilter:n,toggle:e},t)=>{const[i,r]=I.useState(""),s=I.useMemo(()=>eN(n,250),[n]),o=()=>{n(""),r("")},a=l=>{const u=l.currentTarget.value;e(!0),r(u)};return I.useEffect(()=>{s(i)},[i,s]),oe.createElement(oe.Fragment,null,oe.createElement(Nne,{ref:t,value:i,placeholder:"[Open filter with CMD+SHIFT+L]",onPointerDown:l=>l.stopPropagation(),onChange:a}),oe.createElement(a_,{onClick:()=>o(),style:{visibility:i?"visible":"hidden"}},oe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"14",viewBox:"0 0 20 20",fill:"currentColor"},oe.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))))});function Une({setFilter:n,onDrag:e,onDragStart:t,onDragEnd:i,toggle:r,toggled:s,title:o,drag:a,filterEnabled:l,from:u}){const[h,f]=I.useState(!1),g=I.useRef(null);I.useEffect(()=>{var x,S;h?(x=g.current)===null||x===void 0||x.focus():(S=g.current)===null||S===void 0||S.blur()},[h]);const v=C0(({offset:[x,S],first:w,last:_})=>{e({x,y:S}),w&&t({x,y:S}),_&&i({x,y:S})},{filterTaps:!0,from:({offset:[x,S]})=>[u?.x||x,u?.y||S]});return I.useEffect(()=>{const x=S=>{S.key==="L"&&S.shiftKey&&S.metaKey&&f(w=>!w)};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[]),oe.createElement(oe.Fragment,null,oe.createElement(Lne,{mode:a?"drag":void 0},oe.createElement(a_,{active:!s,onClick:()=>r()},oe.createElement(fM,{toggled:s,width:12,height:8})),oe.createElement(Fne,$i({},a?v():{},{drag:a,filterEnabled:l}),o===void 0&&a?oe.createElement("svg",{width:"20",height:"10",viewBox:"0 0 28 14",xmlns:"http://www.w3.org/2000/svg"},oe.createElement("circle",{cx:"2",cy:"2",r:"2"}),oe.createElement("circle",{cx:"14",cy:"2",r:"2"}),oe.createElement("circle",{cx:"26",cy:"2",r:"2"}),oe.createElement("circle",{cx:"2",cy:"12",r:"2"}),oe.createElement("circle",{cx:"14",cy:"12",r:"2"}),oe.createElement("circle",{cx:"26",cy:"12",r:"2"})):o),l&&oe.createElement(a_,{active:h,onClick:()=>f(x=>!x)},oe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 0 20 20"},oe.createElement("path",{d:"M9 9a2 2 0 114 0 2 2 0 01-4 0z"}),oe.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a4 4 0 00-3.446 6.032l-2.261 2.26a1 1 0 101.414 1.415l2.261-2.261A4 4 0 1011 5z",clipRule:"evenodd"})))),oe.createElement(One,{toggled:h},oe.createElement(kne,{ref:g,setFilter:n,toggle:r})))}const zne=["store","hidden","theme","collapsed"];function Hne(n){let{store:e,hidden:t=!1,theme:i,collapsed:r=!1}=n,s=oi(n,zne);const o=jN(()=>SZ(i),[i]),[a,l]=I.useState(!r),u=typeof r=="object"?!r.collapsed:a,h=I.useMemo(()=>typeof r=="object"?f=>{typeof f=="function"?r.onChange(!f(!r.collapsed)):r.onChange(!f)}:l,[r]);return!e||t?null:oe.createElement(uM.Provider,{value:o},oe.createElement(Vne,$i({store:e},s,{toggled:u,setToggle:h,rootClass:o.className})))}const Vne=oe.memo(({store:n,rootClass:e,fill:t=!1,flat:i=!1,neverHide:r=!1,oneLineLabels:s=!1,titleBar:o={title:void 0,drag:!0,filter:!0,position:void 0,onDrag:void 0,onDragStart:void 0,onDragEnd:void 0},hideCopyButton:a=!1,toggled:l,setToggle:u})=>{var h,f;const g=yte(n),[v,x]=I.useState(""),S=I.useMemo(()=>pne(g,v),[g,v]),[w,_]=vN(),b=r||g.length>0,M=typeof o=="object"&&o.title||void 0,T=typeof o=="object"&&(h=o.drag)!==null&&h!==void 0?h:!0,L=typeof o=="object"&&(f=o.filter)!==null&&f!==void 0?f:!0,D=typeof o=="object"&&o.position||void 0,U=typeof o=="object"&&o.onDrag||void 0,F=typeof o=="object"&&o.onDragStart||void 0,k=typeof o=="object"&&o.onDragEnd||void 0;return oe.useEffect(()=>{_({x:D?.x,y:D?.y})},[D,_]),wZ(),oe.createElement(lN.Provider,{value:{hideCopyButton:a}},oe.createElement(Bne,{ref:w,className:e,fill:t,flat:i,oneLineLabels:s,hideTitleBar:!o,style:{display:b?"block":"none"}},o&&oe.createElement(Une,{onDrag:N=>{_(N),U?.(N)},onDragStart:N=>F?.(N),onDragEnd:N=>k?.(N),setFilter:x,toggle:N=>u(V=>N??!V),toggled:l,title:M,drag:T,filterEnabled:L,from:D}),b&&oe.createElement(aN.Provider,{value:n},oe.createElement(ZN,{isRoot:!0,fill:t,flat:i,tree:S,toggled:l}))))}),Gne=["isRoot"];let l_=!1,Hd=null;function eF(n){let{isRoot:e=!1}=n,t=oi(n,Gne);return I.useEffect(()=>(l_=!0,!e&&Hd&&(Hd.remove(),Hd=null),()=>{e||(l_=!1)}),[e]),oe.createElement(Hne,$i({store:JN},t))}function jne(n){I.useEffect(()=>{n&&!l_&&(Hd||(Hd=document.getElementById("leva__root")||Object.assign(document.createElement("div"),{id:"leva__root"}),document.body&&(document.body.appendChild(Hd),ZI.createRoot(Hd).render(oe.createElement(eF,{isRoot:!0})))),l_=!0)},[n])}function Wne(n,e,t,i,r){let s,o,a,l,u;return typeof n=="string"?(o=n,s=e,Array.isArray(t)&&(u=t)):(s=n,Array.isArray(e)?u=e:(l=e,u=t)),{schema:s,folderName:o,folderSettings:a,hookSettings:l,deps:u||[]}}function $ne(n,e,t,i,r){const{folderName:s,schema:o,folderSettings:a,hookSettings:l,deps:u}=Wne(n,e,t),h=typeof o=="function",f=I.useRef(!1),g=I.useRef(!0),v=jN(()=>{f.current=!0;const V=typeof o=="function"?o():o;return s?{[s]:fne(V,a)}:V},u),x=!(l!=null&&l.store);jne(x);const[S]=I.useState(()=>l?.store||JN),[w,_]=I.useMemo(()=>S.getDataFromSchema(v),[S,v]),[b,M,T,L,D]=I.useMemo(()=>{const V=[],Z=[],Q={},le={},me={};return Object.values(_).forEach(({path:fe,onChange:xe,onEditStart:X,onEditEnd:de,transient:se})=>{V.push(fe),xe?(Q[fe]=xe,se||Z.push(fe)):Z.push(fe),X&&(le[fe]=X),de&&(me[fe]=de)}),[V,Z,Q,le,me]},[_]),U=I.useMemo(()=>S.orderPaths(b),[b,S]),F=xte(S,M,w),k=I.useCallback(V=>{const Z=Object.entries(V).reduce((Q,[le,me])=>Object.assign(Q,{[_[le].path]:me}),{});S.set(Z,!1)},[S,_]),N=I.useCallback(V=>S.get(_[V].path),[S,_]);return I.useEffect(()=>{const V=!g.current&&f.current;return S.addData(w,V),g.current=!1,f.current=!1,()=>S.disposePaths(U)},[S,U,w]),I.useEffect(()=>{const V=[];return Object.entries(T).forEach(([Z,Q])=>{Q(S.get(Z),Z,sn({initial:!0,get:S.get},S.getInput(Z)));const le=S.useStore.subscribe(me=>{const fe=me.data[Z];return[fe.disabled?void 0:fe.value,fe]},([me,fe])=>Q(me,Z,sn({initial:!1,get:S.get},fe)),{equalityFn:i1});V.push(le)}),()=>V.forEach(Z=>Z())},[S,T]),I.useEffect(()=>{const V=[];return Object.entries(L).forEach(([Z,Q])=>V.push(S.subscribeToEditStart(Z,Q))),Object.entries(D).forEach(([Z,Q])=>V.push(S.subscribeToEditEnd(Z,Q))),()=>V.forEach(Z=>Z())},[L,D,S]),h?[F,k,N]:F}uc(wa.SELECT,sQ);uc(wa.IMAGE,Zte);uc(wa.NUMBER,KZ);uc(wa.COLOR,Pte);uc(wa.STRING,pQ);uc(wa.BOOLEAN,wQ);uc(wa.INTERVAL,ane);uc(wa.VECTOR3D,Dte);uc(wa.VECTOR2D,zte);const SM=parseInt(Ep.replace(/\D+/g,""));function PI(n,e){if(e===FB)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===Hx||e===gb){let t=n.getIndex();if(t===null){const o=[],a=n.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);n.setIndex(o),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const i=t.count-2,r=[];if(t)if(e===Hx)for(let o=1;o<=i;o++)r.push(t.getX(0)),r.push(t.getX(o)),r.push(t.getX(o+1));else for(let o=0;o<i;o++)o%2===0?(r.push(t.getX(o)),r.push(t.getX(o+1)),r.push(t.getX(o+2))):(r.push(t.getX(o+2)),r.push(t.getX(o+1)),r.push(t.getX(o)));r.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(r),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}var Io=Uint8Array,ru=Uint16Array,fA=Uint32Array,tF=new Io([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),nF=new Io([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Xne=new Io([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),iF=function(n,e){for(var t=new ru(31),i=0;i<31;++i)t[i]=e+=1<<n[i-1];for(var r=new fA(t[30]),i=1;i<30;++i)for(var s=t[i];s<t[i+1];++s)r[s]=s-t[i]<<5|i;return[t,r]},rF=iF(tF,2),sF=rF[0],Yne=rF[1];sF[28]=258,Yne[258]=28;var Kne=iF(nF,0),Jne=Kne[0],pA=new ru(32768);for(var _i=0;_i<32768;++_i){var Kc=(_i&43690)>>>1|(_i&21845)<<1;Kc=(Kc&52428)>>>2|(Kc&13107)<<2,Kc=(Kc&61680)>>>4|(Kc&3855)<<4,pA[_i]=((Kc&65280)>>>8|(Kc&255)<<8)>>>1}var Tg=(function(n,e,t){for(var i=n.length,r=0,s=new ru(e);r<i;++r)++s[n[r]-1];var o=new ru(e);for(r=0;r<e;++r)o[r]=o[r-1]+s[r-1]<<1;var a;if(t){a=new ru(1<<e);var l=15-e;for(r=0;r<i;++r)if(n[r])for(var u=r<<4|n[r],h=e-n[r],f=o[n[r]-1]++<<h,g=f|(1<<h)-1;f<=g;++f)a[pA[f]>>>l]=u}else for(a=new ru(i),r=0;r<i;++r)n[r]&&(a[r]=pA[o[n[r]-1]++]>>>15-n[r]);return a}),P0=new Io(288);for(var _i=0;_i<144;++_i)P0[_i]=8;for(var _i=144;_i<256;++_i)P0[_i]=9;for(var _i=256;_i<280;++_i)P0[_i]=7;for(var _i=280;_i<288;++_i)P0[_i]=8;var oF=new Io(32);for(var _i=0;_i<32;++_i)oF[_i]=5;var qne=Tg(P0,9,1),Zne=Tg(oF,5,1),kS=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},ha=function(n,e,t){var i=e/8|0;return(n[i]|n[i+1]<<8)>>(e&7)&t},US=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},Qne=function(n){return(n/8|0)+(n&7&&1)},eie=function(n,e,t){(t==null||t>n.length)&&(t=n.length);var i=new(n instanceof ru?ru:n instanceof fA?fA:Io)(t-e);return i.set(n.subarray(e,t)),i},tie=function(n,e,t){var i=n.length;if(!i||t&&!t.l&&i<5)return e||new Io(0);var r=!e||t,s=!t||t.i;t||(t={}),e||(e=new Io(i*3));var o=function(Le){var Ge=e.length;if(Le>Ge){var et=new Io(Math.max(Ge*2,Le));et.set(e),e=et}},a=t.f||0,l=t.p||0,u=t.b||0,h=t.l,f=t.d,g=t.m,v=t.n,x=i*8;do{if(!h){t.f=a=ha(n,l,1);var S=ha(n,l+1,3);if(l+=3,S)if(S==1)h=qne,f=Zne,g=9,v=5;else if(S==2){var M=ha(n,l,31)+257,T=ha(n,l+10,15)+4,L=M+ha(n,l+5,31)+1;l+=14;for(var D=new Io(L),U=new Io(19),F=0;F<T;++F)U[Xne[F]]=ha(n,l+F*3,7);l+=T*3;for(var k=kS(U),N=(1<<k)-1,V=Tg(U,k,1),F=0;F<L;){var Z=V[ha(n,l,N)];l+=Z&15;var w=Z>>>4;if(w<16)D[F++]=w;else{var Q=0,le=0;for(w==16?(le=3+ha(n,l,3),l+=2,Q=D[F-1]):w==17?(le=3+ha(n,l,7),l+=3):w==18&&(le=11+ha(n,l,127),l+=7);le--;)D[F++]=Q}}var me=D.subarray(0,M),fe=D.subarray(M);g=kS(me),v=kS(fe),h=Tg(me,g,1),f=Tg(fe,v,1)}else throw"invalid block type";else{var w=Qne(l)+4,_=n[w-4]|n[w-3]<<8,b=w+_;if(b>i){if(s)throw"unexpected EOF";break}r&&o(u+_),e.set(n.subarray(w,b),u),t.b=u+=_,t.p=l=b*8;continue}if(l>x){if(s)throw"unexpected EOF";break}}r&&o(u+131072);for(var xe=(1<<g)-1,X=(1<<v)-1,de=l;;de=l){var Q=h[US(n,l)&xe],se=Q>>>4;if(l+=Q&15,l>x){if(s)throw"unexpected EOF";break}if(!Q)throw"invalid length/literal";if(se<256)e[u++]=se;else if(se==256){de=l,h=null;break}else{var Y=se-254;if(se>264){var F=se-257,ge=tF[F];Y=ha(n,l,(1<<ge)-1)+sF[F],l+=ge}var Ve=f[US(n,l)&X],we=Ve>>>4;if(!Ve)throw"invalid distance";l+=Ve&15;var fe=Jne[we];if(we>3){var ge=nF[we];fe+=US(n,l)&(1<<ge)-1,l+=ge}if(l>x){if(s)throw"unexpected EOF";break}r&&o(u+131072);for(var Ne=u+Y;u<Ne;u+=4)e[u]=e[u-fe],e[u+1]=e[u+1-fe],e[u+2]=e[u+2-fe],e[u+3]=e[u+3-fe];u=Ne}}t.l=h,t.p=de,t.b=u,h&&(a=1,t.m=g,t.d=f,t.n=v)}while(!a);return u==e.length?e:eie(e,0,u)},nie=new Io(0),iie=function(n){if((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(n[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function Ry(n,e){return tie((iie(n),n.subarray(2,-4)),e)}var rie=typeof TextDecoder<"u"&&new TextDecoder,sie=0;try{rie.decode(nie,{stream:!0}),sie=1}catch{}const oie=n=>n&&n.isCubeTexture;class aie extends Ti{constructor(e,t){var i,r;const s=oie(e),a=((r=s?(i=e.image[0])==null?void 0:i.width:e.image.width)!=null?r:1024)/4,l=Math.floor(Math.log2(a)),u=Math.pow(2,l),h=3*Math.max(u,112),f=4*u,g=[s?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/h}`,`#define CUBEUV_TEXEL_HEIGHT ${1/f}`,`#define CUBEUV_MAX_MIP ${l}.0`],v=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,x=g.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${SM>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,S={map:{value:e},height:{value:t?.height||15},radius:{value:t?.radius||100}},w=new v0(1,16),_=new Ps({uniforms:S,fragmentShader:x,vertexShader:v,side:co});super(w,_)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}var lie=Object.defineProperty,cie=(n,e,t)=>e in n?lie(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,uie=(n,e,t)=>(cie(n,e+"",t),t);let die=class{constructor(){uie(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}};var hie=Object.defineProperty,fie=(n,e,t)=>e in n?hie(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,en=(n,e,t)=>(fie(n,typeof e!="symbol"?e+"":e,t),t);const Py=new ah,II=new jl,pie=Math.cos(70*(Math.PI/180)),DI=(n,e)=>(n%e+e)%e;let mie=class extends die{constructor(e,t){super(),en(this,"object"),en(this,"domElement"),en(this,"enabled",!0),en(this,"target",new J),en(this,"minDistance",0),en(this,"maxDistance",1/0),en(this,"minZoom",0),en(this,"maxZoom",1/0),en(this,"minPolarAngle",0),en(this,"maxPolarAngle",Math.PI),en(this,"minAzimuthAngle",-1/0),en(this,"maxAzimuthAngle",1/0),en(this,"enableDamping",!1),en(this,"dampingFactor",.05),en(this,"enableZoom",!0),en(this,"zoomSpeed",1),en(this,"enableRotate",!0),en(this,"rotateSpeed",1),en(this,"enablePan",!0),en(this,"panSpeed",1),en(this,"screenSpacePanning",!0),en(this,"keyPanSpeed",7),en(this,"zoomToCursor",!1),en(this,"autoRotate",!1),en(this,"autoRotateSpeed",2),en(this,"reverseOrbit",!1),en(this,"reverseHorizontalOrbit",!1),en(this,"reverseVerticalOrbit",!1),en(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),en(this,"mouseButtons",{LEFT:Cd.ROTATE,MIDDLE:Cd.DOLLY,RIGHT:Cd.PAN}),en(this,"touches",{ONE:Td.ROTATE,TWO:Td.DOLLY_PAN}),en(this,"target0"),en(this,"position0"),en(this,"zoom0"),en(this,"_domElementKeyEvents",null),en(this,"getPolarAngle"),en(this,"getAzimuthalAngle"),en(this,"setPolarAngle"),en(this,"setAzimuthalAngle"),en(this,"getDistance"),en(this,"getZoomScale"),en(this,"listenToKeyEvents"),en(this,"stopListenToKeyEvents"),en(this,"saveState"),en(this,"reset"),en(this,"update"),en(this,"connect"),en(this,"dispose"),en(this,"dollyIn"),en(this,"dollyOut"),en(this,"getScale"),en(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>h.phi,this.getAzimuthalAngle=()=>h.theta,this.setPolarAngle=ue=>{let Oe=DI(ue,2*Math.PI),st=h.phi;st<0&&(st+=2*Math.PI),Oe<0&&(Oe+=2*Math.PI);let ce=Math.abs(Oe-st);2*Math.PI-ce<ce&&(Oe<st?Oe+=2*Math.PI:st+=2*Math.PI),f.phi=Oe-st,i.update()},this.setAzimuthalAngle=ue=>{let Oe=DI(ue,2*Math.PI),st=h.theta;st<0&&(st+=2*Math.PI),Oe<0&&(Oe+=2*Math.PI);let ce=Math.abs(Oe-st);2*Math.PI-ce<ce&&(Oe<st?Oe+=2*Math.PI:st+=2*Math.PI),f.theta=Oe-st,i.update()},this.getDistance=()=>i.object.position.distanceTo(i.target),this.listenToKeyEvents=ue=>{ue.addEventListener("keydown",lt),this._domElementKeyEvents=ue},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",lt),this._domElementKeyEvents=null},this.saveState=()=>{i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=()=>{i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(r),i.update(),l=a.NONE},this.update=(()=>{const ue=new J,Oe=new J(0,1,0),st=new xr().setFromUnitVectors(e.up,Oe),ce=st.clone().invert(),be=new J,Ie=new xr,We=2*Math.PI;return function(){const vt=i.object.position;st.setFromUnitVectors(e.up,Oe),ce.copy(st).invert(),ue.copy(vt).sub(i.target),ue.applyQuaternion(st),h.setFromVector3(ue),i.autoRotate&&l===a.NONE&&le(Z()),i.enableDamping?(h.theta+=f.theta*i.dampingFactor,h.phi+=f.phi*i.dampingFactor):(h.theta+=f.theta,h.phi+=f.phi);let $t=i.minAzimuthAngle,Tn=i.maxAzimuthAngle;isFinite($t)&&isFinite(Tn)&&($t<-Math.PI?$t+=We:$t>Math.PI&&($t-=We),Tn<-Math.PI?Tn+=We:Tn>Math.PI&&(Tn-=We),$t<=Tn?h.theta=Math.max($t,Math.min(Tn,h.theta)):h.theta=h.theta>($t+Tn)/2?Math.max($t,h.theta):Math.min(Tn,h.theta)),h.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,h.phi)),h.makeSafe(),i.enableDamping===!0?i.target.addScaledVector(v,i.dampingFactor):i.target.add(v),i.zoomToCursor&&k||i.object.isOrthographicCamera?h.radius=Ve(h.radius):h.radius=Ve(h.radius*g),ue.setFromSpherical(h),ue.applyQuaternion(ce),vt.copy(i.target).add(ue),i.object.matrixAutoUpdate||i.object.updateMatrix(),i.object.lookAt(i.target),i.enableDamping===!0?(f.theta*=1-i.dampingFactor,f.phi*=1-i.dampingFactor,v.multiplyScalar(1-i.dampingFactor)):(f.set(0,0,0),v.set(0,0,0));let Xn=!1;if(i.zoomToCursor&&k){let mn=null;if(i.object instanceof ji&&i.object.isPerspectiveCamera){const vi=ue.length();mn=Ve(vi*g);const Si=vi-mn;i.object.position.addScaledVector(U,Si),i.object.updateMatrixWorld()}else if(i.object.isOrthographicCamera){const vi=new J(F.x,F.y,0);vi.unproject(i.object),i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/g)),i.object.updateProjectionMatrix(),Xn=!0;const Si=new J(F.x,F.y,0);Si.unproject(i.object),i.object.position.sub(Si).add(vi),i.object.updateMatrixWorld(),mn=ue.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),i.zoomToCursor=!1;mn!==null&&(i.screenSpacePanning?i.target.set(0,0,-1).transformDirection(i.object.matrix).multiplyScalar(mn).add(i.object.position):(Py.origin.copy(i.object.position),Py.direction.set(0,0,-1).transformDirection(i.object.matrix),Math.abs(i.object.up.dot(Py.direction))<pie?e.lookAt(i.target):(II.setFromNormalAndCoplanarPoint(i.object.up,i.target),Py.intersectPlane(II,i.target))))}else i.object instanceof Ka&&i.object.isOrthographicCamera&&(Xn=g!==1,Xn&&(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/g)),i.object.updateProjectionMatrix()));return g=1,k=!1,Xn||be.distanceToSquared(i.object.position)>u||8*(1-Ie.dot(i.object.quaternion))>u?(i.dispatchEvent(r),be.copy(i.object.position),Ie.copy(i.object.quaternion),Xn=!1,!0):!1}})(),this.connect=ue=>{i.domElement=ue,i.domElement.style.touchAction="none",i.domElement.addEventListener("contextmenu",qe),i.domElement.addEventListener("pointerdown",j),i.domElement.addEventListener("pointercancel",Se),i.domElement.addEventListener("wheel",mt)},this.dispose=()=>{var ue,Oe,st,ce,be,Ie;i.domElement&&(i.domElement.style.touchAction="auto"),(ue=i.domElement)==null||ue.removeEventListener("contextmenu",qe),(Oe=i.domElement)==null||Oe.removeEventListener("pointerdown",j),(st=i.domElement)==null||st.removeEventListener("pointercancel",Se),(ce=i.domElement)==null||ce.removeEventListener("wheel",mt),(be=i.domElement)==null||be.ownerDocument.removeEventListener("pointermove",ne),(Ie=i.domElement)==null||Ie.ownerDocument.removeEventListener("pointerup",Se),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",lt)};const i=this,r={type:"change"},s={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const u=1e-6,h=new $x,f=new $x;let g=1;const v=new J,x=new Xe,S=new Xe,w=new Xe,_=new Xe,b=new Xe,M=new Xe,T=new Xe,L=new Xe,D=new Xe,U=new J,F=new Xe;let k=!1;const N=[],V={};function Z(){return 2*Math.PI/60/60*i.autoRotateSpeed}function Q(){return Math.pow(.95,i.zoomSpeed)}function le(ue){i.reverseOrbit||i.reverseHorizontalOrbit?f.theta+=ue:f.theta-=ue}function me(ue){i.reverseOrbit||i.reverseVerticalOrbit?f.phi+=ue:f.phi-=ue}const fe=(()=>{const ue=new J;return function(st,ce){ue.setFromMatrixColumn(ce,0),ue.multiplyScalar(-st),v.add(ue)}})(),xe=(()=>{const ue=new J;return function(st,ce){i.screenSpacePanning===!0?ue.setFromMatrixColumn(ce,1):(ue.setFromMatrixColumn(ce,0),ue.crossVectors(i.object.up,ue)),ue.multiplyScalar(st),v.add(ue)}})(),X=(()=>{const ue=new J;return function(st,ce){const be=i.domElement;if(be&&i.object instanceof ji&&i.object.isPerspectiveCamera){const Ie=i.object.position;ue.copy(Ie).sub(i.target);let We=ue.length();We*=Math.tan(i.object.fov/2*Math.PI/180),fe(2*st*We/be.clientHeight,i.object.matrix),xe(2*ce*We/be.clientHeight,i.object.matrix)}else be&&i.object instanceof Ka&&i.object.isOrthographicCamera?(fe(st*(i.object.right-i.object.left)/i.object.zoom/be.clientWidth,i.object.matrix),xe(ce*(i.object.top-i.object.bottom)/i.object.zoom/be.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}})();function de(ue){i.object instanceof ji&&i.object.isPerspectiveCamera||i.object instanceof Ka&&i.object.isOrthographicCamera?g=ue:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function se(ue){de(g/ue)}function Y(ue){de(g*ue)}function ge(ue){if(!i.zoomToCursor||!i.domElement)return;k=!0;const Oe=i.domElement.getBoundingClientRect(),st=ue.clientX-Oe.left,ce=ue.clientY-Oe.top,be=Oe.width,Ie=Oe.height;F.x=st/be*2-1,F.y=-(ce/Ie)*2+1,U.set(F.x,F.y,1).unproject(i.object).sub(i.object.position).normalize()}function Ve(ue){return Math.max(i.minDistance,Math.min(i.maxDistance,ue))}function we(ue){x.set(ue.clientX,ue.clientY)}function Ne(ue){ge(ue),T.set(ue.clientX,ue.clientY)}function Le(ue){_.set(ue.clientX,ue.clientY)}function Ge(ue){S.set(ue.clientX,ue.clientY),w.subVectors(S,x).multiplyScalar(i.rotateSpeed);const Oe=i.domElement;Oe&&(le(2*Math.PI*w.x/Oe.clientHeight),me(2*Math.PI*w.y/Oe.clientHeight)),x.copy(S),i.update()}function et(ue){L.set(ue.clientX,ue.clientY),D.subVectors(L,T),D.y>0?se(Q()):D.y<0&&Y(Q()),T.copy(L),i.update()}function ft(ue){b.set(ue.clientX,ue.clientY),M.subVectors(b,_).multiplyScalar(i.panSpeed),X(M.x,M.y),_.copy(b),i.update()}function yt(ue){ge(ue),ue.deltaY<0?Y(Q()):ue.deltaY>0&&se(Q()),i.update()}function nn(ue){let Oe=!1;switch(ue.code){case i.keys.UP:X(0,i.keyPanSpeed),Oe=!0;break;case i.keys.BOTTOM:X(0,-i.keyPanSpeed),Oe=!0;break;case i.keys.LEFT:X(i.keyPanSpeed,0),Oe=!0;break;case i.keys.RIGHT:X(-i.keyPanSpeed,0),Oe=!0;break}Oe&&(ue.preventDefault(),i.update())}function Xt(){if(N.length==1)x.set(N[0].pageX,N[0].pageY);else{const ue=.5*(N[0].pageX+N[1].pageX),Oe=.5*(N[0].pageY+N[1].pageY);x.set(ue,Oe)}}function xt(){if(N.length==1)_.set(N[0].pageX,N[0].pageY);else{const ue=.5*(N[0].pageX+N[1].pageX),Oe=.5*(N[0].pageY+N[1].pageY);_.set(ue,Oe)}}function q(){const ue=N[0].pageX-N[1].pageX,Oe=N[0].pageY-N[1].pageY,st=Math.sqrt(ue*ue+Oe*Oe);T.set(0,st)}function at(){i.enableZoom&&q(),i.enablePan&&xt()}function Je(){i.enableZoom&&q(),i.enableRotate&&Xt()}function tt(ue){if(N.length==1)S.set(ue.pageX,ue.pageY);else{const st=St(ue),ce=.5*(ue.pageX+st.x),be=.5*(ue.pageY+st.y);S.set(ce,be)}w.subVectors(S,x).multiplyScalar(i.rotateSpeed);const Oe=i.domElement;Oe&&(le(2*Math.PI*w.x/Oe.clientHeight),me(2*Math.PI*w.y/Oe.clientHeight)),x.copy(S)}function $e(ue){if(N.length==1)b.set(ue.pageX,ue.pageY);else{const Oe=St(ue),st=.5*(ue.pageX+Oe.x),ce=.5*(ue.pageY+Oe.y);b.set(st,ce)}M.subVectors(b,_).multiplyScalar(i.panSpeed),X(M.x,M.y),_.copy(b)}function _t(ue){const Oe=St(ue),st=ue.pageX-Oe.x,ce=ue.pageY-Oe.y,be=Math.sqrt(st*st+ce*ce);L.set(0,be),D.set(0,Math.pow(L.y/T.y,i.zoomSpeed)),se(D.y),T.copy(L)}function Ye(ue){i.enableZoom&&_t(ue),i.enablePan&&$e(ue)}function K(ue){i.enableZoom&&_t(ue),i.enableRotate&&tt(ue)}function j(ue){var Oe,st;i.enabled!==!1&&(N.length===0&&((Oe=i.domElement)==null||Oe.ownerDocument.addEventListener("pointermove",ne),(st=i.domElement)==null||st.ownerDocument.addEventListener("pointerup",Se)),wt(ue),ue.pointerType==="touch"?Dt(ue):ze(ue))}function ne(ue){i.enabled!==!1&&(ue.pointerType==="touch"?Ft(ue):Re(ue))}function Se(ue){var Oe,st,ce;Lt(ue),N.length===0&&((Oe=i.domElement)==null||Oe.releasePointerCapture(ue.pointerId),(st=i.domElement)==null||st.ownerDocument.removeEventListener("pointermove",ne),(ce=i.domElement)==null||ce.ownerDocument.removeEventListener("pointerup",Se)),i.dispatchEvent(o),l=a.NONE}function ze(ue){let Oe;switch(ue.button){case 0:Oe=i.mouseButtons.LEFT;break;case 1:Oe=i.mouseButtons.MIDDLE;break;case 2:Oe=i.mouseButtons.RIGHT;break;default:Oe=-1}switch(Oe){case Cd.DOLLY:if(i.enableZoom===!1)return;Ne(ue),l=a.DOLLY;break;case Cd.ROTATE:if(ue.ctrlKey||ue.metaKey||ue.shiftKey){if(i.enablePan===!1)return;Le(ue),l=a.PAN}else{if(i.enableRotate===!1)return;we(ue),l=a.ROTATE}break;case Cd.PAN:if(ue.ctrlKey||ue.metaKey||ue.shiftKey){if(i.enableRotate===!1)return;we(ue),l=a.ROTATE}else{if(i.enablePan===!1)return;Le(ue),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&i.dispatchEvent(s)}function Re(ue){if(i.enabled!==!1)switch(l){case a.ROTATE:if(i.enableRotate===!1)return;Ge(ue);break;case a.DOLLY:if(i.enableZoom===!1)return;et(ue);break;case a.PAN:if(i.enablePan===!1)return;ft(ue);break}}function mt(ue){i.enabled===!1||i.enableZoom===!1||l!==a.NONE&&l!==a.ROTATE||(ue.preventDefault(),i.dispatchEvent(s),yt(ue),i.dispatchEvent(o))}function lt(ue){i.enabled===!1||i.enablePan===!1||nn(ue)}function Dt(ue){switch(It(ue),N.length){case 1:switch(i.touches.ONE){case Td.ROTATE:if(i.enableRotate===!1)return;Xt(),l=a.TOUCH_ROTATE;break;case Td.PAN:if(i.enablePan===!1)return;xt(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(i.touches.TWO){case Td.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;at(),l=a.TOUCH_DOLLY_PAN;break;case Td.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Je(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&i.dispatchEvent(s)}function Ft(ue){switch(It(ue),l){case a.TOUCH_ROTATE:if(i.enableRotate===!1)return;tt(ue),i.update();break;case a.TOUCH_PAN:if(i.enablePan===!1)return;$e(ue),i.update();break;case a.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Ye(ue),i.update();break;case a.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;K(ue),i.update();break;default:l=a.NONE}}function qe(ue){i.enabled!==!1&&ue.preventDefault()}function wt(ue){N.push(ue)}function Lt(ue){delete V[ue.pointerId];for(let Oe=0;Oe<N.length;Oe++)if(N[Oe].pointerId==ue.pointerId){N.splice(Oe,1);return}}function It(ue){let Oe=V[ue.pointerId];Oe===void 0&&(Oe=new Xe,V[ue.pointerId]=Oe),Oe.set(ue.pageX,ue.pageY)}function St(ue){const Oe=ue.pointerId===N[0].pointerId?N[1]:N[0];return V[Oe.pointerId]}this.dollyIn=(ue=Q())=>{Y(ue),i.update()},this.dollyOut=(ue=Q())=>{se(ue),i.update()},this.getScale=()=>g,this.setScale=ue=>{de(ue),i.update()},this.getZoomScale=()=>Q(),t!==void 0&&this.connect(t),this.update()}};function c_(n){if(typeof TextDecoder<"u")return new TextDecoder().decode(n);let e="";for(let t=0,i=n.length;t<i;t++)e+=String.fromCharCode(n[t]);try{return decodeURIComponent(escape(e))}catch{return e}}const Vd="srgb",nc="srgb-linear",BI=3001,gie=3e3;class EM extends jr{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new wie(t)}),this.register(function(t){return new Sie(t)}),this.register(function(t){return new Iie(t)}),this.register(function(t){return new Die(t)}),this.register(function(t){return new Bie(t)}),this.register(function(t){return new Aie(t)}),this.register(function(t){return new bie(t)}),this.register(function(t){return new Mie(t)}),this.register(function(t){return new Cie(t)}),this.register(function(t){return new _ie(t)}),this.register(function(t){return new Tie(t)}),this.register(function(t){return new Eie(t)}),this.register(function(t){return new Pie(t)}),this.register(function(t){return new Rie(t)}),this.register(function(t){return new yie(t)}),this.register(function(t){return new Lie(t)}),this.register(function(t){return new Oie(t)})}load(e,t,i,r){const s=this;let o;if(this.resourcePath!=="")o=this.resourcePath;else if(this.path!==""){const u=ou.extractUrlBase(e);o=ou.resolveURL(u,this.path)}else o=ou.extractUrlBase(e);this.manager.itemStart(e);const a=function(u){r?r(u):console.error(u),s.manager.itemError(e),s.manager.itemEnd(e)},l=new Gr(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(u){try{s.parse(u,o,function(h){t(h),s.manager.itemEnd(e)},a)}catch(h){a(h)}},i,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,r){let s;const o={},a={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(c_(new Uint8Array(e.slice(0,4)))===aF){try{o[In.KHR_BINARY_GLTF]=new Nie(e)}catch(h){r&&r(h);return}s=JSON.parse(o[In.KHR_BINARY_GLTF].content)}else s=JSON.parse(c_(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const l=new Kie(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const h=this.pluginCallbacks[u](l);h.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[h.name]=h,o[h.name]=!0}if(s.extensionsUsed)for(let u=0;u<s.extensionsUsed.length;++u){const h=s.extensionsUsed[u],f=s.extensionsRequired||[];switch(h){case In.KHR_MATERIALS_UNLIT:o[h]=new xie;break;case In.KHR_DRACO_MESH_COMPRESSION:o[h]=new Fie(s,this.dracoLoader);break;case In.KHR_TEXTURE_TRANSFORM:o[h]=new kie;break;case In.KHR_MESH_QUANTIZATION:o[h]=new Uie;break;default:f.indexOf(h)>=0&&a[h]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+h+'".')}}l.setExtensions(o),l.setPlugins(a),l.parse(i,r)}parseAsync(e,t){const i=this;return new Promise(function(r,s){i.parse(e,t,r,s)})}}function vie(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const In={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class yie{constructor(e){this.parser=e,this.name=In.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,r=t.length;i<r;i++){const s=t[i];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let r=t.cache.get(i);if(r)return r;const s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let u;const h=new bt(16777215);l.color!==void 0&&h.setRGB(l.color[0],l.color[1],l.color[2],nc);const f=l.range!==void 0?l.range:0;switch(l.type){case"directional":u=new jb(h),u.target.position.set(0,0,-1),u.add(u.target);break;case"point":u=new Gb(h),u.distance=f;break;case"spot":u=new Vb(h),u.distance=f,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,u.angle=l.spot.outerConeAngle,u.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,u.target.position.set(0,0,-1),u.add(u.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return u.position.set(0,0,0),u.decay=2,Gl(u,l),l.intensity!==void 0&&(u.intensity=l.intensity),u.name=t.createUniqueName(l.name||"light_"+e),r=Promise.resolve(u),t.cache.add(i,r),r}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,i=this.parser,s=i.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return i._getNodeRef(t.cache,a,l)})}}class xie{constructor(){this.name=In.KHR_MATERIALS_UNLIT}getMaterialType(){return Ks}extendParams(e,t,i){const r=[];e.color=new bt(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],nc),e.opacity=o[3]}s.baseColorTexture!==void 0&&r.push(i.assignTexture(e,"map",s.baseColorTexture,Vd))}return Promise.all(r)}}class _ie{constructor(e){this.parser=e,this.name=In.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class wie{constructor(e){this.parser=e,this.name=In.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Fo}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(i.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Xe(a,a)}return Promise.all(s)}}class Sie{constructor(e){this.parser=e,this.name=In.KHR_MATERIALS_DISPERSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Fo}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.dispersion=s.dispersion!==void 0?s.dispersion:0,Promise.resolve()}}class Eie{constructor(e){this.parser=e,this.name=In.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Fo}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class Aie{constructor(e){this.parser=e,this.name=In.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Fo}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new bt(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=r.extensions[this.name];if(o.sheenColorFactor!==void 0){const a=o.sheenColorFactor;t.sheenColor.setRGB(a[0],a[1],a[2],nc)}return o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(i.assignTexture(t,"sheenColorMap",o.sheenColorTexture,Vd)),o.sheenRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class bie{constructor(e){this.parser=e,this.name=In.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Fo}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(i.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class Mie{constructor(e){this.parser=e,this.name=In.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Fo}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(i.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new bt().setRGB(a[0],a[1],a[2],nc),Promise.all(s)}}class Cie{constructor(e){this.parser=e,this.name=In.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Fo}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class Tie{constructor(e){this.parser=e,this.name=In.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Fo}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(i.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new bt().setRGB(a[0],a[1],a[2],nc),o.specularColorTexture!==void 0&&s.push(i.assignTexture(t,"specularColorMap",o.specularColorTexture,Vd)),Promise.all(s)}}class Rie{constructor(e){this.parser=e,this.name=In.EXT_MATERIALS_BUMP}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Fo}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return t.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&&s.push(i.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(s)}}class Pie{constructor(e){this.parser=e,this.name=In.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Fo}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.anisotropyStrength!==void 0&&(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&s.push(i.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}}class Iie{constructor(e){this.parser=e,this.name=In.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class Die{constructor(e){this.parser=e,this.name=In.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let l=i.textureLoader;if(a.uri){const u=i.options.manager.getHandler(a.uri);u!==null&&(l=u)}return this.detectSupport().then(function(u){if(u)return i.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class Bie{constructor(e){this.parser=e,this.name=In.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let l=i.textureLoader;if(a.uri){const u=i.options.manager.getHandler(a.uri);u!==null&&(l=u)}return this.detectSupport().then(function(u){if(u)return i.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class Lie{constructor(e){this.name=In.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const r=i.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const l=r.byteOffset||0,u=r.byteLength||0,h=r.count,f=r.byteStride,g=new Uint8Array(a,l,u);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(h,f,g,r.mode,r.filter).then(function(v){return v.buffer}):o.ready.then(function(){const v=new ArrayBuffer(h*f);return o.decodeGltfBuffer(new Uint8Array(v),h,f,g,r.mode,r.filter),v})})}else return null}}class Oie{constructor(e){this.name=In.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;const r=t.meshes[i.mesh];for(const u of r.primitives)if(u.mode!==To.TRIANGLES&&u.mode!==To.TRIANGLE_STRIP&&u.mode!==To.TRIANGLE_FAN&&u.mode!==void 0)return null;const o=i.extensions[this.name].attributes,a=[],l={};for(const u in o)a.push(this.parser.getDependency("accessor",o[u]).then(h=>(l[u]=h,l[u])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(u=>{const h=u.pop(),f=h.isGroup?h.children:[h],g=u[0].count,v=[];for(const x of f){const S=new Jt,w=new J,_=new xr,b=new J(1,1,1),M=new bb(x.geometry,x.material,g);for(let T=0;T<g;T++)l.TRANSLATION&&w.fromBufferAttribute(l.TRANSLATION,T),l.ROTATION&&_.fromBufferAttribute(l.ROTATION,T),l.SCALE&&b.fromBufferAttribute(l.SCALE,T),M.setMatrixAt(T,S.compose(w,_,b));for(const T in l)if(T==="_COLOR_0"){const L=l[T];M.instanceColor=new Qd(L.array,L.itemSize,L.normalized)}else T!=="TRANSLATION"&&T!=="ROTATION"&&T!=="SCALE"&&x.geometry.setAttribute(T,l[T]);Bn.prototype.copy.call(M,x),this.parser.assignFinalMaterial(M),v.push(M)}return h.isGroup?(h.clear(),h.add(...v),h):v[0]}))}}const aF="glTF",Jm=12,LI={JSON:1313821514,BIN:5130562};class Nie{constructor(e){this.name=In.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,Jm);if(this.header={magic:c_(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==aF)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-Jm,r=new DataView(e,Jm);let s=0;for(;s<i;){const o=r.getUint32(s,!0);s+=4;const a=r.getUint32(s,!0);if(s+=4,a===LI.JSON){const l=new Uint8Array(e,Jm+s,o);this.content=c_(l)}else if(a===LI.BIN){const l=Jm+s;this.body=e.slice(l,l+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Fie{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=In.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},u={};for(const h in o){const f=mA[h]||h.toLowerCase();a[f]=o[h]}for(const h in e.attributes){const f=mA[h]||h.toLowerCase();if(o[h]!==void 0){const g=i.accessors[e.attributes[h]],v=Qf[g.componentType];u[f]=v.name,l[f]=g.normalized===!0}}return t.getDependency("bufferView",s).then(function(h){return new Promise(function(f,g){r.decodeDracoFile(h,function(v){for(const x in v.attributes){const S=v.attributes[x],w=l[x];w!==void 0&&(S.normalized=w)}f(v)},a,u,nc,g)})})}}class kie{constructor(){this.name=In.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class Uie{constructor(){this.name=In.KHR_MESH_QUANTIZATION}}class lF extends Cp{constructor(e,t,i,r){super(e,t,i,r)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let o=0;o!==r;o++)t[o]=i[s+o];return t}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,u=a*3,h=r-t,f=(i-t)/h,g=f*f,v=g*f,x=e*u,S=x-u,w=-2*v+3*g,_=v-g,b=1-w,M=_-g+f;for(let T=0;T!==a;T++){const L=o[S+T+a],D=o[S+T+l]*h,U=o[x+T+a],F=o[x+T]*h;s[T]=b*L+M*D+w*U+_*F}return s}}const zie=new xr;class Hie extends lF{interpolate_(e,t,i,r){const s=super.interpolate_(e,t,i,r);return zie.fromArray(s).normalize().toArray(s),s}}const To={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},Qf={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},OI={9728:ur,9729:Gn,9984:A_,9985:Jf,9986:Od,9987:Bo},NI={33071:Zi,33648:sp,10497:hu},zS={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},mA={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...SM>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Jc={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Vie={CUBICSPLINE:void 0,LINEAR:dp,STEP:up},HS={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Gie(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new _0({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Ja})),n.DefaultMaterial}function Ed(n,e,t){for(const i in t.extensions)n[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function Gl(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function jie(n,e,t){let i=!1,r=!1,s=!1;for(let u=0,h=e.length;u<h;u++){const f=e[u];if(f.POSITION!==void 0&&(i=!0),f.NORMAL!==void 0&&(r=!0),f.COLOR_0!==void 0&&(s=!0),i&&r&&s)break}if(!i&&!r&&!s)return Promise.resolve(n);const o=[],a=[],l=[];for(let u=0,h=e.length;u<h;u++){const f=e[u];if(i){const g=f.POSITION!==void 0?t.getDependency("accessor",f.POSITION):n.attributes.position;o.push(g)}if(r){const g=f.NORMAL!==void 0?t.getDependency("accessor",f.NORMAL):n.attributes.normal;a.push(g)}if(s){const g=f.COLOR_0!==void 0?t.getDependency("accessor",f.COLOR_0):n.attributes.color;l.push(g)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(u){const h=u[0],f=u[1],g=u[2];return i&&(n.morphAttributes.position=h),r&&(n.morphAttributes.normal=f),s&&(n.morphAttributes.color=g),n.morphTargetsRelative=!0,n})}function Wie(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,r=t.length;i<r;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function $ie(n){let e;const t=n.extensions&&n.extensions[In.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+VS(t.attributes):e=n.indices+":"+VS(n.attributes)+":"+n.mode,n.targets!==void 0)for(let i=0,r=n.targets.length;i<r;i++)e+=":"+VS(n.targets[i]);return e}function VS(n){let e="";const t=Object.keys(n).sort();for(let i=0,r=t.length;i<r;i++)e+=t[i]+":"+n[t[i]]+";";return e}function gA(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function Xie(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const Yie=new Jt;class Kie{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new vie,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,r=!1,s=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,r=navigator.userAgent.indexOf("Firefox")>-1,s=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||i||r&&s<98?this.textureLoader=new PL(this.options.manager):this.textureLoader=new kL(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Gr(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(o){const a={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:i,userData:{}};return Ed(s,a,r),Gl(a,r),Promise.all(i._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){for(const l of a.scenes)l.updateMatrixWorld();e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){const o=t[r].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const o=e[r];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(i[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const r=i.clone(),s=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[u,h]of o.children.entries())s(h,a.children[u])};return s(i,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const r=e(t[i]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let r=0;r<t.length;r++){const s=e(t[r]);s&&i.push(s)}return i}getDependency(e,t){const i=e+":"+t;let r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(i,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(r.map(function(s,o){return i.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[In.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,o){i.load(ou.resolveURL(t.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const r=t.byteLength||0,s=t.byteOffset||0;return i.slice(s,s+r)})}loadAccessor(e){const t=this,i=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){const o=zS[r.type],a=Qf[r.componentType],l=r.normalized===!0,u=new a(r.count*o);return Promise.resolve(new jn(u,o,l))}const s=[];return r.bufferView!==void 0?s.push(this.getDependency("bufferView",r.bufferView)):s.push(null),r.sparse!==void 0&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=zS[r.type],u=Qf[r.componentType],h=u.BYTES_PER_ELEMENT,f=h*l,g=r.byteOffset||0,v=r.bufferView!==void 0?i.bufferViews[r.bufferView].byteStride:void 0,x=r.normalized===!0;let S,w;if(v&&v!==f){const _=Math.floor(g/v),b="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+_+":"+r.count;let M=t.cache.get(b);M||(S=new u(a,_*v,r.count*v/h),M=new h0(S,v/h),t.cache.add(b,M)),w=new fu(M,l,g%v/h,x)}else a===null?S=new u(r.count*l):S=new u(a,g,r.count*l),w=new jn(S,l,x);if(r.sparse!==void 0){const _=zS.SCALAR,b=Qf[r.sparse.indices.componentType],M=r.sparse.indices.byteOffset||0,T=r.sparse.values.byteOffset||0,L=new b(o[1],M,r.sparse.count*_),D=new u(o[2],T,r.sparse.count*l);a!==null&&(w=new jn(w.array.slice(),w.itemSize,w.normalized));for(let U=0,F=L.length;U<F;U++){const k=L[U];if(w.setX(k,D[U*l]),l>=2&&w.setY(k,D[U*l+1]),l>=3&&w.setZ(k,D[U*l+2]),l>=4&&w.setW(k,D[U*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return w})}loadTexture(e){const t=this.json,i=this.options,s=t.textures[e].source,o=t.images[s];let a=this.textureLoader;if(o.uri){const l=i.manager.getHandler(o.uri);l!==null&&(a=l)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,i){const r=this,s=this.json,o=s.textures[e],a=s.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const u=this.loadImageSource(t,i).then(function(h){h.flipY=!1,h.name=o.name||a.name||"",h.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(h.name=a.uri);const g=(s.samplers||{})[o.sampler]||{};return h.magFilter=OI[g.magFilter]||Gn,h.minFilter=OI[g.minFilter]||Bo,h.wrapS=NI[g.wrapS]||hu,h.wrapT=NI[g.wrapT]||hu,r.associations.set(h,{textures:e}),h}).catch(function(){return null});return this.textureCache[l]=u,u}loadImageSource(e,t){const i=this,r=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(f=>f.clone());const o=r.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",u=!1;if(o.bufferView!==void 0)l=i.getDependency("bufferView",o.bufferView).then(function(f){u=!0;const g=new Blob([f],{type:o.mimeType});return l=a.createObjectURL(g),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const h=Promise.resolve(l).then(function(f){return new Promise(function(g,v){let x=g;t.isImageBitmapLoader===!0&&(x=function(S){const w=new qn(S);w.needsUpdate=!0,g(w)}),t.load(ou.resolveURL(f,s.path),x,void 0,v)})}).then(function(f){return u===!0&&a.revokeObjectURL(l),Gl(f,o),f.userData.mimeType=o.mimeType||Xie(o.uri),f}).catch(function(f){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),f});return this.sourceCache[e]=h,h}assignTexture(e,t,i,r){const s=this;return this.getDependency("texture",i.index).then(function(o){if(!o)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(o=o.clone(),o.channel=i.texCoord),s.extensions[In.KHR_TEXTURE_TRANSFORM]){const a=i.extensions!==void 0?i.extensions[In.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[In.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return r!==void 0&&(typeof r=="number"&&(r=r===BI?Vd:nc),"colorSpace"in o?o.colorSpace=r:o.encoding=r===Vd?BI:gie),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const r=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new k_,wr.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,l.sizeAttenuation=!1,this.cache.add(a,l)),i=l}else if(e.isLine){const a="LineBasicMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new os,wr.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,this.cache.add(a,l)),i=l}if(r||s||o){let a="ClonedMaterial:"+i.uuid+":";r&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=i.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),r&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(i))),i=l}e.material=i}getMaterialType(){return _0}loadMaterial(e){const t=this,i=this.json,r=this.extensions,s=i.materials[e];let o;const a={},l=s.extensions||{},u=[];if(l[In.KHR_MATERIALS_UNLIT]){const f=r[In.KHR_MATERIALS_UNLIT];o=f.getMaterialType(),u.push(f.extendParams(a,s,t))}else{const f=s.pbrMetallicRoughness||{};if(a.color=new bt(1,1,1),a.opacity=1,Array.isArray(f.baseColorFactor)){const g=f.baseColorFactor;a.color.setRGB(g[0],g[1],g[2],nc),a.opacity=g[3]}f.baseColorTexture!==void 0&&u.push(t.assignTexture(a,"map",f.baseColorTexture,Vd)),a.metalness=f.metallicFactor!==void 0?f.metallicFactor:1,a.roughness=f.roughnessFactor!==void 0?f.roughnessFactor:1,f.metallicRoughnessTexture!==void 0&&(u.push(t.assignTexture(a,"metalnessMap",f.metallicRoughnessTexture)),u.push(t.assignTexture(a,"roughnessMap",f.metallicRoughnessTexture))),o=this._invokeOne(function(g){return g.getMaterialType&&g.getMaterialType(e)}),u.push(Promise.all(this._invokeAll(function(g){return g.extendMaterialParams&&g.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=co);const h=s.alphaMode||HS.OPAQUE;if(h===HS.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,h===HS.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==Ks&&(u.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new Xe(1,1),s.normalTexture.scale!==void 0)){const f=s.normalTexture.scale;a.normalScale.set(f,f)}if(s.occlusionTexture!==void 0&&o!==Ks&&(u.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==Ks){const f=s.emissiveFactor;a.emissive=new bt().setRGB(f[0],f[1],f[2],nc)}return s.emissiveTexture!==void 0&&o!==Ks&&u.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,Vd)),Promise.all(u).then(function(){const f=new o(a);return s.name&&(f.name=s.name),Gl(f,s),t.associations.set(f,{materials:e}),s.extensions&&Ed(r,f,s),f})}createUniqueName(e){const t=Fn.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,i=this.extensions,r=this.primitiveCache;function s(a){return i[In.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return FI(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const u=e[a],h=$ie(u),f=r[h];if(f)o.push(f.promise);else{let g;u.extensions&&u.extensions[In.KHR_DRACO_MESH_COMPRESSION]?g=s(u):g=FI(new yn,u,t),r[h]={primitive:u,promise:g},o.push(g)}}return Promise.all(o)}loadMesh(e){const t=this,i=this.json,r=this.extensions,s=i.meshes[e],o=s.primitives,a=[];for(let l=0,u=o.length;l<u;l++){const h=o[l].material===void 0?Gie(this.cache):this.getDependency("material",o[l].material);a.push(h)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const u=l.slice(0,l.length-1),h=l[l.length-1],f=[];for(let v=0,x=h.length;v<x;v++){const S=h[v],w=o[v];let _;const b=u[v];if(w.mode===To.TRIANGLES||w.mode===To.TRIANGLE_STRIP||w.mode===To.TRIANGLE_FAN||w.mode===void 0)_=s.isSkinnedMesh===!0?new Ab(S,b):new Ti(S,b),_.isSkinnedMesh===!0&&_.normalizeSkinWeights(),w.mode===To.TRIANGLE_STRIP?_.geometry=PI(_.geometry,gb):w.mode===To.TRIANGLE_FAN&&(_.geometry=PI(_.geometry,Hx));else if(w.mode===To.LINES)_=new Sa(S,b);else if(w.mode===To.LINE_STRIP)_=new sc(S,b);else if(w.mode===To.LINE_LOOP)_=new Mb(S,b);else if(w.mode===To.POINTS)_=new Cb(S,b);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+w.mode);Object.keys(_.geometry.morphAttributes).length>0&&Wie(_,s),_.name=t.createUniqueName(s.name||"mesh_"+e),Gl(_,s),w.extensions&&Ed(r,_,w),t.assignFinalMaterial(_),f.push(_)}for(let v=0,x=f.length;v<x;v++)t.associations.set(f[v],{meshes:e,primitives:v});if(f.length===1)return s.extensions&&Ed(r,f[0],s),f[0];const g=new Jl;s.extensions&&Ed(r,g,s),t.associations.set(g,{meshes:e});for(let v=0,x=f.length;v<x;v++)g.add(f[v]);return g})}loadCamera(e){let t;const i=this.json.cameras[e],r=i[i.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?t=new ji(Xd.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):i.type==="orthographic"&&(t=new Ka(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),Gl(t,i),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],i=[];for(let r=0,s=t.joints.length;r<s;r++)i.push(this._loadNodeShallow(t.joints[r]));return t.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",t.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(r){const s=r.pop(),o=r,a=[],l=[];for(let u=0,h=o.length;u<h;u++){const f=o[u];if(f){a.push(f);const g=new Jt;s!==null&&g.fromArray(s.array,u*16),l.push(g)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[u])}return new f0(a,l)})}loadAnimation(e){const t=this.json,i=this,r=t.animations[e],s=r.name?r.name:"animation_"+e,o=[],a=[],l=[],u=[],h=[];for(let f=0,g=r.channels.length;f<g;f++){const v=r.channels[f],x=r.samplers[v.sampler],S=v.target,w=S.node,_=r.parameters!==void 0?r.parameters[x.input]:x.input,b=r.parameters!==void 0?r.parameters[x.output]:x.output;S.node!==void 0&&(o.push(this.getDependency("node",w)),a.push(this.getDependency("accessor",_)),l.push(this.getDependency("accessor",b)),u.push(x),h.push(S))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(u),Promise.all(h)]).then(function(f){const g=f[0],v=f[1],x=f[2],S=f[3],w=f[4],_=[];for(let b=0,M=g.length;b<M;b++){const T=g[b],L=v[b],D=x[b],U=S[b],F=w[b];if(T===void 0)continue;T.updateMatrix&&T.updateMatrix();const k=i._createAnimationTracks(T,L,D,U,F);if(k)for(let N=0;N<k.length;N++)_.push(k[N])}return new mp(s,void 0,_)})}createNodeMesh(e){const t=this.json,i=this,r=t.nodes[e];return r.mesh===void 0?null:i.getDependency("mesh",r.mesh).then(function(s){const o=i._getNodeRef(i.meshCache,r.mesh,s);return r.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,u=r.weights.length;l<u;l++)a.morphTargetInfluences[l]=r.weights[l]}),o})}loadNode(e){const t=this.json,i=this,r=t.nodes[e],s=i._loadNodeShallow(e),o=[],a=r.children||[];for(let u=0,h=a.length;u<h;u++)o.push(i.getDependency("node",a[u]));const l=r.skin===void 0?Promise.resolve(null):i.getDependency("skin",r.skin);return Promise.all([s,Promise.all(o),l]).then(function(u){const h=u[0],f=u[1],g=u[2];g!==null&&h.traverse(function(v){v.isSkinnedMesh&&v.bind(g,Yie)});for(let v=0,x=f.length;v<x;v++)h.add(f[v]);return h})}_loadNodeShallow(e){const t=this.json,i=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],o=s.name?r.createUniqueName(s.name):"",a=[],l=r._invokeOne(function(u){return u.createNodeMesh&&u.createNodeMesh(e)});return l&&a.push(l),s.camera!==void 0&&a.push(r.getDependency("camera",s.camera).then(function(u){return r._getNodeRef(r.cameraCache,s.camera,u)})),r._invokeAll(function(u){return u.createNodeAttachment&&u.createNodeAttachment(e)}).forEach(function(u){a.push(u)}),this.nodeCache[e]=Promise.all(a).then(function(u){let h;if(s.isBone===!0?h=new N_:u.length>1?h=new Jl:u.length===1?h=u[0]:h=new Bn,h!==u[0])for(let f=0,g=u.length;f<g;f++)h.add(u[f]);if(s.name&&(h.userData.name=s.name,h.name=o),Gl(h,s),s.extensions&&Ed(i,h,s),s.matrix!==void 0){const f=new Jt;f.fromArray(s.matrix),h.applyMatrix4(f)}else s.translation!==void 0&&h.position.fromArray(s.translation),s.rotation!==void 0&&h.quaternion.fromArray(s.rotation),s.scale!==void 0&&h.scale.fromArray(s.scale);return r.associations.has(h)||r.associations.set(h,{}),r.associations.get(h).nodes=e,h}),this.nodeCache[e]}loadScene(e){const t=this.extensions,i=this.json.scenes[e],r=this,s=new Jl;i.name&&(s.name=r.createUniqueName(i.name)),Gl(s,i),i.extensions&&Ed(t,s,i);const o=i.nodes||[],a=[];for(let l=0,u=o.length;l<u;l++)a.push(r.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let h=0,f=l.length;h<f;h++)s.add(l[h]);const u=h=>{const f=new Map;for(const[g,v]of r.associations)(g instanceof wr||g instanceof qn)&&f.set(g,v);return h.traverse(g=>{const v=r.associations.get(g);v!=null&&f.set(g,v)}),f};return r.associations=u(s),s})}_createAnimationTracks(e,t,i,r,s){const o=[],a=e.name?e.name:e.uuid,l=[];Jc[s.path]===Jc.weights?e.traverse(function(g){g.morphTargetInfluences&&l.push(g.name?g.name:g.uuid)}):l.push(a);let u;switch(Jc[s.path]){case Jc.weights:u=th;break;case Jc.rotation:u=nh;break;case Jc.position:case Jc.scale:u=ih;break;default:switch(i.itemSize){case 1:u=th;break;case 2:case 3:default:u=ih;break}break}const h=r.interpolation!==void 0?Vie[r.interpolation]:dp,f=this._getArrayFromAccessor(i);for(let g=0,v=l.length;g<v;g++){const x=new u(l[g]+"."+Jc[s.path],t.array,f,h);r.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(x),o.push(x)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const i=gA(t.constructor),r=new Float32Array(t.length);for(let s=0,o=t.length;s<o;s++)r[s]=t[s]*i;t=r}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(i){const r=this instanceof nh?Hie:lF;return new r(this.times,this.values,this.getValueSize()/3,i)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function Jie(n,e,t){const i=e.attributes,r=new Ir;if(i.POSITION!==void 0){const a=t.json.accessors[i.POSITION],l=a.min,u=a.max;if(l!==void 0&&u!==void 0){if(r.set(new J(l[0],l[1],l[2]),new J(u[0],u[1],u[2])),a.normalized){const h=gA(Qf[a.componentType]);r.min.multiplyScalar(h),r.max.multiplyScalar(h)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new J,l=new J;for(let u=0,h=s.length;u<h;u++){const f=s[u];if(f.POSITION!==void 0){const g=t.json.accessors[f.POSITION],v=g.min,x=g.max;if(v!==void 0&&x!==void 0){if(l.setX(Math.max(Math.abs(v[0]),Math.abs(x[0]))),l.setY(Math.max(Math.abs(v[1]),Math.abs(x[1]))),l.setZ(Math.max(Math.abs(v[2]),Math.abs(x[2]))),g.normalized){const S=gA(Qf[g.componentType]);l.multiplyScalar(S)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}n.boundingBox=r;const o=new _r;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=o}function FI(n,e,t){const i=e.attributes,r=[];function s(o,a){return t.getDependency("accessor",o).then(function(l){n.setAttribute(a,l)})}for(const o in i){const a=mA[o]||o.toLowerCase();a in n.attributes||r.push(s(i[o],a))}if(e.indices!==void 0&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});r.push(o)}return Gl(n,e),Jie(n,e,t),Promise.all(r).then(function(){return e.targets!==void 0?jie(n,e.targets,t):n})}class qie extends zb{constructor(e){super(e),this.type=cr}parse(e){const o=function(F,k){switch(F){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(k||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(k||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(k||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(k||""))}},f=function(F,k,N){k=k||1024;let Z=F.pos,Q=-1,le=0,me="",fe=String.fromCharCode.apply(null,new Uint16Array(F.subarray(Z,Z+128)));for(;0>(Q=fe.indexOf(`
`))&&le<k&&Z<F.byteLength;)me+=fe,le+=fe.length,Z+=128,fe+=String.fromCharCode.apply(null,new Uint16Array(F.subarray(Z,Z+128)));return-1<Q?(F.pos+=le+Q+1,me+fe.slice(0,Q)):!1},g=function(F){const k=/^#\?(\S+)/,N=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,V=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,Z=/^\s*FORMAT=(\S+)\s*$/,Q=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,le={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let me,fe;for((F.pos>=F.byteLength||!(me=f(F)))&&o(1,"no header found"),(fe=me.match(k))||o(3,"bad initial token"),le.valid|=1,le.programtype=fe[1],le.string+=me+`
`;me=f(F),me!==!1;){if(le.string+=me+`
`,me.charAt(0)==="#"){le.comments+=me+`
`;continue}if((fe=me.match(N))&&(le.gamma=parseFloat(fe[1])),(fe=me.match(V))&&(le.exposure=parseFloat(fe[1])),(fe=me.match(Z))&&(le.valid|=2,le.format=fe[1]),(fe=me.match(Q))&&(le.valid|=4,le.height=parseInt(fe[1],10),le.width=parseInt(fe[2],10)),le.valid&2&&le.valid&4)break}return le.valid&2||o(3,"missing format specifier"),le.valid&4||o(3,"missing image size specifier"),le},v=function(F,k,N){const V=k;if(V<8||V>32767||F[0]!==2||F[1]!==2||F[2]&128)return new Uint8Array(F);V!==(F[2]<<8|F[3])&&o(3,"wrong scanline width");const Z=new Uint8Array(4*k*N);Z.length||o(4,"unable to allocate buffer space");let Q=0,le=0;const me=4*V,fe=new Uint8Array(4),xe=new Uint8Array(me);let X=N;for(;X>0&&le<F.byteLength;){le+4>F.byteLength&&o(1),fe[0]=F[le++],fe[1]=F[le++],fe[2]=F[le++],fe[3]=F[le++],(fe[0]!=2||fe[1]!=2||(fe[2]<<8|fe[3])!=V)&&o(3,"bad rgbe scanline format");let de=0,se;for(;de<me&&le<F.byteLength;){se=F[le++];const ge=se>128;if(ge&&(se-=128),(se===0||de+se>me)&&o(3,"bad scanline data"),ge){const Ve=F[le++];for(let we=0;we<se;we++)xe[de++]=Ve}else xe.set(F.subarray(le,le+se),de),de+=se,le+=se}const Y=V;for(let ge=0;ge<Y;ge++){let Ve=0;Z[Q]=xe[ge+Ve],Ve+=V,Z[Q+1]=xe[ge+Ve],Ve+=V,Z[Q+2]=xe[ge+Ve],Ve+=V,Z[Q+3]=xe[ge+Ve],Q+=4}X--}return Z},x=function(F,k,N,V){const Z=F[k+3],Q=Math.pow(2,Z-128)/255;N[V+0]=F[k+0]*Q,N[V+1]=F[k+1]*Q,N[V+2]=F[k+2]*Q,N[V+3]=1},S=function(F,k,N,V){const Z=F[k+3],Q=Math.pow(2,Z-128)/255;N[V+0]=kd.toHalfFloat(Math.min(F[k+0]*Q,65504)),N[V+1]=kd.toHalfFloat(Math.min(F[k+1]*Q,65504)),N[V+2]=kd.toHalfFloat(Math.min(F[k+2]*Q,65504)),N[V+3]=kd.toHalfFloat(1)},w=new Uint8Array(e);w.pos=0;const _=g(w),b=_.width,M=_.height,T=v(w.subarray(w.pos),b,M);let L,D,U;switch(this.type){case Ci:U=T.length/4;const F=new Float32Array(U*4);for(let N=0;N<U;N++)x(T,N*4,F,N*4);L=F,D=Ci;break;case cr:U=T.length/4;const k=new Uint16Array(U*4);for(let N=0;N<U;N++)S(T,N*4,k,N*4);L=k,D=cr;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:b,height:M,data:L,header:_.string,gamma:_.gamma,exposure:_.exposure,type:D}}setDataType(e){return this.type=e,this}load(e,t,i,r){function s(o,a){switch(o.type){case Ci:case cr:"colorSpace"in o?o.colorSpace="srgb-linear":o.encoding=3e3,o.minFilter=Gn,o.magFilter=Gn,o.generateMipmaps=!1,o.flipY=!0;break}t&&t(o,a)}return super.load(e,s,i,r)}}const qm=SM>=152;class Zie extends zb{constructor(e){super(e),this.type=cr}parse(e){const k=Math.pow(2.7182818,2.2);function N(H,$){for(var he=0,Pe=0;Pe<65536;++Pe)(Pe==0||H[Pe>>3]&1<<(Pe&7))&&($[he++]=Pe);for(var ke=he-1;he<65536;)$[he++]=0;return ke}function V(H){for(var $=0;$<16384;$++)H[$]={},H[$].len=0,H[$].lit=0,H[$].p=null}const Z={l:0,c:0,lc:0};function Q(H,$,he,Pe,ke){for(;he<H;)$=$<<8|St(Pe,ke),he+=8;he-=H,Z.l=$>>he&(1<<H)-1,Z.c=$,Z.lc=he}const le=new Array(59);function me(H){for(var $=0;$<=58;++$)le[$]=0;for(var $=0;$<65537;++$)le[H[$]]+=1;for(var he=0,$=58;$>0;--$){var Pe=he+le[$]>>1;le[$]=he,he=Pe}for(var $=0;$<65537;++$){var ke=H[$];ke>0&&(H[$]=ke|le[ke]++<<6)}}function fe(H,$,he,Pe,ke,Ue,ct){for(var it=he,G=0,te=0;ke<=Ue;ke++){if(it.value-he.value>Pe)return!1;Q(6,G,te,H,it);var ae=Z.l;if(G=Z.c,te=Z.lc,ct[ke]=ae,ae==63){if(it.value-he.value>Pe)throw"Something wrong with hufUnpackEncTable";Q(8,G,te,H,it);var ie=Z.l+6;if(G=Z.c,te=Z.lc,ke+ie>Ue+1)throw"Something wrong with hufUnpackEncTable";for(;ie--;)ct[ke++]=0;ke--}else if(ae>=59){var ie=ae-59+2;if(ke+ie>Ue+1)throw"Something wrong with hufUnpackEncTable";for(;ie--;)ct[ke++]=0;ke--}}me(ct)}function xe(H){return H&63}function X(H){return H>>6}function de(H,$,he,Pe){for(;$<=he;$++){var ke=X(H[$]),Ue=xe(H[$]);if(ke>>Ue)throw"Invalid table entry";if(Ue>14){var ct=Pe[ke>>Ue-14];if(ct.len)throw"Invalid table entry";if(ct.lit++,ct.p){var it=ct.p;ct.p=new Array(ct.lit);for(var G=0;G<ct.lit-1;++G)ct.p[G]=it[G]}else ct.p=new Array(1);ct.p[ct.lit-1]=$}else if(Ue)for(var te=0,G=1<<14-Ue;G>0;G--){var ct=Pe[(ke<<14-Ue)+te];if(ct.len||ct.p)throw"Invalid table entry";ct.len=Ue,ct.lit=$,te++}}return!0}const se={c:0,lc:0};function Y(H,$,he,Pe){H=H<<8|St(he,Pe),$+=8,se.c=H,se.lc=$}const ge={c:0,lc:0};function Ve(H,$,he,Pe,ke,Ue,ct,it,G,te){if(H==$){Pe<8&&(Y(he,Pe,ke,ct),he=se.c,Pe=se.lc),Pe-=8;var ae=he>>Pe,ae=new Uint8Array([ae])[0];if(G.value+ae>te)return!1;for(var ie=it[G.value-1];ae-- >0;)it[G.value++]=ie}else if(G.value<te)it[G.value++]=H;else return!1;ge.c=he,ge.lc=Pe}function we(H){return H&65535}function Ne(H){var $=we(H);return $>32767?$-65536:$}const Le={a:0,b:0};function Ge(H,$){var he=Ne(H),Pe=Ne($),ke=Pe,Ue=he+(ke&1)+(ke>>1),ct=Ue,it=Ue-ke;Le.a=ct,Le.b=it}function et(H,$){var he=we(H),Pe=we($),ke=he-(Pe>>1)&65535,Ue=Pe+ke-32768&65535;Le.a=Ue,Le.b=ke}function ft(H,$,he,Pe,ke,Ue,ct){for(var it=ct<16384,G=he>ke?ke:he,te=1,ae;te<=G;)te<<=1;for(te>>=1,ae=te,te>>=1;te>=1;){for(var ie=0,ve=ie+Ue*(ke-ae),Ce=Ue*te,He=Ue*ae,Ke=Pe*te,Qe=Pe*ae,gt,ht,Ze,Et;ie<=ve;ie+=He){for(var At=ie,rn=ie+Pe*(he-ae);At<=rn;At+=Qe){var kt=At+Ke,Gt=At+Ce,Rt=Gt+Ke;it?(Ge(H[At+$],H[Gt+$]),gt=Le.a,Ze=Le.b,Ge(H[kt+$],H[Rt+$]),ht=Le.a,Et=Le.b,Ge(gt,ht),H[At+$]=Le.a,H[kt+$]=Le.b,Ge(Ze,Et),H[Gt+$]=Le.a,H[Rt+$]=Le.b):(et(H[At+$],H[Gt+$]),gt=Le.a,Ze=Le.b,et(H[kt+$],H[Rt+$]),ht=Le.a,Et=Le.b,et(gt,ht),H[At+$]=Le.a,H[kt+$]=Le.b,et(Ze,Et),H[Gt+$]=Le.a,H[Rt+$]=Le.b)}if(he&te){var Gt=At+Ce;it?Ge(H[At+$],H[Gt+$]):et(H[At+$],H[Gt+$]),gt=Le.a,H[Gt+$]=Le.b,H[At+$]=gt}}if(ke&te)for(var At=ie,rn=ie+Pe*(he-ae);At<=rn;At+=Qe){var kt=At+Ke;it?Ge(H[At+$],H[kt+$]):et(H[At+$],H[kt+$]),gt=Le.a,H[kt+$]=Le.b,H[At+$]=gt}ae=te,te>>=1}return ie}function yt(H,$,he,Pe,ke,Ue,ct,it,G,te){for(var ae=0,ie=0,ve=it,Ce=Math.trunc(ke.value+(Ue+7)/8);ke.value<Ce;)for(Y(ae,ie,he,ke),ae=se.c,ie=se.lc;ie>=14;){var He=ae>>ie-14&16383,Ke=$[He];if(Ke.len)ie-=Ke.len,Ve(Ke.lit,ct,ae,ie,he,Pe,ke,G,te,ve),ae=ge.c,ie=ge.lc;else{if(!Ke.p)throw"hufDecode issues";var Qe;for(Qe=0;Qe<Ke.lit;Qe++){for(var gt=xe(H[Ke.p[Qe]]);ie<gt&&ke.value<Ce;)Y(ae,ie,he,ke),ae=se.c,ie=se.lc;if(ie>=gt&&X(H[Ke.p[Qe]])==(ae>>ie-gt&(1<<gt)-1)){ie-=gt,Ve(Ke.p[Qe],ct,ae,ie,he,Pe,ke,G,te,ve),ae=ge.c,ie=ge.lc;break}}if(Qe==Ke.lit)throw"hufDecode issues"}}var ht=8-Ue&7;for(ae>>=ht,ie-=ht;ie>0;){var Ke=$[ae<<14-ie&16383];if(Ke.len)ie-=Ke.len,Ve(Ke.lit,ct,ae,ie,he,Pe,ke,G,te,ve),ae=ge.c,ie=ge.lc;else throw"hufDecode issues"}return!0}function nn(H,$,he,Pe,ke,Ue){var ct={value:0},it=he.value,G=It($,he),te=It($,he);he.value+=4;var ae=It($,he);if(he.value+=4,G<0||G>=65537||te<0||te>=65537)throw"Something wrong with HUF_ENCSIZE";var ie=new Array(65537),ve=new Array(16384);V(ve);var Ce=Pe-(he.value-it);if(fe(H,$,he,Ce,G,te,ie),ae>8*(Pe-(he.value-it)))throw"Something wrong with hufUncompress";de(ie,G,te,ve),yt(ie,ve,H,$,he,ae,te,Ue,ke,ct)}function Xt(H,$,he){for(var Pe=0;Pe<he;++Pe)$[Pe]=H[$[Pe]]}function xt(H){for(var $=1;$<H.length;$++){var he=H[$-1]+H[$]-128;H[$]=he}}function q(H,$){for(var he=0,Pe=Math.floor((H.length+1)/2),ke=0,Ue=H.length-1;!(ke>Ue||($[ke++]=H[he++],ke>Ue));)$[ke++]=H[Pe++]}function at(H){for(var $=H.byteLength,he=new Array,Pe=0,ke=new DataView(H);$>0;){var Ue=ke.getInt8(Pe++);if(Ue<0){var ct=-Ue;$-=ct+1;for(var it=0;it<ct;it++)he.push(ke.getUint8(Pe++))}else{var ct=Ue;$-=2;for(var G=ke.getUint8(Pe++),it=0;it<ct+1;it++)he.push(G)}}return he}function Je(H,$,he,Pe,ke,Ue){var kt=new DataView(Ue.buffer),ct=he[H.idx[0]].width,it=he[H.idx[0]].height,G=3,te=Math.floor(ct/8),ae=Math.ceil(ct/8),ie=Math.ceil(it/8),ve=ct-(ae-1)*8,Ce=it-(ie-1)*8,He={value:0},Ke=new Array(G),Qe=new Array(G),gt=new Array(G),ht=new Array(G),Ze=new Array(G);for(let ln=0;ln<G;++ln)Ze[ln]=$[H.idx[ln]],Ke[ln]=ln<1?0:Ke[ln-1]+ae*ie,Qe[ln]=new Float32Array(64),gt[ln]=new Uint16Array(64),ht[ln]=new Uint16Array(ae*64);for(let ln=0;ln<ie;++ln){var Et=8;ln==ie-1&&(Et=Ce);var At=8;for(let pn=0;pn<ae;++pn){pn==ae-1&&(At=ve);for(let Sn=0;Sn<G;++Sn)gt[Sn].fill(0),gt[Sn][0]=ke[Ke[Sn]++],tt(He,Pe,gt[Sn]),$e(gt[Sn],Qe[Sn]),_t(Qe[Sn]);Ye(Qe);for(let Sn=0;Sn<G;++Sn)K(Qe[Sn],ht[Sn],pn*64)}let ei=0;for(let pn=0;pn<G;++pn){const Sn=he[H.idx[pn]].type;for(let qt=8*ln;qt<8*ln+Et;++qt){ei=Ze[pn][qt];for(let di=0;di<te;++di){const On=di*64+(qt&7)*8;kt.setUint16(ei+0*Sn,ht[pn][On+0],!0),kt.setUint16(ei+2*Sn,ht[pn][On+1],!0),kt.setUint16(ei+4*Sn,ht[pn][On+2],!0),kt.setUint16(ei+6*Sn,ht[pn][On+3],!0),kt.setUint16(ei+8*Sn,ht[pn][On+4],!0),kt.setUint16(ei+10*Sn,ht[pn][On+5],!0),kt.setUint16(ei+12*Sn,ht[pn][On+6],!0),kt.setUint16(ei+14*Sn,ht[pn][On+7],!0),ei+=16*Sn}}if(te!=ae)for(let qt=8*ln;qt<8*ln+Et;++qt){const di=Ze[pn][qt]+8*te*2*Sn,On=te*64+(qt&7)*8;for(let ti=0;ti<At;++ti)kt.setUint16(di+ti*2*Sn,ht[pn][On+ti],!0)}}}for(var rn=new Uint16Array(ct),kt=new DataView(Ue.buffer),Gt=0;Gt<G;++Gt){he[H.idx[Gt]].decoded=!0;var Rt=he[H.idx[Gt]].type;if(he[Gt].type==2)for(var xn=0;xn<it;++xn){const ln=Ze[Gt][xn];for(var Yt=0;Yt<ct;++Yt)rn[Yt]=kt.getUint16(ln+Yt*2*Rt,!0);for(var Yt=0;Yt<ct;++Yt)kt.setFloat32(ln+Yt*2*Rt,be(rn[Yt]),!0)}}}function tt(H,$,he){for(var Pe,ke=1;ke<64;)Pe=$[H.value],Pe==65280?ke=64:Pe>>8==255?ke+=Pe&255:(he[ke]=Pe,ke++),H.value++}function $e(H,$){$[0]=be(H[0]),$[1]=be(H[1]),$[2]=be(H[5]),$[3]=be(H[6]),$[4]=be(H[14]),$[5]=be(H[15]),$[6]=be(H[27]),$[7]=be(H[28]),$[8]=be(H[2]),$[9]=be(H[4]),$[10]=be(H[7]),$[11]=be(H[13]),$[12]=be(H[16]),$[13]=be(H[26]),$[14]=be(H[29]),$[15]=be(H[42]),$[16]=be(H[3]),$[17]=be(H[8]),$[18]=be(H[12]),$[19]=be(H[17]),$[20]=be(H[25]),$[21]=be(H[30]),$[22]=be(H[41]),$[23]=be(H[43]),$[24]=be(H[9]),$[25]=be(H[11]),$[26]=be(H[18]),$[27]=be(H[24]),$[28]=be(H[31]),$[29]=be(H[40]),$[30]=be(H[44]),$[31]=be(H[53]),$[32]=be(H[10]),$[33]=be(H[19]),$[34]=be(H[23]),$[35]=be(H[32]),$[36]=be(H[39]),$[37]=be(H[45]),$[38]=be(H[52]),$[39]=be(H[54]),$[40]=be(H[20]),$[41]=be(H[22]),$[42]=be(H[33]),$[43]=be(H[38]),$[44]=be(H[46]),$[45]=be(H[51]),$[46]=be(H[55]),$[47]=be(H[60]),$[48]=be(H[21]),$[49]=be(H[34]),$[50]=be(H[37]),$[51]=be(H[47]),$[52]=be(H[50]),$[53]=be(H[56]),$[54]=be(H[59]),$[55]=be(H[61]),$[56]=be(H[35]),$[57]=be(H[36]),$[58]=be(H[48]),$[59]=be(H[49]),$[60]=be(H[57]),$[61]=be(H[58]),$[62]=be(H[62]),$[63]=be(H[63])}function _t(H){const $=.5*Math.cos(.7853975),he=.5*Math.cos(3.14159/16),Pe=.5*Math.cos(3.14159/8),ke=.5*Math.cos(3*3.14159/16),Ue=.5*Math.cos(5*3.14159/16),ct=.5*Math.cos(3*3.14159/8),it=.5*Math.cos(7*3.14159/16);for(var G=new Array(4),te=new Array(4),ae=new Array(4),ie=new Array(4),ve=0;ve<8;++ve){var Ce=ve*8;G[0]=Pe*H[Ce+2],G[1]=ct*H[Ce+2],G[2]=Pe*H[Ce+6],G[3]=ct*H[Ce+6],te[0]=he*H[Ce+1]+ke*H[Ce+3]+Ue*H[Ce+5]+it*H[Ce+7],te[1]=ke*H[Ce+1]-it*H[Ce+3]-he*H[Ce+5]-Ue*H[Ce+7],te[2]=Ue*H[Ce+1]-he*H[Ce+3]+it*H[Ce+5]+ke*H[Ce+7],te[3]=it*H[Ce+1]-Ue*H[Ce+3]+ke*H[Ce+5]-he*H[Ce+7],ae[0]=$*(H[Ce+0]+H[Ce+4]),ae[3]=$*(H[Ce+0]-H[Ce+4]),ae[1]=G[0]+G[3],ae[2]=G[1]-G[2],ie[0]=ae[0]+ae[1],ie[1]=ae[3]+ae[2],ie[2]=ae[3]-ae[2],ie[3]=ae[0]-ae[1],H[Ce+0]=ie[0]+te[0],H[Ce+1]=ie[1]+te[1],H[Ce+2]=ie[2]+te[2],H[Ce+3]=ie[3]+te[3],H[Ce+4]=ie[3]-te[3],H[Ce+5]=ie[2]-te[2],H[Ce+6]=ie[1]-te[1],H[Ce+7]=ie[0]-te[0]}for(var He=0;He<8;++He)G[0]=Pe*H[16+He],G[1]=ct*H[16+He],G[2]=Pe*H[48+He],G[3]=ct*H[48+He],te[0]=he*H[8+He]+ke*H[24+He]+Ue*H[40+He]+it*H[56+He],te[1]=ke*H[8+He]-it*H[24+He]-he*H[40+He]-Ue*H[56+He],te[2]=Ue*H[8+He]-he*H[24+He]+it*H[40+He]+ke*H[56+He],te[3]=it*H[8+He]-Ue*H[24+He]+ke*H[40+He]-he*H[56+He],ae[0]=$*(H[He]+H[32+He]),ae[3]=$*(H[He]-H[32+He]),ae[1]=G[0]+G[3],ae[2]=G[1]-G[2],ie[0]=ae[0]+ae[1],ie[1]=ae[3]+ae[2],ie[2]=ae[3]-ae[2],ie[3]=ae[0]-ae[1],H[0+He]=ie[0]+te[0],H[8+He]=ie[1]+te[1],H[16+He]=ie[2]+te[2],H[24+He]=ie[3]+te[3],H[32+He]=ie[3]-te[3],H[40+He]=ie[2]-te[2],H[48+He]=ie[1]-te[1],H[56+He]=ie[0]-te[0]}function Ye(H){for(var $=0;$<64;++$){var he=H[0][$],Pe=H[1][$],ke=H[2][$];H[0][$]=he+1.5747*ke,H[1][$]=he-.1873*Pe-.4682*ke,H[2][$]=he+1.8556*Pe}}function K(H,$,he){for(var Pe=0;Pe<64;++Pe)$[he+Pe]=kd.toHalfFloat(j(H[Pe]))}function j(H){return H<=1?Math.sign(H)*Math.pow(Math.abs(H),2.2):Math.sign(H)*Math.pow(k,Math.abs(H)-1)}function ne(H){return new DataView(H.array.buffer,H.offset.value,H.size)}function Se(H){var $=H.viewer.buffer.slice(H.offset.value,H.offset.value+H.size),he=new Uint8Array(at($)),Pe=new Uint8Array(he.length);return xt(he),q(he,Pe),new DataView(Pe.buffer)}function ze(H){var $=H.array.slice(H.offset.value,H.offset.value+H.size),he=Ry($),Pe=new Uint8Array(he.length);return xt(he),q(he,Pe),new DataView(Pe.buffer)}function Re(H){for(var $=H.viewer,he={value:H.offset.value},Pe=new Uint16Array(H.width*H.scanlineBlockSize*(H.channels*H.type)),ke=new Uint8Array(8192),Ue=0,ct=new Array(H.channels),it=0;it<H.channels;it++)ct[it]={},ct[it].start=Ue,ct[it].end=ct[it].start,ct[it].nx=H.width,ct[it].ny=H.lines,ct[it].size=H.type,Ue+=ct[it].nx*ct[it].ny*ct[it].size;var G=Ie($,he),te=Ie($,he);if(te>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(G<=te)for(var it=0;it<te-G+1;it++)ke[it+G]=ue($,he);var ae=new Uint16Array(65536),ie=N(ke,ae),ve=It($,he);nn(H.array,$,he,ve,Pe,Ue);for(var it=0;it<H.channels;++it)for(var Ce=ct[it],He=0;He<ct[it].size;++He)ft(Pe,Ce.start+He,Ce.nx,Ce.size,Ce.ny,Ce.nx*Ce.size,ie);Xt(ae,Pe,Ue);for(var Ke=0,Qe=new Uint8Array(Pe.buffer.byteLength),gt=0;gt<H.lines;gt++)for(var ht=0;ht<H.channels;ht++){var Ce=ct[ht],Ze=Ce.nx*Ce.size,Et=new Uint8Array(Pe.buffer,Ce.end*2,Ze*2);Qe.set(Et,Ke),Ke+=Ze*2,Ce.end+=Ze}return new DataView(Qe.buffer)}function mt(H){var $=H.array.slice(H.offset.value,H.offset.value+H.size),he=Ry($);const Pe=H.lines*H.channels*H.width,ke=H.type==1?new Uint16Array(Pe):new Uint32Array(Pe);let Ue=0,ct=0;const it=new Array(4);for(let G=0;G<H.lines;G++)for(let te=0;te<H.channels;te++){let ae=0;switch(H.type){case 1:it[0]=Ue,it[1]=it[0]+H.width,Ue=it[1]+H.width;for(let ie=0;ie<H.width;++ie){const ve=he[it[0]++]<<8|he[it[1]++];ae+=ve,ke[ct]=ae,ct++}break;case 2:it[0]=Ue,it[1]=it[0]+H.width,it[2]=it[1]+H.width,Ue=it[2]+H.width;for(let ie=0;ie<H.width;++ie){const ve=he[it[0]++]<<24|he[it[1]++]<<16|he[it[2]++]<<8;ae+=ve,ke[ct]=ae,ct++}break}}return new DataView(ke.buffer)}function lt(H){var $=H.viewer,he={value:H.offset.value},Pe=new Uint8Array(H.width*H.lines*(H.channels*H.type*2)),ke={version:Oe($,he),unknownUncompressedSize:Oe($,he),unknownCompressedSize:Oe($,he),acCompressedSize:Oe($,he),dcCompressedSize:Oe($,he),rleCompressedSize:Oe($,he),rleUncompressedSize:Oe($,he),rleRawSize:Oe($,he),totalAcUncompressedCount:Oe($,he),totalDcUncompressedCount:Oe($,he),acCompression:Oe($,he)};if(ke.version<2)throw"EXRLoader.parse: "+dr.compression+" version "+ke.version+" is unsupported";for(var Ue=new Array,ct=Ie($,he)-2;ct>0;){var it=Dt($.buffer,he),G=ue($,he),te=G>>2&3,ae=(G>>4)-1,ie=new Int8Array([ae])[0],ve=ue($,he);Ue.push({name:it,index:ie,type:ve,compression:te}),ct-=it.length+3}for(var Ce=dr.channels,He=new Array(H.channels),Ke=0;Ke<H.channels;++Ke){var Qe=He[Ke]={},gt=Ce[Ke];Qe.name=gt.name,Qe.compression=0,Qe.decoded=!1,Qe.type=gt.pixelType,Qe.pLinear=gt.pLinear,Qe.width=H.width,Qe.height=H.lines}for(var ht={idx:new Array(3)},Ze=0;Ze<H.channels;++Ze)for(var Qe=He[Ze],Ke=0;Ke<Ue.length;++Ke){var Et=Ue[Ke];Qe.name==Et.name&&(Qe.compression=Et.compression,Et.index>=0&&(ht.idx[Et.index]=Ze),Qe.offset=Ze)}if(ke.acCompressedSize>0)switch(ke.acCompression){case 0:var kt=new Uint16Array(ke.totalAcUncompressedCount);nn(H.array,$,he,ke.acCompressedSize,kt,ke.totalAcUncompressedCount);break;case 1:var At=H.array.slice(he.value,he.value+ke.totalAcUncompressedCount),rn=Ry(At),kt=new Uint16Array(rn.buffer);he.value+=ke.totalAcUncompressedCount;break}if(ke.dcCompressedSize>0){var Gt={array:H.array,offset:he,size:ke.dcCompressedSize},Rt=new Uint16Array(ze(Gt).buffer);he.value+=ke.dcCompressedSize}if(ke.rleRawSize>0){var At=H.array.slice(he.value,he.value+ke.rleCompressedSize),rn=Ry(At),xn=at(rn.buffer);he.value+=ke.rleCompressedSize}for(var Yt=0,ln=new Array(He.length),Ke=0;Ke<ln.length;++Ke)ln[Ke]=new Array;for(var ei=0;ei<H.lines;++ei)for(var pn=0;pn<He.length;++pn)ln[pn].push(Yt),Yt+=He[pn].width*H.type*2;Je(ht,ln,He,kt,Rt,Pe);for(var Ke=0;Ke<He.length;++Ke){var Qe=He[Ke];if(!Qe.decoded)switch(Qe.compression){case 2:for(var Sn=0,qt=0,ei=0;ei<H.lines;++ei){for(var di=ln[Ke][Sn],On=0;On<Qe.width;++On){for(var ti=0;ti<2*Qe.type;++ti)Pe[di++]=xn[qt+ti*Qe.width*Qe.height];qt++}Sn++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(Pe.buffer)}function Dt(H,$){for(var he=new Uint8Array(H),Pe=0;he[$.value+Pe]!=0;)Pe+=1;var ke=new TextDecoder().decode(he.slice($.value,$.value+Pe));return $.value=$.value+Pe+1,ke}function Ft(H,$,he){var Pe=new TextDecoder().decode(new Uint8Array(H).slice($.value,$.value+he));return $.value=$.value+he,Pe}function qe(H,$){var he=Lt(H,$),Pe=It(H,$);return[he,Pe]}function wt(H,$){var he=It(H,$),Pe=It(H,$);return[he,Pe]}function Lt(H,$){var he=H.getInt32($.value,!0);return $.value=$.value+4,he}function It(H,$){var he=H.getUint32($.value,!0);return $.value=$.value+4,he}function St(H,$){var he=H[$.value];return $.value=$.value+1,he}function ue(H,$){var he=H.getUint8($.value);return $.value=$.value+1,he}const Oe=function(H,$){let he;return"getBigInt64"in DataView.prototype?he=Number(H.getBigInt64($.value,!0)):he=H.getUint32($.value+4,!0)+Number(H.getUint32($.value,!0)<<32),$.value+=8,he};function st(H,$){var he=H.getFloat32($.value,!0);return $.value+=4,he}function ce(H,$){return kd.toHalfFloat(st(H,$))}function be(H){var $=(H&31744)>>10,he=H&1023;return(H>>15?-1:1)*($?$===31?he?NaN:1/0:Math.pow(2,$-15)*(1+he/1024):6103515625e-14*(he/1024))}function Ie(H,$){var he=H.getUint16($.value,!0);return $.value+=2,he}function We(H,$){return be(Ie(H,$))}function Mt(H,$,he,Pe){for(var ke=he.value,Ue=[];he.value<ke+Pe-1;){var ct=Dt($,he),it=Lt(H,he),G=ue(H,he);he.value+=3;var te=Lt(H,he),ae=Lt(H,he);Ue.push({name:ct,pixelType:it,pLinear:G,xSampling:te,ySampling:ae})}return he.value+=1,Ue}function vt(H,$){var he=st(H,$),Pe=st(H,$),ke=st(H,$),Ue=st(H,$),ct=st(H,$),it=st(H,$),G=st(H,$),te=st(H,$);return{redX:he,redY:Pe,greenX:ke,greenY:Ue,blueX:ct,blueY:it,whiteX:G,whiteY:te}}function $t(H,$){var he=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],Pe=ue(H,$);return he[Pe]}function Tn(H,$){var he=It(H,$),Pe=It(H,$),ke=It(H,$),Ue=It(H,$);return{xMin:he,yMin:Pe,xMax:ke,yMax:Ue}}function Xn(H,$){var he=["INCREASING_Y"],Pe=ue(H,$);return he[Pe]}function mn(H,$){var he=st(H,$),Pe=st(H,$);return[he,Pe]}function vi(H,$){var he=st(H,$),Pe=st(H,$),ke=st(H,$);return[he,Pe,ke]}function Si(H,$,he,Pe,ke){if(Pe==="string"||Pe==="stringvector"||Pe==="iccProfile")return Ft($,he,ke);if(Pe==="chlist")return Mt(H,$,he,ke);if(Pe==="chromaticities")return vt(H,he);if(Pe==="compression")return $t(H,he);if(Pe==="box2i")return Tn(H,he);if(Pe==="lineOrder")return Xn(H,he);if(Pe==="float")return st(H,he);if(Pe==="v2f")return mn(H,he);if(Pe==="v3f")return vi(H,he);if(Pe==="int")return Lt(H,he);if(Pe==="rational")return qe(H,he);if(Pe==="timecode")return wt(H,he);if(Pe==="preview")return he.value+=ke,"skipped";he.value+=ke}function ba(H,$,he){const Pe={};if(H.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";Pe.version=H.getUint8(4);const ke=H.getUint8(5);Pe.spec={singleTile:!!(ke&2),longName:!!(ke&4),deepFormat:!!(ke&8),multiPart:!!(ke&16)},he.value=8;for(var Ue=!0;Ue;){var ct=Dt($,he);if(ct==0)Ue=!1;else{var it=Dt($,he),G=It(H,he),te=Si(H,$,he,it,G);te===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${it}'.`):Pe[ct]=te}}if((ke&-5)!=0)throw console.error("EXRHeader:",Pe),"THREE.EXRLoader: provided file is currently unsupported.";return Pe}function fo(H,$,he,Pe,ke){const Ue={size:0,viewer:$,array:he,offset:Pe,width:H.dataWindow.xMax-H.dataWindow.xMin+1,height:H.dataWindow.yMax-H.dataWindow.yMin+1,channels:H.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:H.channels[0].pixelType,uncompress:null,getter:null,format:null,[qm?"colorSpace":"encoding"]:null};switch(H.compression){case"NO_COMPRESSION":Ue.lines=1,Ue.uncompress=ne;break;case"RLE_COMPRESSION":Ue.lines=1,Ue.uncompress=Se;break;case"ZIPS_COMPRESSION":Ue.lines=1,Ue.uncompress=ze;break;case"ZIP_COMPRESSION":Ue.lines=16,Ue.uncompress=ze;break;case"PIZ_COMPRESSION":Ue.lines=32,Ue.uncompress=Re;break;case"PXR24_COMPRESSION":Ue.lines=16,Ue.uncompress=mt;break;case"DWAA_COMPRESSION":Ue.lines=32,Ue.uncompress=lt;break;case"DWAB_COMPRESSION":Ue.lines=256,Ue.uncompress=lt;break;default:throw"EXRLoader.parse: "+H.compression+" is unsupported"}if(Ue.scanlineBlockSize=Ue.lines,Ue.type==1)switch(ke){case Ci:Ue.getter=We,Ue.inputSize=2;break;case cr:Ue.getter=Ie,Ue.inputSize=2;break}else if(Ue.type==2)switch(ke){case Ci:Ue.getter=st,Ue.inputSize=4;break;case cr:Ue.getter=ce,Ue.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+Ue.type+" for "+H.compression+".";Ue.blockCount=(H.dataWindow.yMax+1)/Ue.scanlineBlockSize;for(var ct=0;ct<Ue.blockCount;ct++)Oe($,Pe);Ue.outputChannels=Ue.channels==3?4:Ue.channels;const it=Ue.width*Ue.height*Ue.outputChannels;switch(ke){case Ci:Ue.byteArray=new Float32Array(it),Ue.channels<Ue.outputChannels&&Ue.byteArray.fill(1,0,it);break;case cr:Ue.byteArray=new Uint16Array(it),Ue.channels<Ue.outputChannels&&Ue.byteArray.fill(15360,0,it);break;default:console.error("THREE.EXRLoader: unsupported type: ",ke);break}return Ue.bytesPerLine=Ue.width*Ue.inputSize*Ue.channels,Ue.outputChannels==4?Ue.format=Qi:Ue.format=a0,qm?Ue.colorSpace="srgb-linear":Ue.encoding=3e3,Ue}const Dr=new DataView(e),ls=new Uint8Array(e),cs={value:0},dr=ba(Dr,e,cs),dn=fo(dr,Dr,ls,cs,this.type),il={value:0},Ma={R:0,G:1,B:2,A:3,Y:0};for(let H=0;H<dn.height/dn.scanlineBlockSize;H++){const $=It(Dr,cs);dn.size=It(Dr,cs),dn.lines=$+dn.scanlineBlockSize>dn.height?dn.height-$:dn.scanlineBlockSize;const Pe=dn.size<dn.lines*dn.bytesPerLine?dn.uncompress(dn):ne(dn);cs.value+=dn.size;for(let ke=0;ke<dn.scanlineBlockSize;ke++){const Ue=ke+H*dn.scanlineBlockSize;if(Ue>=dn.height)break;for(let ct=0;ct<dn.channels;ct++){const it=Ma[dr.channels[ct].name];for(let G=0;G<dn.width;G++){il.value=(ke*(dn.channels*dn.width)+ct*dn.width+G)*dn.inputSize;const te=(dn.height-1-Ue)*(dn.width*dn.outputChannels)+G*dn.outputChannels+it;dn.byteArray[te]=dn.getter(Pe,il)}}}}return{header:dr,width:dn.width,height:dn.height,data:dn.byteArray,format:dn.format,[qm?"colorSpace":"encoding"]:dn[qm?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,t,i,r){function s(o,a){qm?o.colorSpace=a.colorSpace:o.encoding=a.encoding,o.minFilter=Gn,o.magFilter=Gn,o.generateMipmaps=!1,o.flipY=!1,t&&t(o,a)}return super.load(e,s,i,r)}}const GS=new WeakMap;class Qie extends jr{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,i,r){const s=new Gr(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{const a={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,a).then(t).catch(r)},i,r)}decodeDracoFile(e,t,i,r){const s={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!i};this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){for(const l in t.attributeTypes){const u=t.attributeTypes[l];u.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[l]=u.name)}const i=JSON.stringify(t);if(GS.has(e)){const l=GS.get(e);if(l.key===i)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const s=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(s,o).then(l=>(r=l,new Promise((u,h)=>{r._callbacks[s]={resolve:u,reject:h},r.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return a.catch(()=>!0).then(()=>{r&&s&&this._releaseTask(r,s)}),GS.set(e,{key:i,promise:a}),a}_createGeometry(e){const t=new yn;e.index&&t.setIndex(new jn(e.index.array,1));for(let i=0;i<e.attributes.length;i++){const r=e.attributes[i],s=r.name,o=r.array,a=r.itemSize;t.setAttribute(s,new jn(o,a))}return t}_loadLibrary(e,t){const i=new Gr(this.manager);return i.setPath(this.decoderPath),i.setResponseType(t),i.setWithCredentials(this.withCredentials),new Promise((r,s)=>{i.load(e,r,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(i=>{const r=i[0];e||(this.decoderConfig.wasmBinary=i[1]);const s=ere.toString(),o=["/* draco decoder */",r,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(s){const o=s.data;switch(o.type){case"decode":r._callbacks[o.id].resolve(o);break;case"error":r._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,s){return r._taskLoad>s._taskLoad?-1:1});const i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function ere(){let n,e;onmessage=function(o){const a=o.data;switch(a.type){case"init":n=a.decoderConfig,e=new Promise(function(h){n.onModuleLoaded=function(f){h({draco:f})},DracoDecoderModule(n)});break;case"decode":const l=a.buffer,u=a.taskConfig;e.then(h=>{const f=h.draco,g=new f.Decoder,v=new f.DecoderBuffer;v.Init(new Int8Array(l),l.byteLength);try{const x=t(f,g,v,u),S=x.attributes.map(w=>w.array.buffer);x.index&&S.push(x.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:x},S)}catch(x){console.error(x),self.postMessage({type:"error",id:a.id,error:x.message})}finally{f.destroy(v),f.destroy(g)}});break}};function t(o,a,l,u){const h=u.attributeIDs,f=u.attributeTypes;let g,v;const x=a.GetEncodedGeometryType(l);if(x===o.TRIANGULAR_MESH)g=new o.Mesh,v=a.DecodeBufferToMesh(l,g);else if(x===o.POINT_CLOUD)g=new o.PointCloud,v=a.DecodeBufferToPointCloud(l,g);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!v.ok()||g.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+v.error_msg());const S={index:null,attributes:[]};for(const w in h){const _=self[f[w]];let b,M;if(u.useUniqueIDs)M=h[w],b=a.GetAttributeByUniqueId(g,M);else{if(M=a.GetAttributeId(g,o[h[w]]),M===-1)continue;b=a.GetAttribute(g,M)}S.attributes.push(r(o,a,g,w,_,b))}return x===o.TRIANGULAR_MESH&&(S.index=i(o,a,g)),o.destroy(g),S}function i(o,a,l){const h=l.num_faces()*3,f=h*4,g=o._malloc(f);a.GetTrianglesUInt32Array(l,f,g);const v=new Uint32Array(o.HEAPF32.buffer,g,h).slice();return o._free(g),{array:v,itemSize:1}}function r(o,a,l,u,h,f){const g=f.num_components(),x=l.num_points()*g,S=x*h.BYTES_PER_ELEMENT,w=s(o,h),_=o._malloc(S);a.GetAttributeDataArrayForAllPoints(l,f,w,S,_);const b=new h(o.HEAPF32.buffer,_,x).slice();return o._free(_),{name:u,array:b,itemSize:g}}function s(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}let Iy;const jS=()=>{if(Iy)return Iy;const n="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),i=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let r=n;WebAssembly.validate(t)&&(r=e);let s;const o=WebAssembly.instantiate(a(r),{}).then(f=>{s=f.instance,s.exports.__wasm_call_ctors()});function a(f){const g=new Uint8Array(f.length);for(let x=0;x<f.length;++x){const S=f.charCodeAt(x);g[x]=S>96?S-71:S>64?S-65:S>47?S+4:S>46?63:62}let v=0;for(let x=0;x<f.length;++x)g[v++]=g[x]<60?i[g[x]]:(g[x]-60)*64+g[++x];return g.buffer.slice(0,v)}function l(f,g,v,x,S,w){const _=s.exports.sbrk,b=v+3&-4,M=_(b*x),T=_(S.length),L=new Uint8Array(s.exports.memory.buffer);L.set(S,T);const D=f(M,v,x,T,S.length);if(D===0&&w&&w(M,b,x),g.set(L.subarray(M,M+v*x)),_(M-_(0)),D!==0)throw new Error(`Malformed buffer data: ${D}`)}const u={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},h={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return Iy={ready:o,supported:!0,decodeVertexBuffer(f,g,v,x,S){l(s.exports.meshopt_decodeVertexBuffer,f,g,v,x,s.exports[u[S]])},decodeIndexBuffer(f,g,v,x){l(s.exports.meshopt_decodeIndexBuffer,f,g,v,x)},decodeIndexSequence(f,g,v,x){l(s.exports.meshopt_decodeIndexSequence,f,g,v,x)},decodeGltfBuffer(f,g,v,x,S,w){l(s.exports[h[S]],f,g,v,x,s.exports[u[w]])}},Iy};function cF(n,e,t,i){const r=class extends Ps{constructor(o={}){const a=Object.entries(n);super({uniforms:a.reduce((l,[u,h])=>{const f=wb.clone({[u]:{value:h}});return{...l,...f}},{}),vertexShader:e,fragmentShader:t}),this.key="",a.forEach(([l])=>Object.defineProperty(this,l,{get:()=>this.uniforms[l].value,set:u=>this.uniforms[l].value=u})),Object.assign(this,o)}};return r.key=Xd.generateUUID(),r}const tre=()=>parseInt(Ep.replace(/\D+/g,"")),uF=tre();let Dy=null,dF="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function hF(n=!0,e=!0,t){return i=>{t&&t(i),n&&(Dy||(Dy=new Qie),Dy.setDecoderPath(typeof n=="string"?n:dF),i.setDRACOLoader(Dy)),e&&i.setMeshoptDecoder(typeof jS=="function"?jS():jS)}}const hh=(n,e,t,i)=>oc(EM,n,hF(e,t,i));hh.preload=(n,e,t,i)=>oc.preload(EM,n,hF(e,t,i));hh.clear=n=>oc.clear(EM,n);hh.setDecoderPath=n=>{dF=n};function fF(n,e,t){const i=Vn(g=>g.size),r=Vn(g=>g.viewport),s=typeof n=="number"?n:i.width*r.dpr,o=typeof e=="number"?e:i.height*r.dpr,a=(typeof n=="number"?t:n)||{},{samples:l=0,depth:u,...h}=a,f=I.useMemo(()=>{const g=new Rs(s,o,{minFilter:Gn,magFilter:Gn,type:cr,...h});return u&&(g.depthTexture=new p0(s,o,Ci)),g.samples=l,g},[]);return I.useLayoutEffect(()=>{f.setSize(s,o),l&&(f.samples=l)},[l,f,s,o]),I.useEffect(()=>()=>f.dispose(),[]),f}const nre=n=>typeof n=="function",ire=I.forwardRef(({envMap:n,resolution:e=256,frames:t=1/0,makeDefault:i,children:r,...s},o)=>{const a=Vn(({set:w})=>w),l=Vn(({camera:w})=>w),u=Vn(({size:w})=>w),h=I.useRef(null);I.useImperativeHandle(o,()=>h.current,[]);const f=I.useRef(null),g=fF(e);I.useLayoutEffect(()=>{s.manual||(h.current.aspect=u.width/u.height)},[u,s]),I.useLayoutEffect(()=>{h.current.updateProjectionMatrix()});let v=0,x=null;const S=nre(r);return Rp(w=>{S&&(t===1/0||v<t)&&(f.current.visible=!1,w.gl.setRenderTarget(g),x=w.scene.background,n&&(w.scene.background=n),w.gl.render(w.scene,h.current),w.scene.background=x,w.gl.setRenderTarget(null),f.current.visible=!0,v++)}),I.useLayoutEffect(()=>{if(i){const w=l;return a(()=>({camera:h.current})),()=>a(()=>({camera:w}))}},[h,i,a]),I.createElement(I.Fragment,null,I.createElement("perspectiveCamera",ui({ref:h},s),!S&&r),I.createElement("group",{ref:f},S&&r(g.texture)))}),rre=I.forwardRef(({makeDefault:n,camera:e,regress:t,domElement:i,enableDamping:r=!0,keyEvents:s=!1,onChange:o,onStart:a,onEnd:l,...u},h)=>{const f=Vn(D=>D.invalidate),g=Vn(D=>D.camera),v=Vn(D=>D.gl),x=Vn(D=>D.events),S=Vn(D=>D.setEvents),w=Vn(D=>D.set),_=Vn(D=>D.get),b=Vn(D=>D.performance),M=e||g,T=i||x.connected||v.domElement,L=I.useMemo(()=>new mie(M),[M]);return Rp(()=>{L.enabled&&L.update()},-1),I.useEffect(()=>(s&&L.connect(s===!0?T:s),L.connect(T),()=>void L.dispose()),[s,T,t,L,f]),I.useEffect(()=>{const D=k=>{f(),t&&b.regress(),o&&o(k)},U=k=>{a&&a(k)},F=k=>{l&&l(k)};return L.addEventListener("change",D),L.addEventListener("start",U),L.addEventListener("end",F),()=>{L.removeEventListener("start",U),L.removeEventListener("end",F),L.removeEventListener("change",D)}},[o,a,l,L,f,S]),I.useEffect(()=>{if(n){const D=_().controls;return w({controls:L}),()=>w({controls:D})}},[n,L]),I.createElement("primitive",ui({ref:h,object:L,enableDamping:r},u))});/*!
 * camera-controls
 * https://github.com/yomotsu/camera-controls
 * (c) 2017 @yomotsu
 * Released under the MIT License.
 */const Bi={LEFT:1,RIGHT:2,MIDDLE:4},De=Object.freeze({NONE:0,ROTATE:1,TRUCK:2,SCREEN_PAN:4,OFFSET:8,DOLLY:16,ZOOM:32,TOUCH_ROTATE:64,TOUCH_TRUCK:128,TOUCH_SCREEN_PAN:256,TOUCH_OFFSET:512,TOUCH_DOLLY:1024,TOUCH_ZOOM:2048,TOUCH_DOLLY_TRUCK:4096,TOUCH_DOLLY_SCREEN_PAN:8192,TOUCH_DOLLY_OFFSET:16384,TOUCH_DOLLY_ROTATE:32768,TOUCH_ZOOM_TRUCK:65536,TOUCH_ZOOM_OFFSET:131072,TOUCH_ZOOM_SCREEN_PAN:262144,TOUCH_ZOOM_ROTATE:524288}),Bf={NONE:0,IN:1,OUT:-1};function Ad(n){return n.isPerspectiveCamera}function Qc(n){return n.isOrthographicCamera}const Lf=Math.PI*2,kI=Math.PI/2,pF=1e-5,Zm=Math.PI/180;function pa(n,e,t){return Math.max(e,Math.min(t,n))}function mi(n,e=pF){return Math.abs(n)<e}function Jn(n,e,t=pF){return mi(n-e,t)}function UI(n,e){return Math.round(n/e)*e}function Qm(n){return isFinite(n)?n:n<0?-Number.MAX_VALUE:Number.MAX_VALUE}function eg(n){return Math.abs(n)<Number.MAX_VALUE?n:n*(1/0)}function By(n,e,t,i,r=1/0,s){i=Math.max(1e-4,i);const o=2/i,a=o*s,l=1/(1+a+.48*a*a+.235*a*a*a);let u=n-e;const h=e,f=r*i;u=pa(u,-f,f),e=n-u;const g=(t.value+o*u)*s;t.value=(t.value-o*g)*l;let v=e+(u+g)*l;return h-n>0==v>h&&(v=h,t.value=(v-h)/s),v}function zI(n,e,t,i,r=1/0,s,o){i=Math.max(1e-4,i);const a=2/i,l=a*s,u=1/(1+l+.48*l*l+.235*l*l*l);let h=e.x,f=e.y,g=e.z,v=n.x-h,x=n.y-f,S=n.z-g;const w=h,_=f,b=g,M=r*i,T=M*M,L=v*v+x*x+S*S;if(L>T){const me=Math.sqrt(L);v=v/me*M,x=x/me*M,S=S/me*M}h=n.x-v,f=n.y-x,g=n.z-S;const D=(t.x+a*v)*s,U=(t.y+a*x)*s,F=(t.z+a*S)*s;t.x=(t.x-a*D)*u,t.y=(t.y-a*U)*u,t.z=(t.z-a*F)*u,o.x=h+(v+D)*u,o.y=f+(x+U)*u,o.z=g+(S+F)*u;const k=w-n.x,N=_-n.y,V=b-n.z,Z=o.x-w,Q=o.y-_,le=o.z-b;return k*Z+N*Q+V*le>0&&(o.x=w,o.y=_,o.z=b,t.x=(o.x-w)/s,t.y=(o.y-_)/s,t.z=(o.z-b)/s),o}function WS(n,e){e.set(0,0),n.forEach(t=>{e.x+=t.clientX,e.y+=t.clientY}),e.x/=n.length,e.y/=n.length}function $S(n,e){return Qc(n)?(console.warn(`${e} is not supported in OrthographicCamera`),!0):!1}class sre{constructor(){this._listeners={}}addEventListener(e,t){const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}removeAllEventListeners(e){if(!e){this._listeners={};return}Array.isArray(this._listeners[e])&&(this._listeners[e].length=0)}dispatchEvent(e){const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e)}}}var XS;const ore="2.10.1",Ly=1/8,are=/Mac/.test((XS=globalThis?.navigator)===null||XS===void 0?void 0:XS.platform);let un,HI,Oy,YS,js,Mn,$n,Of,tg,Ga,ja,bd,VI,GI,Mo,ng,Nf,jI,KS,WI,JS,qS,Ny,ZS=class vA extends sre{static install(e){un=e.THREE,HI=Object.freeze(new un.Vector3(0,0,0)),Oy=Object.freeze(new un.Vector3(0,1,0)),YS=Object.freeze(new un.Vector3(0,0,1)),js=new un.Vector2,Mn=new un.Vector3,$n=new un.Vector3,Of=new un.Vector3,tg=new un.Vector3,Ga=new un.Vector3,ja=new un.Vector3,bd=new un.Vector3,VI=new un.Vector3,GI=new un.Vector3,Mo=new un.Spherical,ng=new un.Spherical,Nf=new un.Box3,jI=new un.Box3,KS=new un.Sphere,WI=new un.Quaternion,JS=new un.Quaternion,qS=new un.Matrix4,Ny=new un.Raycaster}static get ACTION(){return De}set verticalDragToForward(e){console.warn("camera-controls: `verticalDragToForward` was removed. Use `mouseButtons.left = CameraControls.ACTION.SCREEN_PAN` instead.")}constructor(e,t){super(),this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.minDistance=Number.EPSILON,this.maxDistance=1/0,this.infinityDolly=!1,this.minZoom=.01,this.maxZoom=1/0,this.smoothTime=.25,this.draggingSmoothTime=.125,this.maxSpeed=1/0,this.azimuthRotateSpeed=1,this.polarRotateSpeed=1,this.dollySpeed=1,this.dollyDragInverted=!1,this.truckSpeed=2,this.dollyToCursor=!1,this.dragToOffset=!1,this.boundaryFriction=0,this.restThreshold=.01,this.colliderMeshes=[],this.cancel=()=>{},this._enabled=!0,this._state=De.NONE,this._viewport=null,this._changedDolly=0,this._changedZoom=0,this._hasRested=!0,this._boundaryEnclosesCamera=!1,this._needsUpdate=!0,this._updatedLastTime=!1,this._elementRect=new DOMRect,this._isDragging=!1,this._dragNeedsUpdate=!0,this._activePointers=[],this._lockedPointer=null,this._interactiveArea=new DOMRect(0,0,1,1),this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._isUserControllingOffset=!1,this._isUserControllingZoom=!1,this._lastDollyDirection=Bf.NONE,this._thetaVelocity={value:0},this._phiVelocity={value:0},this._radiusVelocity={value:0},this._targetVelocity=new un.Vector3,this._focalOffsetVelocity=new un.Vector3,this._zoomVelocity={value:0},this._truckInternal=(_,b,M,T)=>{let L,D;if(Ad(this._camera)){const U=Mn.copy(this._camera.position).sub(this._target),F=this._camera.getEffectiveFOV()*Zm,k=U.length()*Math.tan(F*.5);L=this.truckSpeed*_*k/this._elementRect.height,D=this.truckSpeed*b*k/this._elementRect.height}else if(Qc(this._camera)){const U=this._camera;L=this.truckSpeed*_*(U.right-U.left)/U.zoom/this._elementRect.width,D=this.truckSpeed*b*(U.top-U.bottom)/U.zoom/this._elementRect.height}else return;T?(M?this.setFocalOffset(this._focalOffsetEnd.x+L,this._focalOffsetEnd.y,this._focalOffsetEnd.z,!0):this.truck(L,0,!0),this.forward(-D,!0)):M?this.setFocalOffset(this._focalOffsetEnd.x+L,this._focalOffsetEnd.y+D,this._focalOffsetEnd.z,!0):this.truck(L,D,!0)},this._rotateInternal=(_,b)=>{const M=Lf*this.azimuthRotateSpeed*_/this._elementRect.height,T=Lf*this.polarRotateSpeed*b/this._elementRect.height;this.rotate(M,T,!0)},this._dollyInternal=(_,b,M)=>{const T=Math.pow(.95,-_*this.dollySpeed),L=this._sphericalEnd.radius,D=this._sphericalEnd.radius*T,U=pa(D,this.minDistance,this.maxDistance),F=U-D;this.infinityDolly&&this.dollyToCursor?this._dollyToNoClamp(D,!0):this.infinityDolly&&!this.dollyToCursor?(this.dollyInFixed(F,!0),this._dollyToNoClamp(U,!0)):this._dollyToNoClamp(U,!0),this.dollyToCursor&&(this._changedDolly+=(this.infinityDolly?D:U)-L,this._dollyControlCoord.set(b,M)),this._lastDollyDirection=Math.sign(-_)},this._zoomInternal=(_,b,M)=>{const T=Math.pow(.95,_*this.dollySpeed),L=this._zoom,D=this._zoom*T;this.zoomTo(D,!0),this.dollyToCursor&&(this._changedZoom+=D-L,this._dollyControlCoord.set(b,M))},typeof un>"u"&&console.error("camera-controls: `THREE` is undefined. You must first run `CameraControls.install( { THREE: THREE } )`. Check the docs for further information."),this._camera=e,this._yAxisUpSpace=new un.Quaternion().setFromUnitVectors(this._camera.up,Oy),this._yAxisUpSpaceInverse=this._yAxisUpSpace.clone().invert(),this._state=De.NONE,this._target=new un.Vector3,this._targetEnd=this._target.clone(),this._focalOffset=new un.Vector3,this._focalOffsetEnd=this._focalOffset.clone(),this._spherical=new un.Spherical().setFromVector3(Mn.copy(this._camera.position).applyQuaternion(this._yAxisUpSpace)),this._sphericalEnd=this._spherical.clone(),this._lastDistance=this._spherical.radius,this._zoom=this._camera.zoom,this._zoomEnd=this._zoom,this._lastZoom=this._zoom,this._nearPlaneCorners=[new un.Vector3,new un.Vector3,new un.Vector3,new un.Vector3],this._updateNearPlaneCorners(),this._boundary=new un.Box3(new un.Vector3(-1/0,-1/0,-1/0),new un.Vector3(1/0,1/0,1/0)),this._cameraUp0=this._camera.up.clone(),this._target0=this._target.clone(),this._position0=this._camera.position.clone(),this._zoom0=this._zoom,this._focalOffset0=this._focalOffset.clone(),this._dollyControlCoord=new un.Vector2,this.mouseButtons={left:De.ROTATE,middle:De.DOLLY,right:De.TRUCK,wheel:Ad(this._camera)?De.DOLLY:Qc(this._camera)?De.ZOOM:De.NONE},this.touches={one:De.TOUCH_ROTATE,two:Ad(this._camera)?De.TOUCH_DOLLY_TRUCK:Qc(this._camera)?De.TOUCH_ZOOM_TRUCK:De.NONE,three:De.TOUCH_TRUCK};const i=new un.Vector2,r=new un.Vector2,s=new un.Vector2,o=_=>{if(!this._enabled||!this._domElement)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const T=this._domElement.getBoundingClientRect(),L=_.clientX/T.width,D=_.clientY/T.height;if(L<this._interactiveArea.left||L>this._interactiveArea.right||D<this._interactiveArea.top||D>this._interactiveArea.bottom)return}const b=_.pointerType!=="mouse"?null:(_.buttons&Bi.LEFT)===Bi.LEFT?Bi.LEFT:(_.buttons&Bi.MIDDLE)===Bi.MIDDLE?Bi.MIDDLE:(_.buttons&Bi.RIGHT)===Bi.RIGHT?Bi.RIGHT:null;if(b!==null){const T=this._findPointerByMouseButton(b);T&&this._disposePointer(T)}if((_.buttons&Bi.LEFT)===Bi.LEFT&&this._lockedPointer)return;const M={pointerId:_.pointerId,clientX:_.clientX,clientY:_.clientY,deltaX:0,deltaY:0,mouseButton:b};this._activePointers.push(M),this._domElement.ownerDocument.removeEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",l),this._domElement.ownerDocument.addEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",l),this._isDragging=!0,g(_)},a=_=>{_.cancelable&&_.preventDefault();const b=_.pointerId,M=this._lockedPointer||this._findPointerById(b);if(M){if(M.clientX=_.clientX,M.clientY=_.clientY,M.deltaX=_.movementX,M.deltaY=_.movementY,this._state=0,_.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else(!this._isDragging&&this._lockedPointer||this._isDragging&&(_.buttons&Bi.LEFT)===Bi.LEFT)&&(this._state=this._state|this.mouseButtons.left),this._isDragging&&(_.buttons&Bi.MIDDLE)===Bi.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),this._isDragging&&(_.buttons&Bi.RIGHT)===Bi.RIGHT&&(this._state=this._state|this.mouseButtons.right);v()}},l=_=>{const b=this._findPointerById(_.pointerId);if(!(b&&b===this._lockedPointer)){if(b&&this._disposePointer(b),_.pointerType==="touch")switch(this._activePointers.length){case 0:this._state=De.NONE;break;case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else this._state=De.NONE;x()}};let u=-1;const h=_=>{if(!this._domElement||!this._enabled||this.mouseButtons.wheel===De.NONE)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const D=this._domElement.getBoundingClientRect(),U=_.clientX/D.width,F=_.clientY/D.height;if(U<this._interactiveArea.left||U>this._interactiveArea.right||F<this._interactiveArea.top||F>this._interactiveArea.bottom)return}if(_.preventDefault(),this.dollyToCursor||this.mouseButtons.wheel===De.ROTATE||this.mouseButtons.wheel===De.TRUCK){const D=performance.now();u-D<1e3&&this._getClientRect(this._elementRect),u=D}const b=are?-1:-3,M=_.deltaMode===1||_.ctrlKey?_.deltaY/b:_.deltaY/(b*10),T=this.dollyToCursor?(_.clientX-this._elementRect.x)/this._elementRect.width*2-1:0,L=this.dollyToCursor?(_.clientY-this._elementRect.y)/this._elementRect.height*-2+1:0;switch(this.mouseButtons.wheel){case De.ROTATE:{this._rotateInternal(_.deltaX,_.deltaY),this._isUserControllingRotate=!0;break}case De.TRUCK:{this._truckInternal(_.deltaX,_.deltaY,!1,!1),this._isUserControllingTruck=!0;break}case De.SCREEN_PAN:{this._truckInternal(_.deltaX,_.deltaY,!1,!0),this._isUserControllingTruck=!0;break}case De.OFFSET:{this._truckInternal(_.deltaX,_.deltaY,!0,!1),this._isUserControllingOffset=!0;break}case De.DOLLY:{this._dollyInternal(-M,T,L),this._isUserControllingDolly=!0;break}case De.ZOOM:{this._zoomInternal(-M,T,L),this._isUserControllingZoom=!0;break}}this.dispatchEvent({type:"control"})},f=_=>{if(!(!this._domElement||!this._enabled)){if(this.mouseButtons.right===vA.ACTION.NONE){const b=_ instanceof PointerEvent?_.pointerId:0,M=this._findPointerById(b);M&&this._disposePointer(M),this._domElement.ownerDocument.removeEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",l);return}_.preventDefault()}},g=_=>{if(!this._enabled)return;if(WS(this._activePointers,js),this._getClientRect(this._elementRect),i.copy(js),r.copy(js),this._activePointers.length>=2){const M=js.x-this._activePointers[1].clientX,T=js.y-this._activePointers[1].clientY,L=Math.sqrt(M*M+T*T);s.set(0,L);const D=(this._activePointers[0].clientX+this._activePointers[1].clientX)*.5,U=(this._activePointers[0].clientY+this._activePointers[1].clientY)*.5;r.set(D,U)}if(this._state=0,!_)this._lockedPointer&&(this._state=this._state|this.mouseButtons.left);else if("pointerType"in _&&_.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else!this._lockedPointer&&(_.buttons&Bi.LEFT)===Bi.LEFT&&(this._state=this._state|this.mouseButtons.left),(_.buttons&Bi.MIDDLE)===Bi.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(_.buttons&Bi.RIGHT)===Bi.RIGHT&&(this._state=this._state|this.mouseButtons.right);((this._state&De.ROTATE)===De.ROTATE||(this._state&De.TOUCH_ROTATE)===De.TOUCH_ROTATE||(this._state&De.TOUCH_DOLLY_ROTATE)===De.TOUCH_DOLLY_ROTATE||(this._state&De.TOUCH_ZOOM_ROTATE)===De.TOUCH_ZOOM_ROTATE)&&(this._sphericalEnd.theta=this._spherical.theta,this._sphericalEnd.phi=this._spherical.phi,this._thetaVelocity.value=0,this._phiVelocity.value=0),((this._state&De.TRUCK)===De.TRUCK||(this._state&De.SCREEN_PAN)===De.SCREEN_PAN||(this._state&De.TOUCH_TRUCK)===De.TOUCH_TRUCK||(this._state&De.TOUCH_SCREEN_PAN)===De.TOUCH_SCREEN_PAN||(this._state&De.TOUCH_DOLLY_TRUCK)===De.TOUCH_DOLLY_TRUCK||(this._state&De.TOUCH_DOLLY_SCREEN_PAN)===De.TOUCH_DOLLY_SCREEN_PAN||(this._state&De.TOUCH_ZOOM_TRUCK)===De.TOUCH_ZOOM_TRUCK||(this._state&De.TOUCH_ZOOM_SCREEN_PAN)===De.TOUCH_DOLLY_SCREEN_PAN)&&(this._targetEnd.copy(this._target),this._targetVelocity.set(0,0,0)),((this._state&De.DOLLY)===De.DOLLY||(this._state&De.TOUCH_DOLLY)===De.TOUCH_DOLLY||(this._state&De.TOUCH_DOLLY_TRUCK)===De.TOUCH_DOLLY_TRUCK||(this._state&De.TOUCH_DOLLY_SCREEN_PAN)===De.TOUCH_DOLLY_SCREEN_PAN||(this._state&De.TOUCH_DOLLY_OFFSET)===De.TOUCH_DOLLY_OFFSET||(this._state&De.TOUCH_DOLLY_ROTATE)===De.TOUCH_DOLLY_ROTATE)&&(this._sphericalEnd.radius=this._spherical.radius,this._radiusVelocity.value=0),((this._state&De.ZOOM)===De.ZOOM||(this._state&De.TOUCH_ZOOM)===De.TOUCH_ZOOM||(this._state&De.TOUCH_ZOOM_TRUCK)===De.TOUCH_ZOOM_TRUCK||(this._state&De.TOUCH_ZOOM_SCREEN_PAN)===De.TOUCH_ZOOM_SCREEN_PAN||(this._state&De.TOUCH_ZOOM_OFFSET)===De.TOUCH_ZOOM_OFFSET||(this._state&De.TOUCH_ZOOM_ROTATE)===De.TOUCH_ZOOM_ROTATE)&&(this._zoomEnd=this._zoom,this._zoomVelocity.value=0),((this._state&De.OFFSET)===De.OFFSET||(this._state&De.TOUCH_OFFSET)===De.TOUCH_OFFSET||(this._state&De.TOUCH_DOLLY_OFFSET)===De.TOUCH_DOLLY_OFFSET||(this._state&De.TOUCH_ZOOM_OFFSET)===De.TOUCH_ZOOM_OFFSET)&&(this._focalOffsetEnd.copy(this._focalOffset),this._focalOffsetVelocity.set(0,0,0)),this.dispatchEvent({type:"controlstart"})},v=()=>{if(!this._enabled||!this._dragNeedsUpdate)return;this._dragNeedsUpdate=!1,WS(this._activePointers,js);const b=this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement?this._lockedPointer||this._activePointers[0]:null,M=b?-b.deltaX:r.x-js.x,T=b?-b.deltaY:r.y-js.y;if(r.copy(js),((this._state&De.ROTATE)===De.ROTATE||(this._state&De.TOUCH_ROTATE)===De.TOUCH_ROTATE||(this._state&De.TOUCH_DOLLY_ROTATE)===De.TOUCH_DOLLY_ROTATE||(this._state&De.TOUCH_ZOOM_ROTATE)===De.TOUCH_ZOOM_ROTATE)&&(this._rotateInternal(M,T),this._isUserControllingRotate=!0),(this._state&De.DOLLY)===De.DOLLY||(this._state&De.ZOOM)===De.ZOOM){const L=this.dollyToCursor?(i.x-this._elementRect.x)/this._elementRect.width*2-1:0,D=this.dollyToCursor?(i.y-this._elementRect.y)/this._elementRect.height*-2+1:0,U=this.dollyDragInverted?-1:1;(this._state&De.DOLLY)===De.DOLLY?(this._dollyInternal(U*T*Ly,L,D),this._isUserControllingDolly=!0):(this._zoomInternal(U*T*Ly,L,D),this._isUserControllingZoom=!0)}if((this._state&De.TOUCH_DOLLY)===De.TOUCH_DOLLY||(this._state&De.TOUCH_ZOOM)===De.TOUCH_ZOOM||(this._state&De.TOUCH_DOLLY_TRUCK)===De.TOUCH_DOLLY_TRUCK||(this._state&De.TOUCH_ZOOM_TRUCK)===De.TOUCH_ZOOM_TRUCK||(this._state&De.TOUCH_DOLLY_SCREEN_PAN)===De.TOUCH_DOLLY_SCREEN_PAN||(this._state&De.TOUCH_ZOOM_SCREEN_PAN)===De.TOUCH_ZOOM_SCREEN_PAN||(this._state&De.TOUCH_DOLLY_OFFSET)===De.TOUCH_DOLLY_OFFSET||(this._state&De.TOUCH_ZOOM_OFFSET)===De.TOUCH_ZOOM_OFFSET||(this._state&De.TOUCH_DOLLY_ROTATE)===De.TOUCH_DOLLY_ROTATE||(this._state&De.TOUCH_ZOOM_ROTATE)===De.TOUCH_ZOOM_ROTATE){const L=js.x-this._activePointers[1].clientX,D=js.y-this._activePointers[1].clientY,U=Math.sqrt(L*L+D*D),F=s.y-U;s.set(0,U);const k=this.dollyToCursor?(r.x-this._elementRect.x)/this._elementRect.width*2-1:0,N=this.dollyToCursor?(r.y-this._elementRect.y)/this._elementRect.height*-2+1:0;(this._state&De.TOUCH_DOLLY)===De.TOUCH_DOLLY||(this._state&De.TOUCH_DOLLY_ROTATE)===De.TOUCH_DOLLY_ROTATE||(this._state&De.TOUCH_DOLLY_TRUCK)===De.TOUCH_DOLLY_TRUCK||(this._state&De.TOUCH_DOLLY_SCREEN_PAN)===De.TOUCH_DOLLY_SCREEN_PAN||(this._state&De.TOUCH_DOLLY_OFFSET)===De.TOUCH_DOLLY_OFFSET?(this._dollyInternal(F*Ly,k,N),this._isUserControllingDolly=!0):(this._zoomInternal(F*Ly,k,N),this._isUserControllingZoom=!0)}((this._state&De.TRUCK)===De.TRUCK||(this._state&De.TOUCH_TRUCK)===De.TOUCH_TRUCK||(this._state&De.TOUCH_DOLLY_TRUCK)===De.TOUCH_DOLLY_TRUCK||(this._state&De.TOUCH_ZOOM_TRUCK)===De.TOUCH_ZOOM_TRUCK)&&(this._truckInternal(M,T,!1,!1),this._isUserControllingTruck=!0),((this._state&De.SCREEN_PAN)===De.SCREEN_PAN||(this._state&De.TOUCH_SCREEN_PAN)===De.TOUCH_SCREEN_PAN||(this._state&De.TOUCH_DOLLY_SCREEN_PAN)===De.TOUCH_DOLLY_SCREEN_PAN||(this._state&De.TOUCH_ZOOM_SCREEN_PAN)===De.TOUCH_ZOOM_SCREEN_PAN)&&(this._truckInternal(M,T,!1,!0),this._isUserControllingTruck=!0),((this._state&De.OFFSET)===De.OFFSET||(this._state&De.TOUCH_OFFSET)===De.TOUCH_OFFSET||(this._state&De.TOUCH_DOLLY_OFFSET)===De.TOUCH_DOLLY_OFFSET||(this._state&De.TOUCH_ZOOM_OFFSET)===De.TOUCH_ZOOM_OFFSET)&&(this._truckInternal(M,T,!0,!1),this._isUserControllingOffset=!0),this.dispatchEvent({type:"control"})},x=()=>{WS(this._activePointers,js),r.copy(js),this._dragNeedsUpdate=!1,(this._activePointers.length===0||this._activePointers.length===1&&this._activePointers[0]===this._lockedPointer)&&(this._isDragging=!1),this._activePointers.length===0&&this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",l),this.dispatchEvent({type:"controlend"}))};this.lockPointer=()=>{!this._enabled||!this._domElement||(this.cancel(),this._lockedPointer={pointerId:-1,clientX:0,clientY:0,deltaX:0,deltaY:0,mouseButton:null},this._activePointers.push(this._lockedPointer),this._domElement.ownerDocument.removeEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",l),this._domElement.requestPointerLock(),this._domElement.ownerDocument.addEventListener("pointerlockchange",S),this._domElement.ownerDocument.addEventListener("pointerlockerror",w),this._domElement.ownerDocument.addEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",l),g())},this.unlockPointer=()=>{var _,b,M;this._lockedPointer!==null&&(this._disposePointer(this._lockedPointer),this._lockedPointer=null),(_=this._domElement)===null||_===void 0||_.ownerDocument.exitPointerLock(),(b=this._domElement)===null||b===void 0||b.ownerDocument.removeEventListener("pointerlockchange",S),(M=this._domElement)===null||M===void 0||M.ownerDocument.removeEventListener("pointerlockerror",w),this.cancel()};const S=()=>{this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement||this.unlockPointer()},w=()=>{this.unlockPointer()};this._addAllEventListeners=_=>{this._domElement=_,this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none",this._domElement.addEventListener("pointerdown",o),this._domElement.addEventListener("pointercancel",l),this._domElement.addEventListener("wheel",h,{passive:!1}),this._domElement.addEventListener("contextmenu",f)},this._removeAllEventListeners=()=>{this._domElement&&(this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect="",this._domElement.removeEventListener("pointerdown",o),this._domElement.removeEventListener("pointercancel",l),this._domElement.removeEventListener("wheel",h,{passive:!1}),this._domElement.removeEventListener("contextmenu",f),this._domElement.ownerDocument.removeEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",l),this._domElement.ownerDocument.removeEventListener("pointerlockchange",S),this._domElement.ownerDocument.removeEventListener("pointerlockerror",w))},this.cancel=()=>{this._state!==De.NONE&&(this._state=De.NONE,this._activePointers.length=0,x())},t&&this.connect(t),this.update(0)}get camera(){return this._camera}set camera(e){this._camera=e,this.updateCameraUp(),this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._domElement&&(e?(this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none"):(this.cancel(),this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect=""))}get active(){return!this._hasRested}get currentAction(){return this._state}get distance(){return this._spherical.radius}set distance(e){this._spherical.radius===e&&this._sphericalEnd.radius===e||(this._spherical.radius=e,this._sphericalEnd.radius=e,this._needsUpdate=!0)}get azimuthAngle(){return this._spherical.theta}set azimuthAngle(e){this._spherical.theta===e&&this._sphericalEnd.theta===e||(this._spherical.theta=e,this._sphericalEnd.theta=e,this._needsUpdate=!0)}get polarAngle(){return this._spherical.phi}set polarAngle(e){this._spherical.phi===e&&this._sphericalEnd.phi===e||(this._spherical.phi=e,this._sphericalEnd.phi=e,this._needsUpdate=!0)}get boundaryEnclosesCamera(){return this._boundaryEnclosesCamera}set boundaryEnclosesCamera(e){this._boundaryEnclosesCamera=e,this._needsUpdate=!0}set interactiveArea(e){this._interactiveArea.width=pa(e.width,0,1),this._interactiveArea.height=pa(e.height,0,1),this._interactiveArea.x=pa(e.x,0,1-this._interactiveArea.width),this._interactiveArea.y=pa(e.y,0,1-this._interactiveArea.height)}addEventListener(e,t){super.addEventListener(e,t)}removeEventListener(e,t){super.removeEventListener(e,t)}rotate(e,t,i=!1){return this.rotateTo(this._sphericalEnd.theta+e,this._sphericalEnd.phi+t,i)}rotateAzimuthTo(e,t=!1){return this.rotateTo(e,this._sphericalEnd.phi,t)}rotatePolarTo(e,t=!1){return this.rotateTo(this._sphericalEnd.theta,e,t)}rotateTo(e,t,i=!1){this._isUserControllingRotate=!1;const r=pa(e,this.minAzimuthAngle,this.maxAzimuthAngle),s=pa(t,this.minPolarAngle,this.maxPolarAngle);this._sphericalEnd.theta=r,this._sphericalEnd.phi=s,this._sphericalEnd.makeSafe(),this._needsUpdate=!0,i||(this._spherical.theta=this._sphericalEnd.theta,this._spherical.phi=this._sphericalEnd.phi);const o=!i||Jn(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&Jn(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold);return this._createOnRestPromise(o)}dolly(e,t=!1){return this.dollyTo(this._sphericalEnd.radius-e,t)}dollyTo(e,t=!1){return this._isUserControllingDolly=!1,this._lastDollyDirection=Bf.NONE,this._changedDolly=0,this._dollyToNoClamp(pa(e,this.minDistance,this.maxDistance),t)}_dollyToNoClamp(e,t=!1){const i=this._sphericalEnd.radius;if(this.colliderMeshes.length>=1){const o=this._collisionTest(),a=Jn(o,this._spherical.radius);if(!(i>e)&&a)return Promise.resolve();this._sphericalEnd.radius=Math.min(e,o)}else this._sphericalEnd.radius=e;this._needsUpdate=!0,t||(this._spherical.radius=this._sphericalEnd.radius);const s=!t||Jn(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(s)}dollyInFixed(e,t=!1){this._targetEnd.add(this._getCameraDirection(tg).multiplyScalar(e)),t||this._target.copy(this._targetEnd);const i=!t||Jn(this._target.x,this._targetEnd.x,this.restThreshold)&&Jn(this._target.y,this._targetEnd.y,this.restThreshold)&&Jn(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(i)}zoom(e,t=!1){return this.zoomTo(this._zoomEnd+e,t)}zoomTo(e,t=!1){this._isUserControllingZoom=!1,this._zoomEnd=pa(e,this.minZoom,this.maxZoom),this._needsUpdate=!0,t||(this._zoom=this._zoomEnd);const i=!t||Jn(this._zoom,this._zoomEnd,this.restThreshold);return this._changedZoom=0,this._createOnRestPromise(i)}pan(e,t,i=!1){return console.warn("`pan` has been renamed to `truck`"),this.truck(e,t,i)}truck(e,t,i=!1){this._camera.updateMatrix(),Ga.setFromMatrixColumn(this._camera.matrix,0),ja.setFromMatrixColumn(this._camera.matrix,1),Ga.multiplyScalar(e),ja.multiplyScalar(-t);const r=Mn.copy(Ga).add(ja),s=$n.copy(this._targetEnd).add(r);return this.moveTo(s.x,s.y,s.z,i)}forward(e,t=!1){Mn.setFromMatrixColumn(this._camera.matrix,0),Mn.crossVectors(this._camera.up,Mn),Mn.multiplyScalar(e);const i=$n.copy(this._targetEnd).add(Mn);return this.moveTo(i.x,i.y,i.z,t)}elevate(e,t=!1){return Mn.copy(this._camera.up).multiplyScalar(e),this.moveTo(this._targetEnd.x+Mn.x,this._targetEnd.y+Mn.y,this._targetEnd.z+Mn.z,t)}moveTo(e,t,i,r=!1){this._isUserControllingTruck=!1;const s=Mn.set(e,t,i).sub(this._targetEnd);this._encloseToBoundary(this._targetEnd,s,this.boundaryFriction),this._needsUpdate=!0,r||this._target.copy(this._targetEnd);const o=!r||Jn(this._target.x,this._targetEnd.x,this.restThreshold)&&Jn(this._target.y,this._targetEnd.y,this.restThreshold)&&Jn(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(o)}lookInDirectionOf(e,t,i,r=!1){const a=Mn.set(e,t,i).sub(this._targetEnd).normalize().multiplyScalar(-this._sphericalEnd.radius).add(this._targetEnd);return this.setPosition(a.x,a.y,a.z,r)}fitToBox(e,t,{cover:i=!1,paddingLeft:r=0,paddingRight:s=0,paddingBottom:o=0,paddingTop:a=0}={}){const l=[],u=e.isBox3?Nf.copy(e):Nf.setFromObject(e);u.isEmpty()&&(console.warn("camera-controls: fitTo() cannot be used with an empty box. Aborting"),Promise.resolve());const h=UI(this._sphericalEnd.theta,kI),f=UI(this._sphericalEnd.phi,kI);l.push(this.rotateTo(h,f,t));const g=Mn.setFromSpherical(this._sphericalEnd).normalize(),v=WI.setFromUnitVectors(g,YS),x=Jn(Math.abs(g.y),1);x&&v.multiply(JS.setFromAxisAngle(Oy,h)),v.multiply(this._yAxisUpSpaceInverse);const S=jI.makeEmpty();$n.copy(u.min).applyQuaternion(v),S.expandByPoint($n),$n.copy(u.min).setX(u.max.x).applyQuaternion(v),S.expandByPoint($n),$n.copy(u.min).setY(u.max.y).applyQuaternion(v),S.expandByPoint($n),$n.copy(u.max).setZ(u.min.z).applyQuaternion(v),S.expandByPoint($n),$n.copy(u.min).setZ(u.max.z).applyQuaternion(v),S.expandByPoint($n),$n.copy(u.max).setY(u.min.y).applyQuaternion(v),S.expandByPoint($n),$n.copy(u.max).setX(u.min.x).applyQuaternion(v),S.expandByPoint($n),$n.copy(u.max).applyQuaternion(v),S.expandByPoint($n),S.min.x-=r,S.min.y-=o,S.max.x+=s,S.max.y+=a,v.setFromUnitVectors(YS,g),x&&v.premultiply(JS.invert()),v.premultiply(this._yAxisUpSpace);const w=S.getSize(Mn),_=S.getCenter($n).applyQuaternion(v);if(Ad(this._camera)){const b=this.getDistanceToFitBox(w.x,w.y,w.z,i);l.push(this.moveTo(_.x,_.y,_.z,t)),l.push(this.dollyTo(b,t)),l.push(this.setFocalOffset(0,0,0,t))}else if(Qc(this._camera)){const b=this._camera,M=b.right-b.left,T=b.top-b.bottom,L=i?Math.max(M/w.x,T/w.y):Math.min(M/w.x,T/w.y);l.push(this.moveTo(_.x,_.y,_.z,t)),l.push(this.zoomTo(L,t)),l.push(this.setFocalOffset(0,0,0,t))}return Promise.all(l)}fitToSphere(e,t){const i=[],s="isObject3D"in e?vA.createBoundingSphere(e,KS):KS.copy(e);if(i.push(this.moveTo(s.center.x,s.center.y,s.center.z,t)),Ad(this._camera)){const o=this.getDistanceToFitSphere(s.radius);i.push(this.dollyTo(o,t))}else if(Qc(this._camera)){const o=this._camera.right-this._camera.left,a=this._camera.top-this._camera.bottom,l=2*s.radius,u=Math.min(o/l,a/l);i.push(this.zoomTo(u,t))}return i.push(this.setFocalOffset(0,0,0,t)),Promise.all(i)}setLookAt(e,t,i,r,s,o,a=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=Bf.NONE,this._changedDolly=0;const l=$n.set(r,s,o),u=Mn.set(e,t,i);this._targetEnd.copy(l),this._sphericalEnd.setFromVector3(u.sub(l).applyQuaternion(this._yAxisUpSpace)),this.normalizeRotations(),this._needsUpdate=!0,a||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const h=!a||Jn(this._target.x,this._targetEnd.x,this.restThreshold)&&Jn(this._target.y,this._targetEnd.y,this.restThreshold)&&Jn(this._target.z,this._targetEnd.z,this.restThreshold)&&Jn(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&Jn(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&Jn(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(h)}lerpLookAt(e,t,i,r,s,o,a,l,u,h,f,g,v,x=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=Bf.NONE,this._changedDolly=0;const S=Mn.set(r,s,o),w=$n.set(e,t,i);Mo.setFromVector3(w.sub(S).applyQuaternion(this._yAxisUpSpace));const _=Of.set(h,f,g),b=$n.set(a,l,u);ng.setFromVector3(b.sub(_).applyQuaternion(this._yAxisUpSpace)),this._targetEnd.copy(S.lerp(_,v));const M=ng.theta-Mo.theta,T=ng.phi-Mo.phi,L=ng.radius-Mo.radius;this._sphericalEnd.set(Mo.radius+L*v,Mo.phi+T*v,Mo.theta+M*v),this.normalizeRotations(),this._needsUpdate=!0,x||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const D=!x||Jn(this._target.x,this._targetEnd.x,this.restThreshold)&&Jn(this._target.y,this._targetEnd.y,this.restThreshold)&&Jn(this._target.z,this._targetEnd.z,this.restThreshold)&&Jn(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&Jn(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&Jn(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(D)}setPosition(e,t,i,r=!1){return this.setLookAt(e,t,i,this._targetEnd.x,this._targetEnd.y,this._targetEnd.z,r)}setTarget(e,t,i,r=!1){const s=this.getPosition(Mn),o=this.setLookAt(s.x,s.y,s.z,e,t,i,r);return this._sphericalEnd.phi=pa(this._sphericalEnd.phi,this.minPolarAngle,this.maxPolarAngle),o}setFocalOffset(e,t,i,r=!1){this._isUserControllingOffset=!1,this._focalOffsetEnd.set(e,t,i),this._needsUpdate=!0,r||this._focalOffset.copy(this._focalOffsetEnd);const s=!r||Jn(this._focalOffset.x,this._focalOffsetEnd.x,this.restThreshold)&&Jn(this._focalOffset.y,this._focalOffsetEnd.y,this.restThreshold)&&Jn(this._focalOffset.z,this._focalOffsetEnd.z,this.restThreshold);return this._createOnRestPromise(s)}setOrbitPoint(e,t,i){this._camera.updateMatrixWorld(),Ga.setFromMatrixColumn(this._camera.matrixWorldInverse,0),ja.setFromMatrixColumn(this._camera.matrixWorldInverse,1),bd.setFromMatrixColumn(this._camera.matrixWorldInverse,2);const r=Mn.set(e,t,i),s=r.distanceTo(this._camera.position),o=r.sub(this._camera.position);Ga.multiplyScalar(o.x),ja.multiplyScalar(o.y),bd.multiplyScalar(o.z),Mn.copy(Ga).add(ja).add(bd),Mn.z=Mn.z+s,this.dollyTo(s,!1),this.setFocalOffset(-Mn.x,Mn.y,-Mn.z,!1),this.moveTo(e,t,i,!1)}setBoundary(e){if(!e){this._boundary.min.set(-1/0,-1/0,-1/0),this._boundary.max.set(1/0,1/0,1/0),this._needsUpdate=!0;return}this._boundary.copy(e),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._needsUpdate=!0}setViewport(e,t,i,r){if(e===null){this._viewport=null;return}this._viewport=this._viewport||new un.Vector4,typeof e=="number"?this._viewport.set(e,t,i,r):this._viewport.copy(e)}getDistanceToFitBox(e,t,i,r=!1){if($S(this._camera,"getDistanceToFitBox"))return this._spherical.radius;const s=e/t,o=this._camera.getEffectiveFOV()*Zm,a=this._camera.aspect;return((r?s>a:s<a)?t:e/a)*.5/Math.tan(o*.5)+i*.5}getDistanceToFitSphere(e){if($S(this._camera,"getDistanceToFitSphere"))return this._spherical.radius;const t=this._camera.getEffectiveFOV()*Zm,i=Math.atan(Math.tan(t*.5)*this._camera.aspect)*2,r=1<this._camera.aspect?t:i;return e/Math.sin(r*.5)}getTarget(e,t=!0){return(e&&e.isVector3?e:new un.Vector3).copy(t?this._targetEnd:this._target)}getPosition(e,t=!0){return(e&&e.isVector3?e:new un.Vector3).setFromSpherical(t?this._sphericalEnd:this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(t?this._targetEnd:this._target)}getSpherical(e,t=!0){return(e||new un.Spherical).copy(t?this._sphericalEnd:this._spherical)}getFocalOffset(e,t=!0){return(e&&e.isVector3?e:new un.Vector3).copy(t?this._focalOffsetEnd:this._focalOffset)}normalizeRotations(){this._sphericalEnd.theta=this._sphericalEnd.theta%Lf,this._sphericalEnd.theta<0&&(this._sphericalEnd.theta+=Lf),this._spherical.theta+=Lf*Math.round((this._sphericalEnd.theta-this._spherical.theta)/Lf)}stop(){this._focalOffset.copy(this._focalOffsetEnd),this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd),this._zoom=this._zoomEnd}reset(e=!1){if(!Jn(this._camera.up.x,this._cameraUp0.x)||!Jn(this._camera.up.y,this._cameraUp0.y)||!Jn(this._camera.up.z,this._cameraUp0.z)){this._camera.up.copy(this._cameraUp0);const i=this.getPosition(Mn);this.updateCameraUp(),this.setPosition(i.x,i.y,i.z)}const t=[this.setLookAt(this._position0.x,this._position0.y,this._position0.z,this._target0.x,this._target0.y,this._target0.z,e),this.setFocalOffset(this._focalOffset0.x,this._focalOffset0.y,this._focalOffset0.z,e),this.zoomTo(this._zoom0,e)];return Promise.all(t)}saveState(){this._cameraUp0.copy(this._camera.up),this.getTarget(this._target0),this.getPosition(this._position0),this._zoom0=this._zoom,this._focalOffset0.copy(this._focalOffset)}updateCameraUp(){this._yAxisUpSpace.setFromUnitVectors(this._camera.up,Oy),this._yAxisUpSpaceInverse.copy(this._yAxisUpSpace).invert()}applyCameraUp(){const e=Mn.subVectors(this._target,this._camera.position).normalize(),t=$n.crossVectors(e,this._camera.up);this._camera.up.crossVectors(t,e).normalize(),this._camera.updateMatrixWorld();const i=this.getPosition(Mn);this.updateCameraUp(),this.setPosition(i.x,i.y,i.z)}update(e){const t=this._sphericalEnd.theta-this._spherical.theta,i=this._sphericalEnd.phi-this._spherical.phi,r=this._sphericalEnd.radius-this._spherical.radius,s=VI.subVectors(this._targetEnd,this._target),o=GI.subVectors(this._focalOffsetEnd,this._focalOffset),a=this._zoomEnd-this._zoom;if(mi(t))this._thetaVelocity.value=0,this._spherical.theta=this._sphericalEnd.theta;else{const f=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.theta=By(this._spherical.theta,this._sphericalEnd.theta,this._thetaVelocity,f,1/0,e),this._needsUpdate=!0}if(mi(i))this._phiVelocity.value=0,this._spherical.phi=this._sphericalEnd.phi;else{const f=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.phi=By(this._spherical.phi,this._sphericalEnd.phi,this._phiVelocity,f,1/0,e),this._needsUpdate=!0}if(mi(r))this._radiusVelocity.value=0,this._spherical.radius=this._sphericalEnd.radius;else{const f=this._isUserControllingDolly?this.draggingSmoothTime:this.smoothTime;this._spherical.radius=By(this._spherical.radius,this._sphericalEnd.radius,this._radiusVelocity,f,this.maxSpeed,e),this._needsUpdate=!0}if(mi(s.x)&&mi(s.y)&&mi(s.z))this._targetVelocity.set(0,0,0),this._target.copy(this._targetEnd);else{const f=this._isUserControllingTruck?this.draggingSmoothTime:this.smoothTime;zI(this._target,this._targetEnd,this._targetVelocity,f,this.maxSpeed,e,this._target),this._needsUpdate=!0}if(mi(o.x)&&mi(o.y)&&mi(o.z))this._focalOffsetVelocity.set(0,0,0),this._focalOffset.copy(this._focalOffsetEnd);else{const f=this._isUserControllingOffset?this.draggingSmoothTime:this.smoothTime;zI(this._focalOffset,this._focalOffsetEnd,this._focalOffsetVelocity,f,this.maxSpeed,e,this._focalOffset),this._needsUpdate=!0}if(mi(a))this._zoomVelocity.value=0,this._zoom=this._zoomEnd;else{const f=this._isUserControllingZoom?this.draggingSmoothTime:this.smoothTime;this._zoom=By(this._zoom,this._zoomEnd,this._zoomVelocity,f,1/0,e)}if(this.dollyToCursor){if(Ad(this._camera)&&this._changedDolly!==0){const f=this._spherical.radius-this._lastDistance,g=this._camera,v=this._getCameraDirection(tg),x=Mn.copy(v).cross(g.up).normalize();x.lengthSq()===0&&(x.x=1);const S=$n.crossVectors(x,v),w=this._sphericalEnd.radius*Math.tan(g.getEffectiveFOV()*Zm*.5),b=(this._sphericalEnd.radius-f-this._sphericalEnd.radius)/this._sphericalEnd.radius,M=Of.copy(this._targetEnd).add(x.multiplyScalar(this._dollyControlCoord.x*w*g.aspect)).add(S.multiplyScalar(this._dollyControlCoord.y*w)),T=Mn.copy(this._targetEnd).lerp(M,b),L=this._lastDollyDirection===Bf.IN&&this._spherical.radius<=this.minDistance,D=this._lastDollyDirection===Bf.OUT&&this.maxDistance<=this._spherical.radius;if(this.infinityDolly&&(L||D)){this._sphericalEnd.radius-=f,this._spherical.radius-=f;const F=$n.copy(v).multiplyScalar(-f);T.add(F)}this._boundary.clampPoint(T,T);const U=$n.subVectors(T,this._targetEnd);this._targetEnd.copy(T),this._target.add(U),this._changedDolly-=f,mi(this._changedDolly)&&(this._changedDolly=0)}else if(Qc(this._camera)&&this._changedZoom!==0){const f=this._zoom-this._lastZoom,g=this._camera,v=Mn.set(this._dollyControlCoord.x,this._dollyControlCoord.y,(g.near+g.far)/(g.near-g.far)).unproject(g),x=$n.set(0,0,-1).applyQuaternion(g.quaternion),S=Of.copy(v).add(x.multiplyScalar(-v.dot(g.up))),_=-(this._zoom-f-this._zoom)/this._zoom,b=this._getCameraDirection(tg),M=this._targetEnd.dot(b),T=Mn.copy(this._targetEnd).lerp(S,_),L=T.dot(b),D=b.multiplyScalar(L-M);T.sub(D),this._boundary.clampPoint(T,T);const U=$n.subVectors(T,this._targetEnd);this._targetEnd.copy(T),this._target.add(U),this._changedZoom-=f,mi(this._changedZoom)&&(this._changedZoom=0)}}this._camera.zoom!==this._zoom&&(this._camera.zoom=this._zoom,this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0),this._dragNeedsUpdate=!0;const l=this._collisionTest();this._spherical.radius=Math.min(this._spherical.radius,l),this._spherical.makeSafe(),this._camera.position.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(this._target),this._camera.lookAt(this._target),(!mi(this._focalOffset.x)||!mi(this._focalOffset.y)||!mi(this._focalOffset.z))&&(Ga.setFromMatrixColumn(this._camera.matrix,0),ja.setFromMatrixColumn(this._camera.matrix,1),bd.setFromMatrixColumn(this._camera.matrix,2),Ga.multiplyScalar(this._focalOffset.x),ja.multiplyScalar(-this._focalOffset.y),bd.multiplyScalar(this._focalOffset.z),Mn.copy(Ga).add(ja).add(bd),this._camera.position.add(Mn),this._camera.updateMatrixWorld()),this._boundaryEnclosesCamera&&this._encloseToBoundary(this._camera.position.copy(this._target),Mn.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse),1);const h=this._needsUpdate;return h&&!this._updatedLastTime?(this._hasRested=!1,this.dispatchEvent({type:"wake"}),this.dispatchEvent({type:"update"})):h?(this.dispatchEvent({type:"update"}),mi(t,this.restThreshold)&&mi(i,this.restThreshold)&&mi(r,this.restThreshold)&&mi(s.x,this.restThreshold)&&mi(s.y,this.restThreshold)&&mi(s.z,this.restThreshold)&&mi(o.x,this.restThreshold)&&mi(o.y,this.restThreshold)&&mi(o.z,this.restThreshold)&&mi(a,this.restThreshold)&&!this._hasRested&&(this._hasRested=!0,this.dispatchEvent({type:"rest"}))):!h&&this._updatedLastTime&&this.dispatchEvent({type:"sleep"}),this._lastDistance=this._spherical.radius,this._lastZoom=this._zoom,this._updatedLastTime=h,this._needsUpdate=!1,h}toJSON(){return JSON.stringify({enabled:this._enabled,minDistance:this.minDistance,maxDistance:Qm(this.maxDistance),minZoom:this.minZoom,maxZoom:Qm(this.maxZoom),minPolarAngle:this.minPolarAngle,maxPolarAngle:Qm(this.maxPolarAngle),minAzimuthAngle:Qm(this.minAzimuthAngle),maxAzimuthAngle:Qm(this.maxAzimuthAngle),smoothTime:this.smoothTime,draggingSmoothTime:this.draggingSmoothTime,dollySpeed:this.dollySpeed,truckSpeed:this.truckSpeed,dollyToCursor:this.dollyToCursor,target:this._targetEnd.toArray(),position:Mn.setFromSpherical(this._sphericalEnd).add(this._targetEnd).toArray(),zoom:this._zoomEnd,focalOffset:this._focalOffsetEnd.toArray(),target0:this._target0.toArray(),position0:this._position0.toArray(),zoom0:this._zoom0,focalOffset0:this._focalOffset0.toArray()})}fromJSON(e,t=!1){const i=JSON.parse(e);this.enabled=i.enabled,this.minDistance=i.minDistance,this.maxDistance=eg(i.maxDistance),this.minZoom=i.minZoom,this.maxZoom=eg(i.maxZoom),this.minPolarAngle=i.minPolarAngle,this.maxPolarAngle=eg(i.maxPolarAngle),this.minAzimuthAngle=eg(i.minAzimuthAngle),this.maxAzimuthAngle=eg(i.maxAzimuthAngle),this.smoothTime=i.smoothTime,this.draggingSmoothTime=i.draggingSmoothTime,this.dollySpeed=i.dollySpeed,this.truckSpeed=i.truckSpeed,this.dollyToCursor=i.dollyToCursor,this._target0.fromArray(i.target0),this._position0.fromArray(i.position0),this._zoom0=i.zoom0,this._focalOffset0.fromArray(i.focalOffset0),this.moveTo(i.target[0],i.target[1],i.target[2],t),Mo.setFromVector3(Mn.fromArray(i.position).sub(this._targetEnd).applyQuaternion(this._yAxisUpSpace)),this.rotateTo(Mo.theta,Mo.phi,t),this.dollyTo(Mo.radius,t),this.zoomTo(i.zoom,t),this.setFocalOffset(i.focalOffset[0],i.focalOffset[1],i.focalOffset[2],t),this._needsUpdate=!0}connect(e){if(this._domElement){console.warn("camera-controls is already connected.");return}e.setAttribute("data-camera-controls-version",ore),this._addAllEventListeners(e),this._getClientRect(this._elementRect)}disconnect(){this.cancel(),this._removeAllEventListeners(),this._domElement&&(this._domElement.removeAttribute("data-camera-controls-version"),this._domElement=void 0)}dispose(){this.removeAllEventListeners(),this.disconnect()}_getTargetDirection(e){return e.setFromSpherical(this._spherical).divideScalar(this._spherical.radius).applyQuaternion(this._yAxisUpSpaceInverse)}_getCameraDirection(e){return this._getTargetDirection(e).negate()}_findPointerById(e){return this._activePointers.find(t=>t.pointerId===e)}_findPointerByMouseButton(e){return this._activePointers.find(t=>t.mouseButton===e)}_disposePointer(e){this._activePointers.splice(this._activePointers.indexOf(e),1)}_encloseToBoundary(e,t,i){const r=t.lengthSq();if(r===0)return e;const s=$n.copy(t).add(e),a=this._boundary.clampPoint(s,Of).sub(s),l=a.lengthSq();if(l===0)return e.add(t);if(l===r)return e;if(i===0)return e.add(t).add(a);{const u=1+i*l/t.dot(a);return e.add($n.copy(t).multiplyScalar(u)).add(a.multiplyScalar(1-i))}}_updateNearPlaneCorners(){if(Ad(this._camera)){const e=this._camera,t=e.near,i=e.getEffectiveFOV()*Zm,r=Math.tan(i*.5)*t,s=r*e.aspect;this._nearPlaneCorners[0].set(-s,-r,0),this._nearPlaneCorners[1].set(s,-r,0),this._nearPlaneCorners[2].set(s,r,0),this._nearPlaneCorners[3].set(-s,r,0)}else if(Qc(this._camera)){const e=this._camera,t=1/e.zoom,i=e.left*t,r=e.right*t,s=e.top*t,o=e.bottom*t;this._nearPlaneCorners[0].set(i,s,0),this._nearPlaneCorners[1].set(r,s,0),this._nearPlaneCorners[2].set(r,o,0),this._nearPlaneCorners[3].set(i,o,0)}}_collisionTest(){let e=1/0;if(!(this.colliderMeshes.length>=1)||$S(this._camera,"_collisionTest"))return e;const i=this._getTargetDirection(tg);qS.lookAt(HI,i,this._camera.up);for(let r=0;r<4;r++){const s=$n.copy(this._nearPlaneCorners[r]);s.applyMatrix4(qS);const o=Of.addVectors(this._target,s);Ny.set(o,i),Ny.far=this._spherical.radius+1;const a=Ny.intersectObjects(this.colliderMeshes);a.length!==0&&a[0].distance<e&&(e=a[0].distance)}return e}_getClientRect(e){if(!this._domElement)return;const t=this._domElement.getBoundingClientRect();return e.x=t.left,e.y=t.top,this._viewport?(e.x+=this._viewport.x,e.y+=t.height-this._viewport.w-this._viewport.y,e.width=this._viewport.z,e.height=this._viewport.w):(e.width=t.width,e.height=t.height),e}_createOnRestPromise(e){return e?Promise.resolve():(this._hasRested=!1,this.dispatchEvent({type:"transitionstart"}),new Promise(t=>{const i=()=>{this.removeEventListener("rest",i),t()};this.addEventListener("rest",i)}))}_addAllEventListeners(e){}_removeAllEventListeners(){}get dampingFactor(){return console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead."),0}set dampingFactor(e){console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead.")}get draggingDampingFactor(){return console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead."),0}set draggingDampingFactor(e){console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead.")}static createBoundingSphere(e,t=new un.Sphere){const i=t,r=i.center;Nf.makeEmpty(),e.traverseVisible(o=>{o.isMesh&&Nf.expandByObject(o)}),Nf.getCenter(r);let s=0;return e.traverseVisible(o=>{if(!o.isMesh)return;const a=o;if(!a.geometry)return;const l=a.geometry.clone();l.applyMatrix4(a.matrixWorld);const h=l.attributes.position;for(let f=0,g=h.count;f<g;f++)Mn.fromBufferAttribute(h,f),s=Math.max(s,r.distanceToSquared(Mn))}),i.radius=Math.sqrt(s),i}};const lre=I.forwardRef((n,e)=>{I.useMemo(()=>{const L={Box3:Ir,MathUtils:{clamp:Xd.clamp},Matrix4:Jt,Quaternion:xr,Raycaster:e1,Sphere:_r,Spherical:$x,Vector2:Xe,Vector3:J,Vector4:Un};ZS.install({THREE:L}),n1({CameraControlsImpl:ZS})},[]);const{camera:t,domElement:i,makeDefault:r,onStart:s,onEnd:o,onChange:a,regress:l,...u}=n,h=Vn(L=>L.camera),f=Vn(L=>L.gl),g=Vn(L=>L.invalidate),v=Vn(L=>L.events),x=Vn(L=>L.setEvents),S=Vn(L=>L.set),w=Vn(L=>L.get),_=Vn(L=>L.performance),b=t||h,M=i||v.connected||f.domElement,T=I.useMemo(()=>new ZS(b),[b]);return Rp((L,D)=>{T.enabled&&T.update(D)},-1),I.useEffect(()=>(T.connect(M),()=>void T.disconnect()),[M,T]),I.useEffect(()=>{const L=F=>{g(),l&&_.regress(),a&&a(F)},D=F=>{s&&s(F)},U=F=>{o&&o(F)};return T.addEventListener("update",L),T.addEventListener("controlstart",D),T.addEventListener("controlend",U),T.addEventListener("control",L),T.addEventListener("transitionstart",L),T.addEventListener("wake",L),()=>{T.removeEventListener("update",L),T.removeEventListener("controlstart",D),T.removeEventListener("controlend",U),T.removeEventListener("control",L),T.removeEventListener("transitionstart",L),T.removeEventListener("wake",L)}},[T,s,o,g,x,l,a]),I.useEffect(()=>{if(r){const L=w().controls;return S({controls:T}),()=>S({controls:L})}},[r,T]),I.createElement("primitive",ui({ref:e,object:T},u))}),cre=3e3,ure=3001,dre=cF({},"void main() { }","void main() { gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0); discard;  }");function hre(n,e){const t=n+"Geometry";return I.forwardRef(({args:i,children:r,...s},o)=>{const a=I.useRef(null);return I.useImperativeHandle(o,()=>a.current),I.useLayoutEffect(()=>void e?.(a.current)),I.createElement("mesh",ui({ref:a},s),I.createElement(t,{attach:"geometry",args:i}),r)})}const fre=hre("sphere"),mF=(n,e,t)=>{let i;switch(n){case Ts:i=new Uint8ClampedArray(e*t*4);break;case cr:i=new Uint16Array(e*t*4);break;case Za:i=new Uint32Array(e*t*4);break;case b_:i=new Int8Array(e*t*4);break;case M_:i=new Int16Array(e*t*4);break;case o0:i=new Int32Array(e*t*4);break;case Ci:i=new Float32Array(e*t*4);break;default:throw new Error("Unsupported data type")}return i};let Fy;const pre=(n,e,t,i)=>{if(Fy!==void 0)return Fy;const r=new Rs(1,1,i);e.setRenderTarget(r);const s=new Ti(new Su,new Ks({color:16777215}));e.render(s,t),e.setRenderTarget(null);const o=mF(n,r.width,r.height);return e.readRenderTargetPixels(r,0,0,r.width,r.height,o),r.dispose(),s.geometry.dispose(),s.material.dispose(),Fy=o[0]!==0,Fy};class AM{constructor(e){var t,i,r,s,o,a,l,u,h,f,g,v,x,S,w,_;this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(M){throw this._renderer.setRenderTarget(null),M}this._renderer.setRenderTarget(null)},this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const b={format:Qi,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((t=e.renderTargetOptions)===null||t===void 0?void 0:t.anisotropy)!==void 0?(i=e.renderTargetOptions)===null||i===void 0?void 0:i.anisotropy:1,generateMipmaps:((r=e.renderTargetOptions)===null||r===void 0?void 0:r.generateMipmaps)!==void 0?(s=e.renderTargetOptions)===null||s===void 0?void 0:s.generateMipmaps:!1,magFilter:((o=e.renderTargetOptions)===null||o===void 0?void 0:o.magFilter)!==void 0?(a=e.renderTargetOptions)===null||a===void 0?void 0:a.magFilter:Gn,minFilter:((l=e.renderTargetOptions)===null||l===void 0?void 0:l.minFilter)!==void 0?(u=e.renderTargetOptions)===null||u===void 0?void 0:u.minFilter:Gn,samples:((h=e.renderTargetOptions)===null||h===void 0?void 0:h.samples)!==void 0?(f=e.renderTargetOptions)===null||f===void 0?void 0:f.samples:void 0,wrapS:((g=e.renderTargetOptions)===null||g===void 0?void 0:g.wrapS)!==void 0?(v=e.renderTargetOptions)===null||v===void 0?void 0:v.wrapS:Zi,wrapT:((x=e.renderTargetOptions)===null||x===void 0?void 0:x.wrapT)!==void 0?(S=e.renderTargetOptions)===null||S===void 0?void 0:S.wrapT:Zi};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=AM.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new bp,this._camera=new Ka,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!pre(this._type,this._renderer,this._camera,b)){let M;switch(this._type){case cr:M=this._renderer.extensions.has("EXT_color_buffer_float")?Ci:void 0;break}M!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${Ci}`),this._type=M):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new Ti(new Su,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new Rs(this.width,this.height,b),this._renderTarget.texture.mapping=((w=e.renderTargetOptions)===null||w===void 0?void 0:w.mapping)!==void 0?(_=e.renderTargetOptions)===null||_===void 0?void 0:_.mapping:uu}static instantiateRenderer(){const e=new Zb;return e.setSize(128,128),e}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=mF(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const t=new xa(this.toArray(),this.width,this.height,Qi,this._type,e?.mapping||uu,e?.wrapS||Zi,e?.wrapT||Zi,e?.magFilter||Gn,e?.minFilter||Gn,e?.anisotropy||1,Qa);return t.generateMipmaps=e?.generateMipmaps!==void 0?e?.generateMipmaps:!1,t}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof Ps&&Object.values(this.material.uniforms).forEach(t=>{t.value instanceof qn&&t.value.dispose()}),Object.values(this.material).forEach(t=>{t instanceof qn&&t.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}const mre=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,gre=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class vre extends Ps{constructor({gamma:e,offsetHdr:t,offsetSdr:i,gainMapMin:r,gainMapMax:s,maxDisplayBoost:o,hdrCapacityMin:a,hdrCapacityMax:l,sdr:u,gainMap:h}){super({name:"GainMapDecoderMaterial",vertexShader:mre,fragmentShader:gre,uniforms:{sdr:{value:u},gainMap:{value:h},gamma:{value:new J(1/e[0],1/e[1],1/e[2])},offsetHdr:{value:new J().fromArray(t)},offsetSdr:{value:new J().fromArray(i)},gainMapMin:{value:new J().fromArray(r)},gainMapMax:{value:new J().fromArray(s)},weightFactor:{value:(Math.log2(o)-a)/(l-a)}},blending:Xa,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=o,this._hdrCapacityMin=a,this._hdrCapacityMax=l,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(e){this.uniforms.sdr.value=e}get gainMap(){return this.uniforms.gainMap.value}set gainMap(e){this.uniforms.gainMap.value=e}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(e){this.uniforms.offsetHdr.value.fromArray(e)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(e){this.uniforms.offsetSdr.value.fromArray(e)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(e){this.uniforms.gainMapMin.value.fromArray(e)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(e){this.uniforms.gainMapMax.value.fromArray(e)}get gamma(){const e=this.uniforms.gamma.value;return[1/e.x,1/e.y,1/e.z]}set gamma(e){const t=this.uniforms.gamma.value;t.x=1/e[0],t.y=1/e[1],t.z=1/e[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(e){this._hdrCapacityMin=e,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(e){this._hdrCapacityMax=e,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(e){this._maxDisplayBoost=Math.max(1,Math.min(65504,e)),this.calculateWeight()}calculateWeight(){const e=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,e))}}class gF extends Error{}class vF extends Error{}const ig=(n,e,t)=>{const i=new RegExp(`${e}="([^"]*)"`,"i").exec(n);if(i)return i[1];const r=new RegExp(`<${e}[^>]*>([\\s\\S]*?)</${e}>`,"i").exec(n);if(r){const s=r[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return s&&s.length===3?s.map(o=>o.replace(/<\/?rdf:li>/g,"")):r[1].trim()}if(t!==void 0)return t;throw new Error(`Can't find ${e} in gainmap metadata`)},yre=n=>{let e;typeof TextDecoder<"u"?e=new TextDecoder().decode(n):e=n.toString();let t=e.indexOf("<x:xmpmeta");for(;t!==-1;){const i=e.indexOf("x:xmpmeta>",t),r=e.slice(t,i+10);try{const s=ig(r,"hdrgm:GainMapMin","0"),o=ig(r,"hdrgm:GainMapMax"),a=ig(r,"hdrgm:Gamma","1"),l=ig(r,"hdrgm:OffsetSDR","0.015625"),u=ig(r,"hdrgm:OffsetHDR","0.015625"),h=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(r),f=h?h[1]:"0",g=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(r);if(!g)throw new Error("Incomplete gainmap metadata");const v=g[1];return{gainMapMin:Array.isArray(s)?s.map(x=>parseFloat(x)):[parseFloat(s),parseFloat(s),parseFloat(s)],gainMapMax:Array.isArray(o)?o.map(x=>parseFloat(x)):[parseFloat(o),parseFloat(o),parseFloat(o)],gamma:Array.isArray(a)?a.map(x=>parseFloat(x)):[parseFloat(a),parseFloat(a),parseFloat(a)],offsetSdr:Array.isArray(l)?l.map(x=>parseFloat(x)):[parseFloat(l),parseFloat(l),parseFloat(l)],offsetHdr:Array.isArray(u)?u.map(x=>parseFloat(x)):[parseFloat(u),parseFloat(u),parseFloat(u)],hdrCapacityMin:parseFloat(f),hdrCapacityMax:parseFloat(v)}}catch{}t=e.indexOf("<x:xmpmeta",i)}};class xre{constructor(e){this.options={debug:e&&e.debug!==void 0?e.debug:!1,extractFII:e&&e.extractFII!==void 0?e.extractFII:!0,extractNonFII:e&&e.extractNonFII!==void 0?e.extractNonFII:!0}}extract(e){return new Promise((t,i)=>{const r=this.options.debug,s=new DataView(e.buffer);if(s.getUint16(0)!==65496){i(new Error("Not a valid jpeg"));return}const o=s.byteLength;let a=2,l=0,u;for(;a<o;){if(++l>250){i(new Error(`Found no marker after ${l} loops `));return}if(s.getUint8(a)!==255){i(new Error(`Not a valid marker at offset 0x${a.toString(16)}, found: 0x${s.getUint8(a).toString(16)}`));return}if(u=s.getUint8(a+1),r&&console.log(`Marker: ${u.toString(16)}`),u===226){r&&console.log("Found APP2 marker (0xffe2)");const h=a+4;if(s.getUint32(h)===1297106432){const f=h+4;let g;if(s.getUint16(f)===18761)g=!1;else if(s.getUint16(f)===19789)g=!0;else{i(new Error("No valid endianness marker found in TIFF header"));return}if(s.getUint16(f+2,!g)!==42){i(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const v=s.getUint32(f+4,!g);if(v<8){i(new Error("Not valid TIFF data! (First offset less than 8)"));return}const x=f+v,S=s.getUint16(x,!g),w=x+2;let _=0;for(let L=w;L<w+12*S;L+=12)s.getUint16(L,!g)===45057&&(_=s.getUint32(L+8,!g));const M=x+2+S*12+4,T=[];for(let L=M;L<M+_*16;L+=16){const D={MPType:s.getUint32(L,!g),size:s.getUint32(L+4,!g),dataOffset:s.getUint32(L+8,!g),dependantImages:s.getUint32(L+12,!g),start:-1,end:-1,isFII:!1};D.dataOffset?(D.start=f+D.dataOffset,D.isFII=!1):(D.start=0,D.isFII=!0),D.end=D.start+D.size,T.push(D)}if(this.options.extractNonFII&&T.length){const L=new Blob([s]),D=[];for(const U of T){if(U.isFII&&!this.options.extractFII)continue;const F=L.slice(U.start,U.end+1,"image/jpeg");D.push(F)}t(D)}}}a+=2+s.getUint16(a+2)}})}}const _re=async n=>{const e=yre(n);if(!e)throw new vF("Gain map XMP metadata not found");const i=await new xre({extractFII:!0,extractNonFII:!0}).extract(n);if(i.length!==2)throw new gF("Gain map recovery image not found");return{sdr:new Uint8Array(await i[0].arrayBuffer()),gainMap:new Uint8Array(await i[1].arrayBuffer()),metadata:e}},$I=n=>new Promise((e,t)=>{const i=document.createElement("img");i.onload=()=>{e(i)},i.onerror=r=>{t(r)},i.src=URL.createObjectURL(n)});class yF extends jr{constructor(e,t){super(t),e&&(this._renderer=e),this._internalLoadingManager=new Z_}setRenderer(e){return this._renderer=e,this}setRenderTargetOptions(e){return this._renderTargetOptions=e,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: An existing WebGL Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const e=new vre({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new qn,sdr:new qn});return new AM({width:16,height:16,type:cr,colorSpace:Qa,material:e,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async render(e,t,i,r){const s=r?new Blob([r],{type:"image/jpeg"}):void 0,o=new Blob([i],{type:"image/jpeg"});let a,l,u=!1;if(typeof createImageBitmap>"u"){const g=await Promise.all([s?$I(s):Promise.resolve(void 0),$I(o)]);l=g[0],a=g[1],u=!0}else{const g=await Promise.all([s?createImageBitmap(s,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(o,{imageOrientation:"flipY"})]);l=g[0],a=g[1]}const h=new qn(l||new ImageData(2,2),uu,Zi,Zi,Gn,PE,Qi,Ts,1,Qa);h.flipY=u,h.needsUpdate=!0;const f=new qn(a,uu,Zi,Zi,Gn,PE,Qi,Ts,1,As);f.flipY=u,f.needsUpdate=!0,e.width=a.width,e.height=a.height,e.material.gainMap=h,e.material.sdr=f,e.material.gainMapMin=t.gainMapMin,e.material.gainMapMax=t.gainMapMax,e.material.offsetHdr=t.offsetHdr,e.material.offsetSdr=t.offsetSdr,e.material.gamma=t.gamma,e.material.hdrCapacityMin=t.hdrCapacityMin,e.material.hdrCapacityMax=t.hdrCapacityMax,e.material.maxDisplayBoost=Math.pow(2,t.hdrCapacityMax),e.material.needsUpdate=!0,e.render()}}class wre extends yF{load([e,t,i],r,s,o){const a=this.prepareQuadRenderer();let l,u,h;const f=async()=>{if(l&&u&&h){try{await this.render(a,h,l,u)}catch(k){this.manager.itemError(e),this.manager.itemError(t),this.manager.itemError(i),typeof o=="function"&&o(k),a.disposeOnDemandRenderer();return}typeof r=="function"&&r(a),this.manager.itemEnd(e),this.manager.itemEnd(t),this.manager.itemEnd(i),a.disposeOnDemandRenderer()}};let g=!0,v=0,x=0,S=!0,w=0,_=0,b=!0,M=0,T=0;const L=()=>{if(typeof s=="function"){const k=v+w+M,N=x+_+T,V=g&&S&&b;s(new ProgressEvent("progress",{lengthComputable:V,loaded:N,total:k}))}};this.manager.itemStart(e),this.manager.itemStart(t),this.manager.itemStart(i);const D=new Gr(this._internalLoadingManager);D.setResponseType("arraybuffer"),D.setRequestHeader(this.requestHeader),D.setPath(this.path),D.setWithCredentials(this.withCredentials),D.load(e,async k=>{if(typeof k=="string")throw new Error("Invalid sdr buffer");l=k,await f()},k=>{g=k.lengthComputable,x=k.loaded,v=k.total,L()},k=>{this.manager.itemError(e),typeof o=="function"&&o(k)});const U=new Gr(this._internalLoadingManager);U.setResponseType("arraybuffer"),U.setRequestHeader(this.requestHeader),U.setPath(this.path),U.setWithCredentials(this.withCredentials),U.load(t,async k=>{if(typeof k=="string")throw new Error("Invalid gainmap buffer");u=k,await f()},k=>{S=k.lengthComputable,_=k.loaded,w=k.total,L()},k=>{this.manager.itemError(t),typeof o=="function"&&o(k)});const F=new Gr(this._internalLoadingManager);return F.setRequestHeader(this.requestHeader),F.setPath(this.path),F.setWithCredentials(this.withCredentials),F.load(i,async k=>{if(typeof k!="string")throw new Error("Invalid metadata string");h=JSON.parse(k),await f()},k=>{b=k.lengthComputable,T=k.loaded,M=k.total,L()},k=>{this.manager.itemError(i),typeof o=="function"&&o(k)}),a}}class Sre extends yF{load(e,t,i,r){const s=this.prepareQuadRenderer(),o=new Gr(this._internalLoadingManager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(this.withCredentials),this.manager.itemStart(e),o.load(e,async a=>{if(typeof a=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const l=new Uint8Array(a);let u,h,f;try{const g=await _re(l);u=g.sdr,h=g.gainMap,f=g.metadata}catch(g){if(g instanceof vF||g instanceof gF)console.warn(`Failure to reconstruct an HDR image from ${e}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),f={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},u=l;else throw g}try{await this.render(s,f,u,h)}catch(g){this.manager.itemError(e),typeof r=="function"&&r(g),s.disposeOnDemandRenderer();return}typeof t=="function"&&t(s),this.manager.itemEnd(e),s.disposeOnDemandRenderer()},i,a=>{this.manager.itemError(e),typeof r=="function"&&r(a)}),s}}const Zg={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},xF="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",ep=n=>Array.isArray(n),bM=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function d1({files:n=bM,path:e="",preset:t=void 0,encoding:i=void 0,extensions:r}={}){let s=null,o=!1;t&&(MM(t),n=Zg[t],e=xF),o=ep(n);const{extension:a,isCubemap:l}=CM(n);if(s=TM(a),!s)throw new Error("useEnvironment: Unrecognized file extension: "+n);const u=Vn(v=>v.gl);I.useLayoutEffect(()=>{if(a!=="webp"&&a!=="jpg"&&a!=="jpeg")return;function v(){oc.clear(s,o?[n]:n)}u.domElement.addEventListener("webglcontextlost",v,{once:!0})},[n,u.domElement]);const h=oc(s,o?[n]:n,v=>{(a==="webp"||a==="jpg"||a==="jpeg")&&v.setRenderer(u),v.setPath==null||v.setPath(e),r&&r(v)});let f=o?h[0]:h;if(a==="jpg"||a==="jpeg"||a==="webp"){var g;f=(g=f.renderTarget)==null?void 0:g.texture}return f.mapping=l?qa:rp,"colorSpace"in f?f.colorSpace=i??l?"srgb":"srgb-linear":f.encoding=i??l?ure:cre,f}const Ere={files:bM,path:"",preset:void 0,extensions:void 0};d1.preload=n=>{const e={...Ere,...n};let{files:t,path:i=""}=e;const{preset:r,extensions:s}=e;r&&(MM(r),t=Zg[r],i=xF);const{extension:o}=CM(t);if(o==="webp"||o==="jpg"||o==="jpeg")throw new Error("useEnvironment: Preloading gainmaps is not supported");const a=TM(o);if(!a)throw new Error("useEnvironment: Unrecognized file extension: "+t);oc.preload(a,ep(t)?[t]:t,l=>{l.setPath==null||l.setPath(i),s&&s(l)})};const Are={files:bM,preset:void 0};d1.clear=n=>{const e={...Are,...n};let{files:t}=e;const{preset:i}=e;i&&(MM(i),t=Zg[i]);const{extension:r}=CM(t),s=TM(r);if(!s)throw new Error("useEnvironment: Unrecognized file extension: "+t);oc.clear(s,ep(t)?[t]:t)};function MM(n){if(!(n in Zg))throw new Error("Preset must be one of: "+Object.keys(Zg).join(", "))}function CM(n){var e;const t=ep(n)&&n.length===6,i=ep(n)&&n.length===3&&n.some(o=>o.endsWith("json")),r=ep(n)?n[0]:n;return{extension:t?"cube":i?"webp":r.startsWith("data:application/exr")?"exr":r.startsWith("data:application/hdr")?"hdr":r.startsWith("data:image/jpeg")?"jpg":(e=r.split(".").pop())==null||(e=e.split("?"))==null||(e=e.shift())==null?void 0:e.toLowerCase(),isCubemap:t,isGainmap:i}}function TM(n){return n==="cube"?RL:n==="hdr"?qie:n==="exr"?Zie:n==="jpg"||n==="jpeg"?Sre:n==="webp"?wre:null}const bre=n=>n.current&&n.current.isScene,Mre=n=>bre(n)?n.current:n;function RM(n,e,t,i,r={}){var s,o,a,l;r={backgroundBlurriness:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...r};const u=Mre(e||t),h=u.background,f=u.environment,g={backgroundBlurriness:u.backgroundBlurriness,backgroundIntensity:u.backgroundIntensity,backgroundRotation:(s=(o=u.backgroundRotation)==null||o.clone==null?void 0:o.clone())!==null&&s!==void 0?s:[0,0,0],environmentIntensity:u.environmentIntensity,environmentRotation:(a=(l=u.environmentRotation)==null||l.clone==null?void 0:l.clone())!==null&&a!==void 0?a:[0,0,0]};return n!=="only"&&(u.environment=i),n&&(u.background=i),Wl(u,r),()=>{n!=="only"&&(u.environment=f),n&&(u.background=h),Wl(u,g)}}function PM({scene:n,background:e=!1,map:t,...i}){const r=Vn(s=>s.scene);return I.useLayoutEffect(()=>{if(t)return RM(e,n,r,t,i)}),null}function _F({background:n=!1,scene:e,blur:t,backgroundBlurriness:i,backgroundIntensity:r,backgroundRotation:s,environmentIntensity:o,environmentRotation:a,...l}){const u=d1(l),h=Vn(f=>f.scene);return I.useLayoutEffect(()=>RM(n,e,h,u,{backgroundBlurriness:t??i,backgroundIntensity:r,backgroundRotation:s,environmentIntensity:o,environmentRotation:a})),I.useEffect(()=>()=>{u.dispose()},[u]),null}function Cre({children:n,near:e=.1,far:t=1e3,resolution:i=256,frames:r=1,map:s,background:o=!1,blur:a,backgroundBlurriness:l,backgroundIntensity:u,backgroundRotation:h,environmentIntensity:f,environmentRotation:g,scene:v,files:x,path:S,preset:w=void 0,extensions:_}){const b=Vn(F=>F.gl),M=Vn(F=>F.scene),T=I.useRef(null),[L]=I.useState(()=>new bp),D=I.useMemo(()=>{const F=new Sb(i);return F.texture.type=cr,F},[i]);I.useEffect(()=>()=>{D.dispose()},[D]),I.useLayoutEffect(()=>{if(r===1){const F=b.autoClear;b.autoClear=!0,T.current.update(b,L),b.autoClear=F}return RM(o,v,M,D.texture,{backgroundBlurriness:a??l,backgroundIntensity:u,backgroundRotation:h,environmentIntensity:f,environmentRotation:g})},[n,L,D.texture,v,M,o,r,b]);let U=1;return Rp(()=>{if(r===1/0||U<r){const F=b.autoClear;b.autoClear=!0,T.current.update(b,L),b.autoClear=F,U++}}),I.createElement(I.Fragment,null,hO(I.createElement(I.Fragment,null,n,I.createElement("cubeCamera",{ref:T,args:[e,t,D]}),x||w?I.createElement(_F,{background:!0,files:x,preset:w,path:S,extensions:_}):s?I.createElement(PM,{background:!0,map:s,extensions:_}):null),L))}function Tre(n){var e,t,i,r;const s=d1(n),o=n.map||s;I.useMemo(()=>n1({GroundProjectedEnvImpl:aie}),[]),I.useEffect(()=>()=>{s.dispose()},[s]);const a=I.useMemo(()=>[o],[o]),l=(e=n.ground)==null?void 0:e.height,u=(t=n.ground)==null?void 0:t.radius,h=(i=(r=n.ground)==null?void 0:r.scale)!==null&&i!==void 0?i:1e3;return I.createElement(I.Fragment,null,I.createElement(PM,ui({},n,{map:o})),I.createElement("groundProjectedEnvImpl",{args:a,scale:h,height:l,radius:u}))}function wF(n){return n.ground?I.createElement(Tre,n):n.map?I.createElement(PM,n):n.children?I.createElement(Cre,n):I.createElement(_F,n)}function Rre(n){return n.isLight}function Pre(n){return!!n.geometry}const SF=I.createContext(null),Ire=cF({color:new bt,blend:2,alphaTest:.75,opacity:0,map:null},`varying vec2 vUv;
   void main() {
     gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.);
     vUv = uv;
   }`,`varying vec2 vUv;
   uniform sampler2D map;
   uniform vec3 color;
   uniform float opacity;
   uniform float alphaTest;
   uniform float blend;
   void main() {
     vec4 sampledDiffuseColor = texture2D(map, vUv);
     gl_FragColor = vec4(color * sampledDiffuseColor.r * blend, max(0.0, (1.0 - (sampledDiffuseColor.r + sampledDiffuseColor.g + sampledDiffuseColor.b) / alphaTest)) * opacity);
     #include <tonemapping_fragment>
     #include <${uF>=154?"colorspace_fragment":"encodings_fragment"}>
   }`),Dre=I.forwardRef(({children:n,temporal:e,frames:t=40,limit:i=1/0,blend:r=20,scale:s=10,opacity:o=1,alphaTest:a=.75,color:l="black",colorBlend:u=2,resolution:h=1024,toneMapped:f=!0,...g},v)=>{n1({SoftShadowMaterial:Ire});const x=Vn(D=>D.gl),S=Vn(D=>D.scene),w=Vn(D=>D.camera),_=Vn(D=>D.invalidate),b=I.useRef(null),M=I.useRef(null),[T]=I.useState(()=>new Bre(x,S,h));I.useLayoutEffect(()=>{T.configure(b.current)},[]);const L=I.useMemo(()=>({lights:new Map,temporal:!!e,frames:Math.max(2,t),blend:Math.max(2,t===1/0?r:t),count:0,getMesh:()=>b.current,reset:()=>{T.clear();const D=b.current.material;D.opacity=0,D.alphaTest=0,L.count=0},update:(D=1)=>{const U=b.current.material;L.temporal?(U.opacity=Math.min(o,U.opacity+o/L.blend),U.alphaTest=Math.min(a,U.alphaTest+a/L.blend)):(U.opacity=o,U.alphaTest=a),M.current.visible=!0,T.prepare();for(let F=0;F<D;F++)L.lights.forEach(k=>k.update()),T.update(w,L.blend);M.current.visible=!1,T.finish()}}),[T,w,S,e,t,r,o,a]);return I.useLayoutEffect(()=>{L.reset(),!L.temporal&&L.frames!==1/0&&L.update(L.blend)}),I.useImperativeHandle(v,()=>L,[L]),Rp(()=>{(L.temporal||L.frames===1/0)&&L.count<L.frames&&L.count<i&&(_(),L.update(),L.count++)}),I.createElement("group",g,I.createElement("group",{traverse:()=>null,ref:M},I.createElement(SF.Provider,{value:L},n)),I.createElement("mesh",{receiveShadow:!0,ref:b,scale:s,rotation:[-Math.PI/2,0,0]},I.createElement("planeGeometry",null),I.createElement("softShadowMaterial",{transparent:!0,depthWrite:!1,toneMapped:f,color:l,blend:u,map:T.progressiveLightMap2.texture})))}),XI=I.forwardRef(({castShadow:n=!0,bias:e=.001,mapSize:t=512,size:i=5,near:r=.5,far:s=500,frames:o=1,position:a=[0,0,0],radius:l=1,amount:u=8,intensity:h=uF>=155?Math.PI:1,ambient:f=.5,...g},v)=>{const x=I.useRef(null),S=new J(...a).length(),w=I.useContext(SF),_=I.useCallback(()=>{let M;if(x.current)for(let T=0;T<x.current.children.length;T++)if(M=x.current.children[T],Math.random()>f)M.position.set(a[0]+Xd.randFloatSpread(l),a[1]+Xd.randFloatSpread(l),a[2]+Xd.randFloatSpread(l));else{let L=Math.acos(2*Math.random()-1)-Math.PI/2,D=2*Math.PI*Math.random();M.position.set(Math.cos(L)*Math.cos(D)*S,Math.abs(Math.cos(L)*Math.sin(D)*S),Math.sin(L)*S)}},[l,f,S,...a]),b=I.useMemo(()=>({update:_}),[_]);return I.useImperativeHandle(v,()=>b,[b]),I.useLayoutEffect(()=>{var M;const T=x.current;return w&&((M=w.lights)==null||M.set(T.uuid,b)),()=>{var L;return void(w==null||(L=w.lights)==null?void 0:L.delete(T.uuid))}},[w,b]),I.createElement("group",ui({ref:x},g),Array.from({length:u},(M,T)=>I.createElement("directionalLight",{key:T,castShadow:n,"shadow-bias":e,"shadow-mapSize":[t,t],intensity:h/u},I.createElement("orthographicCamera",{attach:"shadow-camera",args:[-i,i,i,-i,r,s]}))))});class Bre{constructor(e,t,i=1024){this.renderer=e,this.res=i,this.scene=t,this.buffer1Active=!1,this.lights=[],this.meshes=[],this.object=null,this.clearColor=new bt,this.clearAlpha=0;const r={type:cr,magFilter:ur,minFilter:ur};this.progressiveLightMap1=new Rs(this.res,this.res,r),this.progressiveLightMap2=new Rs(this.res,this.res,r),this.discardMat=new dre,this.targetMat=new Lb({fog:!1}),this.previousShadowMap={value:this.progressiveLightMap1.texture},this.averagingWindow={value:100},this.targetMat.onBeforeCompile=s=>{s.vertexShader=`varying vec2 vUv;
`+s.vertexShader.slice(0,-1)+"vUv = uv; gl_Position = vec4((uv - 0.5) * 2.0, 1.0, 1.0); }";const o=s.fragmentShader.indexOf("void main() {");s.fragmentShader=`varying vec2 vUv;
`+s.fragmentShader.slice(0,o)+`uniform sampler2D previousShadowMap;
	uniform float averagingWindow;
`+s.fragmentShader.slice(o-1,-1)+`
vec3 texelOld = texture2D(previousShadowMap, vUv).rgb;
        gl_FragColor.rgb = mix(texelOld, gl_FragColor.rgb, 1.0/ averagingWindow);
      }`,s.uniforms.previousShadowMap=this.previousShadowMap,s.uniforms.averagingWindow=this.averagingWindow}}clear(){this.renderer.getClearColor(this.clearColor),this.clearAlpha=this.renderer.getClearAlpha(),this.renderer.setClearColor("black",1),this.renderer.setRenderTarget(this.progressiveLightMap1),this.renderer.clear(),this.renderer.setRenderTarget(this.progressiveLightMap2),this.renderer.clear(),this.renderer.setRenderTarget(null),this.renderer.setClearColor(this.clearColor,this.clearAlpha),this.lights=[],this.meshes=[],this.scene.traverse(e=>{Pre(e)?this.meshes.push({object:e,material:e.material}):Rre(e)&&this.lights.push({object:e,intensity:e.intensity})})}prepare(){this.lights.forEach(e=>e.object.intensity=0),this.meshes.forEach(e=>e.object.material=this.discardMat)}finish(){this.lights.forEach(e=>e.object.intensity=e.intensity),this.meshes.forEach(e=>e.object.material=e.material)}configure(e){this.object=e}update(e,t=100){if(!this.object)return;this.averagingWindow.value=t,this.object.material=this.targetMat;const i=this.buffer1Active?this.progressiveLightMap1:this.progressiveLightMap2,r=this.buffer1Active?this.progressiveLightMap2:this.progressiveLightMap1,s=this.scene.background;this.scene.background=null,this.renderer.setRenderTarget(i),this.previousShadowMap.value=r.texture,this.buffer1Active=!this.buffer1Active,this.renderer.render(this.scene,e),this.renderer.setRenderTarget(null),this.scene.background=s}}const ky=I.forwardRef(({light:n,args:e,map:t,toneMapped:i=!1,color:r="white",form:s="rect",intensity:o=1,scale:a=1,target:l=[0,0,0],children:u,...h},f)=>{const g=I.useRef(null);return I.useImperativeHandle(f,()=>g.current,[]),I.useLayoutEffect(()=>{!u&&!h.material&&(Wl(g.current.material,{color:r}),g.current.material.color.multiplyScalar(o))},[r,o,u,h.material]),I.useLayoutEffect(()=>{h.rotation||g.current.quaternion.identity(),l&&!h.rotation&&(typeof l=="boolean"?g.current.lookAt(0,0,0):g.current.lookAt(Array.isArray(l)?new J(...l):l))},[l,h.rotation]),a=Array.isArray(a)&&a.length===2?[a[0],a[1],1]:a,I.createElement("mesh",ui({ref:g,scale:a},h),s==="circle"?I.createElement("ringGeometry",{args:e||[0,.5,64]}):s==="ring"?I.createElement("ringGeometry",{args:e||[.25,.5,64]}):s==="rect"||s==="plane"?I.createElement("planeGeometry",{args:e||[1,1]}):s==="box"?I.createElement("boxGeometry",{args:e||[1,1,1]}):I.createElement(s,{args:e}),u||I.createElement("meshBasicMaterial",{toneMapped:i,map:t,side:co}),n&&I.createElement("pointLight",ui({castShadow:!0},n)))}),Lre=I.forwardRef(({children:n,compute:e,width:t,height:i,samples:r=8,renderPriority:s=0,eventPriority:o=0,frames:a=1/0,stencilBuffer:l=!1,depthBuffer:u=!0,generateMipmaps:h=!1,...f},g)=>{const{size:v,viewport:x}=Vn(),S=fF((t||v.width)*x.dpr,(i||v.height)*x.dpr,{samples:r,stencilBuffer:l,depthBuffer:u,generateMipmaps:h}),[w]=I.useState(()=>new bp),_=I.useCallback((b,M,T)=>{var L,D;let U=(L=S.texture)==null?void 0:L.__r3f.parent;for(;U&&!(U instanceof Bn);)U=U.__r3f.parent;if(!U)return!1;T.raycaster.camera||T.events.compute(b,T,(D=T.previousRoot)==null?void 0:D.getState());const[F]=T.raycaster.intersectObject(U);if(!F)return!1;const k=F.uv;if(!k)return!1;M.raycaster.setFromCamera(M.pointer.set(k.x*2-1,k.y*2-1),M.camera)},[]);return I.useImperativeHandle(g,()=>S.texture,[S]),I.createElement(I.Fragment,null,hO(I.createElement(Ore,{renderPriority:s,frames:a,fbo:S},n,I.createElement("group",{onPointerOver:()=>null})),w,{events:{compute:e||_,priority:o}}),I.createElement("primitive",ui({object:S.texture},f)))});function Ore({frames:n,renderPriority:e,children:t,fbo:i}){let r=0,s,o,a,l;return Rp(u=>{(n===1/0||r<n)&&(s=u.gl.autoClear,o=u.gl.xr.enabled,a=u.gl.getRenderTarget(),l=u.gl.xr.isPresenting,u.gl.autoClear=!0,u.gl.xr.enabled=!1,u.gl.xr.isPresenting=!1,u.gl.setRenderTarget(i),u.gl.render(u.scene,u.camera),u.gl.setRenderTarget(a),u.gl.autoClear=s,u.gl.xr.enabled=o,u.gl.xr.isPresenting=l,r++)},e),I.createElement(I.Fragment,null,t)}const yp={};function EF(n){return"init"in n}function yA(n){return!!n.write}function YI(n){return"v"in n||"e"in n}function u_(n){if("e"in n)throw n.e;if((yp?"production":void 0)!=="production"&&!("v"in n))throw new Error("[Bug] atom state is not initialized");return n.v}const d_=new WeakMap;function AF(n){var e;return h_(n)&&!!((e=d_.get(n))!=null&&e[0])}function Nre(n){const e=d_.get(n);e?.[0]&&(e[0]=!1,e[1].forEach(t=>t()))}function xA(n,e){let t=d_.get(n);if(!t){t=[!0,new Set],d_.set(n,t);const i=()=>{t[0]=!1};n.then(i,i)}t[1].add(e)}function h_(n){return typeof n?.then=="function"}function bF(n,e,t){if(!t.p.has(n)){t.p.add(n);const i=()=>t.p.delete(n);e.then(i,i)}}function MF(n,e,t){var i;const r=new Set;for(const s of((i=t.get(n))==null?void 0:i.t)||[])t.has(s)&&r.add(s);for(const s of e.p)r.add(s);return r}const Fre=(n,e,...t)=>e.read(...t),kre=(n,e,...t)=>e.write(...t),Ure=(n,e)=>{var t;return(t=e.unstable_onInit)==null?void 0:t.call(e,n)},zre=(n,e,t)=>{var i;return(i=e.onMount)==null?void 0:i.call(e,t)},Hre=(n,e)=>{const t=ss(n),i=t[0],r=t[9];if((yp?"production":void 0)!=="production"&&!e)throw new Error("Atom is undefined or null");let s=i.get(e);return s||(s={d:new Map,p:new Set,n:0},i.set(e,s),r?.(n,e)),s},Vre=n=>{const e=ss(n),t=e[1],i=e[3],r=e[4],s=e[5],o=e[6],a=e[13],l=[],u=h=>{try{h()}catch(f){l.push(f)}};do{o.f&&u(o.f);const h=new Set,f=h.add.bind(h);i.forEach(g=>{var v;return(v=t.get(g))==null?void 0:v.l.forEach(f)}),i.clear(),s.forEach(f),s.clear(),r.forEach(f),r.clear(),h.forEach(u),i.size&&a(n)}while(i.size||s.size||r.size);if(l.length)throw new AggregateError(l)},Gre=n=>{const e=ss(n),t=e[1],i=e[2],r=e[3],s=e[11],o=e[14],a=e[17],l=[],u=new WeakSet,h=new WeakSet,f=Array.from(r);for(;f.length;){const g=f[f.length-1],v=s(n,g);if(h.has(g)){f.pop();continue}if(u.has(g)){if(i.get(g)===v.n)l.push([g,v]);else if((yp?"production":void 0)!=="production"&&i.has(g))throw new Error("[Bug] invalidated atom exists");h.add(g),f.pop();continue}u.add(g);for(const x of MF(g,v,t))u.has(x)||f.push(x)}for(let g=l.length-1;g>=0;--g){const[v,x]=l[g];let S=!1;for(const w of x.d.keys())if(w!==v&&r.has(w)){S=!0;break}S&&(o(n,v),a(n,v)),i.delete(v)}},jre=(n,e)=>{var t,i;const r=ss(n),s=r[1],o=r[2],a=r[3],l=r[6],u=r[7],h=r[11],f=r[12],g=r[13],v=r[14],x=r[16],S=r[17],w=h(n,e);if(YI(w)&&(s.has(e)&&o.get(e)!==w.n||Array.from(w.d).every(([F,k])=>v(n,F).n===k)))return w;w.d.clear();let _=!0;function b(){s.has(e)&&(S(n,e),g(n),f(n))}function M(F){var k;if(F===e){const V=h(n,F);if(!YI(V))if(EF(F))f_(n,F,F.init);else throw new Error("no atom init");return u_(V)}const N=v(n,F);try{return u_(N)}finally{w.d.set(F,N.n),AF(w.v)&&bF(e,w.v,N),(k=s.get(F))==null||k.t.add(e),_||b()}}let T,L;const D={get signal(){return T||(T=new AbortController),T.signal},get setSelf(){return(yp?"production":void 0)!=="production"&&!yA(e)&&console.warn("setSelf function cannot be used with read-only atom"),!L&&yA(e)&&(L=(...F)=>{if((yp?"production":void 0)!=="production"&&_&&console.warn("setSelf function cannot be called in sync"),!_)try{return x(n,e,...F)}finally{g(n),f(n)}}),L}},U=w.n;try{const F=u(n,e,M,D);return f_(n,e,F),h_(F)&&(xA(F,()=>T?.abort()),F.then(b,b)),(t=l.r)==null||t.call(l,e),w}catch(F){return delete w.v,w.e=F,++w.n,w}finally{_=!1,U!==w.n&&o.get(e)===U&&(o.set(e,w.n),a.add(e),(i=l.c)==null||i.call(l,e))}},Wre=(n,e)=>{const t=ss(n),i=t[1],r=t[2],s=t[11],o=[e];for(;o.length;){const a=o.pop(),l=s(n,a);for(const u of MF(a,l,i)){const h=s(n,u);r.set(u,h.n),o.push(u)}}},CF=(n,e,...t)=>{const i=ss(n),r=i[3],s=i[6],o=i[8],a=i[11],l=i[12],u=i[13],h=i[14],f=i[15],g=i[17];let v=!0;const x=w=>u_(h(n,w)),S=(w,..._)=>{var b;const M=a(n,w);try{if(w===e){if(!EF(w))throw new Error("atom not writable");const T=M.n,L=_[0];f_(n,w,L),g(n,w),T!==M.n&&(r.add(w),(b=s.c)==null||b.call(s,w),f(n,w));return}else return CF(n,w,..._)}finally{v||(u(n),l(n))}};try{return o(n,e,x,S,...t)}finally{v=!1}},$re=(n,e)=>{var t;const i=ss(n),r=i[1],s=i[3],o=i[6],a=i[11],l=i[15],u=i[18],h=i[19],f=a(n,e),g=r.get(e);if(g&&!AF(f.v)){for(const[v,x]of f.d)if(!g.d.has(v)){const S=a(n,v);u(n,v).t.add(e),g.d.add(v),x!==S.n&&(s.add(v),(t=o.c)==null||t.call(o,v),l(n,v))}for(const v of g.d||[])if(!f.d.has(v)){g.d.delete(v);const x=h(n,v);x?.t.delete(e)}}},TF=(n,e)=>{var t;const i=ss(n),r=i[1],s=i[4],o=i[6],a=i[10],l=i[11],u=i[12],h=i[13],f=i[14],g=i[16],v=l(n,e);let x=r.get(e);if(!x){f(n,e);for(const S of v.d.keys())TF(n,S).t.add(e);if(x={l:new Set,d:new Set(v.d.keys()),t:new Set},r.set(e,x),(t=o.m)==null||t.call(o,e),yA(e)){const S=()=>{let w=!0;const _=(...b)=>{try{return g(n,e,...b)}finally{w||(h(n),u(n))}};try{const b=a(n,e,_);b&&(x.u=()=>{w=!0;try{b()}finally{w=!1}})}finally{w=!1}};s.add(S)}}return x},Xre=(n,e)=>{var t;const i=ss(n),r=i[1],s=i[5],o=i[6],a=i[11],l=i[19],u=a(n,e);let h=r.get(e);if(h&&!h.l.size&&!Array.from(h.t).some(f=>{var g;return(g=r.get(f))==null?void 0:g.d.has(e)})){h.u&&s.add(h.u),h=void 0,r.delete(e),(t=o.u)==null||t.call(o,e);for(const f of u.d.keys()){const g=l(n,f);g?.t.delete(e)}return}return h},f_=(n,e,t)=>{const i=ss(n)[11],r=i(n,e),s="v"in r,o=r.v;if(h_(t))for(const a of r.d.keys())bF(e,t,i(n,a));r.v=t,delete r.e,(!s||!Object.is(o,r.v))&&(++r.n,h_(o)&&Nre(o))},Yre=(n,e)=>{const t=ss(n)[14];return u_(t(n,e))},Kre=(n,e,...t)=>{const i=ss(n),r=i[12],s=i[13],o=i[16];try{return o(n,e,...t)}finally{s(n),r(n)}},Jre=(n,e,t)=>{const i=ss(n),r=i[12],s=i[18],o=i[19],l=s(n,e).l;return l.add(t),r(n),()=>{l.delete(t),o(n,e),r(n)}},RF=new WeakMap,ss=n=>{const e=RF.get(n);if((yp?"production":void 0)!=="production"&&!e)throw new Error("Store must be created by buildStore to read its building blocks");return e};function qre(...n){const e={get(i){const r=ss(e)[21];return r(e,i)},set(i,...r){const s=ss(e)[22];return s(e,i,...r)},sub(i,r){const s=ss(e)[23];return s(e,i,r)}},t=[new WeakMap,new WeakMap,new WeakMap,new Set,new Set,new Set,{},Fre,kre,Ure,zre,Hre,Vre,Gre,jre,Wre,CF,$re,TF,Xre,f_,Yre,Kre,Jre,void 0].map((i,r)=>n[r]||i);return RF.set(e,Object.freeze(t)),e}const PF={};let Zre=0;function Qre(n,e){const t=`atom${++Zre}`,i={toString(){return(PF?"production":void 0)!=="production"&&this.debugLabel?t+":"+this.debugLabel:t}};return i.init=n,i.read=ese,i.write=tse,i}function ese(n){return n(this)}function tse(n,e,t){return e(this,typeof t=="function"?t(n(this)):t)}function nse(){return qre()}let rg;function ise(){return rg||(rg=nse(),(PF?"production":void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=rg),globalThis.__JOTAI_DEFAULT_STORE__!==rg&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),rg}const rse={},sse=I.createContext(void 0);function IF(n){return I.useContext(sse)||ise()}const _A=n=>typeof n?.then=="function",wA=n=>{n.status||(n.status="pending",n.then(e=>{n.status="fulfilled",n.value=e},e=>{n.status="rejected",n.reason=e}))},ose=oe.use||(n=>{if(n.status==="pending")throw n;if(n.status==="fulfilled")return n.value;throw n.status==="rejected"?n.reason:(wA(n),n)}),QS=new WeakMap,KI=(n,e)=>{let t=QS.get(n);return t||(t=new Promise((i,r)=>{let s=n;const o=u=>h=>{s===u&&i(h)},a=u=>h=>{s===u&&r(h)},l=()=>{try{const u=e();_A(u)?(QS.set(u,t),s=u,u.then(o(u),a(u)),xA(u,l)):i(u)}catch(u){r(u)}};n.then(o(n),a(n)),xA(n,l)}),QS.set(n,t)),t};function ase(n,e){const{delay:t,unstable_promiseStatus:i=!oe.use}={},r=IF(),[[s,o,a],l]=I.useReducer(h=>{const f=r.get(n);return Object.is(h[0],f)&&h[1]===r&&h[2]===n?h:[f,r,n]},void 0,()=>[r.get(n),r,n]);let u=s;if((o!==r||a!==n)&&(l(),u=r.get(n)),I.useEffect(()=>{const h=r.sub(n,()=>{if(i)try{const f=r.get(n);_A(f)&&wA(KI(f,()=>r.get(n)))}catch{}if(typeof t=="number"){setTimeout(l,t);return}l()});return l(),h},[r,n,t,i]),I.useDebugValue(u),_A(u)){const h=KI(u,()=>r.get(n));return i&&wA(h),ose(h)}return u}function lse(n,e){const t=IF();return I.useCallback((...r)=>{if((rse?"production":void 0)!=="production"&&!("write"in n))throw new Error("not writable atom");return t.set(n,...r)},[t,n])}function DF(n,e){return[ase(n),lse(n)]}const BF=Qre(0),cse=()=>{const[n,e]=DF(BF),[t,i]=I.useState(n),[r,s]=I.useState(!1);return I.useEffect(()=>{setTimeout(()=>{s(!0)},1e3)},[]),I.useEffect(()=>{s(!1),setTimeout(()=>{i(n),s(!0)},2600)},[n,e]),P.jsx(P.Fragment,{children:P.jsxs("div",{className:`fixed z-10 top-0 left-0 bottom-0 right-0 flex flex-col justify-between pointer-events-none text-black ${r?"":"opacity-0"} transition-opacity duration-1000`,children:[P.jsxs(lr,{to:"/",className:"flex items-center justify-center mx-auto mt-8",children:[P.jsxs("svg",{width:"30",height:"35",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[P.jsx("circle",{cx:"15",cy:"20",r:"10",stroke:"#0682ff"}),P.jsx("circle",{cx:"15",cy:"20",r:"6",stroke:"#0682ff",strokeWidth:"3"})]}),P.jsx("span",{className:"text-2xl text-[var(--color-primary-700)] font-bold mt-1.5",children:"BestCity"})]}),P.jsxs("div",{className:"bg-gradient-to-t from-white/90 pt-20 pb-10 p-4 flex items-center flex-col text-center",children:[P.jsx("h1",{className:"text-2xl lg:text-5xl font-extrabold",children:Uf[t].name}),P.jsx("p",{className:"text-xs lg:text-sm text-opacity-60 italic",children:Uf[t].description}),P.jsxs("div",{className:"flex items-center gap-12 mt-4",children:[P.jsxs("div",{className:"flex flex-col items-center",children:[P.jsx("div",{className:"flex items-center gap-2",children:P.jsxs("p",{className:"font-semibold text-sm lg:text-2xl",children:[Uf[t].targetProfitability," %"]})}),P.jsx("p",{className:"text-xs opacity-80",children:"Total Return"})]}),P.jsxs("div",{className:"flex flex-col items-center",children:[P.jsx("div",{className:"flex items-center gap-2",children:P.jsxs("p",{className:"font-semibold text-sm lg:text-2xl",children:[Uf[t].roi," %"]})}),P.jsx("p",{className:"text-xs opacity-80",children:"ROI"})]}),P.jsxs("div",{className:"flex flex-col items-center",children:[P.jsx("div",{className:"flex gap-2 items-center",children:P.jsx("p",{className:"font-semibold text-sm lg:text-2xl",children:Uf[t].valuation.toLocaleString()})}),P.jsx("p",{className:"text-xs opacity-80",children:"Valuation"})]})]}),P.jsxs("button",{className:"btn w-full lg:w-1/2 mt-6 flex items-center justify-center text-xl",children:[P.jsx(rx,{className:"mr-2"}),"Invest"]})]})]})})},use=Math.PI/180,dse=({mainColor:n,path:e,...t})=>{const{scene:i}=hh(e);I.useEffect(()=>{i.traverse(s=>{s.isMesh&&(s.castShadow=!0,s.receiveShadow=!0)})},[i]);const r=Math.min(1.2,Math.max(.5,window.innerWidth/1920));return P.jsxs(P.Fragment,{children:[P.jsx("color",{attach:"background",args:["#ffffff"]}),P.jsxs("group",{...t,dispose:null,children:[P.jsx(ire,{makeDefault:!0,position:[3,3,18],near:.5}),P.jsx(rre,{autoRotate:!0,enablePan:!1,maxPolarAngle:use*75,minDistance:6,maxDistance:10,autoRotateSpeed:.5}),P.jsx("primitive",{object:i,scale:r}),P.jsx("ambientLight",{intensity:.1,color:"white"}),P.jsxs(Dre,{frames:100,alphaTest:.9,scale:30,position:[0,-.005,0],color:"pink",opacity:.8,children:[P.jsx(XI,{amount:4,radius:9,intensity:.8,ambient:.25,position:[10,5,15]}),P.jsx(XI,{amount:4,radius:5,intensity:.5,position:[-5,5,15],bias:.001})]}),P.jsxs(wF,{file:"./spree_bank_1k.hdr",blur:.8,background:!0,children:[P.jsx(fre,{scale:15,children:P.jsx("meshBasicMaterial",{color:n,side:rs})}),P.jsx(ky,{position:[5,0,-5],form:"rect",intensity:1,color:"red",scale:[3,5],target:[0,0,0]}),P.jsx(ky,{position:[-5,0,1],form:"circle",intensity:1,color:"green",scale:[2,5],target:[0,0,0]}),P.jsx(ky,{position:[0,5,-2],form:"ring",intensity:.52,color:"orange",scale:[10,5],target:[0,0,0]}),P.jsx(ky,{position:[0,0,5],form:"rect",intensity:1,color:"purple",scale:[10,5],target:[0,0,0]})]})]})]})};hh.preload("/models/house1.glb");hh.preload("/models/house2c.glb");hh.preload("/models/house3c.glb");const Uf=[{path:"models/house1.glb",mainColor:"#c0ffe1",name:"Modern Villa with Pool",description:"A modern urban house with sleek design and efficient use of space, perfect for city living.",targetProfitability:10.3,roi:7.2,valuation:"425 ETH"}],hse=({slideDistance:n})=>{const e=Vn(r=>r.viewport),t=I.useRef(),[i]=DF(BF);return I.useEffect(()=>{const r=setTimeout(()=>{t.current.setLookAt(i*(e.width+n),0,5,i*(e.width+n),0,0)},200);return()=>clearTimeout(r)},[e,i,n]),P.jsx(lre,{ref:t,touches:{one:0,two:0,three:0},mouseButtons:{left:0,middle:0,right:0}})},fse=()=>{const n=Vn(t=>t.viewport),{slideDistance:e}=$ne({slideDistance:{value:1,min:0,max:10}});return P.jsxs(P.Fragment,{children:[P.jsx("ambientLight",{intensity:.2}),P.jsx(wF,{preset:"sunset"}),P.jsx(hse,{slideDistance:e}),Uf.map((t,i)=>P.jsxs("mesh",{position:[i*(n.width+e),0,0],children:[P.jsx("planeGeometry",{args:[n.width,n.height]}),P.jsx("meshBasicMaterial",{toneMapped:!1,children:P.jsx(Lre,{attach:"map",children:P.jsx(dse,{...t})})})]},i))]})};function pse(){const[n,e]=I.useState(!0);return I.useEffect(()=>{setTimeout(()=>{e(!1)},1e3)},[]),P.jsxs("div",{className:"absolute z-50 inset-0 bg-[var(--color-bg)]",children:[n?P.jsx("div",{className:"absolute z-50 inset-0 w-full h-full flex justify-center items-center text-[var(--color-primary-700)] text-xl md:text-3xl text-center font-bold ",children:"Please wait..."}):null,P.jsx(eF,{hidden:!0}),P.jsx(cse,{}),P.jsxs(VY,{shadows:!0,camera:{position:[0,0,5],fov:30},children:[P.jsx("color",{attach:"background",args:["#232323"]}),P.jsx(fse,{})]})]})}function mse(){const n=[{value:"$250M+",label:"Property Transactions",icon:AA},{value:"15,000+",label:"Active Investors",icon:y3},{value:"45+",label:"Countries Served",icon:CC},{value:"100%",label:"Secure Transactions",icon:X1}],e=[{name:"Bitcoin",icon:C8,color:"text-orange-500"},{name:"Ethereum",icon:ob,color:"text-purple-500"},{name:"Chainlink",icon:N8,color:"text-blue-500"}];return P.jsxs("div",{className:"min-h-screen bg-[var(--color-bg)]",children:[P.jsx("section",{className:"relative bg-[var(--color-secondary-900)] text-white py-24",children:P.jsx("div",{className:"container",children:P.jsxs(Hn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"max-w-3xl mx-auto text-center",children:[P.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-6",children:"Revolutionizing Real Estate Investment"}),P.jsx("p",{className:"text-xl text-[var(--color-secondary-200)]",children:"We're bridging the gap between traditional real estate and cryptocurrency, making property investment accessible, secure, and transparent through blockchain technology."})]})})}),P.jsx("section",{className:"py-16 bg-[var(--color-bg)]",children:P.jsx("div",{className:"container",children:P.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:n.map((t,i)=>P.jsxs(Hn.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:i*.1},className:"bg-[var(--color-card)] rounded-lg p-6 text-center shadow-md border border-[var(--color-border)]",children:[P.jsx(t.icon,{className:"w-8 h-8 mx-auto mb-4 text-[var(--color-primary-600)]"}),P.jsx("div",{className:"text-3xl font-bold text-[var(--color-text)] mb-2",children:t.value}),P.jsx("div",{className:"text-[var(--color-secondary-300)]",children:t.label})]},i))})})}),P.jsx("section",{className:"py-16 bg-[var(--color-card)]",children:P.jsxs("div",{className:"container",children:[P.jsxs("div",{className:"max-w-3xl mx-auto text-center mb-16",children:[P.jsx("h2",{className:"text-3xl font-bold mb-6 text-[var(--color-text)]",children:"Our Mission"}),P.jsx("p",{className:"text-lg text-[var(--color-secondary-300)]",children:"To democratize real estate investment by leveraging blockchain technology, making property ownership accessible to investors worldwide through fractional ownership and cryptocurrency transactions."})]}),P.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[P.jsxs(Hn.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"text-center",children:[P.jsx("div",{className:"bg-[var(--color-primary-50)] p-4 rounded-full w-20 h-20 flex items-center justify-center mx-auto mb-4",children:P.jsx(I8,{className:"w-8 h-8 text-[var(--color-primary-600)]"})}),P.jsx("h3",{className:"text-xl font-semibold mb-4 text-[var(--color-text)]",children:"Accessibility"}),P.jsx("p",{className:"text-[var(--color-secondary-300)]",children:"Making real estate investment available to everyone through fractional ownership and cryptocurrency payments."})]}),P.jsxs(Hn.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:.2},className:"text-center",children:[P.jsx("div",{className:"bg-[var(--color-primary-50)] p-4 rounded-full w-20 h-20 flex items-center justify-center mx-auto mb-4",children:P.jsx(X1,{className:"w-8 h-8 text-[var(--color-primary-600)]"})}),P.jsx("h3",{className:"text-xl font-semibold mb-4 text-[var(--color-text)]",children:"Security"}),P.jsx("p",{className:"text-[var(--color-secondary-300)]",children:"Ensuring secure transactions through blockchain technology and smart contracts."})]}),P.jsxs(Hn.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:.4},className:"text-center",children:[P.jsx("div",{className:"bg-[var(--color-primary-50)] p-4 rounded-full w-20 h-20 flex items-center justify-center mx-auto mb-4",children:P.jsx(CC,{className:"w-8 h-8 text-[var(--color-primary-600)]"})}),P.jsx("h3",{className:"text-xl font-semibold mb-4 text-[var(--color-text)]",children:"Global Reach"}),P.jsx("p",{className:"text-[var(--color-secondary-300)]",children:"Connecting property investors and opportunities worldwide through our platform."})]})]})]})}),P.jsx("section",{className:"py-16 bg-[var(--color-card)]",children:P.jsxs("div",{className:"container",children:[P.jsx("h2",{className:"text-3xl font-bold text-center mb-12 text-[var(--color-text)]",children:"Supported Cryptocurrencies"}),P.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 max-w-3xl mx-auto",children:e.map((t,i)=>P.jsxs(Hn.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:i*.1},className:"text-center",children:[P.jsx(t.icon,{className:`w-16 h-16 mx-auto mb-4 ${t.color}`}),P.jsx("h3",{className:"text-xl font-semibold text-[var(--color-text)]",children:t.name})]},i))})]})}),P.jsx("section",{className:"py-16 bg-[var(--color-bg)]",children:P.jsxs("div",{className:"container",children:[P.jsx("h2",{className:"text-3xl font-bold text-center mb-12 text-[var(--color-text)]",children:"Recognition & Achievements"}),P.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 max-w-3xl mx-auto",children:[P.jsxs(Hn.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"bg-[var(--color-card)] p-6 rounded-lg shadow-md text-center border border-[var(--color-border)]",children:[P.jsx(MU,{className:"w-12 h-12 mx-auto mb-4 text-[var(--color-primary-600)]"}),P.jsx("h3",{className:"text-xl font-semibold mb-2 text-[var(--color-text)]",children:"Best Blockchain Innovation"}),P.jsx("p",{className:"text-[var(--color-secondary-300)]",children:"Real Estate Tech Awards 2024"})]}),P.jsxs(Hn.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:.2},className:"bg-[var(--color-card)] p-6 rounded-lg shadow-md text-center border border-[var(--color-border)]",children:[P.jsx(CU,{className:"w-12 h-12 mx-auto mb-4 text-[var(--color-primary-600)]"}),P.jsx("h3",{className:"text-xl font-semibold mb-2 text-[var(--color-text)]",children:"Fastest Growing PropTech"}),P.jsx("p",{className:"text-[var(--color-secondary-300)]",children:"Forbes Innovation 2024"})]}),P.jsxs(Hn.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:.4},className:"bg-[var(--color-card)] p-6 rounded-lg shadow-md text-center border border-[var(--color-border)]",children:[P.jsx(X1,{className:"w-12 h-12 mx-auto mb-4 text-[var(--color-primary-600)]"}),P.jsx("h3",{className:"text-xl font-semibold mb-2 text-[var(--color-text)]",children:"Most Secure Platform"}),P.jsx("p",{className:"text-[var(--color-secondary-300)]",children:"Blockchain Security Excellence 2024"})]})]})]})})]})}function gse(){const[n,e]=I.useState({}),t=[{title:"General Information",questions:[{question:"What is BestCity?",answer:"BestCity is an innovative investment project dedicated to real estate. We allow clients to invest as little as $10 in investment properties, with the aim of building up regular income and/or savings."},{question:"What are the conditions for investing on BestCity?",answer:"Any person of legal age can hold a BestCity NFT! Investing is simple - you merely need to have VeChain wallet and you are ready to buy one or more BestCity NFTs."},{question:"Can I invest with a company or SCI?",answer:"Of course you can! As for an individual you need the same things, i.e. to hold one or more BestCity NFTs."},{question:"How are the properties selected?",answer:"We select and negotiate the acquisition of rental or investment propertiess, and soon abroad. We do our utmost to guarantee a selection of quality rental projects and optimal risk control.  Each operation is rigorously evaluated by our real estate experts, according to strict criteria including:  i. the occupancy rate of the building and its net rental return on the day of acquisition ii. the general condition of the building and the common areas iii. the cost of maintenance and renovation work iv. the energy performance v. the quality of the neighbourhood vi. the geographical location of the building vii. the proximity of essential services (shops, schools, public transport, etc.) viii. key indicators such as demographics, rental pressure and the evolution of property prices in the area."},{question:"Do you become a homeowner by buying NFTs on BestCity?",answer:"When you buy NFTs on BestCity, you are not actually buying part of a property, nor do you become an owner. You hold royalties, which means that you are entitled to receive a royalty on the rents and capital gains generated by the property in which you invest. The amount of these royalties is paid to you every month, depending on the number of NFTs you own. The advantage: an immediate return on investment with income paid every month (linked to the rents collected), without the management, financing or tax constraints associated with traditional rental investment!"},{question:"When buying NFTs, do we benefit from the bank leverage effect?",answer:"Yes, most of the properties we offer on our platform do not have a bank loan but some are co-financed with a bank loan. Borrowing from the bank allows us to leverage the bank and increase the profitability of the investments."},{question:"Can buying NFTs reduce my borrowing capacity?",answer:"Absolutely not. The bank loans used to finance the projects are carried by our company. The purchase of NFTs therefore has no impact on your debt ratio or borrowing capacity."},{question:"How is the property revaluation carried out?",answer:"Because the value of a property can vary over time, each of our properties is revalued every year by an independent, TEGoVA-accredited property expert. These valuations take into account changes in the property market and any work carried out on the property. They allow the value of the NFTs to be revalued upwards or downwards. This ensures that your money is invested in property that is fairly valued."},{question:"I want to buy NFTs, what payment methods are accepted?",answer:"You can use various payment methods such as Metamask, Phantom wallet, OKX wallet, Trust wallet, etc."},{question:"Is it possible to cancel my NFT purchase?",answer:"At the moment it is not possible to get the NFT refunded after the purchase, but with time we will try to implement this function with a liquidity pool. After signing the deed of sale at the notary's office, you can sell your NFTs to other investors on our Marketplace (secondary market)."},{question:'What is the difference between "Profitability" and "Return on investment"?',answer:'The "Return on investment" corresponds to the excess part of the rents which will be paid to you after deduction of the amortization of the expenses, and, if necessary, the BestCityayment of credit. The "Profitability" corresponds to the returned income to which are added the real estate capital gain and the mechanical increase in the price of the NFT due to the amortization of the real estate loan present on the property in question.'}]},{title:"MarketPlace",questions:[{question:"What is the marketplace, or secondary market?",answer:"The BestCity Marketplace is our platform that allows BestCity community members to buy and sell NFTs among themselves.  It is the equivalent of a secondary market where investors can buy and sell NFTs among themselves. We may also cooperate with other marketplaces to allow anyone to choose their preferred marketplace."},{question:"How do I resell my NFTs on the marketplace?",answer:'From your wallet, on the "Connect" page, in the "Marketplace" tab, you will find all the properties for which you own NFTs. You just have to click on the "Sell" button to sell one or more NFTs of your choice. Good to know: you cannot resell NFTs on the marketplace before the notary has signed the deed of sale for the property concerned.'},{question:"Is the resale of my NFTs on the marketplace guaranteed?",answer:"Given the current demand, liquidity is fast. However, it is not guaranteed. As with any transaction, there must be a seller and a buyer. To sell your NFTs, another investor must buy them. To sell quickly, we recommend that you sell your NFTs at the estimated price."},{question:"At what price can I sell my NFTs?",answer:"You can sell your NFTs at any price you wish."},{question:"I sell or buy NFTs during the month. Who receives the rental income for the current month?",answer:"The rental income is paid to the investor who owns the NFTs on the day the royalties are paid."},{question:"What are the advantages of buying NFTs on the marketplace?",answer:"Buying NFTs on the secondary market has two main advantages: i. You get an immediate return. ii. You can invest in the city or building of your choice. In contrast, on the primary market, you can only invest in available properties."},{question:"What are the fees on the marketplace?",answer:"We take a 10% fee on the secondary market. This fee allows us to cover our various costs, and to build up a reserve to facilitate instant liquidity on the marketplace. If we cooperate with other marketplaces, their platform fees must also be taken into account."},{question:"Can I cancel a purchase on the marketplace?",answer:"You cannot cancel an NFT purchase from the marketplace."}]},{title:"Property Management",questions:[{question:"Who does the property management?",answer:"We take care of the rental, technical, administrative and legal management of the properties.  As an investor, you have nothing to manage. Property search, financing, acquisition, maintenance or renovation work, management of tenants, payment of property tax: you can have peace of mind, BestCity takes care of everything."},{question:"How does BestCity finance work on properties?",answer:"At the time of each acquisition, we carry out an estimate of the work to be done. When financing properties on the platform, we set up a provision for future work. This cash reserve, set up at the time of the initial financing, allows us to finance any future works. At the same time, we set aside between 3 and 5% of the rental income each year to finance a security reserve for future works. In this respect, our operation is similar to that of a co-ownership. In the event of unforeseen circumstances, if major works were to be carried out on one of our buildings, we could consider suspending the payment of royalties for the time needed to finance these works. However, BestCity holders will never be asked to reinvest to finance any work on any of our buildings. Of course, we try to limit this type of risk as much as possible by selecting the properties we offer to finance according to strict criteria."},{question:"What will happen to the properties once they are purchased?",answer:"We maintain our properties in such a way as to ensure and maintain their rental value over time. Whenever necessary, we carry out maintenance and renovation work on our properties. Our investment strategy and the contract provide for a liquidity event, 7 to 10 years after the acquisition of the property. This will result in either the resale of the property or our liquidity pool to buy back your NFTs. This decision will be made on a case-by-case basis by BestCity, and in the interest of the investors."},{question:"What happens if a tenant does not pay his rent?",answer:"In the event of a vacancy, or in the event of a tenant defaulting on payment, the amount of royalties we pay to investors may be reduced, thus affecting the expected annual return. This risk is inherent in any rental investment, whether the property is rented directly or through an estate agent. In order to dilute the risk of non-payment, we buy mainly rental properties with several lots or flats. This limits the risk of losing all the rent in the event of a tenant defaulting. Finally, to further limit this risk, we will, as soon as possible, put in place a guarantee for unpaid rent (GLI) on each flat that we rent out. This allows us to transfer the risk of unpaid rent to the insurer."}]},{title:"Accounting",questions:[{question:"What accounting evidence will I receive as an investor?",answer:"We will provide the income assignment contract, which can be downloaded from the property sheet."}]},{title:"Financial",questions:[{question:"What profitability can I achieve?",answer:"Profitability depends on each property as it is a ratio between the price of the property, its rental income, any work effected on it, changes to its value, and whether or not it or part of it is financed by a mortgage. We do our utmost to offer opportunities with an estimated average profitability of 6% per year. This profitability is not guaranteed, it is an estimate. Nevertheless, we do our very best to secure the announced profitability. We select areas where rental demand is higher than supply, and we put in place a guarantee of unpaid rent (GLI) on the properties under our management as soon as this is possible. However, there is no such thing as zero risk and there may be rental vacancies, unpaid rent or periods of work that reduce overall profitability. To dilute this risk, we present buildings with multiple studios or apartments. For example, in a building with 40 lots, in the event of a rental vacancy in one flat, the overall profitability will not be significantly affected. We therefore recommend that you diversify your portfolio of properties."},{question:"What is the difference between gross and net rents?",answer:"Gross rents are the rents paid by tenants every month. Net rents are the gross rents minus charges, provisions and loan repayments. It is the net rents that are paid out each month as royalties to the NFT BestCity holders. The amount may fluctuate depending on the rents collected and the current charges."},{question:"How does BestCity pay itself?",answer:"BestCity takes no entry fees, no exit fees and no fees on capital gains. The fees applied are as follows: i. 10% of the purchase amount (in primary sales).  So you take an entry fee ii. 10% secondary market fee. So the person buying takes an entry fee iii. 1% rental management fee."}]},{title:"Legal",questions:[{question:"What is Royalty financing",answer:"When you invest in an asset through an NFT BestCity, you are bound by a royalty agreement. The royalty agreement is evidence that we are committed to paying you a percentage of our turnover at a constant frequency over the term of the agreement. The royalty regime is a contractual regime in addition to the regulated statutes (CIP, IFP), and based on common consumer and contract law. The financing operation is subject to neither a prospectus approved by the financial market authority nor to control by any other body responsible for the protection of savings. The royalty right does not constitute a financial instrument within the meaning of Article L.211-1 of the Monetary and Financial Code. The rules on direct marketing of banking and financial products do not apply."},{question:"What happens if the financing objective is not reached on a property?",answer:"For each property, the sums paid by investors are deposited in an escrow bank account. The funds are only credited to the transaction if the fundraising campaign is successful. In the event that the transaction is not fully funded at the time of collection, we may be able to carry out the transaction on a credit in order to use the bank leverage effect or, if this is not possible, the funds will be returned in full to the investors, and you will be reimbursed 100%."},{question:"How will my personal data be used?",answer:'In accordance with the French law "Informatique et Liberts", BestCity is committed to respecting the regulatory and ethical provisions on the protection of personal data. The information you provide when you register is stored on the platform in a secure and encrypted manner. Under no circumstances will BestCity sell your personal information to third parties.'},{question:"Are transactions on the platform secure?",answer:"BestCity uses the most advanced technical means to ensure the confidentiality and security of transactions on the platform. "}]}],i=(r,s)=>{e(o=>({...o,[`${r}-${s}`]:!o[`${r}-${s}`]}))};return P.jsx("div",{className:"min-h-screen bg-[var(--color-bg)] py-16",children:P.jsx("div",{className:"container",children:P.jsxs(Hn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-3xl mx-auto",children:[P.jsx("h1",{className:"text-4xl font-bold text-center mb-4 text-[var(--color-text)]",children:"Frequently Asked Questions"}),P.jsx("p",{className:"text-[var(--color-secondary-300)] text-center mb-12",children:"Find answers to common questions about our platform, cryptocurrency payments, and real estate investment."}),P.jsx("div",{className:"space-y-8",children:t.map((r,s)=>P.jsxs("div",{className:"bg-[var(--color-card)] rounded-lg shadow-md overflow-hidden border border-[var(--color-border)]",children:[P.jsx("h2",{className:"text-xl font-semibold p-6 bg-[var(--color-secondary-50)] text-[var(--color-text)]",children:r.title}),P.jsx("div",{className:"divide-y divide-[var(--color-border)]",children:r.questions.map((o,a)=>{const l=n[`${r.title}-${a}`];return P.jsxs("div",{className:"p-6",children:[P.jsxs("button",{className:"w-full flex justify-between items-center text-left group",onClick:()=>i(r.title,a),"aria-expanded":l,"aria-controls":`faq-answer-${s}-${a}`,children:[P.jsx("span",{className:"font-medium text-[var(--color-text)] group-hover:text-[var(--color-primary-600)] transition-colors",children:o.question}),l?P.jsx(g3,{className:"flex-shrink-0 ml-4 text-[var(--color-secondary-500)]"}):P.jsx(SA,{className:"flex-shrink-0 ml-4 text-[var(--color-secondary-500)]"})]}),P.jsx(dD,{children:l&&P.jsx(Hn.div,{id:`faq-answer-${s}-${a}`,initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"overflow-hidden",children:P.jsx("p",{className:"mt-4 text-[var(--color-secondary-300)] leading-relaxed",children:o.answer})})})]},a)})})]},s))})]})})})}function vse(){const n=[{title:"Introduction",content:'This Privacy Policy explains how BestCity ("we," "us," or "our") collects, uses, and protects your personal information when you use our platform. We are committed to ensuring the privacy and security of your personal and financial information, including cryptocurrency transactions.'},{title:"Information We Collect",content:`We collect information that you provide directly to us, including:    
       Personal identification information (name, email address, phone number)
       Government-issued ID for KYC verification
       Cryptocurrency wallet addresses
       Investment preferences and history
       Communication records with our platform

      We also automatically collect certain information about your device and how you interact with our platform, including:

       IP address and device identifiers
       Browser type and operating system
       Usage data and interaction with our services
       Blockchain transaction data`},{title:"How We Use Your Information",content:`We use the collected information for:

       Processing your property investments and cryptocurrency transactions
       Verifying your identity and preventing fraud
       Providing customer support and responding to inquiries
       Sending important updates about your investments
       Improving our platform and services
       Complying with legal and regulatory requirements

      All data processing is conducted in accordance with applicable laws and regulations.`},{title:"Cryptocurrency Transaction Privacy",content:`While blockchain transactions are publicly visible, we implement additional privacy measures:

       We never share your wallet addresses publicly
       Transaction details are encrypted in our database
       We use separate wallet addresses for each transaction
       Smart contracts are audited for privacy vulnerabilities

      Please note that blockchain transactions are irreversible and publicly recorded on the respective networks.`},{title:"Data Security",content:`We implement robust security measures to protect your information:

 End-to-end encryption for sensitive data
 Regular security audits and penetration testing
 Multi-factor authentication
 Secure cold storage for cryptocurrency assets
 Regular backup and disaster recovery procedures

Despite our best efforts, no method of transmission over the Internet is 100% secure.`},{title:"Information Sharing",content:`We may share your information with:

 Property management partners for investment processing
 Identity verification services for KYC compliance
 Legal authorities when required by law
 Service providers who assist in platform operations

We never sell your personal information to third parties.`},{title:"Your Rights",content:`You have the right to:

 Access your personal information
 Correct inaccurate information
 Request deletion of your data (where legally possible)
 Opt-out of marketing communications
 Export your data in a portable format

Contact our privacy team to exercise these rights.`},{title:"Cookies and Tracking",content:`We use cookies and similar technologies to:

 Maintain your session security
 Remember your preferences
 Analyze platform usage
 Improve user experience

You can control cookie settings through your browser preferences.`},{title:"Changes to Privacy Policy",content:`We may update this Privacy Policy periodically. Significant changes will be notified through:

 Email notifications
 Platform announcements
 Website updates

Continue using our platform after changes constitutes acceptance of the updated policy.`},{title:"Contact Us",content:`For privacy-related inquiries:

Email: privacy@bestcity.com
Address: 123 Privacy Street, Real City, RC 12345

We aim to respond to all inquiries within 48 hours.`}];return P.jsx("div",{className:"min-h-screen bg-[var(--color-bg)] py-16",children:P.jsx("div",{className:"container",children:P.jsxs(Hn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"max-w-4xl mx-auto",children:[P.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-center mb-4 text-[var(--color-text)]",children:"Privacy Policy"}),P.jsx("p",{className:"text-[var(--color-secondary-300)] text-center mb-12 text-sm md:text-base",children:"Last updated: March 15, 2024"}),P.jsx("article",{className:"bg-[var(--color-card)] rounded-lg shadow-md p-8 max-sm:px-3 md:p-10 border border-[var(--color-border)]",children:P.jsx("div",{className:"prose prose-lg max-w-none space-y-10",children:n.map((e,t)=>P.jsxs(Hn.section,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:t*.1,duration:.5},className:"scroll-mt-24",id:`section-${t}`,children:[P.jsx("h2",{className:"text-2xl font-semibold mb-4 text-[var(--color-text)] max-sm:text-center",children:e.title}),P.jsx("div",{className:"text-[var(--color-secondary-300)] whitespace-pre-line leading-relaxed max-sm:text-center",dangerouslySetInnerHTML:{__html:e.content.replace(/\n/g,"<br>")}})]},t))})}),P.jsxs("div",{className:"mt-12 bg-[var(--color-card)] rounded-lg p-6 max-sm:px-3 border border-[var(--color-border)]",children:[P.jsx("h3",{className:"text-lg font-semibold mb-4 text-[var(--color-text)]",children:"Quick Navigation"}),P.jsx("ul",{className:"space-y-2",children:n.map((e,t)=>P.jsx("li",{children:P.jsx("a",{href:`#section-${t}`,className:"text-[var(--color-primary-600)] hover:text-[var(--color-primary-700)] transition-colors",children:e.title})},t))})]})]})})})}function yse({options:n,value:e,onChange:t,placeholder:i="Select..."}){const[r,s]=I.useState(!1),o=I.useRef(null),a=n.find(l=>l.id===e)||null;return I.useEffect(()=>{const l=u=>{o.current&&!o.current.contains(u.target)&&s(!1)};return document.addEventListener("mousedown",l),()=>document.removeEventListener("mousedown",l)},[]),P.jsxs("div",{ref:o,className:"relative",children:[P.jsxs("button",{type:"button",onClick:()=>s(!r),className:"input p-3 w-full flex items-center justify-between text-left transition-colors focus:outline-none focus:ring-2 focus:ring-[var(--color-primary-500)]",children:[P.jsx("span",{className:a?"text-[var(--color-text)]":"text-[var(--color-secondary-400)]",children:a?.name||i}),P.jsx(SA,{className:`ml-2 transition-transform ${r?"rotate-180":""} text-[var(--color-secondary-500)]`})]}),r&&P.jsx("div",{className:"absolute z-10 w-full mt-1 bg-[var(--color-card)] rounded-lg shadow-lg border border-[var(--color-border)] max-h-60 overflow-auto",children:n.map(l=>P.jsx("button",{type:"button",onClick:()=>{t(l.id),s(!1)},className:`w-full text-left px-4 py-2.5 transition-colors ${e===l.id?"bg-[var(--color-primary-100)] text-[var(--color-primary-700)]":"hover:bg-[var(--color-secondary-50)] text-[var(--color-text)]"}`,children:l.name},l.id))})]})}function xse(){const[n,e]=I.useState(""),[t,i]=I.useState("all"),r=[{id:"all",name:"All Posts"},{id:"crypto",name:"Cryptocurrency"},{id:"investment",name:"Investment"},{id:"property",name:"Property"},{id:"technology",name:"Technology"},{id:"market",name:"Market Analysis"}],o=[{id:1,title:"The Future of Real Estate: Cryptocurrency Payments and Blockchain Technology",slug:"future-real-estate-crypto-payments",excerpt:"Explore how cryptocurrency and blockchain are revolutionizing property transactions and investment opportunities.",image:"https://images.unsplash.com/photo-1516245834210-c4c142787335?w=800&q=80",category:"crypto",author:"Sarah Johnson",date:"2024-03-15",readTime:"5 min read"},{id:2,title:"Understanding Tokenized Real Estate Investment",slug:"understanding-tokenized-real-estate",excerpt:"A comprehensive guide to property tokenization and how it's making real estate investment more accessible.",image:"https://images.unsplash.com/photo-1460472178825-e5240623afd5?w=800&q=80",category:"investment",author:"Michael Chen",date:"2024-03-12",readTime:"7 min read"},{id:3,title:"Smart Contracts in Real Estate Transactions",slug:"smart-contracts-real-estate",excerpt:"How smart contracts are streamlining property transactions and reducing costs.",image:"https://images.unsplash.com/photo-1451187580459-43490279c0fa?w=800&q=80",category:"technology",author:"David Rodriguez",date:"2024-03-10",readTime:"6 min read"},{id:4,title:"2024 Real Estate Market Analysis: Crypto Impact",slug:"2024-market-analysis-crypto",excerpt:"Analysis of how cryptocurrency adoption is affecting real estate market dynamics.",image:"https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=800&q=80",category:"market",author:"Emma Wilson",date:"2024-03-08",readTime:"8 min read"},{id:5,title:"Property Investment Strategies with Cryptocurrency",slug:"property-investment-strategies-crypto",excerpt:"Learn effective strategies for investing in real estate using cryptocurrency.",image:"https://images.unsplash.com/photo-1551434678-e076c223a692?w=800&q=80",category:"investment",author:"Sarah Johnson",date:"2024-03-05",readTime:"6 min read"},{id:6,title:"Regulatory Landscape: Crypto in Real Estate",slug:"regulatory-landscape-crypto-real-estate",excerpt:"Understanding the current regulatory environment for cryptocurrency-based property transactions.",image:"https://images.unsplash.com/photo-1507679799987-c73779587ccf?w=800&q=80",category:"crypto",author:"Michael Chen",date:"2024-03-02",readTime:"7 min read"}].filter(a=>{const l=a.title.toLowerCase().includes(n.toLowerCase())||a.excerpt.toLowerCase().includes(n.toLowerCase()),u=t==="all"||a.category===t;return l&&u});return P.jsx("div",{className:"min-h-screen bg-[var(--color-bg)] py-16",children:P.jsxs("div",{className:"container",children:[P.jsxs(Hn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center max-w-3xl mx-auto mb-12",children:[P.jsx("h1",{className:"text-4xl font-bold mb-4 text-[var(--color-text)]",children:"Real Estate & Crypto Insights"}),P.jsx("p",{className:"text-[var(--color-secondary-300)]",children:"Stay updated with the latest trends in real estate investment, cryptocurrency, and blockchain technology."})]}),P.jsx("div",{className:"max-w-4xl mx-auto mb-12",children:P.jsx("div",{className:"bg-[var(--color-card)] rounded-lg shadow-md p-6 max-sm:p-3 border border-[var(--color-border)]",children:P.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[P.jsx("div",{className:"flex-1",children:P.jsxs("div",{className:"relative",children:[P.jsx(zU,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-[var(--color-secondary-400)]"}),P.jsx("input",{type:"text",placeholder:"Search articles...",className:"input p-3 pl-10 w-full outline-none focus:ring-2 focus:ring-[var(--color-primary-500)] transition-all",value:n,onChange:a=>e(a.target.value)})]})}),P.jsx("div",{className:"w-full md:w-48",children:P.jsx(yse,{options:r,value:t,onChange:i,placeholder:"All Posts"})})]})})}),P.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:o.map((a,l)=>P.jsx(Hn.article,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:l*.1},className:"bg-[var(--color-card)] rounded-lg shadow-md overflow-hidden border border-[var(--color-border)] group",children:P.jsxs(lr,{to:`/blog/${a.slug}`,children:[P.jsxs("div",{className:"relative h-48 overflow-hidden",children:[P.jsx("img",{src:a.image,alt:a.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}),P.jsx("div",{className:"absolute top-4 right-4 bg-[var(--color-text)] px-3 py-1 rounded-full text-sm font-medium text-[var(--color-bg)] shadow",children:r.find(u=>u.id===a.category)?.name})]}),P.jsxs("div",{className:"p-6 max-sm:px-3",children:[P.jsx("h2",{className:"text-xl font-semibold mb-3 text-[var(--color-text)] group-hover:text-[var(--color-primary-600)] transition-colors",children:a.title}),P.jsx("p",{className:"text-[var(--color-secondary-300)] mb-4 line-clamp-2",children:a.excerpt}),P.jsxs("div",{className:"flex items-center text-sm text-[var(--color-secondary-500)]",children:[P.jsx(bA,{className:"mr-2"}),P.jsx("span",{className:"mr-4",children:a.author}),P.jsx(EA,{className:"mr-2"}),P.jsx("span",{children:a.readTime})]})]})]})},a.id))}),o.length===0&&P.jsx("div",{className:"text-center py-12",children:P.jsx("p",{className:"text-[var(--color-secondary-500)]",children:"No posts found matching your criteria."})})]})})}function _se(){const n={title:"The Future of Real Estate: Cryptocurrency Payments and Blockchain Technology",content:`
      <p class="mb-4">The real estate industry is undergoing a revolutionary transformation with the integration of cryptocurrency payments and blockchain technology. This shift is not just about adding another payment method  it's about fundamentally changing how property transactions are conducted, recorded, and verified.</p>

      <h2 class="text-2xl font-semibold mt-8 mb-4">The Rise of Crypto in Real Estate</h2>
      <p class="mb-4">Cryptocurrency is increasingly being accepted in real estate transactions, offering several advantages:</p>
      <ul class="list-disc pl-6 mb-4">
        <li class="mb-2">Faster transaction processing</li>
        <li class="mb-2">Lower transaction fees</li>
        <li class="mb-2">Enhanced security through blockchain technology</li>
        <li class="mb-2">Access to global investment opportunities</li>
      </ul>

      <h2 class="text-2xl font-semibold mt-8 mb-4">Blockchain's Impact on Property Transactions</h2>
      <p class="mb-4">Blockchain technology is revolutionizing property transactions in several ways:</p>
      <ol class="list-decimal pl-6 mb-4">
        <li class="mb-2">Smart Contracts: Automating and securing transaction processes</li>
        <li class="mb-2">Property Records: Creating immutable records of ownership</li>
        <li class="mb-2">Tokenization: Enabling fractional property ownership</li>
        <li class="mb-2">Transparency: Providing clear transaction histories</li>
      </ol>

      <h2 class="text-2xl font-semibold mt-8 mb-4">The Future Outlook</h2>
      <p class="mb-4">As we look to the future, several trends are emerging:</p>
      <ul class="list-disc pl-6 mb-4">
        <li class="mb-2">Increased adoption of cryptocurrency payments in real estate</li>
        <li class="mb-2">More platforms offering tokenized property investments</li>
        <li class="mb-2">Integration of smart contracts in property transactions</li>
        <li class="mb-2">Enhanced security measures for digital real estate transactions</li>
      </ul>

      <h2 class="text-2xl font-semibold mt-8 mb-4">Conclusion</h2>
      <p class="mb-4">The integration of cryptocurrency and blockchain in real estate is not just a trend  it's the future of property transactions. As these technologies continue to evolve, we can expect to see more innovative solutions that make real estate investment more accessible, secure, and efficient.</p>
    `,image:"https://images.unsplash.com/photo-1516245834210-c4c142787335?w=1200&q=80",author:"Sarah Johnson",date:"2024-03-15",readTime:"5 min read",tags:["Blockchain","Real Estate","Cryptocurrency","Investment"]};return P.jsxs("div",{className:"min-h-screen bg-[var(--color-bg)]",children:[P.jsxs("div",{className:"relative h-[400px] overflow-hidden",children:[P.jsx("img",{src:n.image,alt:n.title,className:"w-full h-full object-cover"}),P.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/30 to-transparent"}),P.jsx("div",{className:"absolute inset-0 flex items-center",children:P.jsx("div",{className:"container",children:P.jsxs(Hn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"max-w-3xl text-white",children:[P.jsxs(lr,{to:"/blog",className:"inline-flex items-center text-white mb-6 hover:text-[var(--color-primary-300)] transition-colors",children:[P.jsx(bU,{className:"mr-2"}),"Back to Blog"]}),P.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4 text-white",children:n.title}),P.jsxs("div",{className:"flex flex-wrap items-center gap-6 text-[var(--color-secondary-200)] text-sm md:text-base",children:[P.jsxs("div",{className:"flex items-center",children:[P.jsx(bA,{className:"mr-2"}),n.author]}),P.jsxs("div",{className:"flex items-center",children:[P.jsx(m3,{className:"mr-2"}),n.date]}),P.jsxs("div",{className:"flex items-center",children:[P.jsx(EA,{className:"mr-2"}),n.readTime]})]})]})})})]}),P.jsx("div",{className:"container py-12",children:P.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[P.jsx(Hn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"lg:col-span-2",children:P.jsx("article",{className:"bg-[var(--color-card)] rounded-lg shadow-md p-8 max-sm:px-3 border border-[var(--color-border)]",children:P.jsx("div",{className:`max-sm:text-center prose prose-lg max-w-none\r
                  prose-headings:text-[var(--color-text)]\r
                  prose-p:text-[var(--color-secondary-300)]\r
                  prose-li:text-[var(--color-secondary-300)]\r
                  prose-strong:text-[var(--color-text)]\r
                  prose-a:text-[var(--color-primary-600)] hover:prose-a:text-[var(--color-primary-700)]\r
                  prose-blockquote:border-l-[var(--color-primary-600)] prose-blockquote:text-[var(--color-secondary-300)]\r
                  [&_h2]:mt-8 [&_h2]:mb-4 [&_h2]:text-2xl [&_h2]:font-semibold\r
                  [&_ul]:list-disc [&_ul]:pl-6 [&_ul_li]:mb-2\r
                  [&_ol]:list-decimal [&_ol]:pl-6 [&_ol_li]:mb-2`,dangerouslySetInnerHTML:{__html:n.content}})})}),P.jsxs(Hn.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.4},className:"space-y-6",children:[P.jsxs("div",{className:"bg-[var(--color-card)] rounded-lg shadow-md p-6 border border-[var(--color-border)]",children:[P.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center text-[var(--color-text)]",children:[P.jsx(HU,{className:"mr-2 text-[var(--color-primary-600)]"}),"Share this article"]}),P.jsxs("div",{className:"flex space-x-3",children:[P.jsx("button",{"aria-label":"Share on Facebook",className:"p-2.5 rounded-full bg-blue-100 text-blue-600 hover:bg-blue-200 transition-colors",children:P.jsx(ZD,{size:20})}),P.jsx("button",{"aria-label":"Share on Twitter",className:"p-2.5 rounded-full bg-sky-100 text-sky-500 hover:bg-sky-200 transition-colors",children:P.jsx(eB,{size:20})}),P.jsx("button",{"aria-label":"Share on LinkedIn",className:"p-2.5 rounded-full bg-blue-100 text-blue-700 hover:bg-blue-200 transition-colors",children:P.jsx(QD,{size:20})})]})]}),P.jsxs("div",{className:"bg-[var(--color-card)] rounded-lg shadow-md p-6 border border-[var(--color-border)]",children:[P.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center text-[var(--color-text)]",children:[P.jsx(GU,{className:"mr-2 text-[var(--color-primary-600)]"}),"Tags"]}),P.jsx("div",{className:"flex flex-wrap gap-2",children:n.tags.map((e,t)=>P.jsx("span",{className:"px-3 py-1.5 bg-[var(--color-secondary-50)] text-[var(--color-secondary-300)] rounded-full text-sm font-medium border border-[var(--color-border)]",children:e},t))})]})]})]})})]})}const wse=()=>P.jsx("div",{className:"min-h-screen bg-[var(--color-bg)] flex items-center justify-center",children:P.jsxs("div",{className:"text-center",children:[P.jsx("h1",{className:"text-3xl md:text-5xl font-bold mb-6",children:"Page not found"}),P.jsx("p",{className:"text-xl",children:"Error 404: The page your're looking for does not exist!"})]})});function Sse(){return P.jsx(hU,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:P.jsxs("div",{className:"min-h-screen flex flex-col",children:[P.jsx(M8,{}),P.jsx("main",{className:"flex-grow",children:P.jsxs(rU,{children:[P.jsx(fa,{path:"/",element:P.jsx(k8,{})}),P.jsx(fa,{path:"/properties",element:P.jsx(U8,{})}),P.jsx(fa,{path:"/properties/:id",element:P.jsx(UH,{})}),P.jsx(fa,{path:"/property-3d",element:P.jsx(pse,{})}),P.jsx(fa,{path:"/about",element:P.jsx(mse,{})}),P.jsx(fa,{path:"/privacy",element:P.jsx(vse,{})}),P.jsx(fa,{path:"/faq",element:P.jsx(gse,{})}),P.jsx(fa,{path:"/blog",element:P.jsx(xse,{})}),P.jsx(fa,{path:"/blog/:slug",element:P.jsx(_se,{})}),P.jsx(fa,{path:"*",element:P.jsx(wse,{})})]})}),P.jsx(O8,{})]})})}hk.createRoot(document.getElementById("root")).render(P.jsx(oe.StrictMode,{children:P.jsx(Sse,{})}));
